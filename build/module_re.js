(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{449:function(e,t,n){"use strict";n.r(t);var r=n(426),o=n(0),i=n.n(o);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var f=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=l(t).call(this,e))||"object"!==a(o)&&"function"!=typeof o?c(r):o).onChange=n.onChange.bind(c(n)),n}var n,o,f;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(t,e),n=t,(o=[{key:"onChange",value:function(e,t){t.machineController.getMachine().setExpression(e.target.value)}},{key:"render",value:function(){var e=this;return i.a.createElement(r.a.CONTEXT.StateConsumer,null,(function(t){return i.a.createElement("input",{type:"text",value:t.machineController.getMachine().getExpression(),onChange:function(n){return e.onChange(n,t)}})}))}}])&&u(n.prototype,o),f&&u(n,f),t}(i.a.Component),y=n(438),h=n(9);function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v="ε",d="◦",b="∪",m="*",g="Σ",w="∅",S="⁺",_=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._expression=t,this._terminals=new Set,this._errors=[]}var t,n,r;return t=e,(n=[{key:"copy",value:function(e){if(e!==this){this.clear(),this._expression=e._expression;var t=!0,n=!1,r=void 0;try{for(var o,i=e._terminals[Symbol.iterator]();!(t=(o=i.next()).done);t=!0){var a=o.value;this._terminals.add(a)}}catch(e){n=!0,r=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw r}}var u=!0,l=!1,c=void 0;try{for(var s,f=e._errors[Symbol.iterator]();!(u=(s=f.next()).done);u=!0){var y=s.value;this._errors.push(y)}}catch(e){l=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}}}},{key:"clear",value:function(){this._expression="",this._terminals.clear(),this._errors.length=0}},{key:"validate",value:function(){this._errors.length=0;try{if(this.isExpressionValid())return!0}catch(e){this._errors.push(e)}return!1}},{key:"isValid",value:function(){return 0==this._errors.length}},{key:"getErrors",value:function(){return this._errors}},{key:"addTerminal",value:function(e){this._terminals.add(e)}},{key:"hasTerminal",value:function(e){return this._terminals.has(e)}},{key:"getTerminals",value:function(){return this._terminals}},{key:"clearTerminals",value:function(){this._terminals.clear()}},{key:"areParenthesisBalanced",value:function(){for(var e=0,t=this.getExpression(),n=0;n<t.length;n++)if("("==t.charAt(n)?e++:")"==t.charAt(n)&&e--,e<0)return!1;return 0==e}},{key:"isExpressionValid",value:function(){var e=this.getExpression();if(!e||0==e.length)return!0;if(!this.areParenthesisBalanced())throw new Error("The parentheses are unbalanced!");switch(e.charAt(0)){case")":case b:case m:case d:case S:throw new Error("Operators are poorly formatted.")}for(var t=1;t<e.length;t++){var n=e.charAt(t),r=e.charAt(t-1);switch(n){case b:case d:if(t==e.length-1)throw new Error("Operators are poorly formatted.");case")":case m:case S:if("("==r||r==b||r==d)throw new Error("Operators are poorly formatted.");if((n==m||n==S)&&r==w)throw new Error("Empty set can only be part of a union or concatenation")}}return!0}},{key:"insertConcatSymbols",value:function(){for(var e="",t=this.getExpression(),n=0;n<t.length;n++){var r=t.charAt(n);if(e+=r,n+1<t.length){var o=t.charAt(n+1);"("!=r&&r!=b&&r!=d&&")"!=o&&o!=b&&o!=m&&o!=S&&o!=d&&(e+=d)}}this.setExpression(e)}},{key:"setExpression",value:function(e){return this._expression=e,this}},{key:"getExpression",value:function(){return this._expression}},{key:"getHashCode",value:function(){return Object(h.e)(this._expression)}}])&&p(t.prototype,n),r&&p(t,r),e}(),O=n(427);function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var E=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._symbol=t,this._index=n,this._parent=null}var t,n,r;return t=e,(n=[{key:"hasChildren",value:function(){return!1}},{key:"getChildren",value:function(){return[]}},{key:"setIndex",value:function(e){return this._index=e,this}},{key:"setParent",value:function(e){return this._parent=e,this}},{key:"setSymbol",value:function(e){return this._symbol=e,this}},{key:"getSymbol",value:function(){return this._symbol}},{key:"getParent",value:function(){return this._parent}},{key:"getIndex",value:function(){return this._index}}])&&x(t.prototype,n),r&&x(t,r),e}();function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function j(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),j(this,T(t).call(this,e,n,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(t,e),t}(E);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return!t||"object"!==I(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q=function(e){function t(e,n,r){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=A(this,M(t).call(this,e,n,r)))._maxChildren=i,o._children=[],o}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(t,e),n=t,(r=[{key:"addChild",value:function(e){if(!(this._children.length<this._maxChildren))throw new Error("Trying to add more than ".concat(this._maxChildren," children to an ASTNode."));this._children.push(e),e.setParent(this)}},{key:"replaceChild",value:function(e,t){if(!this._children.includes(e))throw new Error("The child to replace isn't a child already.");var n=this._children.indexOf(e);this._children[n]=t}},{key:"hasChildren",value:function(){return this._children.length>0}},{key:"getChildren",value:function(){return this._children}}])&&N(n.prototype,r),o&&N(n,o),t}(E);function F(e){return(F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){return!t||"object"!==F(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var z=function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),U(this,B(t).call(this,e,n,r,2))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(t,e),t}(q);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function L(e,t){return(L=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var X=function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),V(this,J(t).call(this,e,n,r,1))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&L(e,t)}(t,e),t}(q);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var W={Terminal:C,Binary:z,Unary:X,Scope:function(e){function t(e,n,r){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),G(this,K(t).call(this,e,n,r))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(t,e),t}(X),Op:q};function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootNode=null,this.size=0,this.indexToNode=new Map,this.closedParensIndicies=[]}var t,n,r;return t=e,(n=[{key:"parse",value:function(e){var t=e.getExpression();return e.setExpression(t.replace(/\s/g,"")),e.insertConcatSymbols(),this.parseRegex(e),e.setExpression(t),this.rootNode}},{key:"parseRegex",value:function(e){if(this.rootNode=null,this.size=0,e.clearTerminals(),0!=e.getExpression().length){if(e.isExpressionValid()){var t=this.rootNode,n=[],r=e.getExpression(),o=-1,i=!0,a=!1,u=void 0;try{for(var l,c=r[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var s=l.value;switch(this.size=this.size+1,o++,s){case"(":t=this.createOpenParenNode(t,o),n.push(t);break;case")":t=n.pop(),this.closedParensIndicies.push(o);break;case m:t=this.createUnaryOperNode(t,o,m);break;case S:t=this.createUnaryOperNode(t,o,S);break;case d:t=this.createBinaryOperNode(t,o,d);break;case b:t=this.createBinaryOperNode(t,o,b);break;case" ":break;default:t=this.createTerminalNode(t,o,s),s!=g&&s!=w&&s!=v&&e.addTerminal(s)}}}catch(e){a=!0,u=e}finally{try{i||null==c.return||c.return()}finally{if(a)throw u}}}}else e.clear()}},{key:"makeParentOf",value:function(e,t){var n=t.getParent();e.setParent(n),e.addChild(t),null!=n&&n.replaceChild(t,e),t.setParent(e),this.rootNode==t&&(this.rootNode=e)}},{key:"createOpenParenNode",value:function(e,t){if(e){var n=new W.Scope("(",t);this.indexToNode.set(t,n),e.addChild(n),e=n}else e=new W.Scope("(",t),this.indexToNode.set(t,e),this.rootNode=e;return e}},{key:"createUnaryOperNode",value:function(e,t,n){var r=new W.Unary(n,t).setParent(e.getParent());return this.indexToNode.set(t,r),this.makeParentOf(r,e),e=r}},{key:"createBinaryOperNode",value:function(e,t,n){if(e.getParent()){var r=!1,o=e.getParent(),i=o.getSymbol();switch(n){case d:i==d&&(r=!0);break;case b:"("!=i&&(r=!0)}if(r){var a=o.getParent(),u=new W.Binary(n,t).setParent(a);this.indexToNode.set(t,u),this.makeParentOf(u,o),e=u}else{var l=new W.Binary(n,t).setParent(o);this.indexToNode.set(t,l),this.makeParentOf(l,e),e=l}}else{var c=new W.Binary(n,t);this.indexToNode.set(t,c),this.makeParentOf(c,e),e=c}return e}},{key:"createTerminalNode",value:function(e,t,n){if(e){var r=new W.Terminal(n,t);this.indexToNode.set(t,r),e.addChild(r),e=r}else e=new W.Terminal(n,t),this.indexToNode.set(t,e),this.rootNode=e;return e}},{key:"scopeFromSpaceIndexing",value:function(e,t){if(0==t)return[[0,0],[0,0]];if(t>0&&t<=this.size+1){var n=t-1,r=this.scopeFromCharAtIndex(e,n);return r?(r[1][1]+=1,r):[[t,t],[t,t]]}throw new Error("Invalid index")}},{key:"scopeFromCharAtIndex",value:function(e,t){this.parseRegex(e);var n=this.indexToNode.get(t),r=n.getSymbol();if(r==m||r==S){var o=this.smallestIndexOfChildren(n),i=this.largestIndexOfChildren(n);return[[o,o],[i,i]]}return r==b||r==d?[[this.smallestIndexOfChildren(n),t-1],[t+1,this.largestIndexOfChildren(n)]]:null}},{key:"largestIndexOfChildren",value:function(e){var t=e.getIndex(),n=!0,r=!1,o=void 0;try{for(var i,a=e.getChildren()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;t=Math.max(t,this.largestIndexOfChildren(u))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}},{key:"smallestIndexOfChildren",value:function(e){var t=e.getIndex(),n=!0,r=!1,o=void 0;try{for(var i,a=e.getChildren()[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var u=i.value;t=Math.min(t,this.smallestIndexOfChildren(u))}}catch(e){r=!0,o=e}finally{try{n||null==a.return||a.return()}finally{if(r)throw o}}return t}}])&&Z(t.prototype,n),r&&Z(t,r),e}(),ee=new $;function te(e){return function e(t,n){if(t instanceof W.Terminal)switch(t.getSymbol()){case w:return ne();case g:return function(e){var t=e.getTerminals(),n=[];if(0==t.size)return ne();var r=!0,o=!1,i=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var l=a.value;n.push(re(l))}}catch(e){o=!0,i=e}finally{try{r||null==u.return||u.return()}finally{if(o)throw i}}for(;n.length>1;)n[0]=ae(n[0],n[1]),n.splice(1,1);return n[0]}(n);default:return re(t.getSymbol())}switch(t.getSymbol()){case m:return ie(e(t._children[0],n));case S:return oe(r=e(t._children[0],n),ie(r));case d:return oe(e(t._children[0],n),e(t._children[1],n));case b:return ae(e(t._children[0],n),e(t._children[1],n));case"(":return e(t._children[0],n);default:throw new Error("You've got a weird node in the AST tree with symbol "+t.getSymbol())}var r}(ee.parse(e),e)}function ne(){var e=new O.c(!1),t=e.createState("q0");return e.setStartState(t),e}function re(e){e==v&&(e=O.a);var t=new O.c(!1),n=t.createState("q0"),r=t.createState("q1");return t.addTransition(n,r,e),t.setStartState(n),t.setFinalState(r),t}function oe(e,t){var n=new O.c(!1),r=0,o=new Map,i=null,a=!0,u=!1,l=void 0;try{for(var c,s=e.getStates()[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var f=c.value,y=n.createState("q"+r++);o.set(f,y),null===i&&(i=y)}}catch(e){u=!0,l=e}finally{try{a||null==s.return||s.return()}finally{if(u)throw l}}var h=new Map,p=null,v=null,d=!0,b=!1,m=void 0;try{for(var g,w=t.getStates()[Symbol.iterator]();!(d=(g=w.next()).done);d=!0){var S=g.value,_=n.createState("q"+r++);h.set(S,_),null===p&&(p=_),t.isFinalState(S)&&(v=_)}}catch(e){b=!0,m=e}finally{try{d||null==w.return||w.return()}finally{if(b)throw m}}var x=e.getTransitions(),E=!0,k=!1,j=void 0;try{for(var T,P=x[Symbol.iterator]();!(E=(T=P.next()).done);E=!0){var C=T.value,I=o.get(C.getSourceState()),N=o.get(C.getDestinationState());if(null===I||null===N)throw new Error("Unable to find state endpoints for transition");var A=!0,M=!1,R=void 0;try{for(var q,F=C.getSymbols()[Symbol.iterator]();!(A=(q=F.next()).done);A=!0){var U=q.value;n.addTransition(I,N,U)}}catch(e){M=!0,R=e}finally{try{A||null==F.return||F.return()}finally{if(M)throw R}}}}catch(e){k=!0,j=e}finally{try{E||null==P.return||P.return()}finally{if(k)throw j}}var B=!0,D=!1,z=void 0;try{for(var H,V=e.getFinalStates()[Symbol.iterator]();!(B=(H=V.next()).done);B=!0){var J=H.value,L=o.get(J);n.addTransition(L,p,O.a)}}catch(e){D=!0,z=e}finally{try{B||null==V.return||V.return()}finally{if(D)throw z}}var X=t.getTransitions(),Y=!0,G=!1,K=void 0;try{for(var Q,W=X[Symbol.iterator]();!(Y=(Q=W.next()).done);Y=!0){var Z=Q.value,$=h.get(Z.getSourceState()),ee=h.get(Z.getDestinationState());if(null===$||null===ee)throw new Error("Unable to find state endpoints for transition");var te=!0,ne=!1,re=void 0;try{for(var oe,ie=Z.getSymbols()[Symbol.iterator]();!(te=(oe=ie.next()).done);te=!0){var ae=oe.value;n.addTransition($,ee,ae)}}catch(e){ne=!0,re=e}finally{try{te||null==ie.return||ie.return()}finally{if(ne)throw re}}}}catch(e){G=!0,K=e}finally{try{Y||null==W.return||W.return()}finally{if(G)throw K}}return n.setStartState(i),null!=v&&n.setFinalState(v),n}function ie(e){var t=new O.c(!1),n=0,r=new Map,o=t.createState("q"+n++),i=null,a=null,u=!0,l=!1,c=void 0;try{for(var s,f=e.getStates()[Symbol.iterator]();!(u=(s=f.next()).done);u=!0){var y=s.value,h=t.createState("q"+n++);r.set(y,h),null===i&&(i=h),a=h}}catch(e){l=!0,c=e}finally{try{u||null==f.return||f.return()}finally{if(l)throw c}}var p=t.createState("q"+n++);t.addTransition(o,i,O.a);var v=e.getTransitions(),d=!0,b=!1,m=void 0;try{for(var g,w=v[Symbol.iterator]();!(d=(g=w.next()).done);d=!0){var S=g.value,_=r.get(S.getSourceState()),x=r.get(S.getDestinationState());if(null===_||null===x)throw new Error("Unable to find state endpoints for transition");var E=!0,k=!1,j=void 0;try{for(var T,P=S.getSymbols()[Symbol.iterator]();!(E=(T=P.next()).done);E=!0){var C=T.value;t.addTransition(_,x,C)}}catch(e){k=!0,j=e}finally{try{E||null==P.return||P.return()}finally{if(k)throw j}}}}catch(e){b=!0,m=e}finally{try{d||null==w.return||w.return()}finally{if(b)throw m}}return t.addTransition(a,p,O.a),t.addTransition(a,i,O.a),t.addTransition(o,p,O.a),t.setStartState(o),t.setFinalState(p),t}function ae(e,t){var n=new O.c(!1),r=0,o=n.createState("q"+r++),i=new Map,a=null,u=null,l=!0,c=!1,s=void 0;try{for(var f,y=e.getStates()[Symbol.iterator]();!(l=(f=y.next()).done);l=!0){var h=f.value,p=n.createState("q"+r++);i.set(h,p),null===a&&(a=p),e.isFinalState(h)&&(u=p)}}catch(e){c=!0,s=e}finally{try{l||null==y.return||y.return()}finally{if(c)throw s}}var v=new Map,d=null,b=null,m=!0,g=!1,w=void 0;try{for(var S,_=t.getStates()[Symbol.iterator]();!(m=(S=_.next()).done);m=!0){var x=S.value,E=n.createState("q"+r++);v.set(x,E),null===d&&(d=E),t.isFinalState(x)&&(b=E)}}catch(e){g=!0,w=e}finally{try{m||null==_.return||_.return()}finally{if(g)throw w}}var k=n.createState("q"+r++);n.addTransition(o,a,O.a);var j=e.getTransitions(),T=!0,P=!1,C=void 0;try{for(var I,N=j[Symbol.iterator]();!(T=(I=N.next()).done);T=!0){var A=I.value,M=i.get(A.getSourceState()),R=i.get(A.getDestinationState());if(null===M||null===R)throw new Error("Unable to find state endpoints for transition");var q=!0,F=!1,U=void 0;try{for(var B,D=A.getSymbols()[Symbol.iterator]();!(q=(B=D.next()).done);q=!0){var z=B.value;n.addTransition(M,R,z)}}catch(e){F=!0,U=e}finally{try{q||null==D.return||D.return()}finally{if(F)throw U}}}}catch(e){P=!0,C=e}finally{try{T||null==N.return||N.return()}finally{if(P)throw C}}null!=u&&n.addTransition(u,k,O.a),n.addTransition(o,d,O.a);var H=t.getTransitions(),V=!0,J=!1,L=void 0;try{for(var X,Y=H[Symbol.iterator]();!(V=(X=Y.next()).done);V=!0){var G=X.value,K=v.get(G.getSourceState()),Q=v.get(G.getDestinationState());if(null===K||null===Q)throw new Error("Unable to find state endpoints for transition");var W=!0,Z=!1,$=void 0;try{for(var ee,te=G.getSymbols()[Symbol.iterator]();!(W=(ee=te.next()).done);W=!0){var ne=ee.value;n.addTransition(K,Q,ne)}}catch(e){Z=!0,$=e}finally{try{W||null==te.return||te.return()}finally{if(Z)throw $}}}}catch(e){J=!0,L=e}finally{try{V||null==Y.return||Y.return()}finally{if(J)throw L}}return null!=b&&n.addTransition(b,k,O.a),n.setStartState(o),n.setFinalState(k),n}function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function se(e){return(se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ye=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ce(this,se(t).call(this,null))).session=null,e._machine=new _,e._equalFSA=null,e._equalREHash=Object(h.e)(e._machine.getExpression()),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,e),n=t,(r=[{key:"setSession",value:function(e){return this.session=e,this}},{key:"getControlledHashCode",value:function(e){return Object(h.e)(e.getMachine().getExpression())}},{key:"clear",value:function(){this.getMachine().setExpression("")}},{key:"isSymbol",value:function(e){return this._machine.hasTerminal(e)}},{key:"isUsedSymbol",value:function(e){return this.isSymbol(e)}},{key:"renameSymbol",value:function(e,t){var n=this._machine.getExpression().replace(new RegExp(e,"g"),t);this.getMachine().setExpression(n)}},{key:"deleteSymbol",value:function(e){var t=this._machine.getExpression().replace(new RegExp(e,"g"),"");this.getMachine().setExpression(t)}},{key:"getMachineTerminals",value:function(){return Array.from(this._machine.getTerminals())}},{key:"getEquivalentFSA",value:function(){return this._equalFSA&&Object(h.e)(this._machine.getExpression())===this._equalREHash||(this._equalREHash=Object(h.e)(this._machine.getExpression()),this._equalFSA=te(this._machine)),this._equalFSA}},{key:"getMachineErrors",value:function(){return this._machine.getErrors()}},{key:"getMachine",value:function(){return this._machine}}])&&le(n.prototype,r),o&&le(n,o),t}(y.a),he=n(137),pe=n(138);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function be(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var we=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=be(this,me(t).call(this)))._prevExpression="",e._fileTypes=n,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,e),n=t,(r=[{key:"onParseSession",value:function(e,t){return JSON.parse(t)}},{key:"onPreImportSession",value:function(e){var t=e.machineService.machineController;this._prevExpression=t.getMachine().getExpression(),this._prevExpression||e.undoManager.captureEvent()}},{key:"onImportSession",value:function(e,t){var n=e.machineService.machineController,r=t.machineData.expression;r&&n.getMachine().setExpression(r)}},{key:"onPostImportSession",value:function(e){var t=e.machineService.machineController.getMachine().getExpression();this._prevExpression!==t&&e.undoManager.captureEvent()}},{key:"getFileTypes",value:function(){return this._fileTypes}}])&&de(n.prototype,r),o&&de(n,o),t}(n(136).a),Se=n(58),_e=n(141),Oe=n(132);function xe(e,t){if(e)for(var n,r=[e];r.length>0;)if(t(n=r.shift()),n.hasChildren()){var o=!0,i=!1,a=void 0;try{for(var u,l=n.getChildren()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;r.push(c)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}}function Ee(e,t,n){return(Ee=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&Ie(o,n.prototype),o}).apply(null,arguments)}function ke(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=Oe.a.parse("1.0.0"),Ae=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pe(this,Ce(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(t,e),n=t,(r=[{key:"parse",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1],"object"!==je(e))throw new Error("Unable to parse data of non-object type");var t=Oe.a.parse(e._version||"0.0.0");if(!t.canSupportVersion(Ne))throw new Error("Unable to parse data for incompatible version '"+t+"'");for(var n=e.ast||[],r=n.objectMapping,o=n.rootIndex,i=new Map,a=0,u=Object.keys(i);a<u.length;a++){var l=u[a],c=r[l],s=qe(c.type),f=Re(c),y=Ee(s,[c.symbol,l].concat(ke(f)));i.set(l,y)}for(var h=0,p=Object.keys(i);h<p.length;h++){var v=p[h],d=r[v],b=i.get(v);if(Array.isArray(d.children)&&d.children.length>0){var m=!0,g=!1,w=void 0;try{for(var S,_=d.children[Symbol.iterator]();!(m=(S=_.next()).done);m=!0){var O=S.value,x=i.get(O);b.addChild(x)}}catch(e){g=!0,w=e}finally{try{m||null==_.return||_.return()}finally{if(g)throw w}}}}return i.get(o)}},{key:"compose",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};return xe(e,(function(e){return n[e.getIndex()]=Me(e)})),xe(e,(function(e){var t=e.getIndex(),r=n[t];if(e.hasChildren()){var o=!0,i=!1,a=void 0;try{for(var u,l=e.getChildren()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value.getIndex();n[c].parent=t,r.children.push(c)}}catch(e){i=!0,a=e}finally{try{o||null==l.return||l.return()}finally{if(i)throw a}}}})),t._version="1.0.0",t.ast={objectMapping:n,rootIndex:e?e.getIndex():-1},t}}])&&Te(n.prototype,r),o&&Te(n,o),t}(_e.a);function Me(e){return{type:Fe(e),index:e.getIndex(),symbol:e.getSymbol(),parent:-1,children:[]}}function Re(e){switch(e.type){case"op":return Array.isArray(e.children)?[e.children.length]:[];default:return[]}}function qe(e){switch(e){case"terminal":return W.Terminal;case"unary":return W.Unary;case"binary":return W.Binary;case"scope":return W.Scope;case"op":return W.Op;default:throw new Error("Unknown AST node type '".concat(e,"'."))}}function Fe(e){if(e instanceof W.Terminal)return"terminal";if(e instanceof W.Unary)return"unary";if(e instanceof W.Binary)return"binary";if(e instanceof W.Scope)return"scope";if(e instanceof W.Op)return"op";throw new Error("Missing AST node type for class '".concat(e.constructor.name,"'."))}var Ue=new Ae,Be=n(13);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ve(e){return(Ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),He(this,Ve(t).call(this,".re.json"))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(t,e),n=t,(r=[{key:"onExportSession",value:function(e,t){var n=e.machineService.machineController.getMachine(),r=ee.parse(n);t.machineData={expression:n.getExpression(),ast:Ue.compose(r)}}},{key:"getIconClass",value:function(){return Be.c}},{key:"getLabel",value:function(){return"file.export.machine"}},{key:"getTitle",value:function(){return"file.export.machine.hint"}}])&&ze(n.prototype,r),o&&ze(n,o),t}(Se.a),Xe={id:"re",version:"1.0.0",services:[he.a,pe.a,r.a],renders:{playground:[f]},load:function(e){e.importService.addImporter(new we([".json",".re.json"])),e.exportService.setExports({session:new Le}),e.machineService.setMachineControllerClass(ye)}};t.default=Xe}}]);