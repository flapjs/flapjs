(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();function ep(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ci={exports:{}},O={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Er=Symbol.for("react.element"),Cm=Symbol.for("react.portal"),wm=Symbol.for("react.fragment"),Em=Symbol.for("react.strict_mode"),xm=Symbol.for("react.profiler"),Tm=Symbol.for("react.provider"),Nm=Symbol.for("react.context"),Mm=Symbol.for("react.forward_ref"),bm=Symbol.for("react.suspense"),Im=Symbol.for("react.memo"),Lm=Symbol.for("react.lazy"),Lu=Symbol.iterator;function km(n){return n===null||typeof n!="object"?null:(n=Lu&&n[Lu]||n["@@iterator"],typeof n=="function"?n:null)}var tp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},np=Object.assign,sp={};function fs(n,e,t){this.props=n,this.context=e,this.refs=sp,this.updater=t||tp}fs.prototype.isReactComponent={};fs.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};fs.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function rp(){}rp.prototype=fs.prototype;function oc(n,e,t){this.props=n,this.context=e,this.refs=sp,this.updater=t||tp}var ic=oc.prototype=new rp;ic.constructor=oc;np(ic,fs.prototype);ic.isPureReactComponent=!0;var ku=Array.isArray,op=Object.prototype.hasOwnProperty,lc={current:null},ip={key:!0,ref:!0,__self:!0,__source:!0};function lp(n,e,t){var s,r={},o=null,i=null;if(e!=null)for(s in e.ref!==void 0&&(i=e.ref),e.key!==void 0&&(o=""+e.key),e)op.call(e,s)&&!ip.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(n&&n.defaultProps)for(s in l=n.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:Er,type:n,key:o,ref:i,props:r,_owner:lc.current}}function Am(n,e){return{$$typeof:Er,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function ac(n){return typeof n=="object"&&n!==null&&n.$$typeof===Er}function Dm(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Au=/\/+/g;function ul(n,e){return typeof n=="object"&&n!==null&&n.key!=null?Dm(""+n.key):e.toString(36)}function To(n,e,t,s,r){var o=typeof n;(o==="undefined"||o==="boolean")&&(n=null);var i=!1;if(n===null)i=!0;else switch(o){case"string":case"number":i=!0;break;case"object":switch(n.$$typeof){case Er:case Cm:i=!0}}if(i)return i=n,r=r(i),n=s===""?"."+ul(i,0):s,ku(r)?(t="",n!=null&&(t=n.replace(Au,"$&/")+"/"),To(r,e,t,"",function(u){return u})):r!=null&&(ac(r)&&(r=Am(r,t+(!r.key||i&&i.key===r.key?"":(""+r.key).replace(Au,"$&/")+"/")+n)),e.push(r)),1;if(i=0,s=s===""?".":s+":",ku(n))for(var l=0;l<n.length;l++){o=n[l];var c=s+ul(o,l);i+=To(o,e,t,c,r)}else if(c=km(n),typeof c=="function")for(n=c.call(n),l=0;!(o=n.next()).done;)o=o.value,c=s+ul(o,l++),i+=To(o,e,t,c,r);else if(o==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return i}function Br(n,e,t){if(n==null)return n;var s=[],r=0;return To(n,s,"","",function(o){return e.call(t,o,r++)}),s}function Pm(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var me={current:null},No={transition:null},Fm={ReactCurrentDispatcher:me,ReactCurrentBatchConfig:No,ReactCurrentOwner:lc};O.Children={map:Br,forEach:function(n,e,t){Br(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Br(n,function(){e++}),e},toArray:function(n){return Br(n,function(e){return e})||[]},only:function(n){if(!ac(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};O.Component=fs;O.Fragment=wm;O.Profiler=xm;O.PureComponent=oc;O.StrictMode=Em;O.Suspense=bm;O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fm;O.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var s=np({},n.props),r=n.key,o=n.ref,i=n._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,i=lc.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var l=n.type.defaultProps;for(c in e)op.call(e,c)&&!ip.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=t;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:Er,type:n.type,key:r,ref:o,props:s,_owner:i}};O.createContext=function(n){return n={$$typeof:Nm,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Tm,_context:n},n.Consumer=n};O.createElement=lp;O.createFactory=function(n){var e=lp.bind(null,n);return e.type=n,e};O.createRef=function(){return{current:null}};O.forwardRef=function(n){return{$$typeof:Mm,render:n}};O.isValidElement=ac;O.lazy=function(n){return{$$typeof:Lm,_payload:{_status:-1,_result:n},_init:Pm}};O.memo=function(n,e){return{$$typeof:Im,type:n,compare:e===void 0?null:e}};O.startTransition=function(n){var e=No.transition;No.transition={};try{n()}finally{No.transition=e}};O.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};O.useCallback=function(n,e){return me.current.useCallback(n,e)};O.useContext=function(n){return me.current.useContext(n)};O.useDebugValue=function(){};O.useDeferredValue=function(n){return me.current.useDeferredValue(n)};O.useEffect=function(n,e){return me.current.useEffect(n,e)};O.useId=function(){return me.current.useId()};O.useImperativeHandle=function(n,e,t){return me.current.useImperativeHandle(n,e,t)};O.useInsertionEffect=function(n,e){return me.current.useInsertionEffect(n,e)};O.useLayoutEffect=function(n,e){return me.current.useLayoutEffect(n,e)};O.useMemo=function(n,e){return me.current.useMemo(n,e)};O.useReducer=function(n,e,t){return me.current.useReducer(n,e,t)};O.useRef=function(n){return me.current.useRef(n)};O.useState=function(n){return me.current.useState(n)};O.useSyncExternalStore=function(n,e,t){return me.current.useSyncExternalStore(n,e,t)};O.useTransition=function(){return me.current.useTransition()};O.version="18.2.0";(function(n){n.exports=O})(Ci);const S=ep(Ci.exports);var ap={exports:{}},Pe={},cp={exports:{}},up={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(k,P){var F=k.length;k.push(P);e:for(;0<F;){var X=F-1>>>1,te=k[X];if(0<r(te,P))k[X]=P,k[F]=te,F=X;else break e}}function t(k){return k.length===0?null:k[0]}function s(k){if(k.length===0)return null;var P=k[0],F=k.pop();if(F!==P){k[0]=F;e:for(var X=0,te=k.length,Or=te>>>1;X<Or;){var nn=2*(X+1)-1,cl=k[nn],sn=nn+1,Rr=k[sn];if(0>r(cl,F))sn<te&&0>r(Rr,cl)?(k[X]=Rr,k[sn]=F,X=sn):(k[X]=cl,k[nn]=F,X=nn);else if(sn<te&&0>r(Rr,F))k[X]=Rr,k[sn]=F,X=sn;else break e}}return P}function r(k,P){var F=k.sortIndex-P.sortIndex;return F!==0?F:k.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;n.unstable_now=function(){return o.now()}}else{var i=Date,l=i.now();n.unstable_now=function(){return i.now()-l}}var c=[],u=[],h=1,d=null,p=3,v=!1,m=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,f=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(k){for(var P=t(u);P!==null;){if(P.callback===null)s(u);else if(P.startTime<=k)s(u),P.sortIndex=P.expirationTime,e(c,P);else break;P=t(u)}}function E(k){if(y=!1,_(k),!m)if(t(c)!==null)m=!0,ll(x);else{var P=t(u);P!==null&&al(E,P.startTime-k)}}function x(k,P){m=!1,y&&(y=!1,f(I),I=-1),v=!0;var F=p;try{for(_(P),d=t(c);d!==null&&(!(d.expirationTime>P)||k&&!G());){var X=d.callback;if(typeof X=="function"){d.callback=null,p=d.priorityLevel;var te=X(d.expirationTime<=P);P=n.unstable_now(),typeof te=="function"?d.callback=te:d===t(c)&&s(c),_(P)}else s(c);d=t(c)}if(d!==null)var Or=!0;else{var nn=t(u);nn!==null&&al(E,nn.startTime-P),Or=!1}return Or}finally{d=null,p=F,v=!1}}var N=!1,M=null,I=-1,A=5,b=-1;function G(){return!(n.unstable_now()-b<A)}function Qe(){if(M!==null){var k=n.unstable_now();b=k;var P=!0;try{P=M(!0,k)}finally{P?Xe():(N=!1,M=null)}}else N=!1}var Xe;if(typeof g=="function")Xe=function(){g(Qe)};else if(typeof MessageChannel<"u"){var Fr=new MessageChannel,Sm=Fr.port2;Fr.port1.onmessage=Qe,Xe=function(){Sm.postMessage(null)}}else Xe=function(){w(Qe,0)};function ll(k){M=k,N||(N=!0,Xe())}function al(k,P){I=w(function(){k(n.unstable_now())},P)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_continueExecution=function(){m||v||(m=!0,ll(x))},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return p},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(k){switch(p){case 1:case 2:case 3:var P=3;break;default:P=p}var F=p;p=P;try{return k()}finally{p=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(k,P){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var F=p;p=k;try{return P()}finally{p=F}},n.unstable_scheduleCallback=function(k,P,F){var X=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?X+F:X):F=X,k){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=F+te,k={id:h++,callback:P,priorityLevel:k,startTime:F,expirationTime:te,sortIndex:-1},F>X?(k.sortIndex=F,e(u,k),t(c)===null&&k===t(u)&&(y?(f(I),I=-1):y=!0,al(E,F-X))):(k.sortIndex=te,e(c,k),m||v||(m=!0,ll(x))),k},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(k){var P=p;return function(){var F=p;p=P;try{return k.apply(this,arguments)}finally{p=F}}}})(up);(function(n){n.exports=up})(cp);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hp=Ci.exports,Ae=cp.exports;function T(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var dp=new Set,Js={};function Tn(n,e){rs(n,e),rs(n+"Capture",e)}function rs(n,e){for(Js[n]=e,n=0;n<e.length;n++)dp.add(e[n])}var xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ia=Object.prototype.hasOwnProperty,Om=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Du={},Pu={};function Rm(n){return ia.call(Pu,n)?!0:ia.call(Du,n)?!1:Om.test(n)?Pu[n]=!0:(Du[n]=!0,!1)}function Bm(n,e,t,s){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Hm(n,e,t,s){if(e===null||typeof e>"u"||Bm(n,e,t,s))return!0;if(s)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function _e(n,e,t,s,r,o,i){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=o,this.removeEmptyString=i}var le={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){le[n]=new _e(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];le[e]=new _e(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){le[n]=new _e(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){le[n]=new _e(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){le[n]=new _e(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){le[n]=new _e(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){le[n]=new _e(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){le[n]=new _e(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){le[n]=new _e(n,5,!1,n.toLowerCase(),null,!1,!1)});var cc=/[\-:]([a-z])/g;function uc(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(cc,uc);le[e]=new _e(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(cc,uc);le[e]=new _e(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(cc,uc);le[e]=new _e(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){le[n]=new _e(n,1,!1,n.toLowerCase(),null,!1,!1)});le.xlinkHref=new _e("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){le[n]=new _e(n,1,!1,n.toLowerCase(),null,!0,!0)});function hc(n,e,t,s){var r=le.hasOwnProperty(e)?le[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hm(e,t,r,s)&&(t=null),s||r===null?Rm(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,s=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,s?n.setAttributeNS(s,e,t):n.setAttribute(e,t))))}var Lt=hp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Hr=Symbol.for("react.element"),Fn=Symbol.for("react.portal"),On=Symbol.for("react.fragment"),dc=Symbol.for("react.strict_mode"),la=Symbol.for("react.profiler"),pp=Symbol.for("react.provider"),gp=Symbol.for("react.context"),pc=Symbol.for("react.forward_ref"),aa=Symbol.for("react.suspense"),ca=Symbol.for("react.suspense_list"),gc=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),fp=Symbol.for("react.offscreen"),Fu=Symbol.iterator;function Ss(n){return n===null||typeof n!="object"?null:(n=Fu&&n[Fu]||n["@@iterator"],typeof n=="function"?n:null)}var Y=Object.assign,hl;function Ps(n){if(hl===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);hl=e&&e[1]||""}return`
`+hl+n}var dl=!1;function pl(n,e){if(!n||dl)return"";dl=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){s=u}n.call(e.prototype)}else{try{throw Error()}catch(u){s=u}n()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),o=s.stack.split(`
`),i=r.length-1,l=o.length-1;1<=i&&0<=l&&r[i]!==o[l];)l--;for(;1<=i&&0<=l;i--,l--)if(r[i]!==o[l]){if(i!==1||l!==1)do if(i--,l--,0>l||r[i]!==o[l]){var c=`
`+r[i].replace(" at new "," at ");return n.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",n.displayName)),c}while(1<=i&&0<=l);break}}}finally{dl=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Ps(n):""}function zm(n){switch(n.tag){case 5:return Ps(n.type);case 16:return Ps("Lazy");case 13:return Ps("Suspense");case 19:return Ps("SuspenseList");case 0:case 2:case 15:return n=pl(n.type,!1),n;case 11:return n=pl(n.type.render,!1),n;case 1:return n=pl(n.type,!0),n;default:return""}}function ua(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case On:return"Fragment";case Fn:return"Portal";case la:return"Profiler";case dc:return"StrictMode";case aa:return"Suspense";case ca:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case gp:return(n.displayName||"Context")+".Consumer";case pp:return(n._context.displayName||"Context")+".Provider";case pc:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case gc:return e=n.displayName||null,e!==null?e:ua(n.type)||"Memo";case Ft:e=n._payload,n=n._init;try{return ua(n(e))}catch{}}return null}function Um(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ua(e);case 8:return e===dc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Qt(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function mp(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Vm(n){var e=mp(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),s=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,o=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(i){s=""+i,o.call(this,i)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return s},setValue:function(i){s=""+i},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function zr(n){n._valueTracker||(n._valueTracker=Vm(n))}function _p(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),s="";return n&&(s=mp(n)?n.checked?"true":"false":n.value),n=s,n!==t?(e.setValue(n),!0):!1}function $o(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function ha(n,e){var t=e.checked;return Y({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t!=null?t:n._wrapperState.initialChecked})}function Ou(n,e){var t=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;t=Qt(e.value!=null?e.value:t),n._wrapperState={initialChecked:s,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function yp(n,e){e=e.checked,e!=null&&hc(n,"checked",e,!1)}function da(n,e){yp(n,e);var t=Qt(e.value),s=e.type;if(t!=null)s==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(s==="submit"||s==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?pa(n,e.type,t):e.hasOwnProperty("defaultValue")&&pa(n,e.type,Qt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Ru(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function pa(n,e,t){(e!=="number"||$o(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Fs=Array.isArray;function Qn(n,e,t,s){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&s&&(n[t].defaultSelected=!0)}else{for(t=""+Qt(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,s&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function ga(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(T(91));return Y({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Bu(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(T(92));if(Fs(t)){if(1<t.length)throw Error(T(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Qt(t)}}function vp(n,e){var t=Qt(e.value),s=Qt(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),s!=null&&(n.defaultValue=""+s)}function Hu(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function Sp(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function fa(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?Sp(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Ur,Cp=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,s,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,s,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Ur=Ur||document.createElement("div"),Ur.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ur.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function er(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Vs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gm=["Webkit","ms","Moz","O"];Object.keys(Vs).forEach(function(n){Gm.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Vs[e]=Vs[n]})});function wp(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Vs.hasOwnProperty(n)&&Vs[n]?(""+e).trim():e+"px"}function Ep(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var s=t.indexOf("--")===0,r=wp(t,e[t],s);t==="float"&&(t="cssFloat"),s?n.setProperty(t,r):n[t]=r}}var $m=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ma(n,e){if(e){if($m[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(T(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(T(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(T(61))}if(e.style!=null&&typeof e.style!="object")throw Error(T(62))}}function _a(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ya=null;function fc(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var va=null,Xn=null,qn=null;function zu(n){if(n=Nr(n)){if(typeof va!="function")throw Error(T(280));var e=n.stateNode;e&&(e=Ni(e),va(n.stateNode,n.type,e))}}function xp(n){Xn?qn?qn.push(n):qn=[n]:Xn=n}function Tp(){if(Xn){var n=Xn,e=qn;if(qn=Xn=null,zu(n),e)for(n=0;n<e.length;n++)zu(e[n])}}function Np(n,e){return n(e)}function Mp(){}var gl=!1;function bp(n,e,t){if(gl)return n(e,t);gl=!0;try{return Np(n,e,t)}finally{gl=!1,(Xn!==null||qn!==null)&&(Mp(),Tp())}}function tr(n,e){var t=n.stateNode;if(t===null)return null;var s=Ni(t);if(s===null)return null;t=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(n=n.type,s=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!s;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(T(231,e,typeof t));return t}var Sa=!1;if(xt)try{var Cs={};Object.defineProperty(Cs,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",Cs,Cs),window.removeEventListener("test",Cs,Cs)}catch{Sa=!1}function Km(n,e,t,s,r,o,i,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(h){this.onError(h)}}var Gs=!1,Ko=null,jo=!1,Ca=null,jm={onError:function(n){Gs=!0,Ko=n}};function Wm(n,e,t,s,r,o,i,l,c){Gs=!1,Ko=null,Km.apply(jm,arguments)}function Ym(n,e,t,s,r,o,i,l,c){if(Wm.apply(this,arguments),Gs){if(Gs){var u=Ko;Gs=!1,Ko=null}else throw Error(T(198));jo||(jo=!0,Ca=u)}}function Nn(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,(e.flags&4098)!==0&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function Ip(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function Uu(n){if(Nn(n)!==n)throw Error(T(188))}function Qm(n){var e=n.alternate;if(!e){if(e=Nn(n),e===null)throw Error(T(188));return e!==n?null:n}for(var t=n,s=e;;){var r=t.return;if(r===null)break;var o=r.alternate;if(o===null){if(s=r.return,s!==null){t=s;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===t)return Uu(r),n;if(o===s)return Uu(r),e;o=o.sibling}throw Error(T(188))}if(t.return!==s.return)t=r,s=o;else{for(var i=!1,l=r.child;l;){if(l===t){i=!0,t=r,s=o;break}if(l===s){i=!0,s=r,t=o;break}l=l.sibling}if(!i){for(l=o.child;l;){if(l===t){i=!0,t=o,s=r;break}if(l===s){i=!0,s=o,t=r;break}l=l.sibling}if(!i)throw Error(T(189))}}if(t.alternate!==s)throw Error(T(190))}if(t.tag!==3)throw Error(T(188));return t.stateNode.current===t?n:e}function Lp(n){return n=Qm(n),n!==null?kp(n):null}function kp(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=kp(n);if(e!==null)return e;n=n.sibling}return null}var Ap=Ae.unstable_scheduleCallback,Vu=Ae.unstable_cancelCallback,Xm=Ae.unstable_shouldYield,qm=Ae.unstable_requestPaint,q=Ae.unstable_now,Zm=Ae.unstable_getCurrentPriorityLevel,mc=Ae.unstable_ImmediatePriority,Dp=Ae.unstable_UserBlockingPriority,Wo=Ae.unstable_NormalPriority,Jm=Ae.unstable_LowPriority,Pp=Ae.unstable_IdlePriority,wi=null,ht=null;function e_(n){if(ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(wi,n,void 0,(n.current.flags&128)===128)}catch{}}var st=Math.clz32?Math.clz32:s_,t_=Math.log,n_=Math.LN2;function s_(n){return n>>>=0,n===0?32:31-(t_(n)/n_|0)|0}var Vr=64,Gr=4194304;function Os(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Yo(n,e){var t=n.pendingLanes;if(t===0)return 0;var s=0,r=n.suspendedLanes,o=n.pingedLanes,i=t&268435455;if(i!==0){var l=i&~r;l!==0?s=Os(l):(o&=i,o!==0&&(s=Os(o)))}else i=t&~r,i!==0?s=Os(i):o!==0&&(s=Os(o));if(s===0)return 0;if(e!==0&&e!==s&&(e&r)===0&&(r=s&-s,o=e&-e,r>=o||r===16&&(o&4194240)!==0))return e;if((s&4)!==0&&(s|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=s;0<e;)t=31-st(e),r=1<<t,s|=n[t],e&=~r;return s}function r_(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o_(n,e){for(var t=n.suspendedLanes,s=n.pingedLanes,r=n.expirationTimes,o=n.pendingLanes;0<o;){var i=31-st(o),l=1<<i,c=r[i];c===-1?((l&t)===0||(l&s)!==0)&&(r[i]=r_(l,e)):c<=e&&(n.expiredLanes|=l),o&=~l}}function wa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function Fp(){var n=Vr;return Vr<<=1,(Vr&4194240)===0&&(Vr=64),n}function fl(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function xr(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-st(e),n[e]=t}function i_(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var s=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-st(t),o=1<<r;e[r]=0,s[r]=-1,n[r]=-1,t&=~o}}function _c(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var s=31-st(t),r=1<<s;r&e|n[s]&e&&(n[s]|=e),t&=~r}}var H=0;function Op(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Rp,yc,Bp,Hp,zp,Ea=!1,$r=[],Ut=null,Vt=null,Gt=null,nr=new Map,sr=new Map,Rt=[],l_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gu(n,e){switch(n){case"focusin":case"focusout":Ut=null;break;case"dragenter":case"dragleave":Vt=null;break;case"mouseover":case"mouseout":Gt=null;break;case"pointerover":case"pointerout":nr.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(e.pointerId)}}function ws(n,e,t,s,r,o){return n===null||n.nativeEvent!==o?(n={blockedOn:e,domEventName:t,eventSystemFlags:s,nativeEvent:o,targetContainers:[r]},e!==null&&(e=Nr(e),e!==null&&yc(e)),n):(n.eventSystemFlags|=s,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function a_(n,e,t,s,r){switch(e){case"focusin":return Ut=ws(Ut,n,e,t,s,r),!0;case"dragenter":return Vt=ws(Vt,n,e,t,s,r),!0;case"mouseover":return Gt=ws(Gt,n,e,t,s,r),!0;case"pointerover":var o=r.pointerId;return nr.set(o,ws(nr.get(o)||null,n,e,t,s,r)),!0;case"gotpointercapture":return o=r.pointerId,sr.set(o,ws(sr.get(o)||null,n,e,t,s,r)),!0}return!1}function Up(n){var e=hn(n.target);if(e!==null){var t=Nn(e);if(t!==null){if(e=t.tag,e===13){if(e=Ip(t),e!==null){n.blockedOn=e,zp(n.priority,function(){Bp(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Mo(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=xa(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var s=new t.constructor(t.type,t);ya=s,t.target.dispatchEvent(s),ya=null}else return e=Nr(t),e!==null&&yc(e),n.blockedOn=t,!1;e.shift()}return!0}function $u(n,e,t){Mo(n)&&t.delete(e)}function c_(){Ea=!1,Ut!==null&&Mo(Ut)&&(Ut=null),Vt!==null&&Mo(Vt)&&(Vt=null),Gt!==null&&Mo(Gt)&&(Gt=null),nr.forEach($u),sr.forEach($u)}function Es(n,e){n.blockedOn===e&&(n.blockedOn=null,Ea||(Ea=!0,Ae.unstable_scheduleCallback(Ae.unstable_NormalPriority,c_)))}function rr(n){function e(r){return Es(r,n)}if(0<$r.length){Es($r[0],n);for(var t=1;t<$r.length;t++){var s=$r[t];s.blockedOn===n&&(s.blockedOn=null)}}for(Ut!==null&&Es(Ut,n),Vt!==null&&Es(Vt,n),Gt!==null&&Es(Gt,n),nr.forEach(e),sr.forEach(e),t=0;t<Rt.length;t++)s=Rt[t],s.blockedOn===n&&(s.blockedOn=null);for(;0<Rt.length&&(t=Rt[0],t.blockedOn===null);)Up(t),t.blockedOn===null&&Rt.shift()}var Zn=Lt.ReactCurrentBatchConfig,Qo=!0;function u_(n,e,t,s){var r=H,o=Zn.transition;Zn.transition=null;try{H=1,vc(n,e,t,s)}finally{H=r,Zn.transition=o}}function h_(n,e,t,s){var r=H,o=Zn.transition;Zn.transition=null;try{H=4,vc(n,e,t,s)}finally{H=r,Zn.transition=o}}function vc(n,e,t,s){if(Qo){var r=xa(n,e,t,s);if(r===null)Tl(n,e,s,Xo,t),Gu(n,s);else if(a_(r,n,e,t,s))s.stopPropagation();else if(Gu(n,s),e&4&&-1<l_.indexOf(n)){for(;r!==null;){var o=Nr(r);if(o!==null&&Rp(o),o=xa(n,e,t,s),o===null&&Tl(n,e,s,Xo,t),o===r)break;r=o}r!==null&&s.stopPropagation()}else Tl(n,e,s,null,t)}}var Xo=null;function xa(n,e,t,s){if(Xo=null,n=fc(s),n=hn(n),n!==null)if(e=Nn(n),e===null)n=null;else if(t=e.tag,t===13){if(n=Ip(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Xo=n,null}function Vp(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zm()){case mc:return 1;case Dp:return 4;case Wo:case Jm:return 16;case Pp:return 536870912;default:return 16}default:return 16}}var Ht=null,Sc=null,bo=null;function Gp(){if(bo)return bo;var n,e=Sc,t=e.length,s,r="value"in Ht?Ht.value:Ht.textContent,o=r.length;for(n=0;n<t&&e[n]===r[n];n++);var i=t-n;for(s=1;s<=i&&e[t-s]===r[o-s];s++);return bo=r.slice(n,1<s?1-s:void 0)}function Io(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function Kr(){return!0}function Ku(){return!1}function Fe(n){function e(t,s,r,o,i){this._reactName=t,this._targetInst=r,this.type=s,this.nativeEvent=o,this.target=i,this.currentTarget=null;for(var l in n)n.hasOwnProperty(l)&&(t=n[l],this[l]=t?t(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Kr:Ku,this.isPropagationStopped=Ku,this}return Y(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=Kr)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=Kr)},persist:function(){},isPersistent:Kr}),e}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cc=Fe(ms),Tr=Y({},ms,{view:0,detail:0}),d_=Fe(Tr),ml,_l,xs,Ei=Y({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wc,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==xs&&(xs&&n.type==="mousemove"?(ml=n.screenX-xs.screenX,_l=n.screenY-xs.screenY):_l=ml=0,xs=n),ml)},movementY:function(n){return"movementY"in n?n.movementY:_l}}),ju=Fe(Ei),p_=Y({},Ei,{dataTransfer:0}),g_=Fe(p_),f_=Y({},Tr,{relatedTarget:0}),yl=Fe(f_),m_=Y({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),__=Fe(m_),y_=Y({},ms,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),v_=Fe(y_),S_=Y({},ms,{data:0}),Wu=Fe(S_),C_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},E_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function x_(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=E_[n])?!!e[n]:!1}function wc(){return x_}var T_=Y({},Tr,{key:function(n){if(n.key){var e=C_[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Io(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?w_[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wc,charCode:function(n){return n.type==="keypress"?Io(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Io(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),N_=Fe(T_),M_=Y({},Ei,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yu=Fe(M_),b_=Y({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wc}),I_=Fe(b_),L_=Y({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),k_=Fe(L_),A_=Y({},Ei,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),D_=Fe(A_),P_=[9,13,27,32],Ec=xt&&"CompositionEvent"in window,$s=null;xt&&"documentMode"in document&&($s=document.documentMode);var F_=xt&&"TextEvent"in window&&!$s,$p=xt&&(!Ec||$s&&8<$s&&11>=$s),Qu=String.fromCharCode(32),Xu=!1;function Kp(n,e){switch(n){case"keyup":return P_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jp(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Rn=!1;function O_(n,e){switch(n){case"compositionend":return jp(e);case"keypress":return e.which!==32?null:(Xu=!0,Qu);case"textInput":return n=e.data,n===Qu&&Xu?null:n;default:return null}}function R_(n,e){if(Rn)return n==="compositionend"||!Ec&&Kp(n,e)?(n=Gp(),bo=Sc=Ht=null,Rn=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return $p&&e.locale!=="ko"?null:e.data;default:return null}}var B_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qu(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!B_[n.type]:e==="textarea"}function Wp(n,e,t,s){xp(s),e=qo(e,"onChange"),0<e.length&&(t=new Cc("onChange","change",null,t,s),n.push({event:t,listeners:e}))}var Ks=null,or=null;function H_(n){rg(n,0)}function xi(n){var e=zn(n);if(_p(e))return n}function z_(n,e){if(n==="change")return e}var Yp=!1;if(xt){var vl;if(xt){var Sl="oninput"in document;if(!Sl){var Zu=document.createElement("div");Zu.setAttribute("oninput","return;"),Sl=typeof Zu.oninput=="function"}vl=Sl}else vl=!1;Yp=vl&&(!document.documentMode||9<document.documentMode)}function Ju(){Ks&&(Ks.detachEvent("onpropertychange",Qp),or=Ks=null)}function Qp(n){if(n.propertyName==="value"&&xi(or)){var e=[];Wp(e,or,n,fc(n)),bp(H_,e)}}function U_(n,e,t){n==="focusin"?(Ju(),Ks=e,or=t,Ks.attachEvent("onpropertychange",Qp)):n==="focusout"&&Ju()}function V_(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return xi(or)}function G_(n,e){if(n==="click")return xi(e)}function $_(n,e){if(n==="input"||n==="change")return xi(e)}function K_(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var it=typeof Object.is=="function"?Object.is:K_;function ir(n,e){if(it(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),s=Object.keys(e);if(t.length!==s.length)return!1;for(s=0;s<t.length;s++){var r=t[s];if(!ia.call(e,r)||!it(n[r],e[r]))return!1}return!0}function eh(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function th(n,e){var t=eh(n);n=0;for(var s;t;){if(t.nodeType===3){if(s=n+t.textContent.length,n<=e&&s>=e)return{node:t,offset:e-n};n=s}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=eh(t)}}function Xp(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?Xp(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function qp(){for(var n=window,e=$o();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=$o(n.document)}return e}function xc(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function j_(n){var e=qp(),t=n.focusedElem,s=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&Xp(t.ownerDocument.documentElement,t)){if(s!==null&&xc(t)){if(e=s.start,n=s.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,o=Math.min(s.start,r);s=s.end===void 0?o:Math.min(s.end,r),!n.extend&&o>s&&(r=s,s=o,o=r),r=th(t,o);var i=th(t,s);r&&i&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==i.node||n.focusOffset!==i.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),o>s?(n.addRange(e),n.extend(i.node,i.offset)):(e.setEnd(i.node,i.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var W_=xt&&"documentMode"in document&&11>=document.documentMode,Bn=null,Ta=null,js=null,Na=!1;function nh(n,e,t){var s=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Na||Bn==null||Bn!==$o(s)||(s=Bn,"selectionStart"in s&&xc(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),js&&ir(js,s)||(js=s,s=qo(Ta,"onSelect"),0<s.length&&(e=new Cc("onSelect","select",null,e,t),n.push({event:e,listeners:s}),e.target=Bn)))}function jr(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Hn={animationend:jr("Animation","AnimationEnd"),animationiteration:jr("Animation","AnimationIteration"),animationstart:jr("Animation","AnimationStart"),transitionend:jr("Transition","TransitionEnd")},Cl={},Zp={};xt&&(Zp=document.createElement("div").style,"AnimationEvent"in window||(delete Hn.animationend.animation,delete Hn.animationiteration.animation,delete Hn.animationstart.animation),"TransitionEvent"in window||delete Hn.transitionend.transition);function Ti(n){if(Cl[n])return Cl[n];if(!Hn[n])return n;var e=Hn[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in Zp)return Cl[n]=e[t];return n}var Jp=Ti("animationend"),eg=Ti("animationiteration"),tg=Ti("animationstart"),ng=Ti("transitionend"),sg=new Map,sh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zt(n,e){sg.set(n,e),Tn(e,[n])}for(var wl=0;wl<sh.length;wl++){var El=sh[wl],Y_=El.toLowerCase(),Q_=El[0].toUpperCase()+El.slice(1);Zt(Y_,"on"+Q_)}Zt(Jp,"onAnimationEnd");Zt(eg,"onAnimationIteration");Zt(tg,"onAnimationStart");Zt("dblclick","onDoubleClick");Zt("focusin","onFocus");Zt("focusout","onBlur");Zt(ng,"onTransitionEnd");rs("onMouseEnter",["mouseout","mouseover"]);rs("onMouseLeave",["mouseout","mouseover"]);rs("onPointerEnter",["pointerout","pointerover"]);rs("onPointerLeave",["pointerout","pointerover"]);Tn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X_=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function rh(n,e,t){var s=n.type||"unknown-event";n.currentTarget=t,Ym(s,e,void 0,n),n.currentTarget=null}function rg(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var s=n[t],r=s.event;s=s.listeners;e:{var o=void 0;if(e)for(var i=s.length-1;0<=i;i--){var l=s[i],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&r.isPropagationStopped())break e;rh(r,l,u),o=c}else for(i=0;i<s.length;i++){if(l=s[i],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&r.isPropagationStopped())break e;rh(r,l,u),o=c}}}if(jo)throw n=Ca,jo=!1,Ca=null,n}function U(n,e){var t=e[ka];t===void 0&&(t=e[ka]=new Set);var s=n+"__bubble";t.has(s)||(og(e,n,2,!1),t.add(s))}function xl(n,e,t){var s=0;e&&(s|=4),og(t,n,s,e)}var Wr="_reactListening"+Math.random().toString(36).slice(2);function lr(n){if(!n[Wr]){n[Wr]=!0,dp.forEach(function(t){t!=="selectionchange"&&(X_.has(t)||xl(t,!1,n),xl(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Wr]||(e[Wr]=!0,xl("selectionchange",!1,e))}}function og(n,e,t,s){switch(Vp(e)){case 1:var r=u_;break;case 4:r=h_;break;default:r=vc}t=r.bind(null,e,t,n),r=void 0,!Sa||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function Tl(n,e,t,s,r){var o=s;if((e&1)===0&&(e&2)===0&&s!==null)e:for(;;){if(s===null)return;var i=s.tag;if(i===3||i===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(i===4)for(i=s.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;i=i.return}for(;l!==null;){if(i=hn(l),i===null)return;if(c=i.tag,c===5||c===6){s=o=i;continue e}l=l.parentNode}}s=s.return}bp(function(){var u=o,h=fc(t),d=[];e:{var p=sg.get(n);if(p!==void 0){var v=Cc,m=n;switch(n){case"keypress":if(Io(t)===0)break e;case"keydown":case"keyup":v=N_;break;case"focusin":m="focus",v=yl;break;case"focusout":m="blur",v=yl;break;case"beforeblur":case"afterblur":v=yl;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=ju;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=g_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=I_;break;case Jp:case eg:case tg:v=__;break;case ng:v=k_;break;case"scroll":v=d_;break;case"wheel":v=D_;break;case"copy":case"cut":case"paste":v=v_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Yu}var y=(e&4)!==0,w=!y&&n==="scroll",f=y?p!==null?p+"Capture":null:p;y=[];for(var g=u,_;g!==null;){_=g;var E=_.stateNode;if(_.tag===5&&E!==null&&(_=E,f!==null&&(E=tr(g,f),E!=null&&y.push(ar(g,E,_)))),w)break;g=g.return}0<y.length&&(p=new v(p,m,null,t,h),d.push({event:p,listeners:y}))}}if((e&7)===0){e:{if(p=n==="mouseover"||n==="pointerover",v=n==="mouseout"||n==="pointerout",p&&t!==ya&&(m=t.relatedTarget||t.fromElement)&&(hn(m)||m[Tt]))break e;if((v||p)&&(p=h.window===h?h:(p=h.ownerDocument)?p.defaultView||p.parentWindow:window,v?(m=t.relatedTarget||t.toElement,v=u,m=m?hn(m):null,m!==null&&(w=Nn(m),m!==w||m.tag!==5&&m.tag!==6)&&(m=null)):(v=null,m=u),v!==m)){if(y=ju,E="onMouseLeave",f="onMouseEnter",g="mouse",(n==="pointerout"||n==="pointerover")&&(y=Yu,E="onPointerLeave",f="onPointerEnter",g="pointer"),w=v==null?p:zn(v),_=m==null?p:zn(m),p=new y(E,g+"leave",v,t,h),p.target=w,p.relatedTarget=_,E=null,hn(h)===u&&(y=new y(f,g+"enter",m,t,h),y.target=_,y.relatedTarget=w,E=y),w=E,v&&m)t:{for(y=v,f=m,g=0,_=y;_;_=bn(_))g++;for(_=0,E=f;E;E=bn(E))_++;for(;0<g-_;)y=bn(y),g--;for(;0<_-g;)f=bn(f),_--;for(;g--;){if(y===f||f!==null&&y===f.alternate)break t;y=bn(y),f=bn(f)}y=null}else y=null;v!==null&&oh(d,p,v,y,!1),m!==null&&w!==null&&oh(d,w,m,y,!0)}}e:{if(p=u?zn(u):window,v=p.nodeName&&p.nodeName.toLowerCase(),v==="select"||v==="input"&&p.type==="file")var x=z_;else if(qu(p))if(Yp)x=$_;else{x=V_;var N=U_}else(v=p.nodeName)&&v.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(x=G_);if(x&&(x=x(n,u))){Wp(d,x,t,h);break e}N&&N(n,p,u),n==="focusout"&&(N=p._wrapperState)&&N.controlled&&p.type==="number"&&pa(p,"number",p.value)}switch(N=u?zn(u):window,n){case"focusin":(qu(N)||N.contentEditable==="true")&&(Bn=N,Ta=u,js=null);break;case"focusout":js=Ta=Bn=null;break;case"mousedown":Na=!0;break;case"contextmenu":case"mouseup":case"dragend":Na=!1,nh(d,t,h);break;case"selectionchange":if(W_)break;case"keydown":case"keyup":nh(d,t,h)}var M;if(Ec)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Rn?Kp(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&($p&&t.locale!=="ko"&&(Rn||I!=="onCompositionStart"?I==="onCompositionEnd"&&Rn&&(M=Gp()):(Ht=h,Sc="value"in Ht?Ht.value:Ht.textContent,Rn=!0)),N=qo(u,I),0<N.length&&(I=new Wu(I,n,null,t,h),d.push({event:I,listeners:N}),M?I.data=M:(M=jp(t),M!==null&&(I.data=M)))),(M=F_?O_(n,t):R_(n,t))&&(u=qo(u,"onBeforeInput"),0<u.length&&(h=new Wu("onBeforeInput","beforeinput",null,t,h),d.push({event:h,listeners:u}),h.data=M))}rg(d,e)})}function ar(n,e,t){return{instance:n,listener:e,currentTarget:t}}function qo(n,e){for(var t=e+"Capture",s=[];n!==null;){var r=n,o=r.stateNode;r.tag===5&&o!==null&&(r=o,o=tr(n,t),o!=null&&s.unshift(ar(n,o,r)),o=tr(n,e),o!=null&&s.push(ar(n,o,r))),n=n.return}return s}function bn(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function oh(n,e,t,s,r){for(var o=e._reactName,i=[];t!==null&&t!==s;){var l=t,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=tr(t,o),c!=null&&i.unshift(ar(t,c,l))):r||(c=tr(t,o),c!=null&&i.push(ar(t,c,l)))),t=t.return}i.length!==0&&n.push({event:e,listeners:i})}var q_=/\r\n?/g,Z_=/\u0000|\uFFFD/g;function ih(n){return(typeof n=="string"?n:""+n).replace(q_,`
`).replace(Z_,"")}function Yr(n,e,t){if(e=ih(e),ih(n)!==e&&t)throw Error(T(425))}function Zo(){}var Ma=null,ba=null;function Ia(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var La=typeof setTimeout=="function"?setTimeout:void 0,J_=typeof clearTimeout=="function"?clearTimeout:void 0,lh=typeof Promise=="function"?Promise:void 0,e0=typeof queueMicrotask=="function"?queueMicrotask:typeof lh<"u"?function(n){return lh.resolve(null).then(n).catch(t0)}:La;function t0(n){setTimeout(function(){throw n})}function Nl(n,e){var t=e,s=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(s===0){n.removeChild(r),rr(e);return}s--}else t!=="$"&&t!=="$?"&&t!=="$!"||s++;t=r}while(t);rr(e)}function $t(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function ah(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var _s=Math.random().toString(36).slice(2),ut="__reactFiber$"+_s,cr="__reactProps$"+_s,Tt="__reactContainer$"+_s,ka="__reactEvents$"+_s,n0="__reactListeners$"+_s,s0="__reactHandles$"+_s;function hn(n){var e=n[ut];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Tt]||t[ut]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=ah(n);n!==null;){if(t=n[ut])return t;n=ah(n)}return e}n=t,t=n.parentNode}return null}function Nr(n){return n=n[ut]||n[Tt],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function zn(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(T(33))}function Ni(n){return n[cr]||null}var Aa=[],Un=-1;function Jt(n){return{current:n}}function V(n){0>Un||(n.current=Aa[Un],Aa[Un]=null,Un--)}function z(n,e){Un++,Aa[Un]=n.current,n.current=e}var Xt={},he=Jt(Xt),Ee=Jt(!1),vn=Xt;function os(n,e){var t=n.type.contextTypes;if(!t)return Xt;var s=n.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},o;for(o in t)r[o]=e[o];return s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function xe(n){return n=n.childContextTypes,n!=null}function Jo(){V(Ee),V(he)}function ch(n,e,t){if(he.current!==Xt)throw Error(T(168));z(he,e),z(Ee,t)}function ig(n,e,t){var s=n.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return t;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(T(108,Um(n)||"Unknown",r));return Y({},t,s)}function ei(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xt,vn=he.current,z(he,n),z(Ee,Ee.current),!0}function uh(n,e,t){var s=n.stateNode;if(!s)throw Error(T(169));t?(n=ig(n,e,vn),s.__reactInternalMemoizedMergedChildContext=n,V(Ee),V(he),z(he,n)):V(Ee),z(Ee,t)}var St=null,Mi=!1,Ml=!1;function lg(n){St===null?St=[n]:St.push(n)}function r0(n){Mi=!0,lg(n)}function en(){if(!Ml&&St!==null){Ml=!0;var n=0,e=H;try{var t=St;for(H=1;n<t.length;n++){var s=t[n];do s=s(!0);while(s!==null)}St=null,Mi=!1}catch(r){throw St!==null&&(St=St.slice(n+1)),Ap(mc,en),r}finally{H=e,Ml=!1}}return null}var Vn=[],Gn=0,ti=null,ni=0,Ue=[],Ve=0,Sn=null,Ct=1,wt="";function rn(n,e){Vn[Gn++]=ni,Vn[Gn++]=ti,ti=n,ni=e}function ag(n,e,t){Ue[Ve++]=Ct,Ue[Ve++]=wt,Ue[Ve++]=Sn,Sn=n;var s=Ct;n=wt;var r=32-st(s)-1;s&=~(1<<r),t+=1;var o=32-st(e)+r;if(30<o){var i=r-r%5;o=(s&(1<<i)-1).toString(32),s>>=i,r-=i,Ct=1<<32-st(e)+r|t<<r|s,wt=o+n}else Ct=1<<o|t<<r|s,wt=n}function Tc(n){n.return!==null&&(rn(n,1),ag(n,1,0))}function Nc(n){for(;n===ti;)ti=Vn[--Gn],Vn[Gn]=null,ni=Vn[--Gn],Vn[Gn]=null;for(;n===Sn;)Sn=Ue[--Ve],Ue[Ve]=null,wt=Ue[--Ve],Ue[Ve]=null,Ct=Ue[--Ve],Ue[Ve]=null}var ke=null,be=null,$=!1,et=null;function cg(n,e){var t=Ge(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function hh(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,ke=n,be=$t(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,ke=n,be=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Sn!==null?{id:Ct,overflow:wt}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Ge(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,ke=n,be=null,!0):!1;default:return!1}}function Da(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Pa(n){if($){var e=be;if(e){var t=e;if(!hh(n,e)){if(Da(n))throw Error(T(418));e=$t(t.nextSibling);var s=ke;e&&hh(n,e)?cg(s,t):(n.flags=n.flags&-4097|2,$=!1,ke=n)}}else{if(Da(n))throw Error(T(418));n.flags=n.flags&-4097|2,$=!1,ke=n}}}function dh(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ke=n}function Qr(n){if(n!==ke)return!1;if(!$)return dh(n),$=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Ia(n.type,n.memoizedProps)),e&&(e=be)){if(Da(n))throw ug(),Error(T(418));for(;e;)cg(n,e),e=$t(e.nextSibling)}if(dh(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(T(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){be=$t(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}be=null}}else be=ke?$t(n.stateNode.nextSibling):null;return!0}function ug(){for(var n=be;n;)n=$t(n.nextSibling)}function is(){be=ke=null,$=!1}function Mc(n){et===null?et=[n]:et.push(n)}var o0=Lt.ReactCurrentBatchConfig;function Ze(n,e){if(n&&n.defaultProps){e=Y({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}var si=Jt(null),ri=null,$n=null,bc=null;function Ic(){bc=$n=ri=null}function Lc(n){var e=si.current;V(si),n._currentValue=e}function Fa(n,e,t){for(;n!==null;){var s=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),n===t)break;n=n.return}}function Jn(n,e){ri=n,bc=$n=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&e)!==0&&(Ce=!0),n.firstContext=null)}function je(n){var e=n._currentValue;if(bc!==n)if(n={context:n,memoizedValue:e,next:null},$n===null){if(ri===null)throw Error(T(308));$n=n,ri.dependencies={lanes:0,firstContext:n}}else $n=$n.next=n;return e}var dn=null;function kc(n){dn===null?dn=[n]:dn.push(n)}function hg(n,e,t,s){var r=e.interleaved;return r===null?(t.next=t,kc(e)):(t.next=r.next,r.next=t),e.interleaved=t,Nt(n,s)}function Nt(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Ot=!1;function Ac(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dg(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Et(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Kt(n,e,t){var s=n.updateQueue;if(s===null)return null;if(s=s.shared,(R&2)!==0){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,Nt(n,t)}return r=s.interleaved,r===null?(e.next=e,kc(s)):(e.next=r.next,r.next=e),s.interleaved=e,Nt(n,t)}function Lo(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,_c(n,t)}}function ph(n,e){var t=n.updateQueue,s=n.alternate;if(s!==null&&(s=s.updateQueue,t===s)){var r=null,o=null;if(t=t.firstBaseUpdate,t!==null){do{var i={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};o===null?r=o=i:o=o.next=i,t=t.next}while(t!==null);o===null?r=o=e:o=o.next=e}else r=o=e;t={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:s.shared,effects:s.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function oi(n,e,t,s){var r=n.updateQueue;Ot=!1;var o=r.firstBaseUpdate,i=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,i===null?o=u:i.next=u,i=c;var h=n.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==i&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(o!==null){var d=r.baseState;i=0,h=u=c=null,l=o;do{var p=l.lane,v=l.eventTime;if((s&p)===p){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=n,y=l;switch(p=e,v=t,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(v,d,p);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,p=typeof m=="function"?m.call(v,d,p):m,p==null)break e;d=Y({},d,p);break e;case 2:Ot=!0}}l.callback!==null&&l.lane!==0&&(n.flags|=64,p=r.effects,p===null?r.effects=[l]:p.push(l))}else v={eventTime:v,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=v,c=d):h=h.next=v,i|=p;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;p=l,l=p.next,p.next=null,r.lastBaseUpdate=p,r.shared.pending=null}}while(1);if(h===null&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do i|=r.lane,r=r.next;while(r!==e)}else o===null&&(r.shared.lanes=0);wn|=i,n.lanes=i,n.memoizedState=d}}function gh(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var s=n[e],r=s.callback;if(r!==null){if(s.callback=null,s=t,typeof r!="function")throw Error(T(191,r));r.call(s)}}}var pg=new hp.Component().refs;function Oa(n,e,t,s){e=n.memoizedState,t=t(s,e),t=t==null?e:Y({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var bi={isMounted:function(n){return(n=n._reactInternals)?Nn(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var s=fe(),r=Wt(n),o=Et(s,r);o.payload=e,t!=null&&(o.callback=t),e=Kt(n,o,r),e!==null&&(rt(e,n,r,s),Lo(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var s=fe(),r=Wt(n),o=Et(s,r);o.tag=1,o.payload=e,t!=null&&(o.callback=t),e=Kt(n,o,r),e!==null&&(rt(e,n,r,s),Lo(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=fe(),s=Wt(n),r=Et(t,s);r.tag=2,e!=null&&(r.callback=e),e=Kt(n,r,s),e!==null&&(rt(e,n,s,t),Lo(e,n,s))}};function fh(n,e,t,s,r,o,i){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(s,o,i):e.prototype&&e.prototype.isPureReactComponent?!ir(t,s)||!ir(r,o):!0}function gg(n,e,t){var s=!1,r=Xt,o=e.contextType;return typeof o=="object"&&o!==null?o=je(o):(r=xe(e)?vn:he.current,s=e.contextTypes,o=(s=s!=null)?os(n,r):Xt),e=new e(t,o),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=bi,n.stateNode=e,e._reactInternals=n,s&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=o),e}function mh(n,e,t,s){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,s),e.state!==n&&bi.enqueueReplaceState(e,e.state,null)}function Ra(n,e,t,s){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs=pg,Ac(n);var o=e.contextType;typeof o=="object"&&o!==null?r.context=je(o):(o=xe(e)?vn:he.current,r.context=os(n,o)),r.state=n.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Oa(n,e,o,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&bi.enqueueReplaceState(r,r.state,null),oi(n,t,r,s),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function Ts(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(T(309));var s=t.stateNode}if(!s)throw Error(T(147,n));var r=s,o=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(i){var l=r.refs;l===pg&&(l=r.refs={}),i===null?delete l[o]:l[o]=i},e._stringRef=o,e)}if(typeof n!="string")throw Error(T(284));if(!t._owner)throw Error(T(290,n))}return n}function Xr(n,e){throw n=Object.prototype.toString.call(e),Error(T(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function _h(n){var e=n._init;return e(n._payload)}function fg(n){function e(f,g){if(n){var _=f.deletions;_===null?(f.deletions=[g],f.flags|=16):_.push(g)}}function t(f,g){if(!n)return null;for(;g!==null;)e(f,g),g=g.sibling;return null}function s(f,g){for(f=new Map;g!==null;)g.key!==null?f.set(g.key,g):f.set(g.index,g),g=g.sibling;return f}function r(f,g){return f=Yt(f,g),f.index=0,f.sibling=null,f}function o(f,g,_){return f.index=_,n?(_=f.alternate,_!==null?(_=_.index,_<g?(f.flags|=2,g):_):(f.flags|=2,g)):(f.flags|=1048576,g)}function i(f){return n&&f.alternate===null&&(f.flags|=2),f}function l(f,g,_,E){return g===null||g.tag!==6?(g=Pl(_,f.mode,E),g.return=f,g):(g=r(g,_),g.return=f,g)}function c(f,g,_,E){var x=_.type;return x===On?h(f,g,_.props.children,E,_.key):g!==null&&(g.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ft&&_h(x)===g.type)?(E=r(g,_.props),E.ref=Ts(f,g,_),E.return=f,E):(E=Oo(_.type,_.key,_.props,null,f.mode,E),E.ref=Ts(f,g,_),E.return=f,E)}function u(f,g,_,E){return g===null||g.tag!==4||g.stateNode.containerInfo!==_.containerInfo||g.stateNode.implementation!==_.implementation?(g=Fl(_,f.mode,E),g.return=f,g):(g=r(g,_.children||[]),g.return=f,g)}function h(f,g,_,E,x){return g===null||g.tag!==7?(g=_n(_,f.mode,E,x),g.return=f,g):(g=r(g,_),g.return=f,g)}function d(f,g,_){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Pl(""+g,f.mode,_),g.return=f,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Hr:return _=Oo(g.type,g.key,g.props,null,f.mode,_),_.ref=Ts(f,null,g),_.return=f,_;case Fn:return g=Fl(g,f.mode,_),g.return=f,g;case Ft:var E=g._init;return d(f,E(g._payload),_)}if(Fs(g)||Ss(g))return g=_n(g,f.mode,_,null),g.return=f,g;Xr(f,g)}return null}function p(f,g,_,E){var x=g!==null?g.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return x!==null?null:l(f,g,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Hr:return _.key===x?c(f,g,_,E):null;case Fn:return _.key===x?u(f,g,_,E):null;case Ft:return x=_._init,p(f,g,x(_._payload),E)}if(Fs(_)||Ss(_))return x!==null?null:h(f,g,_,E,null);Xr(f,_)}return null}function v(f,g,_,E,x){if(typeof E=="string"&&E!==""||typeof E=="number")return f=f.get(_)||null,l(g,f,""+E,x);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Hr:return f=f.get(E.key===null?_:E.key)||null,c(g,f,E,x);case Fn:return f=f.get(E.key===null?_:E.key)||null,u(g,f,E,x);case Ft:var N=E._init;return v(f,g,_,N(E._payload),x)}if(Fs(E)||Ss(E))return f=f.get(_)||null,h(g,f,E,x,null);Xr(g,E)}return null}function m(f,g,_,E){for(var x=null,N=null,M=g,I=g=0,A=null;M!==null&&I<_.length;I++){M.index>I?(A=M,M=null):A=M.sibling;var b=p(f,M,_[I],E);if(b===null){M===null&&(M=A);break}n&&M&&b.alternate===null&&e(f,M),g=o(b,g,I),N===null?x=b:N.sibling=b,N=b,M=A}if(I===_.length)return t(f,M),$&&rn(f,I),x;if(M===null){for(;I<_.length;I++)M=d(f,_[I],E),M!==null&&(g=o(M,g,I),N===null?x=M:N.sibling=M,N=M);return $&&rn(f,I),x}for(M=s(f,M);I<_.length;I++)A=v(M,f,I,_[I],E),A!==null&&(n&&A.alternate!==null&&M.delete(A.key===null?I:A.key),g=o(A,g,I),N===null?x=A:N.sibling=A,N=A);return n&&M.forEach(function(G){return e(f,G)}),$&&rn(f,I),x}function y(f,g,_,E){var x=Ss(_);if(typeof x!="function")throw Error(T(150));if(_=x.call(_),_==null)throw Error(T(151));for(var N=x=null,M=g,I=g=0,A=null,b=_.next();M!==null&&!b.done;I++,b=_.next()){M.index>I?(A=M,M=null):A=M.sibling;var G=p(f,M,b.value,E);if(G===null){M===null&&(M=A);break}n&&M&&G.alternate===null&&e(f,M),g=o(G,g,I),N===null?x=G:N.sibling=G,N=G,M=A}if(b.done)return t(f,M),$&&rn(f,I),x;if(M===null){for(;!b.done;I++,b=_.next())b=d(f,b.value,E),b!==null&&(g=o(b,g,I),N===null?x=b:N.sibling=b,N=b);return $&&rn(f,I),x}for(M=s(f,M);!b.done;I++,b=_.next())b=v(M,f,I,b.value,E),b!==null&&(n&&b.alternate!==null&&M.delete(b.key===null?I:b.key),g=o(b,g,I),N===null?x=b:N.sibling=b,N=b);return n&&M.forEach(function(Qe){return e(f,Qe)}),$&&rn(f,I),x}function w(f,g,_,E){if(typeof _=="object"&&_!==null&&_.type===On&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Hr:e:{for(var x=_.key,N=g;N!==null;){if(N.key===x){if(x=_.type,x===On){if(N.tag===7){t(f,N.sibling),g=r(N,_.props.children),g.return=f,f=g;break e}}else if(N.elementType===x||typeof x=="object"&&x!==null&&x.$$typeof===Ft&&_h(x)===N.type){t(f,N.sibling),g=r(N,_.props),g.ref=Ts(f,N,_),g.return=f,f=g;break e}t(f,N);break}else e(f,N);N=N.sibling}_.type===On?(g=_n(_.props.children,f.mode,E,_.key),g.return=f,f=g):(E=Oo(_.type,_.key,_.props,null,f.mode,E),E.ref=Ts(f,g,_),E.return=f,f=E)}return i(f);case Fn:e:{for(N=_.key;g!==null;){if(g.key===N)if(g.tag===4&&g.stateNode.containerInfo===_.containerInfo&&g.stateNode.implementation===_.implementation){t(f,g.sibling),g=r(g,_.children||[]),g.return=f,f=g;break e}else{t(f,g);break}else e(f,g);g=g.sibling}g=Fl(_,f.mode,E),g.return=f,f=g}return i(f);case Ft:return N=_._init,w(f,g,N(_._payload),E)}if(Fs(_))return m(f,g,_,E);if(Ss(_))return y(f,g,_,E);Xr(f,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,g!==null&&g.tag===6?(t(f,g.sibling),g=r(g,_),g.return=f,f=g):(t(f,g),g=Pl(_,f.mode,E),g.return=f,f=g),i(f)):t(f,g)}return w}var ls=fg(!0),mg=fg(!1),Mr={},dt=Jt(Mr),ur=Jt(Mr),hr=Jt(Mr);function pn(n){if(n===Mr)throw Error(T(174));return n}function Dc(n,e){switch(z(hr,e),z(ur,n),z(dt,Mr),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:fa(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=fa(e,n)}V(dt),z(dt,e)}function as(){V(dt),V(ur),V(hr)}function _g(n){pn(hr.current);var e=pn(dt.current),t=fa(e,n.type);e!==t&&(z(ur,n),z(dt,t))}function Pc(n){ur.current===n&&(V(dt),V(ur))}var j=Jt(0);function ii(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if((e.flags&128)!==0)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var bl=[];function Fc(){for(var n=0;n<bl.length;n++)bl[n]._workInProgressVersionPrimary=null;bl.length=0}var ko=Lt.ReactCurrentDispatcher,Il=Lt.ReactCurrentBatchConfig,Cn=0,W=null,J=null,ne=null,li=!1,Ws=!1,dr=0,i0=0;function ae(){throw Error(T(321))}function Oc(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!it(n[t],e[t]))return!1;return!0}function Rc(n,e,t,s,r,o){if(Cn=o,W=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ko.current=n===null||n.memoizedState===null?u0:h0,n=t(s,r),Ws){o=0;do{if(Ws=!1,dr=0,25<=o)throw Error(T(301));o+=1,ne=J=null,e.updateQueue=null,ko.current=d0,n=t(s,r)}while(Ws)}if(ko.current=ai,e=J!==null&&J.next!==null,Cn=0,ne=J=W=null,li=!1,e)throw Error(T(300));return n}function Bc(){var n=dr!==0;return dr=0,n}function ct(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ne===null?W.memoizedState=ne=n:ne=ne.next=n,ne}function We(){if(J===null){var n=W.alternate;n=n!==null?n.memoizedState:null}else n=J.next;var e=ne===null?W.memoizedState:ne.next;if(e!==null)ne=e,J=n;else{if(n===null)throw Error(T(310));J=n,n={memoizedState:J.memoizedState,baseState:J.baseState,baseQueue:J.baseQueue,queue:J.queue,next:null},ne===null?W.memoizedState=ne=n:ne=ne.next=n}return ne}function pr(n,e){return typeof e=="function"?e(n):e}function Ll(n){var e=We(),t=e.queue;if(t===null)throw Error(T(311));t.lastRenderedReducer=n;var s=J,r=s.baseQueue,o=t.pending;if(o!==null){if(r!==null){var i=r.next;r.next=o.next,o.next=i}s.baseQueue=r=o,t.pending=null}if(r!==null){o=r.next,s=s.baseState;var l=i=null,c=null,u=o;do{var h=u.lane;if((Cn&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:n(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,i=s):c=c.next=d,W.lanes|=h,wn|=h}u=u.next}while(u!==null&&u!==o);c===null?i=s:c.next=l,it(s,e.memoizedState)||(Ce=!0),e.memoizedState=s,e.baseState=i,e.baseQueue=c,t.lastRenderedState=s}if(n=t.interleaved,n!==null){r=n;do o=r.lane,W.lanes|=o,wn|=o,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function kl(n){var e=We(),t=e.queue;if(t===null)throw Error(T(311));t.lastRenderedReducer=n;var s=t.dispatch,r=t.pending,o=e.memoizedState;if(r!==null){t.pending=null;var i=r=r.next;do o=n(o,i.action),i=i.next;while(i!==r);it(o,e.memoizedState)||(Ce=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),t.lastRenderedState=o}return[o,s]}function yg(){}function vg(n,e){var t=W,s=We(),r=e(),o=!it(s.memoizedState,r);if(o&&(s.memoizedState=r,Ce=!0),s=s.queue,Hc(wg.bind(null,t,s,n),[n]),s.getSnapshot!==e||o||ne!==null&&ne.memoizedState.tag&1){if(t.flags|=2048,gr(9,Cg.bind(null,t,s,r,e),void 0,null),se===null)throw Error(T(349));(Cn&30)!==0||Sg(t,e,r)}return r}function Sg(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=W.updateQueue,e===null?(e={lastEffect:null,stores:null},W.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Cg(n,e,t,s){e.value=t,e.getSnapshot=s,Eg(e)&&xg(n)}function wg(n,e,t){return t(function(){Eg(e)&&xg(n)})}function Eg(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!it(n,t)}catch{return!0}}function xg(n){var e=Nt(n,1);e!==null&&rt(e,n,1,-1)}function yh(n){var e=ct();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:pr,lastRenderedState:n},e.queue=n,n=n.dispatch=c0.bind(null,W,n),[e.memoizedState,n]}function gr(n,e,t,s){return n={tag:n,create:e,destroy:t,deps:s,next:null},e=W.updateQueue,e===null?(e={lastEffect:null,stores:null},W.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(s=t.next,t.next=n,n.next=s,e.lastEffect=n)),n}function Tg(){return We().memoizedState}function Ao(n,e,t,s){var r=ct();W.flags|=n,r.memoizedState=gr(1|e,t,void 0,s===void 0?null:s)}function Ii(n,e,t,s){var r=We();s=s===void 0?null:s;var o=void 0;if(J!==null){var i=J.memoizedState;if(o=i.destroy,s!==null&&Oc(s,i.deps)){r.memoizedState=gr(e,t,o,s);return}}W.flags|=n,r.memoizedState=gr(1|e,t,o,s)}function vh(n,e){return Ao(8390656,8,n,e)}function Hc(n,e){return Ii(2048,8,n,e)}function Ng(n,e){return Ii(4,2,n,e)}function Mg(n,e){return Ii(4,4,n,e)}function bg(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Ig(n,e,t){return t=t!=null?t.concat([n]):null,Ii(4,4,bg.bind(null,e,n),t)}function zc(){}function Lg(n,e){var t=We();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&Oc(e,s[1])?s[0]:(t.memoizedState=[n,e],n)}function kg(n,e){var t=We();e=e===void 0?null:e;var s=t.memoizedState;return s!==null&&e!==null&&Oc(e,s[1])?s[0]:(n=n(),t.memoizedState=[n,e],n)}function Ag(n,e,t){return(Cn&21)===0?(n.baseState&&(n.baseState=!1,Ce=!0),n.memoizedState=t):(it(t,e)||(t=Fp(),W.lanes|=t,wn|=t,n.baseState=!0),e)}function l0(n,e){var t=H;H=t!==0&&4>t?t:4,n(!0);var s=Il.transition;Il.transition={};try{n(!1),e()}finally{H=t,Il.transition=s}}function Dg(){return We().memoizedState}function a0(n,e,t){var s=Wt(n);if(t={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null},Pg(n))Fg(e,t);else if(t=hg(n,e,t,s),t!==null){var r=fe();rt(t,n,s,r),Og(t,e,s)}}function c0(n,e,t){var s=Wt(n),r={lane:s,action:t,hasEagerState:!1,eagerState:null,next:null};if(Pg(n))Fg(e,r);else{var o=n.alternate;if(n.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var i=e.lastRenderedState,l=o(i,t);if(r.hasEagerState=!0,r.eagerState=l,it(l,i)){var c=e.interleaved;c===null?(r.next=r,kc(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}t=hg(n,e,r,s),t!==null&&(r=fe(),rt(t,n,s,r),Og(t,e,s))}}function Pg(n){var e=n.alternate;return n===W||e!==null&&e===W}function Fg(n,e){Ws=li=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Og(n,e,t){if((t&4194240)!==0){var s=e.lanes;s&=n.pendingLanes,t|=s,e.lanes=t,_c(n,t)}}var ai={readContext:je,useCallback:ae,useContext:ae,useEffect:ae,useImperativeHandle:ae,useInsertionEffect:ae,useLayoutEffect:ae,useMemo:ae,useReducer:ae,useRef:ae,useState:ae,useDebugValue:ae,useDeferredValue:ae,useTransition:ae,useMutableSource:ae,useSyncExternalStore:ae,useId:ae,unstable_isNewReconciler:!1},u0={readContext:je,useCallback:function(n,e){return ct().memoizedState=[n,e===void 0?null:e],n},useContext:je,useEffect:vh,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Ao(4194308,4,bg.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Ao(4194308,4,n,e)},useInsertionEffect:function(n,e){return Ao(4,2,n,e)},useMemo:function(n,e){var t=ct();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var s=ct();return e=t!==void 0?t(e):e,s.memoizedState=s.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},s.queue=n,n=n.dispatch=a0.bind(null,W,n),[s.memoizedState,n]},useRef:function(n){var e=ct();return n={current:n},e.memoizedState=n},useState:yh,useDebugValue:zc,useDeferredValue:function(n){return ct().memoizedState=n},useTransition:function(){var n=yh(!1),e=n[0];return n=l0.bind(null,n[1]),ct().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var s=W,r=ct();if($){if(t===void 0)throw Error(T(407));t=t()}else{if(t=e(),se===null)throw Error(T(349));(Cn&30)!==0||Sg(s,e,t)}r.memoizedState=t;var o={value:t,getSnapshot:e};return r.queue=o,vh(wg.bind(null,s,o,n),[n]),s.flags|=2048,gr(9,Cg.bind(null,s,o,t,e),void 0,null),t},useId:function(){var n=ct(),e=se.identifierPrefix;if($){var t=wt,s=Ct;t=(s&~(1<<32-st(s)-1)).toString(32)+t,e=":"+e+"R"+t,t=dr++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=i0++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},h0={readContext:je,useCallback:Lg,useContext:je,useEffect:Hc,useImperativeHandle:Ig,useInsertionEffect:Ng,useLayoutEffect:Mg,useMemo:kg,useReducer:Ll,useRef:Tg,useState:function(){return Ll(pr)},useDebugValue:zc,useDeferredValue:function(n){var e=We();return Ag(e,J.memoizedState,n)},useTransition:function(){var n=Ll(pr)[0],e=We().memoizedState;return[n,e]},useMutableSource:yg,useSyncExternalStore:vg,useId:Dg,unstable_isNewReconciler:!1},d0={readContext:je,useCallback:Lg,useContext:je,useEffect:Hc,useImperativeHandle:Ig,useInsertionEffect:Ng,useLayoutEffect:Mg,useMemo:kg,useReducer:kl,useRef:Tg,useState:function(){return kl(pr)},useDebugValue:zc,useDeferredValue:function(n){var e=We();return J===null?e.memoizedState=n:Ag(e,J.memoizedState,n)},useTransition:function(){var n=kl(pr)[0],e=We().memoizedState;return[n,e]},useMutableSource:yg,useSyncExternalStore:vg,useId:Dg,unstable_isNewReconciler:!1};function cs(n,e){try{var t="",s=e;do t+=zm(s),s=s.return;while(s);var r=t}catch(o){r=`
Error generating stack: `+o.message+`
`+o.stack}return{value:n,source:e,stack:r,digest:null}}function Al(n,e,t){return{value:n,source:null,stack:t!=null?t:null,digest:e!=null?e:null}}function Ba(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var p0=typeof WeakMap=="function"?WeakMap:Map;function Rg(n,e,t){t=Et(-1,t),t.tag=3,t.payload={element:null};var s=e.value;return t.callback=function(){ui||(ui=!0,Ya=s),Ba(n,e)},t}function Bg(n,e,t){t=Et(-1,t),t.tag=3;var s=n.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;t.payload=function(){return s(r)},t.callback=function(){Ba(n,e)}}var o=n.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(t.callback=function(){Ba(n,e),typeof s!="function"&&(jt===null?jt=new Set([this]):jt.add(this));var i=e.stack;this.componentDidCatch(e.value,{componentStack:i!==null?i:""})}),t}function Sh(n,e,t){var s=n.pingCache;if(s===null){s=n.pingCache=new p0;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(t)||(r.add(t),n=M0.bind(null,n,e,t),e.then(n,n))}function Ch(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function wh(n,e,t,s,r){return(n.mode&1)===0?(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Et(-1,1),e.tag=2,Kt(t,e,1))),t.lanes|=1),n):(n.flags|=65536,n.lanes=r,n)}var g0=Lt.ReactCurrentOwner,Ce=!1;function pe(n,e,t,s){e.child=n===null?mg(e,null,t,s):ls(e,n.child,t,s)}function Eh(n,e,t,s,r){t=t.render;var o=e.ref;return Jn(e,r),s=Rc(n,e,t,s,o,r),t=Bc(),n!==null&&!Ce?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Mt(n,e,r)):($&&t&&Tc(e),e.flags|=1,pe(n,e,s,r),e.child)}function xh(n,e,t,s,r){if(n===null){var o=t.type;return typeof o=="function"&&!Yc(o)&&o.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=o,Hg(n,e,o,s,r)):(n=Oo(t.type,null,s,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(o=n.child,(n.lanes&r)===0){var i=o.memoizedProps;if(t=t.compare,t=t!==null?t:ir,t(i,s)&&n.ref===e.ref)return Mt(n,e,r)}return e.flags|=1,n=Yt(o,s),n.ref=e.ref,n.return=e,e.child=n}function Hg(n,e,t,s,r){if(n!==null){var o=n.memoizedProps;if(ir(o,s)&&n.ref===e.ref)if(Ce=!1,e.pendingProps=s=o,(n.lanes&r)!==0)(n.flags&131072)!==0&&(Ce=!0);else return e.lanes=n.lanes,Mt(n,e,r)}return Ha(n,e,t,s,r)}function zg(n,e,t){var s=e.pendingProps,r=s.children,o=n!==null?n.memoizedState:null;if(s.mode==="hidden")if((e.mode&1)===0)e.memoizedState={baseLanes:0,cachePool:null,transitions:null},z(jn,Me),Me|=t;else{if((t&1073741824)===0)return n=o!==null?o.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,z(jn,Me),Me|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:t,z(jn,Me),Me|=s}else o!==null?(s=o.baseLanes|t,e.memoizedState=null):s=t,z(jn,Me),Me|=s;return pe(n,e,r,t),e.child}function Ug(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function Ha(n,e,t,s,r){var o=xe(t)?vn:he.current;return o=os(e,o),Jn(e,r),t=Rc(n,e,t,s,o,r),s=Bc(),n!==null&&!Ce?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Mt(n,e,r)):($&&s&&Tc(e),e.flags|=1,pe(n,e,t,r),e.child)}function Th(n,e,t,s,r){if(xe(t)){var o=!0;ei(e)}else o=!1;if(Jn(e,r),e.stateNode===null)Do(n,e),gg(e,t,s),Ra(e,t,s,r),s=!0;else if(n===null){var i=e.stateNode,l=e.memoizedProps;i.props=l;var c=i.context,u=t.contextType;typeof u=="object"&&u!==null?u=je(u):(u=xe(t)?vn:he.current,u=os(e,u));var h=t.getDerivedStateFromProps,d=typeof h=="function"||typeof i.getSnapshotBeforeUpdate=="function";d||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==s||c!==u)&&mh(e,i,s,u),Ot=!1;var p=e.memoizedState;i.state=p,oi(e,s,i,r),c=e.memoizedState,l!==s||p!==c||Ee.current||Ot?(typeof h=="function"&&(Oa(e,t,h,s),c=e.memoizedState),(l=Ot||fh(e,t,l,s,p,c,u))?(d||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(e.flags|=4194308)):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),i.props=s,i.state=c,i.context=u,s=l):(typeof i.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{i=e.stateNode,dg(n,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ze(e.type,l),i.props=u,d=e.pendingProps,p=i.context,c=t.contextType,typeof c=="object"&&c!==null?c=je(c):(c=xe(t)?vn:he.current,c=os(e,c));var v=t.getDerivedStateFromProps;(h=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==d||p!==c)&&mh(e,i,s,c),Ot=!1,p=e.memoizedState,i.state=p,oi(e,s,i,r);var m=e.memoizedState;l!==d||p!==m||Ee.current||Ot?(typeof v=="function"&&(Oa(e,t,v,s),m=e.memoizedState),(u=Ot||fh(e,t,u,s,p,m,c)||!1)?(h||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(s,m,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(s,m,c)),typeof i.componentDidUpdate=="function"&&(e.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=m),i.props=s,i.state=m,i.context=c,s=u):(typeof i.componentDidUpdate!="function"||l===n.memoizedProps&&p===n.memoizedState||(e.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===n.memoizedProps&&p===n.memoizedState||(e.flags|=1024),s=!1)}return za(n,e,t,s,o,r)}function za(n,e,t,s,r,o){Ug(n,e);var i=(e.flags&128)!==0;if(!s&&!i)return r&&uh(e,t,!1),Mt(n,e,o);s=e.stateNode,g0.current=e;var l=i&&typeof t.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,n!==null&&i?(e.child=ls(e,n.child,null,o),e.child=ls(e,null,l,o)):pe(n,e,l,o),e.memoizedState=s.state,r&&uh(e,t,!0),e.child}function Vg(n){var e=n.stateNode;e.pendingContext?ch(n,e.pendingContext,e.pendingContext!==e.context):e.context&&ch(n,e.context,!1),Dc(n,e.containerInfo)}function Nh(n,e,t,s,r){return is(),Mc(r),e.flags|=256,pe(n,e,t,s),e.child}var Ua={dehydrated:null,treeContext:null,retryLane:0};function Va(n){return{baseLanes:n,cachePool:null,transitions:null}}function Gg(n,e,t){var s=e.pendingProps,r=j.current,o=!1,i=(e.flags&128)!==0,l;if((l=i)||(l=n!==null&&n.memoizedState===null?!1:(r&2)!==0),l?(o=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),z(j,r&1),n===null)return Pa(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((e.mode&1)===0?e.lanes=1:n.data==="$!"?e.lanes=8:e.lanes=1073741824,null):(i=s.children,n=s.fallback,o?(s=e.mode,o=e.child,i={mode:"hidden",children:i},(s&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=i):o=Ai(i,s,0,null),n=_n(n,s,t,null),o.return=e,n.return=e,o.sibling=n,e.child=o,e.child.memoizedState=Va(t),e.memoizedState=Ua,n):Uc(e,i));if(r=n.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return f0(n,e,i,s,l,r,t);if(o){o=s.fallback,i=e.mode,r=n.child,l=r.sibling;var c={mode:"hidden",children:s.children};return(i&1)===0&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Yt(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?o=Yt(l,o):(o=_n(o,i,t,null),o.flags|=2),o.return=e,s.return=e,s.sibling=o,e.child=s,s=o,o=e.child,i=n.child.memoizedState,i=i===null?Va(t):{baseLanes:i.baseLanes|t,cachePool:null,transitions:i.transitions},o.memoizedState=i,o.childLanes=n.childLanes&~t,e.memoizedState=Ua,s}return o=n.child,n=o.sibling,s=Yt(o,{mode:"visible",children:s.children}),(e.mode&1)===0&&(s.lanes=t),s.return=e,s.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=s,e.memoizedState=null,s}function Uc(n,e){return e=Ai({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function qr(n,e,t,s){return s!==null&&Mc(s),ls(e,n.child,null,t),n=Uc(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function f0(n,e,t,s,r,o,i){if(t)return e.flags&256?(e.flags&=-257,s=Al(Error(T(422))),qr(n,e,i,s)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(o=s.fallback,r=e.mode,s=Ai({mode:"visible",children:s.children},r,0,null),o=_n(o,r,i,null),o.flags|=2,s.return=e,o.return=e,s.sibling=o,e.child=s,(e.mode&1)!==0&&ls(e,n.child,null,i),e.child.memoizedState=Va(i),e.memoizedState=Ua,o);if((e.mode&1)===0)return qr(n,e,i,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,o=Error(T(419)),s=Al(o,s,void 0),qr(n,e,i,s)}if(l=(i&n.childLanes)!==0,Ce||l){if(s=se,s!==null){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=(r&(s.suspendedLanes|i))!==0?0:r,r!==0&&r!==o.retryLane&&(o.retryLane=r,Nt(n,r),rt(s,n,r,-1))}return Wc(),s=Al(Error(T(421))),qr(n,e,i,s)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=b0.bind(null,n),r._reactRetry=e,null):(n=o.treeContext,be=$t(r.nextSibling),ke=e,$=!0,et=null,n!==null&&(Ue[Ve++]=Ct,Ue[Ve++]=wt,Ue[Ve++]=Sn,Ct=n.id,wt=n.overflow,Sn=e),e=Uc(e,s.children),e.flags|=4096,e)}function Mh(n,e,t){n.lanes|=e;var s=n.alternate;s!==null&&(s.lanes|=e),Fa(n.return,e,t)}function Dl(n,e,t,s,r){var o=n.memoizedState;o===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:t,tailMode:r}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=t,o.tailMode=r)}function $g(n,e,t){var s=e.pendingProps,r=s.revealOrder,o=s.tail;if(pe(n,e,s.children,t),s=j.current,(s&2)!==0)s=s&1|2,e.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mh(n,t,e);else if(n.tag===19)Mh(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}s&=1}if(z(j,s),(e.mode&1)===0)e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&ii(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Dl(e,!1,r,t,o);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&ii(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Dl(e,!0,t,null,o);break;case"together":Dl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Do(n,e){(e.mode&1)===0&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Mt(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),wn|=e.lanes,(t&e.childLanes)===0)return null;if(n!==null&&e.child!==n.child)throw Error(T(153));if(e.child!==null){for(n=e.child,t=Yt(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Yt(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function m0(n,e,t){switch(e.tag){case 3:Vg(e),is();break;case 5:_g(e);break;case 1:xe(e.type)&&ei(e);break;case 4:Dc(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;z(si,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(z(j,j.current&1),e.flags|=128,null):(t&e.child.childLanes)!==0?Gg(n,e,t):(z(j,j.current&1),n=Mt(n,e,t),n!==null?n.sibling:null);z(j,j.current&1);break;case 19:if(s=(t&e.childLanes)!==0,(n.flags&128)!==0){if(s)return $g(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),z(j,j.current),s)break;return null;case 22:case 23:return e.lanes=0,zg(n,e,t)}return Mt(n,e,t)}var Kg,Ga,jg,Wg;Kg=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};Ga=function(){};jg=function(n,e,t,s){var r=n.memoizedProps;if(r!==s){n=e.stateNode,pn(dt.current);var o=null;switch(t){case"input":r=ha(n,r),s=ha(n,s),o=[];break;case"select":r=Y({},r,{value:void 0}),s=Y({},s,{value:void 0}),o=[];break;case"textarea":r=ga(n,r),s=ga(n,s),o=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(n.onclick=Zo)}ma(t,s);var i;t=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(i in l)l.hasOwnProperty(i)&&(t||(t={}),t[i]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Js.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(t||(t={}),t[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(t||(t={}),t[i]=c[i])}else t||(o||(o=[]),o.push(u,t)),t=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Js.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&U("scroll",n),o||l===c||(o=[])):(o=o||[]).push(u,c))}t&&(o=o||[]).push("style",t);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};Wg=function(n,e,t,s){t!==s&&(e.flags|=4)};function Ns(n,e){if(!$)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var s=null;t!==null;)t.alternate!==null&&(s=t),t=t.sibling;s===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:s.sibling=null}}function ce(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,s=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=s,n.childLanes=t,e}function _0(n,e,t){var s=e.pendingProps;switch(Nc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ce(e),null;case 1:return xe(e.type)&&Jo(),ce(e),null;case 3:return s=e.stateNode,as(),V(Ee),V(he),Fc(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(n===null||n.child===null)&&(Qr(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&(e.flags&256)===0||(e.flags|=1024,et!==null&&(qa(et),et=null))),Ga(n,e),ce(e),null;case 5:Pc(e);var r=pn(hr.current);if(t=e.type,n!==null&&e.stateNode!=null)jg(n,e,t,s,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(T(166));return ce(e),null}if(n=pn(dt.current),Qr(e)){s=e.stateNode,t=e.type;var o=e.memoizedProps;switch(s[ut]=e,s[cr]=o,n=(e.mode&1)!==0,t){case"dialog":U("cancel",s),U("close",s);break;case"iframe":case"object":case"embed":U("load",s);break;case"video":case"audio":for(r=0;r<Rs.length;r++)U(Rs[r],s);break;case"source":U("error",s);break;case"img":case"image":case"link":U("error",s),U("load",s);break;case"details":U("toggle",s);break;case"input":Ou(s,o),U("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},U("invalid",s);break;case"textarea":Bu(s,o),U("invalid",s)}ma(t,o),r=null;for(var i in o)if(o.hasOwnProperty(i)){var l=o[i];i==="children"?typeof l=="string"?s.textContent!==l&&(o.suppressHydrationWarning!==!0&&Yr(s.textContent,l,n),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Yr(s.textContent,l,n),r=["children",""+l]):Js.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&U("scroll",s)}switch(t){case"input":zr(s),Ru(s,o,!0);break;case"textarea":zr(s),Hu(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Zo)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{i=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Sp(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=i.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof s.is=="string"?n=i.createElement(t,{is:s.is}):(n=i.createElement(t),t==="select"&&(i=n,s.multiple?i.multiple=!0:s.size&&(i.size=s.size))):n=i.createElementNS(n,t),n[ut]=e,n[cr]=s,Kg(n,e,!1,!1),e.stateNode=n;e:{switch(i=_a(t,s),t){case"dialog":U("cancel",n),U("close",n),r=s;break;case"iframe":case"object":case"embed":U("load",n),r=s;break;case"video":case"audio":for(r=0;r<Rs.length;r++)U(Rs[r],n);r=s;break;case"source":U("error",n),r=s;break;case"img":case"image":case"link":U("error",n),U("load",n),r=s;break;case"details":U("toggle",n),r=s;break;case"input":Ou(n,s),r=ha(n,s),U("invalid",n);break;case"option":r=s;break;case"select":n._wrapperState={wasMultiple:!!s.multiple},r=Y({},s,{value:void 0}),U("invalid",n);break;case"textarea":Bu(n,s),r=ga(n,s),U("invalid",n);break;default:r=s}ma(t,r),l=r;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?Ep(n,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cp(n,c)):o==="children"?typeof c=="string"?(t!=="textarea"||c!=="")&&er(n,c):typeof c=="number"&&er(n,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Js.hasOwnProperty(o)?c!=null&&o==="onScroll"&&U("scroll",n):c!=null&&hc(n,o,c,i))}switch(t){case"input":zr(n),Ru(n,s,!1);break;case"textarea":zr(n),Hu(n);break;case"option":s.value!=null&&n.setAttribute("value",""+Qt(s.value));break;case"select":n.multiple=!!s.multiple,o=s.value,o!=null?Qn(n,!!s.multiple,o,!1):s.defaultValue!=null&&Qn(n,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=Zo)}switch(t){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ce(e),null;case 6:if(n&&e.stateNode!=null)Wg(n,e,n.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(T(166));if(t=pn(hr.current),pn(dt.current),Qr(e)){if(s=e.stateNode,t=e.memoizedProps,s[ut]=e,(o=s.nodeValue!==t)&&(n=ke,n!==null))switch(n.tag){case 3:Yr(s.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yr(s.nodeValue,t,(n.mode&1)!==0)}o&&(e.flags|=4)}else s=(t.nodeType===9?t:t.ownerDocument).createTextNode(s),s[ut]=e,e.stateNode=s}return ce(e),null;case 13:if(V(j),s=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if($&&be!==null&&(e.mode&1)!==0&&(e.flags&128)===0)ug(),is(),e.flags|=98560,o=!1;else if(o=Qr(e),s!==null&&s.dehydrated!==null){if(n===null){if(!o)throw Error(T(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(T(317));o[ut]=e}else is(),(e.flags&128)===0&&(e.memoizedState=null),e.flags|=4;ce(e),o=!1}else et!==null&&(qa(et),et=null),o=!0;if(!o)return e.flags&65536?e:null}return(e.flags&128)!==0?(e.lanes=t,e):(s=s!==null,s!==(n!==null&&n.memoizedState!==null)&&s&&(e.child.flags|=8192,(e.mode&1)!==0&&(n===null||(j.current&1)!==0?ee===0&&(ee=3):Wc())),e.updateQueue!==null&&(e.flags|=4),ce(e),null);case 4:return as(),Ga(n,e),n===null&&lr(e.stateNode.containerInfo),ce(e),null;case 10:return Lc(e.type._context),ce(e),null;case 17:return xe(e.type)&&Jo(),ce(e),null;case 19:if(V(j),o=e.memoizedState,o===null)return ce(e),null;if(s=(e.flags&128)!==0,i=o.rendering,i===null)if(s)Ns(o,!1);else{if(ee!==0||n!==null&&(n.flags&128)!==0)for(n=e.child;n!==null;){if(i=ii(n),i!==null){for(e.flags|=128,Ns(o,!1),s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=t,t=e.child;t!==null;)o=t,n=s,o.flags&=14680066,i=o.alternate,i===null?(o.childLanes=0,o.lanes=n,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,n=i.dependencies,o.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return z(j,j.current&1|2),e.child}n=n.sibling}o.tail!==null&&q()>us&&(e.flags|=128,s=!0,Ns(o,!1),e.lanes=4194304)}else{if(!s)if(n=ii(i),n!==null){if(e.flags|=128,s=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Ns(o,!0),o.tail===null&&o.tailMode==="hidden"&&!i.alternate&&!$)return ce(e),null}else 2*q()-o.renderingStartTime>us&&t!==1073741824&&(e.flags|=128,s=!0,Ns(o,!1),e.lanes=4194304);o.isBackwards?(i.sibling=e.child,e.child=i):(t=o.last,t!==null?t.sibling=i:e.child=i,o.last=i)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=q(),e.sibling=null,t=j.current,z(j,s?t&1|2:t&1),e):(ce(e),null);case 22:case 23:return jc(),s=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==s&&(e.flags|=8192),s&&(e.mode&1)!==0?(Me&1073741824)!==0&&(ce(e),e.subtreeFlags&6&&(e.flags|=8192)):ce(e),null;case 24:return null;case 25:return null}throw Error(T(156,e.tag))}function y0(n,e){switch(Nc(e),e.tag){case 1:return xe(e.type)&&Jo(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return as(),V(Ee),V(he),Fc(),n=e.flags,(n&65536)!==0&&(n&128)===0?(e.flags=n&-65537|128,e):null;case 5:return Pc(e),null;case 13:if(V(j),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(T(340));is()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return V(j),null;case 4:return as(),null;case 10:return Lc(e.type._context),null;case 22:case 23:return jc(),null;case 24:return null;default:return null}}var Zr=!1,ue=!1,v0=typeof WeakSet=="function"?WeakSet:Set,L=null;function Kn(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(s){Q(n,e,s)}else t.current=null}function $a(n,e,t){try{t()}catch(s){Q(n,e,s)}}var bh=!1;function S0(n,e){if(Ma=Qo,n=qp(),xc(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var s=t.getSelection&&t.getSelection();if(s&&s.rangeCount!==0){t=s.anchorNode;var r=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{t.nodeType,o.nodeType}catch{t=null;break e}var i=0,l=-1,c=-1,u=0,h=0,d=n,p=null;t:for(;;){for(var v;d!==t||r!==0&&d.nodeType!==3||(l=i+r),d!==o||s!==0&&d.nodeType!==3||(c=i+s),d.nodeType===3&&(i+=d.nodeValue.length),(v=d.firstChild)!==null;)p=d,d=v;for(;;){if(d===n)break t;if(p===t&&++u===r&&(l=i),p===o&&++h===s&&(c=i),(v=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=v}t=l===-1||c===-1?null:{start:l,end:c}}else t=null}t=t||{start:0,end:0}}else t=null;for(ba={focusedElem:n,selectionRange:t},Qo=!1,L=e;L!==null;)if(e=L,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,L=n;else for(;L!==null;){e=L;try{var m=e.alternate;if((e.flags&1024)!==0)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,w=m.memoizedState,f=e.stateNode,g=f.getSnapshotBeforeUpdate(e.elementType===e.type?y:Ze(e.type,y),w);f.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(T(163))}}catch(E){Q(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,L=n;break}L=e.return}return m=bh,bh=!1,m}function Ys(n,e,t){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&n)===n){var o=r.destroy;r.destroy=void 0,o!==void 0&&$a(e,t,o)}r=r.next}while(r!==s)}}function Li(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var s=t.create;t.destroy=s()}t=t.next}while(t!==e)}}function Ka(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Yg(n){var e=n.alternate;e!==null&&(n.alternate=null,Yg(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[ut],delete e[cr],delete e[ka],delete e[n0],delete e[s0])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Qg(n){return n.tag===5||n.tag===3||n.tag===4}function Ih(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Qg(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ja(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Zo));else if(s!==4&&(n=n.child,n!==null))for(ja(n,e,t),n=n.sibling;n!==null;)ja(n,e,t),n=n.sibling}function Wa(n,e,t){var s=n.tag;if(s===5||s===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(s!==4&&(n=n.child,n!==null))for(Wa(n,e,t),n=n.sibling;n!==null;)Wa(n,e,t),n=n.sibling}var re=null,Je=!1;function kt(n,e,t){for(t=t.child;t!==null;)Xg(n,e,t),t=t.sibling}function Xg(n,e,t){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(wi,t)}catch{}switch(t.tag){case 5:ue||Kn(t,e);case 6:var s=re,r=Je;re=null,kt(n,e,t),re=s,Je=r,re!==null&&(Je?(n=re,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):re.removeChild(t.stateNode));break;case 18:re!==null&&(Je?(n=re,t=t.stateNode,n.nodeType===8?Nl(n.parentNode,t):n.nodeType===1&&Nl(n,t),rr(n)):Nl(re,t.stateNode));break;case 4:s=re,r=Je,re=t.stateNode.containerInfo,Je=!0,kt(n,e,t),re=s,Je=r;break;case 0:case 11:case 14:case 15:if(!ue&&(s=t.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var o=r,i=o.destroy;o=o.tag,i!==void 0&&((o&2)!==0||(o&4)!==0)&&$a(t,e,i),r=r.next}while(r!==s)}kt(n,e,t);break;case 1:if(!ue&&(Kn(t,e),s=t.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=t.memoizedProps,s.state=t.memoizedState,s.componentWillUnmount()}catch(l){Q(t,e,l)}kt(n,e,t);break;case 21:kt(n,e,t);break;case 22:t.mode&1?(ue=(s=ue)||t.memoizedState!==null,kt(n,e,t),ue=s):kt(n,e,t);break;default:kt(n,e,t)}}function Lh(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new v0),e.forEach(function(s){var r=I0.bind(null,n,s);t.has(s)||(t.add(s),s.then(r,r))})}}function qe(n,e){var t=e.deletions;if(t!==null)for(var s=0;s<t.length;s++){var r=t[s];try{var o=n,i=e,l=i;e:for(;l!==null;){switch(l.tag){case 5:re=l.stateNode,Je=!1;break e;case 3:re=l.stateNode.containerInfo,Je=!0;break e;case 4:re=l.stateNode.containerInfo,Je=!0;break e}l=l.return}if(re===null)throw Error(T(160));Xg(o,i,r),re=null,Je=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Q(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)qg(e,n),e=e.sibling}function qg(n,e){var t=n.alternate,s=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(qe(e,n),at(n),s&4){try{Ys(3,n,n.return),Li(3,n)}catch(y){Q(n,n.return,y)}try{Ys(5,n,n.return)}catch(y){Q(n,n.return,y)}}break;case 1:qe(e,n),at(n),s&512&&t!==null&&Kn(t,t.return);break;case 5:if(qe(e,n),at(n),s&512&&t!==null&&Kn(t,t.return),n.flags&32){var r=n.stateNode;try{er(r,"")}catch(y){Q(n,n.return,y)}}if(s&4&&(r=n.stateNode,r!=null)){var o=n.memoizedProps,i=t!==null?t.memoizedProps:o,l=n.type,c=n.updateQueue;if(n.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&yp(r,o),_a(l,i);var u=_a(l,o);for(i=0;i<c.length;i+=2){var h=c[i],d=c[i+1];h==="style"?Ep(r,d):h==="dangerouslySetInnerHTML"?Cp(r,d):h==="children"?er(r,d):hc(r,h,d,u)}switch(l){case"input":da(r,o);break;case"textarea":vp(r,o);break;case"select":var p=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!o.multiple;var v=o.value;v!=null?Qn(r,!!o.multiple,v,!1):p!==!!o.multiple&&(o.defaultValue!=null?Qn(r,!!o.multiple,o.defaultValue,!0):Qn(r,!!o.multiple,o.multiple?[]:"",!1))}r[cr]=o}catch(y){Q(n,n.return,y)}}break;case 6:if(qe(e,n),at(n),s&4){if(n.stateNode===null)throw Error(T(162));r=n.stateNode,o=n.memoizedProps;try{r.nodeValue=o}catch(y){Q(n,n.return,y)}}break;case 3:if(qe(e,n),at(n),s&4&&t!==null&&t.memoizedState.isDehydrated)try{rr(e.containerInfo)}catch(y){Q(n,n.return,y)}break;case 4:qe(e,n),at(n);break;case 13:qe(e,n),at(n),r=n.child,r.flags&8192&&(o=r.memoizedState!==null,r.stateNode.isHidden=o,!o||r.alternate!==null&&r.alternate.memoizedState!==null||($c=q())),s&4&&Lh(n);break;case 22:if(h=t!==null&&t.memoizedState!==null,n.mode&1?(ue=(u=ue)||h,qe(e,n),ue=u):qe(e,n),at(n),s&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!h&&(n.mode&1)!==0)for(L=n,h=n.child;h!==null;){for(d=L=h;L!==null;){switch(p=L,v=p.child,p.tag){case 0:case 11:case 14:case 15:Ys(4,p,p.return);break;case 1:Kn(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){s=p,t=p.return;try{e=s,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Q(s,t,y)}}break;case 5:Kn(p,p.return);break;case 22:if(p.memoizedState!==null){Ah(d);continue}}v!==null?(v.return=p,L=v):Ah(d)}h=h.sibling}e:for(h=null,d=n;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(o=r.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,c=d.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=wp("display",i))}catch(y){Q(n,n.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Q(n,n.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:qe(e,n),at(n),s&4&&Lh(n);break;case 21:break;default:qe(e,n),at(n)}}function at(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Qg(t)){var s=t;break e}t=t.return}throw Error(T(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&(er(r,""),s.flags&=-33);var o=Ih(n);Wa(n,o,r);break;case 3:case 4:var i=s.stateNode.containerInfo,l=Ih(n);ja(n,l,i);break;default:throw Error(T(161))}}catch(c){Q(n,n.return,c)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function C0(n,e,t){L=n,Zg(n)}function Zg(n,e,t){for(var s=(n.mode&1)!==0;L!==null;){var r=L,o=r.child;if(r.tag===22&&s){var i=r.memoizedState!==null||Zr;if(!i){var l=r.alternate,c=l!==null&&l.memoizedState!==null||ue;l=Zr;var u=ue;if(Zr=i,(ue=c)&&!u)for(L=r;L!==null;)i=L,c=i.child,i.tag===22&&i.memoizedState!==null?Dh(r):c!==null?(c.return=i,L=c):Dh(r);for(;o!==null;)L=o,Zg(o),o=o.sibling;L=r,Zr=l,ue=u}kh(n)}else(r.subtreeFlags&8772)!==0&&o!==null?(o.return=r,L=o):kh(n)}}function kh(n){for(;L!==null;){var e=L;if((e.flags&8772)!==0){var t=e.alternate;try{if((e.flags&8772)!==0)switch(e.tag){case 0:case 11:case 15:ue||Li(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!ue)if(t===null)s.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Ze(e.type,t.memoizedProps);s.componentDidUpdate(r,t.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&gh(e,o,s);break;case 3:var i=e.updateQueue;if(i!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}gh(e,i,t)}break;case 5:var l=e.stateNode;if(t===null&&e.flags&4){t=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&t.focus();break;case"img":c.src&&(t.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&rr(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(T(163))}ue||e.flags&512&&Ka(e)}catch(p){Q(e,e.return,p)}}if(e===n){L=null;break}if(t=e.sibling,t!==null){t.return=e.return,L=t;break}L=e.return}}function Ah(n){for(;L!==null;){var e=L;if(e===n){L=null;break}var t=e.sibling;if(t!==null){t.return=e.return,L=t;break}L=e.return}}function Dh(n){for(;L!==null;){var e=L;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Li(4,e)}catch(c){Q(e,t,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Q(e,r,c)}}var o=e.return;try{Ka(e)}catch(c){Q(e,o,c)}break;case 5:var i=e.return;try{Ka(e)}catch(c){Q(e,i,c)}}}catch(c){Q(e,e.return,c)}if(e===n){L=null;break}var l=e.sibling;if(l!==null){l.return=e.return,L=l;break}L=e.return}}var w0=Math.ceil,ci=Lt.ReactCurrentDispatcher,Vc=Lt.ReactCurrentOwner,$e=Lt.ReactCurrentBatchConfig,R=0,se=null,Z=null,ie=0,Me=0,jn=Jt(0),ee=0,fr=null,wn=0,ki=0,Gc=0,Qs=null,ye=null,$c=0,us=1/0,vt=null,ui=!1,Ya=null,jt=null,Jr=!1,zt=null,hi=0,Xs=0,Qa=null,Po=-1,Fo=0;function fe(){return(R&6)!==0?q():Po!==-1?Po:Po=q()}function Wt(n){return(n.mode&1)===0?1:(R&2)!==0&&ie!==0?ie&-ie:o0.transition!==null?(Fo===0&&(Fo=Fp()),Fo):(n=H,n!==0||(n=window.event,n=n===void 0?16:Vp(n.type)),n)}function rt(n,e,t,s){if(50<Xs)throw Xs=0,Qa=null,Error(T(185));xr(n,t,s),((R&2)===0||n!==se)&&(n===se&&((R&2)===0&&(ki|=t),ee===4&&Bt(n,ie)),Te(n,s),t===1&&R===0&&(e.mode&1)===0&&(us=q()+500,Mi&&en()))}function Te(n,e){var t=n.callbackNode;o_(n,e);var s=Yo(n,n===se?ie:0);if(s===0)t!==null&&Vu(t),n.callbackNode=null,n.callbackPriority=0;else if(e=s&-s,n.callbackPriority!==e){if(t!=null&&Vu(t),e===1)n.tag===0?r0(Ph.bind(null,n)):lg(Ph.bind(null,n)),e0(function(){(R&6)===0&&en()}),t=null;else{switch(Op(s)){case 1:t=mc;break;case 4:t=Dp;break;case 16:t=Wo;break;case 536870912:t=Pp;break;default:t=Wo}t=lf(t,Jg.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Jg(n,e){if(Po=-1,Fo=0,(R&6)!==0)throw Error(T(327));var t=n.callbackNode;if(es()&&n.callbackNode!==t)return null;var s=Yo(n,n===se?ie:0);if(s===0)return null;if((s&30)!==0||(s&n.expiredLanes)!==0||e)e=di(n,s);else{e=s;var r=R;R|=2;var o=tf();(se!==n||ie!==e)&&(vt=null,us=q()+500,mn(n,e));do try{T0();break}catch(l){ef(n,l)}while(1);Ic(),ci.current=o,R=r,Z!==null?e=0:(se=null,ie=0,e=ee)}if(e!==0){if(e===2&&(r=wa(n),r!==0&&(s=r,e=Xa(n,r))),e===1)throw t=fr,mn(n,0),Bt(n,s),Te(n,q()),t;if(e===6)Bt(n,s);else{if(r=n.current.alternate,(s&30)===0&&!E0(r)&&(e=di(n,s),e===2&&(o=wa(n),o!==0&&(s=o,e=Xa(n,o))),e===1))throw t=fr,mn(n,0),Bt(n,s),Te(n,q()),t;switch(n.finishedWork=r,n.finishedLanes=s,e){case 0:case 1:throw Error(T(345));case 2:on(n,ye,vt);break;case 3:if(Bt(n,s),(s&130023424)===s&&(e=$c+500-q(),10<e)){if(Yo(n,0)!==0)break;if(r=n.suspendedLanes,(r&s)!==s){fe(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=La(on.bind(null,n,ye,vt),e);break}on(n,ye,vt);break;case 4:if(Bt(n,s),(s&4194240)===s)break;for(e=n.eventTimes,r=-1;0<s;){var i=31-st(s);o=1<<i,i=e[i],i>r&&(r=i),s&=~o}if(s=r,s=q()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*w0(s/1960))-s,10<s){n.timeoutHandle=La(on.bind(null,n,ye,vt),s);break}on(n,ye,vt);break;case 5:on(n,ye,vt);break;default:throw Error(T(329))}}}return Te(n,q()),n.callbackNode===t?Jg.bind(null,n):null}function Xa(n,e){var t=Qs;return n.current.memoizedState.isDehydrated&&(mn(n,e).flags|=256),n=di(n,e),n!==2&&(e=ye,ye=t,e!==null&&qa(e)),n}function qa(n){ye===null?ye=n:ye.push.apply(ye,n)}function E0(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var s=0;s<t.length;s++){var r=t[s],o=r.getSnapshot;r=r.value;try{if(!it(o(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bt(n,e){for(e&=~Gc,e&=~ki,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-st(e),s=1<<t;n[t]=-1,e&=~s}}function Ph(n){if((R&6)!==0)throw Error(T(327));es();var e=Yo(n,0);if((e&1)===0)return Te(n,q()),null;var t=di(n,e);if(n.tag!==0&&t===2){var s=wa(n);s!==0&&(e=s,t=Xa(n,s))}if(t===1)throw t=fr,mn(n,0),Bt(n,e),Te(n,q()),t;if(t===6)throw Error(T(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,on(n,ye,vt),Te(n,q()),null}function Kc(n,e){var t=R;R|=1;try{return n(e)}finally{R=t,R===0&&(us=q()+500,Mi&&en())}}function En(n){zt!==null&&zt.tag===0&&(R&6)===0&&es();var e=R;R|=1;var t=$e.transition,s=H;try{if($e.transition=null,H=1,n)return n()}finally{H=s,$e.transition=t,R=e,(R&6)===0&&en()}}function jc(){Me=jn.current,V(jn)}function mn(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,J_(t)),Z!==null)for(t=Z.return;t!==null;){var s=t;switch(Nc(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Jo();break;case 3:as(),V(Ee),V(he),Fc();break;case 5:Pc(s);break;case 4:as();break;case 13:V(j);break;case 19:V(j);break;case 10:Lc(s.type._context);break;case 22:case 23:jc()}t=t.return}if(se=n,Z=n=Yt(n.current,null),ie=Me=e,ee=0,fr=null,Gc=ki=wn=0,ye=Qs=null,dn!==null){for(e=0;e<dn.length;e++)if(t=dn[e],s=t.interleaved,s!==null){t.interleaved=null;var r=s.next,o=t.pending;if(o!==null){var i=o.next;o.next=r,s.next=i}t.pending=s}dn=null}return n}function ef(n,e){do{var t=Z;try{if(Ic(),ko.current=ai,li){for(var s=W.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}li=!1}if(Cn=0,ne=J=W=null,Ws=!1,dr=0,Vc.current=null,t===null||t.return===null){ee=1,fr=e,Z=null;break}e:{var o=n,i=t.return,l=t,c=e;if(e=ie,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if((h.mode&1)===0&&(d===0||d===11||d===15)){var p=h.alternate;p?(h.updateQueue=p.updateQueue,h.memoizedState=p.memoizedState,h.lanes=p.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Ch(i);if(v!==null){v.flags&=-257,wh(v,i,l,o,e),v.mode&1&&Sh(o,u,e),e=v,c=u;var m=e.updateQueue;if(m===null){var y=new Set;y.add(c),e.updateQueue=y}else m.add(c);break e}else{if((e&1)===0){Sh(o,u,e),Wc();break e}c=Error(T(426))}}else if($&&l.mode&1){var w=Ch(i);if(w!==null){(w.flags&65536)===0&&(w.flags|=256),wh(w,i,l,o,e),Mc(cs(c,l));break e}}o=c=cs(c,l),ee!==4&&(ee=2),Qs===null?Qs=[o]:Qs.push(o),o=i;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var f=Rg(o,c,e);ph(o,f);break e;case 1:l=c;var g=o.type,_=o.stateNode;if((o.flags&128)===0&&(typeof g.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(jt===null||!jt.has(_)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=Bg(o,l,e);ph(o,E);break e}}o=o.return}while(o!==null)}sf(t)}catch(x){e=x,Z===t&&t!==null&&(Z=t=t.return);continue}break}while(1)}function tf(){var n=ci.current;return ci.current=ai,n===null?ai:n}function Wc(){(ee===0||ee===3||ee===2)&&(ee=4),se===null||(wn&268435455)===0&&(ki&268435455)===0||Bt(se,ie)}function di(n,e){var t=R;R|=2;var s=tf();(se!==n||ie!==e)&&(vt=null,mn(n,e));do try{x0();break}catch(r){ef(n,r)}while(1);if(Ic(),R=t,ci.current=s,Z!==null)throw Error(T(261));return se=null,ie=0,ee}function x0(){for(;Z!==null;)nf(Z)}function T0(){for(;Z!==null&&!Xm();)nf(Z)}function nf(n){var e=of(n.alternate,n,Me);n.memoizedProps=n.pendingProps,e===null?sf(n):Z=e,Vc.current=null}function sf(n){var e=n;do{var t=e.alternate;if(n=e.return,(e.flags&32768)===0){if(t=_0(t,e,Me),t!==null){Z=t;return}}else{if(t=y0(t,e),t!==null){t.flags&=32767,Z=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{ee=6,Z=null;return}}if(e=e.sibling,e!==null){Z=e;return}Z=e=n}while(e!==null);ee===0&&(ee=5)}function on(n,e,t){var s=H,r=$e.transition;try{$e.transition=null,H=1,N0(n,e,t,s)}finally{$e.transition=r,H=s}return null}function N0(n,e,t,s){do es();while(zt!==null);if((R&6)!==0)throw Error(T(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(T(177));n.callbackNode=null,n.callbackPriority=0;var o=t.lanes|t.childLanes;if(i_(n,o),n===se&&(Z=se=null,ie=0),(t.subtreeFlags&2064)===0&&(t.flags&2064)===0||Jr||(Jr=!0,lf(Wo,function(){return es(),null})),o=(t.flags&15990)!==0,(t.subtreeFlags&15990)!==0||o){o=$e.transition,$e.transition=null;var i=H;H=1;var l=R;R|=4,Vc.current=null,S0(n,t),qg(t,n),j_(ba),Qo=!!Ma,ba=Ma=null,n.current=t,C0(t),qm(),R=l,H=i,$e.transition=o}else n.current=t;if(Jr&&(Jr=!1,zt=n,hi=r),o=n.pendingLanes,o===0&&(jt=null),e_(t.stateNode),Te(n,q()),e!==null)for(s=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],s(r.value,{componentStack:r.stack,digest:r.digest});if(ui)throw ui=!1,n=Ya,Ya=null,n;return(hi&1)!==0&&n.tag!==0&&es(),o=n.pendingLanes,(o&1)!==0?n===Qa?Xs++:(Xs=0,Qa=n):Xs=0,en(),null}function es(){if(zt!==null){var n=Op(hi),e=$e.transition,t=H;try{if($e.transition=null,H=16>n?16:n,zt===null)var s=!1;else{if(n=zt,zt=null,hi=0,(R&6)!==0)throw Error(T(331));var r=R;for(R|=4,L=n.current;L!==null;){var o=L,i=o.child;if((L.flags&16)!==0){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(L=u;L!==null;){var h=L;switch(h.tag){case 0:case 11:case 15:Ys(8,h,o)}var d=h.child;if(d!==null)d.return=h,L=d;else for(;L!==null;){h=L;var p=h.sibling,v=h.return;if(Yg(h),h===u){L=null;break}if(p!==null){p.return=v,L=p;break}L=v}}}var m=o.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}L=o}}if((o.subtreeFlags&2064)!==0&&i!==null)i.return=o,L=i;else e:for(;L!==null;){if(o=L,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Ys(9,o,o.return)}var f=o.sibling;if(f!==null){f.return=o.return,L=f;break e}L=o.return}}var g=n.current;for(L=g;L!==null;){i=L;var _=i.child;if((i.subtreeFlags&2064)!==0&&_!==null)_.return=i,L=_;else e:for(i=g;L!==null;){if(l=L,(l.flags&2048)!==0)try{switch(l.tag){case 0:case 11:case 15:Li(9,l)}}catch(x){Q(l,l.return,x)}if(l===i){L=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,L=E;break e}L=l.return}}if(R=r,en(),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(wi,n)}catch{}s=!0}return s}finally{H=t,$e.transition=e}}return!1}function Fh(n,e,t){e=cs(t,e),e=Rg(n,e,1),n=Kt(n,e,1),e=fe(),n!==null&&(xr(n,1,e),Te(n,e))}function Q(n,e,t){if(n.tag===3)Fh(n,n,t);else for(;e!==null;){if(e.tag===3){Fh(e,n,t);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(jt===null||!jt.has(s))){n=cs(t,n),n=Bg(e,n,1),e=Kt(e,n,1),n=fe(),e!==null&&(xr(e,1,n),Te(e,n));break}}e=e.return}}function M0(n,e,t){var s=n.pingCache;s!==null&&s.delete(e),e=fe(),n.pingedLanes|=n.suspendedLanes&t,se===n&&(ie&t)===t&&(ee===4||ee===3&&(ie&130023424)===ie&&500>q()-$c?mn(n,0):Gc|=t),Te(n,e)}function rf(n,e){e===0&&((n.mode&1)===0?e=1:(e=Gr,Gr<<=1,(Gr&130023424)===0&&(Gr=4194304)));var t=fe();n=Nt(n,e),n!==null&&(xr(n,e,t),Te(n,t))}function b0(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),rf(n,t)}function I0(n,e){var t=0;switch(n.tag){case 13:var s=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:s=n.stateNode;break;default:throw Error(T(314))}s!==null&&s.delete(e),rf(n,t)}var of;of=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Ee.current)Ce=!0;else{if((n.lanes&t)===0&&(e.flags&128)===0)return Ce=!1,m0(n,e,t);Ce=(n.flags&131072)!==0}else Ce=!1,$&&(e.flags&1048576)!==0&&ag(e,ni,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Do(n,e),n=e.pendingProps;var r=os(e,he.current);Jn(e,t),r=Rc(null,e,s,n,r,t);var o=Bc();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,xe(s)?(o=!0,ei(e)):o=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Ac(e),r.updater=bi,e.stateNode=r,r._reactInternals=e,Ra(e,s,n,t),e=za(null,e,s,!0,o,t)):(e.tag=0,$&&o&&Tc(e),pe(null,e,r,t),e=e.child),e;case 16:s=e.elementType;e:{switch(Do(n,e),n=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=k0(s),n=Ze(s,n),r){case 0:e=Ha(null,e,s,n,t);break e;case 1:e=Th(null,e,s,n,t);break e;case 11:e=Eh(null,e,s,n,t);break e;case 14:e=xh(null,e,s,Ze(s.type,n),t);break e}throw Error(T(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ze(s,r),Ha(n,e,s,r,t);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ze(s,r),Th(n,e,s,r,t);case 3:e:{if(Vg(e),n===null)throw Error(T(387));s=e.pendingProps,o=e.memoizedState,r=o.element,dg(n,e),oi(e,s,null,t);var i=e.memoizedState;if(s=i.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){r=cs(Error(T(423)),e),e=Nh(n,e,s,t,r);break e}else if(s!==r){r=cs(Error(T(424)),e),e=Nh(n,e,s,t,r);break e}else for(be=$t(e.stateNode.containerInfo.firstChild),ke=e,$=!0,et=null,t=mg(e,null,s,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(is(),s===r){e=Mt(n,e,t);break e}pe(n,e,s,t)}e=e.child}return e;case 5:return _g(e),n===null&&Pa(e),s=e.type,r=e.pendingProps,o=n!==null?n.memoizedProps:null,i=r.children,Ia(s,r)?i=null:o!==null&&Ia(s,o)&&(e.flags|=32),Ug(n,e),pe(n,e,i,t),e.child;case 6:return n===null&&Pa(e),null;case 13:return Gg(n,e,t);case 4:return Dc(e,e.stateNode.containerInfo),s=e.pendingProps,n===null?e.child=ls(e,null,s,t):pe(n,e,s,t),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ze(s,r),Eh(n,e,s,r,t);case 7:return pe(n,e,e.pendingProps,t),e.child;case 8:return pe(n,e,e.pendingProps.children,t),e.child;case 12:return pe(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,o=e.memoizedProps,i=r.value,z(si,s._currentValue),s._currentValue=i,o!==null)if(it(o.value,i)){if(o.children===r.children&&!Ee.current){e=Mt(n,e,t);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){i=o.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(o.tag===1){c=Et(-1,t&-t),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=t,c=o.alternate,c!==null&&(c.lanes|=t),Fa(o.return,t,e),l.lanes|=t;break}c=c.next}}else if(o.tag===10)i=o.type===e.type?null:o.child;else if(o.tag===18){if(i=o.return,i===null)throw Error(T(341));i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),Fa(i,t,e),i=o.sibling}else i=o.child;if(i!==null)i.return=o;else for(i=o;i!==null;){if(i===e){i=null;break}if(o=i.sibling,o!==null){o.return=i.return,i=o;break}i=i.return}o=i}pe(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,Jn(e,t),r=je(r),s=s(r),e.flags|=1,pe(n,e,s,t),e.child;case 14:return s=e.type,r=Ze(s,e.pendingProps),r=Ze(s.type,r),xh(n,e,s,r,t);case 15:return Hg(n,e,e.type,e.pendingProps,t);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:Ze(s,r),Do(n,e),e.tag=1,xe(s)?(n=!0,ei(e)):n=!1,Jn(e,t),gg(e,s,r),Ra(e,s,r,t),za(null,e,s,!0,n,t);case 19:return $g(n,e,t);case 22:return zg(n,e,t)}throw Error(T(156,e.tag))};function lf(n,e){return Ap(n,e)}function L0(n,e,t,s){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(n,e,t,s){return new L0(n,e,t,s)}function Yc(n){return n=n.prototype,!(!n||!n.isReactComponent)}function k0(n){if(typeof n=="function")return Yc(n)?1:0;if(n!=null){if(n=n.$$typeof,n===pc)return 11;if(n===gc)return 14}return 2}function Yt(n,e){var t=n.alternate;return t===null?(t=Ge(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Oo(n,e,t,s,r,o){var i=2;if(s=n,typeof n=="function")Yc(n)&&(i=1);else if(typeof n=="string")i=5;else e:switch(n){case On:return _n(t.children,r,o,e);case dc:i=8,r|=8;break;case la:return n=Ge(12,t,e,r|2),n.elementType=la,n.lanes=o,n;case aa:return n=Ge(13,t,e,r),n.elementType=aa,n.lanes=o,n;case ca:return n=Ge(19,t,e,r),n.elementType=ca,n.lanes=o,n;case fp:return Ai(t,r,o,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pp:i=10;break e;case gp:i=9;break e;case pc:i=11;break e;case gc:i=14;break e;case Ft:i=16,s=null;break e}throw Error(T(130,n==null?n:typeof n,""))}return e=Ge(i,t,e,r),e.elementType=n,e.type=s,e.lanes=o,e}function _n(n,e,t,s){return n=Ge(7,n,s,e),n.lanes=t,n}function Ai(n,e,t,s){return n=Ge(22,n,s,e),n.elementType=fp,n.lanes=t,n.stateNode={isHidden:!1},n}function Pl(n,e,t){return n=Ge(6,n,null,e),n.lanes=t,n}function Fl(n,e,t){return e=Ge(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function A0(n,e,t,s,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Qc(n,e,t,s,r,o,i,l,c){return n=new A0(n,e,t,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Ge(3,null,null,e),n.current=o,o.stateNode=n,o.memoizedState={element:s,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ac(o),n}function D0(n,e,t){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Fn,key:s==null?null:""+s,children:n,containerInfo:e,implementation:t}}function af(n){if(!n)return Xt;n=n._reactInternals;e:{if(Nn(n)!==n||n.tag!==1)throw Error(T(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(xe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(T(171))}if(n.tag===1){var t=n.type;if(xe(t))return ig(n,t,e)}return e}function cf(n,e,t,s,r,o,i,l,c){return n=Qc(t,s,!0,n,r,o,i,l,c),n.context=af(null),t=n.current,s=fe(),r=Wt(t),o=Et(s,r),o.callback=e!=null?e:null,Kt(t,o,r),n.current.lanes=r,xr(n,r,s),Te(n,s),n}function Di(n,e,t,s){var r=e.current,o=fe(),i=Wt(r);return t=af(t),e.context===null?e.context=t:e.pendingContext=t,e=Et(o,i),e.payload={element:n},s=s===void 0?null:s,s!==null&&(e.callback=s),n=Kt(r,e,i),n!==null&&(rt(n,r,i,o),Lo(n,r,i)),i}function pi(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Oh(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function Xc(n,e){Oh(n,e),(n=n.alternate)&&Oh(n,e)}function P0(){return null}var uf=typeof reportError=="function"?reportError:function(n){console.error(n)};function qc(n){this._internalRoot=n}Pi.prototype.render=qc.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(T(409));Di(n,e,null,null)};Pi.prototype.unmount=qc.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;En(function(){Di(null,n,null,null)}),e[Tt]=null}};function Pi(n){this._internalRoot=n}Pi.prototype.unstable_scheduleHydration=function(n){if(n){var e=Hp();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Rt.length&&e!==0&&e<Rt[t].priority;t++);Rt.splice(t,0,n),t===0&&Up(n)}};function Zc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Fi(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Rh(){}function F0(n,e,t,s,r){if(r){if(typeof s=="function"){var o=s;s=function(){var u=pi(i);o.call(u)}}var i=cf(e,s,n,0,null,!1,!1,"",Rh);return n._reactRootContainer=i,n[Tt]=i.current,lr(n.nodeType===8?n.parentNode:n),En(),i}for(;r=n.lastChild;)n.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=pi(c);l.call(u)}}var c=Qc(n,0,!1,null,null,!1,!1,"",Rh);return n._reactRootContainer=c,n[Tt]=c.current,lr(n.nodeType===8?n.parentNode:n),En(function(){Di(e,c,t,s)}),c}function Oi(n,e,t,s,r){var o=t._reactRootContainer;if(o){var i=o;if(typeof r=="function"){var l=r;r=function(){var c=pi(i);l.call(c)}}Di(e,i,n,r)}else i=F0(t,e,n,r,s);return pi(i)}Rp=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Os(e.pendingLanes);t!==0&&(_c(e,t|1),Te(e,q()),(R&6)===0&&(us=q()+500,en()))}break;case 13:En(function(){var s=Nt(n,1);if(s!==null){var r=fe();rt(s,n,1,r)}}),Xc(n,1)}};yc=function(n){if(n.tag===13){var e=Nt(n,134217728);if(e!==null){var t=fe();rt(e,n,134217728,t)}Xc(n,134217728)}};Bp=function(n){if(n.tag===13){var e=Wt(n),t=Nt(n,e);if(t!==null){var s=fe();rt(t,n,e,s)}Xc(n,e)}};Hp=function(){return H};zp=function(n,e){var t=H;try{return H=n,e()}finally{H=t}};va=function(n,e,t){switch(e){case"input":if(da(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var s=t[e];if(s!==n&&s.form===n.form){var r=Ni(s);if(!r)throw Error(T(90));_p(s),da(s,r)}}}break;case"textarea":vp(n,t);break;case"select":e=t.value,e!=null&&Qn(n,!!t.multiple,e,!1)}};Np=Kc;Mp=En;var O0={usingClientEntryPoint:!1,Events:[Nr,zn,Ni,xp,Tp,Kc]},Ms={findFiberByHostInstance:hn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},R0={bundleType:Ms.bundleType,version:Ms.version,rendererPackageName:Ms.rendererPackageName,rendererConfig:Ms.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lt.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Lp(n),n===null?null:n.stateNode},findFiberByHostInstance:Ms.findFiberByHostInstance||P0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eo.isDisabled&&eo.supportsFiber)try{wi=eo.inject(R0),ht=eo}catch{}}Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O0;Pe.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zc(e))throw Error(T(200));return D0(n,e,null,t)};Pe.createRoot=function(n,e){if(!Zc(n))throw Error(T(299));var t=!1,s="",r=uf;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Qc(n,1,!1,null,null,t,!1,s,r),n[Tt]=e.current,lr(n.nodeType===8?n.parentNode:n),new qc(e)};Pe.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(T(188)):(n=Object.keys(n).join(","),Error(T(268,n)));return n=Lp(e),n=n===null?null:n.stateNode,n};Pe.flushSync=function(n){return En(n)};Pe.hydrate=function(n,e,t){if(!Fi(e))throw Error(T(200));return Oi(null,n,e,!0,t)};Pe.hydrateRoot=function(n,e,t){if(!Zc(n))throw Error(T(405));var s=t!=null&&t.hydratedSources||null,r=!1,o="",i=uf;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),e=cf(e,null,n,1,t!=null?t:null,r,!1,o,i),n[Tt]=e.current,lr(n),s)for(n=0;n<s.length;n++)t=s[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new Pi(e)};Pe.render=function(n,e,t){if(!Fi(e))throw Error(T(200));return Oi(null,n,e,!1,t)};Pe.unmountComponentAtNode=function(n){if(!Fi(n))throw Error(T(40));return n._reactRootContainer?(En(function(){Oi(null,null,n,!1,function(){n._reactRootContainer=null,n[Tt]=null})}),!0):!1};Pe.unstable_batchedUpdates=Kc;Pe.unstable_renderSubtreeIntoContainer=function(n,e,t,s){if(!Fi(t))throw Error(T(200));if(n==null||n._reactInternals===void 0)throw Error(T(38));return Oi(n,e,t,!1,s)};Pe.version="18.2.0-next-9e3b772b8-20220608";(function(n){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}e(),n.exports=Pe})(ap);const B0=ep(ap.exports);class ve{static out(e,t){const s="["+e+"] "+t;console&&typeof console.log=="function"&&console.log.call(s)}static error(e,t,s=null){ve.out(e,(s?s.message+" : ":"")+t)}}const H0="_app_container_bsenh_53",z0="_app_bar_bsenh_69",U0="_app_content_bsenh_69",to={app_container:H0,app_bar:z0,app_content:U0},V0="_app_content_1myu4_2",G0="_app_viewport_1myu4_14",$0="_app_drawer_1myu4_37",K0="_drawer_handle_1myu4_111",j0="_drawer_content_1myu4_147",W0="_drawer_content_bar_1myu4_157",Y0="_drawer_tab_expander_1myu4_191",Q0="_drawer_tab_1myu4_191",X0="_disabled_1myu4_255",q0="_drawer_content_panel_container_1myu4_313",Z0="_drawer_content_panel_1myu4_313",J0="_drawer_panel_container_1myu4_331",e1="_drawer_panel_1myu4_331",Oe={app_content:V0,app_viewport:G0,app_drawer:$0,drawer_handle:K0,drawer_content:j0,drawer_content_bar:W0,drawer_tab_expander:Y0,drawer_tab:Q0,disabled:X0,drawer_content_panel_container:q0,drawer_content_panel:Z0,drawer_panel_container:J0,drawer_panel:e1},t1="_icon_button_1vh4g_1",n1={icon_button:t1};var Jc={exports:{}},Ri={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1=Ci.exports,r1=Symbol.for("react.element"),o1=Symbol.for("react.fragment"),i1=Object.prototype.hasOwnProperty,l1=s1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a1={key:!0,ref:!0,__self:!0,__source:!0};function hf(n,e,t){var s,r={},o=null,i=null;t!==void 0&&(o=""+t),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(i=e.ref);for(s in e)i1.call(e,s)&&!a1.hasOwnProperty(s)&&(r[s]=e[s]);if(n&&n.defaultProps)for(s in e=n.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:r1,type:n,key:o,ref:i,props:r,_owner:l1.current}}Ri.Fragment=o1;Ri.jsx=hf;Ri.jsxs=hf;(function(n){n.exports=Ri})(Jc);const a=Jc.exports.jsx,C=Jc.exports.jsxs;class D extends S.Component{constructor(e){super(e)}render(){const{refButton:e,title:t,className:s,...r}=this.props,o=D.SHOW_LABEL&&t;return C("button",{...r,ref:e,className:n1.icon_button+(o?" hint ":"")+" "+s,title:t,children:[this.props.children,a("label",{children:t})]})}}D.SHOW_LABEL=!1;class c1 extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})})}}const Ro="--drawer-width",u1=6,Bh=32,Ol=128,Hh=200,h1=200,zh=300,d1=!1,Rl="full",p1="min",Bs="bottom",df="right",pf="vertical",gf="horizontal";class g1 extends S.Component{constructor(e){super(e),this.ref=null,this.drawerElement=null,this.state={open:!1,tabIndex:0,soloClass:null,viewportColor:null},this._handlingGrab=!1,this._handlingResize=!1,this._isfull=!1,this._hasintent=!1,this._prevWidth=Hh,this._resizeTimeout=null,this._resizeEndTimeout=null,this._sideways=!1,this.onDrawerHandleGrab=this.onDrawerHandleGrab.bind(this),this.onDrawerHandleRelease=this.onDrawerHandleRelease.bind(this),this.onDrawerHandleMove=this.onDrawerHandleMove.bind(this),this.onDrawerExpand=this.onDrawerExpand.bind(this),this.onWindowResize=this.onWindowResize.bind(this)}componentDidMount(){window.addEventListener("resize",this.onWindowResize,!1)}componentWillUnmount(){window.removeEventListener("resize",this.onWindowResize)}openDrawer(e=!1,t=null){e&&this.setDrawerWidth(Rl,!0),this.state.open||this.setState({open:!0},t)}closeDrawer(e=null){this.state.open&&this.setState({open:!1},e)}toggleDrawer(e=null){this.setState((t,s)=>({open:!t.open}),e)}isDrawerOpen(){return this.state.open}isDrawerFullscreen(){return this._isfull}setCurrentTab(e){!this.props.panels||(e>=this.props.panels.length&&(e=0),this.state.open&&this.state.tabIndex===e?this._isfull?this.setDrawerWidth(this._prevWidth):this.setDrawerWidth(Rl,!0):this.setState({open:!0,tabIndex:e}))}getCurrentTabIndex(){return this.state.tabIndex}isCurrentTab(e){return this.state.tabIndex===e}setViewportColor(e){this.setState({viewportColor:e})}getViewportColor(){return this.state.viewportColor}setDrawerSoloClass(e,t=null){this.setState({soloClass:e},t)}setDrawerWidth(e,t=!0){if(!this.drawerElement||!this.ref)return;this._hasintent=t;const s=this.props.side,r=this.ref.getBoundingClientRect().top,i=s===Bs?document.documentElement.clientHeight-r:document.documentElement.clientWidth,l=Hh;if(typeof e=="string")switch(e){case Rl:this._isfull=!0,this._prevWidth=no(this.drawerElement);break;case p1:this._isfull=!1,this.drawerElement.style.setProperty(Ro,l+"px");break;default:throw new Error("Trying to set drawer width to invalid string")}else if(typeof e=="number")e<l+Bh&&(e=l),e>i-Ol?(e=i,this._isfull=!0):this._isfull=!1,this.drawerElement.style.setProperty(Ro,e+"px");else throw new Error("Trying to set drawer width to unknown value")}onDrawerExpand(){this.state.open&&this._isfull?(this.setDrawerWidth(this._prevWidth),this._isfull&&this.toggleDrawer()):this.toggleDrawer()}onWindowResize(e){this._resizeTimeout||(this._resizeTimeout=setTimeout(()=>{if(this._resizeTimeout=null,this._resizeEndTimeout?clearTimeout(this._resizeEndTimeout):this._handlingResize=!0,this._resizeEndTimeout=setTimeout(()=>{this._resizeEndTimeout=null,this._handlingResize=!1},500),!this.drawerElement||!this.ref)return;const t=this.props.side,s=this.ref.getBoundingClientRect().top,o=t===Bs?document.documentElement.clientHeight-s:document.documentElement.clientWidth;if(this._isfull){if(this._hasintent)return;this._prevWidth+Ol<o&&(this._isfull=!1,this.drawerElement.style.setProperty(Ro,this._prevWidth+"px"))}else no(this.drawerElement)+Ol>o&&(this._isfull=!0,this._hasintent=!1)},h1))}onDrawerHandleGrab(e){!this._handlingGrab&&this.state.open?(this._handlingGrab=!0,this._prevWidth=no(this.drawerElement),document.addEventListener("mouseup",this.onDrawerHandleRelease),document.addEventListener("mousemove",this.onDrawerHandleMove)):this.onDrawerHandleRelease(e)}onDrawerHandleRelease(e){this._handlingGrab&&(document.removeEventListener("mouseup",this.onDrawerHandleRelease),document.removeEventListener("mousemove",this.onDrawerHandleMove),this._handlingGrab=!1,this._prevWidth=no(this.drawerElement))}onDrawerHandleMove(e){const s=this.props.side===Bs,r=s?document.documentElement.clientHeight:document.documentElement.clientWidth,o=s?e.clientY:e.clientX;let i=r-o+u1;!s&&Math.abs(i-zh)<Bh&&(i=zh),this.setDrawerWidth(i)}render(){const e=this.props.panels,t=this.props.side||df,s=this.props.direction||gf,r=this.props.hide||!1,o=this.state.soloClass,i=this.state.open,l=t===Bs,c=!l&&(!i||s===pf),u=i||this._handlingGrab,h=this._isfull,d=this._handlingGrab||this._handlingResize||!i,p=i||!d1;this._sideways=c;let v={};return this.state.viewportColor!==null&&(v.outlineColor=this.state.viewportColor),C("div",{ref:m=>this.ref=m,id:this.props.id,className:Oe.app_content+(l?" column ":"")+(" "+this.props.className),style:this.props.style,children:[a("div",{className:Oe.app_viewport,style:v,children:this.props.children}),C("div",{ref:m=>this.drawerElement=m,className:Oe.app_drawer+(i?" open ":"")+(c?" drawer-bar-sideways ":"")+(l?" drawer-side-bottom ":"")+(h?" full ":"")+(d?" hide-content ":"")+(this._handlingResize?" no-animation ":"")+(r?" hide ":""),children:[a("div",{className:Oe.drawer_handle+(u?" show ":""),onMouseDown:this.onDrawerHandleGrab,children:a("span",{children:"||"})}),C("div",{className:Oe.drawer_content,children:[C("nav",{className:Oe.drawer_content_bar,children:[a(D,{className:Oe.drawer_tab_expander,onClick:this.onDrawerExpand,children:a(c1,{})}),p&&e&&e.map((m,y)=>{if(!m||!m.TITLE)return null;const w=m.TITLE,f=this.isCurrentTab(y),g=o&&o!==m;return a("a",{className:Oe.drawer_tab+(f?" active ":"")+(g?" disabled ":""),onClick:()=>this.setCurrentTab(y),children:a("label",{children:w})},w+":"+y)})]}),a("div",{className:Oe.drawer_content_panel_container,children:a("div",{className:Oe.drawer_content_panel,children:e&&e.map((m,y)=>{if(!m)return null;const w=m,f=m.TITLE||"",g=this.isCurrentTab(y),_=o&&o!==m;return a("div",{className:Oe.drawer_panel_container+(g?"":" hide ")+(_?" disabled ":""),children:a(w,{className:Oe.drawer_panel,...this.props.panelProps,drawer:this})},f+":"+y)})})})]})]})]})}}function no(n){return parseInt(window.getComputedStyle(n).getPropertyValue(Ro).replace(/\D/g,""))}const f1="_app_bar_127zj_2",m1="_bar_menu_127zj_54",_1="_menu_container_127zj_71",y1="_menu_button_container_127zj_81",v1="_bar_toolbar_127zj_150",S1="_toolbar_button_container_127zj_158",C1="_toolbar_title_127zj_177",w1="_toolbar_expander_127zj_190",mt={app_bar:f1,bar_menu:m1,menu_container:_1,"toolbar-view-slidein-child":"_toolbar-view-slidein-child_127zj_1",menu_button_container:y1,"toolbar-view-slidein":"_toolbar-view-slidein_127zj_1",bar_toolbar:v1,toolbar_button_container:S1,toolbar_title:C1,toolbar_expander:w1},E1="_toolbar_button_nsmuk_1",ff={toolbar_button:E1},Hs="menu",kn="toolbar";class _t extends S.Component{constructor(e){super(e)}render(){const e=this.props.icon;return a(D,{id:this.props.id,className:ff.toolbar_button+" "+this.props.className,style:this.props.style,title:this.props.title,disabled:this.props.disabled,onClick:this.props.onClick,children:a(e,{})})}}const x1="_title_container_1egvx_1",T1="_title_input_container_1egvx_8",N1="_title_label_1egvx_37",M1="_title_subtitle_1egvx_70",b1="_offline_status_1egvx_78",bs={title_container:x1,title_input_container:T1,title_label:N1,title_subtitle:M1,offline_status:b1},I1="Enter",L1="Escape",k1="none",A1="save",D1="reset";class eu extends S.Component{constructor(e){super(e),this.element=null,this.ignoreSaveOnExit=!1;const t=e.defaultValue||"";this.state={value:t,prevValue:t},this.onChange=this.onChange.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}componentWillReceiveProps(e){this.hasFocus()||(!this.state.value||this.state.value.length<=0||this.state.value===this.props.defaultValue)&&this.setState({value:e.defaultValue})}get value(){return this.state.value}focus(e=!1){e?this.element.select():this.element.focus()}blur(){this.element.blur()}hasFocus(){return this.element===document.activeElement}onChange(e){if(this.props.filter){const t=e.target.value.replace(this.props.filter,"");this.setState({value:t})}else this.setState({value:e.target.value})}onBlur(e){if(this.ignoreSaveOnExit||this.props.captureOnExit===k1){const t=this.formatValue(e.target.value);this.setState({value:t}),this.ignoreSaveOnExit=!1}else if(this.props.captureOnExit===A1){const t=this.state.prevValue,s=e.target.value||this.props.defaultValue||"";this.resetValue(s,()=>{this.props.onSubmit&&this.props.onSubmit(s,t)})}else this.props.captureOnExit===D1&&this.resetValue(null)}onKeyUp(e){if(e.key===I1){if(this.props.multiline&&e.shiftKey)return!0;const t=this.state.prevValue,s=e.target.value||this.props.defaultValue||"";return this.setValue(s,()=>{this.ignoreSaveOnExit=!0,this.props.onSubmit&&this.props.onSubmit(s,t),this.element.blur()}),e.preventDefault(),e.stopPropagation(),!1}else if(e.key===L1){const t=this.state.prevValue;return this.resetValue(t,()=>{this.ignoreSaveOnExit=!0,this.props.onSubmit&&this.props.onSubmit(t||"",t),this.element.blur()}),e.preventDefault(),e.stopPropagation(),!1}}resetValue(e=null,t=null){if(e!==null){const s=this.formatValue(e);this.setState({value:s,prevValue:e},t)}else this.setState((s,r)=>({value:this.formatValue(s.prevValue)}),t)}setValue(e,t){!e||e.length==0?e=this.props.defaultValue||"":e=this.formatValue(e),this.setState({value:e},t)}appendValue(e,t=","){let s=this.state.value;this.element.selectionStart==0&&this.element.selectionEnd==e.length||!s||s.length==0?s=e:s=s+t+e,this.props.filter&&(s=s.replace(this.props.filter,"")),this.setState({value:this.formatValue(s)})}formatValue(e){const t=this.props.formatter;return(t?t(e):e)||""}render(){return this.props.multiline?a("textarea",{id:this.props.id,className:this.props.className,style:this.props.style,ref:e=>this.element=e,type:"text",value:this.state.value,rows:"1",onChange:this.onChange,onBlur:this.onBlur,onKeyUp:this.onKeyUp}):a("input",{id:this.props.id,className:this.props.className,style:this.props.style,ref:e=>this.element=e,type:"text",value:this.state.value,onChange:this.onChange,onBlur:this.onBlur,onKeyUp:this.onKeyUp})}}class P1 extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M12 2.02c-5.51 0-9.98 4.47-9.98 9.98s4.47 9.98 9.98 9.98 9.98-4.47 9.98-9.98S17.51 2.02 12 2.02zM11.48 20v-6.26H8L13 4v6.26h3.35L11.48 20z"})})}}class F1 extends S.Component{constructor(e){super(e),this.inputElement=null,this.onSubmit=this.onSubmit.bind(this)}setTitle(e){this.inputElement.resetValue(e)}getTitle(){return this.inputElement.value}onSubmit(e,t){e!==t&&this.props.onChange&&this.props.onChange(e)}render(){const e=this.props.title,t=this.props.subtitle,s=!(navigator&&navigator.onLine),r=this.props.onClick;return C("div",{id:this.props.id,className:bs.title_container+" "+this.props.className,style:this.props.style,children:[C("span",{className:bs.title_input_container,children:[a(eu,{ref:o=>this.inputElement=o,defaultValue:this.props.defaultValue,onSubmit:this.onSubmit}),s&&a(P1,{className:bs.offline_status})]}),C("div",{className:bs.title_label,onClick:r,children:[e,t&&a("span",{className:bs.title_subtitle,onClick:o=>o.stopPropagation(),children:a(t,{})})]})]})}}class O1 extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"})})}}class Bi extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}}const R1=!0,so=-1;class B1 extends S.Component{constructor(e){super(e),this.ref=null,this.toolbarElement=null,this.state={open:!1,menuIndex:so},this.onBarExpand=this.onBarExpand.bind(this),this.onTitleChange=this.onTitleChange.bind(this)}openBar(e=null){this.state.open||this.setState({open:!0,menuIndex:so},e)}closeBar(e=null){this.state.open&&this.setState({open:!1,menuIndex:so},e)}toggleBar(e=null){this.setState((t,s)=>({open:!t.open}),e)}isBarOpen(){return this.state.open}setCurrentMenu(e){!this.props.menus||(e>=this.props.menus.length&&(e=so),this.setState({open:!0,menuIndex:e}))}getCurrentMenuIndex(){return this.state.menuIndex}isCurrentMenu(e){return this.state.menuIndex===e}onBarExpand(e){this.toggleBar()}onTitleChange(e){this.props.session.setProjectName(e)}renderMenuButtons(e){return S.Children.map(e,t=>{if(t.props.containerOnly!==kn)return t})}renderToolbarButtons(e){return S.Children.map(e,t=>{if(t.props.containerOnly!==Hs)return t})}render(){const e=this.props.title,t=this.props.subtitle,s=this.props.menus,r=this.state.menuIndex,o=r>=0?s[r]:null,i=o!=null,l=this.props.onTitleClick,c=this.props.session,u=S.Children.count(this.props.children)>0,h=this.state.open,d=this.props.hide||!1,p=h||u&&R1;return C("div",{ref:v=>this.ref=v,id:this.props.id,className:mt.app_bar+(h?" open ":"")+(d?" hide ":"")+" "+this.props.className,style:this.props.style,children:[C("div",{className:mt.bar_menu,children:[a("div",{className:mt.menu_container,children:i?a(o,{...this.props.menuProps,toolbar:this}):C("div",{style:{display:"flex",flexDirection:"column"},children:[C("div",{children:[a("h1",{children:"Flap.js"}),a("p",{children:"Something cool will be here soon. ;)"}),a("p",{children:"Have an awesome day!"})]}),C("div",{children:[a("h3",{children:"Found a bug or have a cool idea?"}),C("p",{children:["Feel free to leave a comment or any feedback in ",C("b",{children:['"',"Report a Bug",'"']}),"."]}),C("p",{children:["It","'","s for both ",a("b",{children:"bugs"})," and ",a("b",{children:"suggestions"}),"!"]}),a("p",{style:{marginTop:"3em"},children:"And if you are at all interested in what we do and would like to join the team, please contact us!"})]})]})}),a("div",{className:mt.menu_button_container,children:this.renderMenuButtons(this.props.children)})]}),C("div",{ref:v=>this.toolbarElement=v,className:mt.bar_toolbar,children:[a(F1,{className:mt.toolbar_title,title:e,subtitle:t,defaultValue:c.getProjectName(),onChange:this.onTitleChange,onClick:l}),a("div",{className:mt.toolbar_button_container,children:this.renderToolbarButtons(this.props.children)}),p&&h?a(D,{className:mt.toolbar_expander,onClick:this.onBarExpand,title:"Back",children:a(Bi,{})}):a(D,{className:mt.toolbar_expander,onClick:this.onBarExpand,title:"Menu",children:a(O1,{})})]})]})}}const H1="_tooltip_container_1jfvq_1",z1={tooltip_container:H1},U1=3e4,Uh="random",gi="oneshot";class V1 extends S.Component{constructor(e){super(e),this._tooltipTimeout=null,this.state={index:e.initial||0}}componentWillUnmount(){clearTimeout(this._tooltipTimeout),this._tooltipTimeout=null}setTooltipIndex(e){this.setState({index:e})}getTooltipIndex(){return this.state.index}updateTooltip(){const e=this.props.mode,t=this.props.visible;if(this._tooltipTimeout=null,t){const s=S.Children.count(this.props.children);let r=this.state.index+1;e===Uh?r=Math.floor(Math.random()*s):e===gi?r>=s&&(r=s-1):r>=s&&(r=0),this.setTooltipIndex(r)}else e===Uh?this.setTooltipIndex(Math.floor(Math.random()*S.Children.count(this.props.children))):e===gi?this.setTooltipIndex(S.Children.count(this.props.children)-1):this.setTooltipIndex(0)}render(){const e=this.props.visible,t=this.state.index;return e&&!this._tooltipTimeout&&(this._tooltipTimeout=setTimeout(()=>{this.updateTooltip()},U1)),a("div",{id:this.props.id,className:z1.tooltip_container+(e?" visible ":"")+" "+this.props.className,style:this.props.style,children:S.Children.map(this.props.children,(s,r)=>a("label",{style:{opacity:t===r?1:0},children:s}))})}}const G1="_upload_container_1y9n9_1",$1="_upload_icon_1y9n9_14",Vh={upload_container:G1,upload_icon:$1};class br extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z"})})}}class K1 extends S.Component{constructor(e){super(e),this.ref=null,this._waiting=!1,this.onDragEnter=this.onDragEnter.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onFileDrop=this.onFileDrop.bind(this)}componentDidMount(){this.ref.addEventListener("drop",this.onFileDrop),this.ref.addEventListener("dragover",this.onDragEnter),this.ref.addEventListener("dragenter",this.onDragEnter),this.ref.addEventListener("dragleave",this.onDragLeave),this.ref.addEventListener("dragend",this.onDragLeave)}componentWillUnmount(){this.ref.removeEventListener("drop",this.onFileDrop),this.ref.removeEventListener("dragover",this.onDragEnter),this.ref.removeEventListener("dragenter",this.onDragEnter),this.ref.removeEventListener("dragleave",this.onDragLeave),this.ref.removeEventListener("dragend",this.onDragLeave)}onDragEnter(e){e.preventDefault(),e.stopPropagation(),this._waiting=!0}onDragLeave(e){e.preventDefault(),e.stopPropagation(),this._waiting=!1}onFileDrop(e){e.preventDefault(),e.stopPropagation(),this._waiting=!1;const t=e.dataTransfer;let s=null;if(t.items){const r=t.items;if(r.length>=1){const i=r[0];i.kind==="file"&&(s=i.getAsFile())}}else{const r=t.files;r.length>=1&&(s=r[0])}this.props.onFileDrop&&this.props.onFileDrop(s),t.items?t.items.clear():t.clearData()}render(){const e=this._waiting;return C("div",{ref:t=>this.ref=t,id:this.props.id,className:Vh.upload_container+(e?" waiting ":"")+" "+this.props.className,style:this.props.style,children:[a(br,{className:Vh.upload_icon}),S.Children.only(this.props.children)]})}}const j1="_notifications_container_c8g0b_1",W1={notifications_container:j1},Y1="_notification_container_1m8f8_1",mf={notification_container:Y1},Q1="default",Hi="warning",ys="error",X1="success";class Ie extends S.Component{constructor(e){super(e)}render(){const e=this.props.message,t=this.props.notification;return C("div",{id:this.props.id,className:mf.notification_container+" "+this.props.styleType+" "+this.props.className,style:this.props.style,children:[e&&e.split(`
`).map((s,r)=>a("p",{children:s},s+":"+r)),this.props.children,t&&a("button",{onClick:s=>t.close(),children:I18N.toString("message.action.close")})]})}}class q1 extends S.Component{constructor(e){super(e)}render(){const e=this.props.notificationManager;return a("div",{id:this.props.id,className:W1.notifications_container+" "+this.props.className,style:this.props.style,children:e.getNotifications().map(t=>{const s=t.getLayoutID(),r=s?e.getNotificationLayout(s):Ie;return a(r,{notification:t,message:t.getMessage(),...t.getProps()},t.getID())})})}}const Z1="_fullscreen_button_17n49_1",J1={fullscreen_button:Z1};class ey extends S.Component{constructor(e){super(e),this.state={index:e.initial||0},this.onClick=this.onClick.bind(this)}onClick(e){const t=this.state.index;this.setState((s,r)=>{const o=S.Children.count(r.children);let i=s.index+1;return i>=o&&(i=0),{index:i}},()=>{this.props.onClick&&this.props.onClick(e,t)})}setStateIndex(e){this.setState({index:e})}getStateIndex(){return this.state.index}render(){const e=S.Children.map(this.props.children,(t,s)=>{if(s===this.state.index)return t})[0];return a(D,{id:this.props.id,className:this.props.className,style:this.props.style,title:this.props.title,disabled:this.props.disabled,onClick:this.onClick,children:e})}}class ty extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"})})}}class ny extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"})})}}class sy extends S.Component{constructor(e){super(e)}render(){const e=this.props.app;return C(ey,{id:this.props.id,className:J1.fullscreen_button+" "+this.props.className,style:this.props.style,title:"Fullscreen Mode",onClick:(t,s)=>e.setState({hide:s===0}),children:[a(ty,{}),a(ny,{})]})}}const ry="_panel_container_170zk_1",oy="_panel_title_170zk_4",iy="_panel_content_170zk_13",ly="_panel_button_170zk_17",ro={panel_container:ry,panel_title:oy,panel_content:iy,panel_button:ly};class ay{constructor(){}exportTarget(e,t){return Promise.resolve({name:"untitled.json",type:"text",data:JSON.stringify(t)})}getIconClass(){return null}getLabel(){return"Export"}getTitle(){return"Export"}}const cy="@flapjs/webapp",uy="0.6.0",hy="module",dy={start:"vite",build:"vite build",preview:"vite preview",deploy:"vite build; node ./tools/deploy.js"},py={react:"~18.2.0","react-dom":"~18.2.0"},gy={"@types/react":"~18.0.17","@types/react-dom":"~18.0.6","@vitejs/plugin-react":"~2.1.0",vite:"~3.1.0","gh-pages":"~4.0.0"},fy={name:cy,private:!0,version:uy,type:hy,scripts:dy,dependencies:py,devDependencies:gy},Ir=fy.version,my="production";class Mn extends ay{constructor(e){super(),this._fileType=e}onExportSession(e,t){}onPostExportSession(e,t){const s=e.getCurrentModule();t._metadata={name:e.getProjectName(),module:s.getModuleName(),version:Ir+":"+s.getModuleVersion(),timestamp:new Date().toString()}}onStringifySession(e,t){return JSON.stringify(t)}exportTarget(e,t){return new Promise((s,r)=>{const o=t;try{let i={};this.onExportSession(o,i),this.onPostExportSession(o,i),i=this.onStringifySession(o,i),s({name:o.getProjectName()+this._fileType,type:"text",data:i})}catch(i){r(i)}})}}class _y extends S.Component{constructor(e){super(e)}renderExporterButton(e){const t=this.props.session.getApp().getExportManager().getExporterByExportType(e);if(!(t instanceof Mn))return a("span",{});const s=t.getIconClass();return a(D,{className:ro.panel_button,title:t.getLabel(),onClick:()=>this.props.session.getApp().getExportManager().tryExportFile(e,this.props.session),children:s&&a(s,{})},t.getLabel()+":"+e)}render(){const s=this.props.session.getApp().getExportManager().getExportTypes();return C("div",{id:this.props.id,className:ro.panel_container+" "+this.props.className,style:this.props.style,children:[a("div",{className:ro.panel_title,children:a("h1",{children:I18N.toString("component.exporting.title")})}),a("div",{className:ro.panel_content,children:s.map(r=>this.renderExporterButton(r))})]})}}const yy="_input_option_wj0ek_1",vy="_version_wj0ek_4",Gh={input_option:yy,version:vy,"fade-in":"_fade-in_wj0ek_1"},qt={clear(){!this.isSupported()||localStorage.clear()},setData(n,e){if(!this.isSupported())return;let t;typeof document.hidden<"u"?t="hidden":typeof document.msHidden<"u"?t="msHidden":typeof document.webkitHidden<"u"&&(t="webkitHidden"),!document[t]&&(e?localStorage.setItem(n,e):localStorage.removeItem(n))},getData(n,e=null){return this.isSupported()&&localStorage.getItem(n)||e},setDataAsObject(n,e){try{e&&Object.keys(e).length>0?this.setData(n,JSON.stringify(e)):this.setData(n,null)}catch(t){console.error(t)}},getDataAsObject(n,e=null){const t=this.getData(n,null);if(t)try{return JSON.parse(t)}catch(s){return console.error(s),e}else return e},isSupported(){return typeof localStorage<"u"}};class Sy extends S.Component{constructor(e){super(e),this.onChange=this.onChange.bind(this)}onChange(e){const t=e.target.value;this.props.value.setValue(t)}render(){const e=this.props.title,t=this.props.value,s=t.getName(),r=t.getValue(),o="styleopt-"+s;return C("span",{id:this.props.id,className:this.props.className,style:this.props.style,children:[a("input",{id:o,type:"color",value:r,onChange:this.onChange,disabled:this.props.disabled}),a("label",{htmlFor:o,children:e})]})}}const Cy="_panel_container_1bv5y_1",wy="_panel_title_1bv5y_3",Ey="_panel_content_1bv5y_16",xy="_panel_bottom_1bv5y_20",oo={panel_container:Cy,panel_title:wy,panel_content:Ey,panel_bottom:xy};class de extends S.Component{constructor(e){super(e)}render(){const e=this.props.title;return C("div",{id:this.props.id,className:oo.panel_container+" "+this.props.className,style:this.props.style,children:[a("div",{className:oo.panel_title,children:a("h1",{children:e})}),a("div",{className:oo.panel_content,children:this.props.children}),a("div",{className:oo.panel_bottom})]})}}const Ty="_section_container_1l6l4_1",Ny="_section_header_1l6l4_4",My="_section_content_container_1l6l4_41",by="_section_content_1l6l4_41",io={section_container:Ty,section_header:Ny,section_content_container:My,section_content:by,"panel-section-slidein":"_panel-section-slidein_1l6l4_1"};class Iy extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M7 10l5 5 5-5z"})})}}class Ly extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M7 14l5-5 5 5z"})})}}class oe extends S.Component{constructor(e){super(e),this.state={open:e.initial||!1},this.onClick=this.onClick.bind(this)}onClick(e){this.setState((t,s)=>({open:!t.open}))}componentDidUpdate(){this.state.open&&this.props.disabled&&this.setState({open:!1})}render(){const e=this.state.open,t=this.props.disabled||S.Children.count(this.props.children)<=0,s=this.props.full,r=this.props.title;return C("section",{id:this.props.id,className:io.section_container+" "+this.props.className,style:this.props.style,children:[a(D,{className:io.section_header,title:r,disabled:t,onClick:this.onClick,children:e?a(Ly,{}):a(Iy,{})}),a("div",{className:io.section_content_container+(e?" open ":"")+(s?" full ":""),children:a("div",{className:io.section_content,children:this.props.children})})]})}}const ky="_switch_container_1fjij_1",Ay="_switch_label_1fjij_10",Dy="_panel_switch_1fjij_19",Py="_switch_slider_1fjij_37",lo={switch_container:ky,switch_label:Ay,panel_switch:Dy,switch_slider:Py};class ot extends S.Component{constructor(e){if(super(e),!e.id)throw new Error("Must specify id")}render(){const e=this.props.id,t=this.props.disabled,s=this.props.checked,r=this.props.onChange;return C("div",{id:e,className:lo.switch_container+(t?" disabled ":"")+(s?" active ":"")+" "+this.props.className,style:this.props.style,children:[C("label",{className:lo.panel_switch,style:this.props.style,children:[a("input",{type:"checkbox",id:e+"-switch",checked:s,onChange:r,disabled:t}),a("div",{className:lo.switch_slider})]}),a("label",{className:lo.switch_label,htmlFor:e+"-switch",children:this.props.title})]})}}const Fy="_button_container_1sddk_1",Oy={button_container:Fy};class $h extends S.Component{constructor(e){super(e)}render(){return a("button",{id:this.props.id,className:Oy.button_container+" "+this.props.className,style:this.props.style,onClick:this.props.onClick,children:this.props.children})}}const Ry="_preview_container_k489f_1",By="_preview_app_k489f_8",Hy="_preview_toolbar_k489f_17",zy="_preview_workspace_k489f_28",Uy="_preview_viewport_k489f_34",Vy="_preview_drawer_k489f_46",Gy="_preview_notifications_k489f_59",$y="_preview_notification_info_k489f_75",Ky="_preview_notification_error_k489f_80",jy="_preview_notification_warning_k489f_85",Wy="_preview_notification_success_k489f_90",Yy="_preview_node_k489f_95",Ne={preview_container:Ry,preview_app:By,preview_toolbar:Hy,preview_workspace:zy,preview_viewport:Uy,preview_drawer:Vy,preview_notifications:Gy,preview_notification_info:$y,preview_notification_error:Ky,preview_notification_warning:jy,preview_notification_success:Wy,preview_node:Yy};class Qy extends S.Component{constructor(e){super(e)}render(){return a("div",{id:this.props.id,className:Ne.preview_container+" "+this.props.className,style:this.props.style,children:C("div",{className:Ne.preview_app,children:[a("div",{className:Ne.preview_toolbar}),C("div",{className:Ne.preview_workspace,children:[C("div",{className:Ne.preview_viewport,children:[a("div",{className:Ne.preview_node,style:{left:"25%",top:"40%"}}),a("div",{className:Ne.preview_node,style:{left:"40%",top:"40%"}})]}),C("div",{className:Ne.preview_notifications,children:[a("div",{className:Ne.preview_notification_info}),a("div",{className:Ne.preview_notification_error}),a("div",{className:Ne.preview_notification_warning}),a("div",{className:Ne.preview_notification_success})]}),a("div",{className:Ne.preview_drawer})]})]})})}}const Xy="hidden",Kh="disableExitWarning";class qy extends S.Component{constructor(e){super(e),this.state={theme:"default",customTheme:!1,exitWarning:qt.getData(Kh)==="true"},this.onChangeTheme=this.onChangeTheme.bind(this)}onChangeTheme(e){const r=this.props.session.getApp().getThemeManager(),o=this.state.theme,i=e.target.value;o!==i&&(r.loadTheme(i),this.setState({theme:i}))}renderStyleGroups(){const e=this.props.session.getApp().getThemeManager(),t=[];for(const s of e.getStyleGroupNames()){if(s===Xy)continue;const r=e.getStylesByGroup(s);t.push(a(oe,{title:I18N.toString("options.colorgroup."+s),full:!0,children:r.map(o=>a(Sy,{className:Gh.input_option,value:o,title:I18N.toString("options."+o.getName())},o.getName()))},s))}return t}render(){const t=this.props.session.getApp().getThemeManager();return C(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:I18N.toString("component.options.title"),children:[a(oe,{title:"Theme",children:C("div",{style:{display:"flex"},children:[C("div",{style:{width:"60%"},children:[C("div",{id:"options-theme-select-container",children:[C("select",{id:"options-theme-select",className:"panel-select",value:this.state.theme,onChange:this.onChangeTheme,disabled:this.state.customTheme,children:[a("option",{value:"default",children:"Default"}),a("option",{value:"ucsd",children:"UC San Diego"}),a("option",{value:"duke",children:"Duke University"}),a("option",{value:"mit",children:"MIT"})]}),!this.state.customTheme&&a($h,{onClick:()=>this.setState({customTheme:!0}),children:I18N.toString("action.options.changetheme")})]}),this.state.customTheme&&C("div",{children:[this.renderStyleGroups(),a($h,{onClick:s=>{t.reset(),this.setState({customTheme:!1})},children:I18N.toString("action.options.reset")})]})]}),a("div",{children:a(Qy,{})})]})}),a(ot,{id:"option-exitwarning",checked:this.state.exitWarning,title:I18N.toString("options.exitwarning"),onChange:s=>{const r=s.target.checked;this.setState({exitWarning:r}),qt.setData(Kh,""+r)}}),a("label",{className:Gh.version,children:`v${Ir}`})]})}}const Zy="_language_button_list_snnig_1",Jy="_language_button_snnig_1",jh={language_button_list:Zy,language_button:Jy};class ev extends S.Component{constructor(e){super(e)}renderLanguageButton(e,t){return a(D,{className:jh.language_button,title:e,onClick:s=>I18N.fetchLanguageFile(t)},t)}render(){return a(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:I18N.toString("component.language.title"),children:C("div",{className:jh.language_button_list,children:[this.renderLanguageButton("English","en_us"),this.renderLanguageButton("Pirate Speak","xx_pirate")]})})}}const tv="_module_button_list_4a9br_1",nv="_module_button_4a9br_1",Wh={module_button_list:tv,module_button:nv};function tu(n,e=!1,t=null){window.confirm(I18N.toString("alert.graph.clear"))&&(n.getCurrentModule().getGraphController().getGraph().clear(),e?n.getUndoManager().captureEvent():(n.getUndoManager().clear(),n.getSession().setProjectName(null)),t&&t())}const Le="Control",sv="Meta",rv="Alt",nu="Shift";class ov{constructor(){this._hotkeys=[],this._cachedEvent={ctrlKey:!1,metaKey:!1,altKey:!1,shiftKey:!1,code:null},this._prevHotKey=null,this._repeatCount=0,this._enabled=!1,this._altHotkey=null,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}registerHotKey(e,t,s){if(!Array.isArray(t))throw new Error("Must be an array of key codes");const r=t.indexOf(Le);r>=0&&t.splice(r,1);const o=t.indexOf(sv);o>=0&&t.splice(o,1);const i=t.indexOf(rv);i>=0&&t.splice(i,1);const l=t.indexOf(nu);if(l>=0&&t.splice(l,1),t.length!=1)throw new Error("Multiple key operations not supported");const c=t[0],u=r>=0||o>=0,h=i>=0,d=l>=0,p={name:e,localizedKeys:(u?"Ctrl + ":"")+(h?"Alt + ":"")+(d?"Shift + ":"")+c,charKey:c,ctrlKey:u,altKey:h,shiftKey:d,callback:s};return this._hotkeys.unshift(p),this}registerAltHotKey(e,t){if(this._altHotkey)throw new Error("Only one hotkey can exist for 'Alt'");return this._altHotkey={name:e,localizedKeys:"Alt",charKey:null,ctrlKey:!1,altKey:!0,shiftKey:!1,callback:t},this}onSessionStart(e){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this._enabled=!0}onSessionStop(e){this._enabled=!1,this._prevHotKey=null,this._repeatCount=0,this._hotkeys.length=0,this._altHotkey=null,window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}setEnabled(e){this._enabled=e}isEnabled(){return this._enabled}findMatchingHotKey(e){for(const t of this._hotkeys)if(Yh(e,t))return t;return null}getCurrentHotKey(){return this._prevHotKey}getCurrentHotKeyRepeatCount(){return this._repeatCount}getCurrentlyPossibleHotKeys(e=[]){const t=this._cachedEvent,s=t.ctrlKey||t.metaKey,r=t.altKey,o=t.shiftKey;if(!s&&!r&&!o)return e;const i=t.code;let l=null;for(const c of this._hotkeys){let u=!1;if(s^c.ctrlKey)if(!s)u=!0;else continue;if(r^c.altKey)if(!r)u=!0;else continue;if(o^c.shiftKey)if(!o)u=!0;else continue;!u&&i===c.charKey&&(l=c),e.push(c)}return l||e}onKeyDown(e){if(!!this._enabled&&!(document.activeElement instanceof HTMLInputElement)&&!(document.activeElement instanceof HTMLTextAreaElement)&&!document.activeElement.hasAttribute("contenteditable")&&!e.repeat){this.captureKeyEvent(e,!1);let t=this.findMatchingHotKey(this._cachedEvent);!t&&Yh(e,this._altHotkey)&&(t=this._altHotkey),t&&(this._prevHotKey===t?++this._repeatCount:(this._prevHotKey=t,this._repeatCount=0),t.callback(),e.preventDefault(),e.stopPropagation())}}onKeyUp(e){!this._enabled||this.captureKeyEvent(e,!0)&&(this._prevHotKey=null,this._repeatCount=0)}captureKeyEvent(e,t=!1){return this._cachedEvent.ctrlKey=e.ctrlKey,this._cachedEvent.metaKey=e.metaKey,this._cachedEvent.altKey=e.altKey,this._cachedEvent.shiftKey=e.shiftKey,this._cachedEvent.code=t?null:e.code||null,t&&!(this._cachedEvent.ctrlKey||this._cachedEvent.metaKey||this._cachedEvent.altKey||this._cachedEvent.shiftKey)}}function Yh(n,e){return!(e.ctrlKey!==(n.ctrlKey||n.metaKey)||e.altKey!==n.altKey||e.shiftKey!==n.shiftKey||e.charKey&&e.charKey!==n.code)}const iv="workspace-pre",Lr="workspace",lv="workspace-post";class av{constructor(){this._renderMapping=new Map}addRenderer(e,t){return this._renderMapping.has(e)?this._renderMapping.get(e).push(t):this._renderMapping.set(e,[t]),this}onSessionStart(e){}onSessionStop(e){this._renderMapping.clear()}getRenderersByLayer(e){return this._renderMapping.get(e)}}class kr{constructor(e){this._id=e}setGraphElementID(e){return this._id=e,this}getCenterPoint(e={x:0,y:0}){return e.x=e.y=0,e}getGraphElementID(){return this._id}getHashString(e=!0){return this._id}}class Ye extends kr{constructor(e,t=0,s=0){super(e),this.x=t,this.y=s,this._label=""}getCenterPoint(e={x:0,y:0}){return e.x=this.x,e.y=this.y,e}setNodeLabel(e){return this._label=e,this}getNodeLabel(){return this._label}getNodeSize(){return 16}getHashString(e=!0){return e?super.getHashString(e)+":"+Math.floor(this.x)+","+Math.floor(this.y)+"."+this._label:super.getHashString(e)+":"+this._label}}class bt extends kr{constructor(e,t,s=null){super(e),this._from=t,this._to=s,this._label=""}setEdgeFrom(e){if(!e)throw new Error("Source of edge cannot be null");return this._from=e,this}setEdgeTo(e){return this._to=e,this}setEdgeLabel(e){return this._label=e,this}getEdgeDirection(){const e=this._from,t=this._to,s=Math.PI/2;let r=0;if(this.isPlaceholder())r=Math.PI/4;else{const o=t.y-e.y,i=t.x-e.x;r=Math.atan2(o,i)}return(r>s||r<-s)&&(r+=Math.PI),r}getStartPoint(e={x:0,y:0}){const t=this._from;return e.x=t.x,e.y=t.y,e}getCenterPoint(e={x:0,y:0}){const t=this._from,s=this._to;if(this.isPlaceholder()){const r=this.getPlaceholderLength()/2;e.x=t.x+r,e.y=t.y+r}else e.x=t.x+(s.x-t.x)/2,e.y=t.y+(s.y-t.y)/2;return e}getEndPoint(e={x:0,y:0}){if(this.isPlaceholder()){const t=this._from,s=this.getPlaceholderLength();e.x=t.x+s,e.y=t.y+s}else{const t=this._to;e.x=t.x,e.y=t.y}return e}getPlaceholderLength(){return this._from.getNodeSize()}isPlaceholder(){return this._to===null}isSelfLoop(){return this._from===this._to}getEdgeLabel(){return this._label}getEdgeFrom(){return this._from}getEdgeTo(){return this._to}getHashString(e=!0){const t=this._from?this._from.getHashString(e):"",s=this._to?this._to.getHashString?this._to.getHashString(e):"0":"";return super.getHashString(e)+":"+t+","+s+"."+this._label}}function we(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()}function hs(n,e,t){return n*(1-t)+e*t}function pt(n=""){let e=0;for(let t=0,s=n.length;t<s;t++)e=Math.imul(31,e)+n.charCodeAt(t)|0;return e}function Is(n,e,t,s,r=1,o=0,i={x:0,y:0}){const l=t-n,c=s-e,u=Math.atan2(c,l)+o;return i.x=Math.cos(u)*r,i.y=Math.sin(u)*r,i}function Bl(n,e,t,s,r={x:0,y:0}){return r.x=n+(t-n)/2,r.y=e+(s-e)/2,r}class fi{constructor(e=Ye,t=bt){this._nodeClass=e,this._edgeClass=t,this._nodeMapping=new Map,this._edgeMapping=new Map}clear(){this.clearEdges(),this.clearNodes()}isEmpty(){return this._nodeMapping.size<=0&&this._edgeMapping.size<=0}getBoundingRect(){if(this._nodeMapping.size<=0)return{minX:0,minY:0,maxX:1,maxY:1,width:1,height:1};var e=Number.MAX_VALUE,t=Number.MAX_VALUE,s=Number.MIN_VALUE,r=Number.MIN_VALUE,o=0;for(const m of this._nodeMapping.values()){const y=m.x,w=m.y,f=m.getNodeSize();f>o&&(o=f),e=Math.min(e,y),s=Math.max(s,y),t=Math.min(t,w),r=Math.max(r,w)}e-=o,t-=o,s+=o,r+=o;var i=Number.MAX_VALUE,l=Number.MAX_VALUE,c=Number.MIN_VALUE,u=Number.MIN_VALUE;const h={x:0,y:0},d={x:0,y:0},p={x:0,y:0};for(const m of this._edgeMapping.values()){m.getStartPoint(h),m.getEndPoint(d),m.getCenterPoint(p);const y=h.x,w=h.y,f=d.x,g=d.y,_=p.x,E=p.y;i=Math.min(i,y,f,_),c=Math.max(c,y,f,_),l=Math.min(l,w,g,E),u=Math.max(u,w,g,E)}const v={minX:Math.min(e,i),minY:Math.min(t,l),maxX:Math.max(s,c),maxY:Math.max(r,u),width:0,height:0};return v.width=v.maxX-v.minX,v.height=v.maxY-v.minY,v}getHashCode(e=!0){let t="";for(const s of this._nodeMapping.values())t+=s.getHashString(e)+",";t+="|";for(const s of this._edgeMapping.values())t+=s.getHashString(e)+",";return pt(t)}createNode(e=0,t=0,s=null){return this.addNode(new this._nodeClass(s||we(),e,t))}addNode(e){return e.getGraphElementID()||e.setGraphElementID(we()),this._nodeMapping.set(e.getGraphElementID(),e),e}deleteNode(e){const t=e.getGraphElementID();if(this._nodeMapping.has(t)){this._nodeMapping.delete(t);const s=[];for(const r of this.getEdges())r.getEdgeFrom()===e?s.push(r):r.getEdgeTo()===e&&r.setEdgeTo(null);for(const r of s)this.deleteEdge(r)}}clearNodes(){this._nodeMapping.clear()}getNodeByElementID(e){return this._nodeMapping.has(e)?this._nodeMapping.get(e):null}getNodesByLabel(e,t=[]){for(const s of this.getNodes())s.getNodeLabel()===e&&t.push(s);return t}getNodes(){return Array.from(this._nodeMapping.values())}getNodeCount(){return this._nodeMapping.size}getNodeClass(){return this._nodeClass}formatEdge(e){return e}createEdge(e,t=null,s=null){return this.addEdge(new this._edgeClass(s||we(),e,t))}addEdge(e){return e.getGraphElementID()||e.setGraphElementID(we()),this._edgeMapping.set(e.getGraphElementID(),e),e}deleteEdge(e){const t=e.getGraphElementID();this._edgeMapping.has(t)&&this._edgeMapping.delete(t)}clearEdges(){this._edgeMapping.clear()}getEdgeByElementID(e){return this._edgeMapping.has(e)?this._edgeMapping.get(e):null}getEdgesByLabel(e,t=[]){for(const s of this.getEdges())s.getEdgeLabel()===e&&t.push(s);return t}getEdges(){return Array.from(this._edgeMapping.values())}getEdgeCount(){return this._edgeMapping.size}getEdgeClass(){return this._edgeClass}}class _f extends fi{constructor(e,t){super(e,t),this._nodes=[]}setStartNode(e){if(this._nodes.length<=0)throw new Error("Cannot set start node to empty graph");if(this._nodes.length===1)return;const t=this._nodes.indexOf(e);if(t>0){const s=this._nodes[0];this._nodes[0]=e,this._nodes[t]=s}else if(t<0)throw new Error("Cannot set start node for unknown node")}getStartNode(){return this._nodes.length>0?this._nodes[0]:null}getNodeByIndex(e){return this._nodes[e]}addNode(e){return this._nodes.push(e),super.addNode(e)}deleteNode(e){super.deleteNode(e);const t=this._nodes.indexOf(e);t>=0&&this._nodes.splice(t,1)}clearNodes(){super.clearNodes(),this._nodes.length=0}getNodes(){return this._nodes}}class Za extends Ye{constructor(e,t,s){super(e,t,s),this._accept=!1,this._custom=!1}setNodeAccept(e){this._accept=e}getNodeAccept(){return this._accept}setNodeCustom(e){this._custom=e}getNodeCustom(){return this._custom}getHashString(e=!0){return super.getHashString(e)+":"+(this._accept?"1":"0")}}class gn extends bt{constructor(e,t,s=null){super(e,t,s),this._quad={radians:0,length:s?0:this.getPlaceholderLength(),coords:{x:0,y:0}}}setEdgeTo(e){const t=this._to;if(e!==t){const s=super.setEdgeTo(e);return e?e===this._from&&(this._quad.length=this._from.getNodeSize()+this.getPlaceholderLength()):this.setQuadraticByCoords(t.x,t.y),s}return super.setEdgeTo(e)}setQuadraticRadians(e){return this._quad.radians=e,this}setQuadraticLength(e){return this._quad.length=e,this}setQuadraticByCoords(e,t){const s=this._from,r=this._to;if(!r){const x=this._from.x-e,N=this._from.y-t,M=-Math.atan2(x,N)-Math.PI/2;return this._quad.radians=M,this}const o=s.x,i=s.y,l=r.x,c=r.y;let u=l-o,h=c-i;const d=o+u/2,p=i+h/2,v=Math.atan2(-h,u);u=e-d,h=t-p;const m=Math.PI,y=m/2;let w=Math.atan2(h,u)+v,f=Math.sqrt(u*u+h*h);f<0&&(f=0);const g=w- -y,_=w-y,E=m/20;return Math.abs(f)<8?(w=0,f=0):g<E&&g>-E?w=-y:-_<E&&-_>-E&&(w=y),this._quad.radians=w,this._quad.length=f,this}getQuadraticLength(){return this._quad.length}getQuadraticRadians(){return this._quad.radians}getQuadratic(){return this._quad}isQuadratic(){return!this.isPlaceholder()&&this._quad.length!==0}getQuadraticAsCoords(){const e=this._from,t=this._to,s=this._quad.coords;return e==null||t==null?(s.x=0,s.y=0):Is(e.x,e.y,t.x,t.y,this._quad.length,this._quad.radians,s),s}getEdgeDirection(){let e=0;if(this.isQuadratic()){const t=this.getQuadraticAsCoords();e=Math.atan2(t.y,t.x)+Math.PI/2}else e=super.getEdgeDirection();return e}getStartPoint(e={x:0,y:0}){const t=this._from,s=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!s){const r=this._quad.radians,o=Math.cos(r),i=Math.sin(r),l=t.getNodeSize();return e.x=t.x+o*l,e.y=t.y+i*l,e}if(typeof s.getNodeSize!="function"||!this.isQuadratic())return Is(t.x,t.y,s.x,s.y,t.getNodeSize(),0,e),e.x+=t.x,e.y+=t.y,e;{Bl(t.x,t.y,s.x,s.y,e);const r=this.getQuadraticAsCoords(),o=e.x+r.x,i=e.y+r.y;return Is(t.x,t.y,o,i,t.getNodeSize(),this.isSelfLoop()?Math.PI/4:0,e),e.x+=t.x,e.y+=t.y,e}}getCenterPoint(e={x:0,y:0}){const t=this._from,s=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!s){const r=Math.cos(this._quad.radians),o=Math.sin(this._quad.radians),i=t.getNodeSize()+this.getPlaceholderLength()/2;return e.x=t.x+r*i,e.y=t.y+o*i,e}if(Bl(t.x,t.y,s.x,s.y,e),this.isQuadratic()){const r=this.getQuadraticAsCoords();e.x+=r.x,e.y+=r.y}return e}getEndPoint(e={x:0,y:0}){const t=this._from,s=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!s){const r=this._quad.radians,o=Math.cos(r),i=Math.sin(r),l=t.getNodeSize()+this.getPlaceholderLength();return e.x=t.x+o*l,e.y=t.y+i*l,e}if(typeof s.getNodeSize!="function")return s;if(this.isQuadratic()){Bl(t.x,t.y,s.x,s.y,e);const r=this.getQuadraticAsCoords(),o=e.x+r.x,i=e.y+r.y;return Is(s.x,s.y,o,i,s.getNodeSize(),this.isSelfLoop()?-(Math.PI/4):0,e),e.x+=s.x,e.y+=s.y,e}else return Is(s.x,s.y,t.x,t.y,s.getNodeSize(),0,e),e.x+=s.x,e.y+=s.y,e}getHashString(e=!0){return e?super.getHashString(e)+":"+this._quad.radians+","+this._quad.length:super.getHashString(e)}}const ft=" ",It="\u03B5";class cv extends gn{constructor(e,t,s=null){super(e,t,s)}setEdgeLabel(e){typeof e=="string"?super.setEdgeLabel(e):super.setEdgeLabel(It)}}class xn extends _f{constructor(){super(Za,cv)}}class uv{formatLabel(e,t,s=null){return t}getDefaultLabel(e){return""}formatNodeLabel(e,t=null){return e}formatEdgeLabel(e,t=null){return e}getDefaultNodeLabel(){return""}getDefaultEdgeLabel(){return""}}const hv=new uv,dv=10;class pv{constructor(e=dv){this._cachedGraphHash=0,this._refreshTicks=e,this._elapsedTicks=1/0,this._listeners=[]}addListener(e){if(typeof e!="function")throw new Error("Cannot add uncallable listener");this._listeners.push(e)}removeListener(e){const t=this._listeners.indexOf(e);return t>=0?(this._listeners.splice(t,1),!0):!1}clearListeners(){this._listeners.length=0}getListeners(){return this._listeners}reset(){this._elapsedTicks=0,this._cachedGraphHash=0}update(e){if(++this._elapsedTicks>=this._refreshTicks){this._elapsedTicks=0;const t=e.getHashCode(!1);if(t!==this._cachedGraphHash){this._cachedGraphHash=t;for(const s of this._listeners)s(e)}}}}const gv="graph-clear";class su{constructor(e){this._graph=e,this._graphChangeHandler=new pv,this._labelEditor=null,this._labelFormatter=null,this._listeners=[]}setLabelEditor(e){return this._labelEditor=e,this}setLabelFormatter(e){return this._labelFormatter=e,this}addListener(e){return this._listeners.push(e),this}removeListener(e){const t=this._listeners.indexOf(e);t>=0&&this._listeners.splice(t,1)}clearListeners(){this._listeners.length=0}initialize(){}update(){this._graphChangeHandler&&this._graphChangeHandler.update(this._graph)}destroy(){}clearGraph(){window.confirm(I18N.toString("alert.graph.clear"))&&(this._graph.clear(),this.emitGraphEvent(gv))}onGraphEvent(e,t){}emitGraphEvent(e,t={}){this.onGraphEvent(e,t);for(const s of this._listeners)s.onGraphEvent(this,e,t)}openLabelEditor(e,t=null,s=null){if(!this._labelEditor){s&&s(e,t,!1);return}const r=this._labelEditor,o=t||"";r.openEditor(e,t,(i,l)=>{const c=!o||o.length>0&&l!==o;i instanceof bt?i.setEdgeLabel(l):i instanceof Ye&&i.setNodeLabel(l),s&&s(i,l,c)},i=>{s&&s(i,null,!1)})}getLabelFormatter(){return this._labelFormatter||hv}getLabelEditor(){return this._labelEditor}getGraphChangeHandler(){return this._graphChangeHandler}getGraph(){return this._graph}}class tn{constructor(){}onPreInputEvent(e){return!1}onInputEvent(e){return!1}onAltInputEvent(e){return!1}onDblInputEvent(e){return!1}onMoveInputEvent(e){return!1}onDragStart(e){return!1}onDragMove(e){}onDragStop(e){}onPostInputEvent(e){}onZoomChange(e,t,s){return!1}}const fv=4,gt="node",mv=n=>C(S.Fragment,{children:[a("circle",{cx:n.position.x,cy:n.position.y,r:n.radius,fill:n.color,stroke:n.outline}),(n.onMouseOver||n.onMouseOut)&&a("circle",{cx:n.position.x,cy:n.position.y,r:n.radius+fv,fill:"transparent",cursor:"pointer",onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,pointerEvents:n.pointerEvents})]}),_v=n=>a("text",{x:n.position.x,y:n.position.y+4,pointerEvents:"none",style:{userSelect:"none",fontSize:`${1-Math.min(Math.max(n.label.length-2,0)/6,.5)}em`},textAnchor:"middle",fill:n.color,children:n.label});class mr extends S.Component{constructor(e){super(e)}render(){const e=this.props.position,t=this.props.radius||16,s=this.props.label||"",r=this.props.color||"#FFFFFF",o=this.props.outline||"#000000",i=this.props.onMouseOver,l=this.props.onMouseOut,c=this.props.pointerEvents||"visiblePainted",u=mv,h=_v;return C("g",{children:[u&&a(u,{position:e,radius:t,color:r,outline:o,onMouseOver:i?d=>{const p=d.target.value||(d.target.value={});p.type=gt,i(d)}:null,onMouseOut:l?d=>{const p=d.target.value||(d.target.value={});p.type=gt,l(d)}:null,pointerEvents:c}),h&&a(h,{position:e,label:s,color:o})]})}}const yv="node-create",ds="node-delete",yn="node-delete-all",vv="edge-label-change",Sv="node-move",Cv="node-move-all",zi="error-node-edit-while-delete",Qh=.6;class wv extends tn{constructor(e,t){super(),this._inputController=e,this._graphController=t,this._cachedPosition={x:0,y:0}}onInputEvent(e){const t=this._inputController,s=t.getCurrentTargetType();if(t.isTrashMode()&&s===gt){const r=t.getCurrentTargetSource(),o=this._graphController;return o.getGraph().deleteNode(r),o.emitGraphEvent(ds,{target:r}),!0}if(!t.isMoveMode(e.getInputAdapter())&&s===gt){const r=t.getCurrentTargetSource(),o=this._graphController;return o.openLabelEditor(r,r.getNodeLabel(),(i,l,c)=>{c&&o.emitGraphEvent(vv,{target:r})}),!0}return!1}onAltInputEvent(e){return this.onInputEvent(e)}onDblInputEvent(e){const t=this._inputController;if(t.hasActiveTarget()||t.isTrashMode())return!1;if(!t.getCurrentTargetType()){const r=this._graphController,o=r.getLabelFormatter(),l=r.getGraph().createNode(e.x,e.y);o&&l.setNodeLabel(o.getDefaultNodeLabel()),r.emitGraphEvent(yv,{target:l})}}onDragStart(e){const t=this._inputController;if(t.hasActiveTarget())return!1;if(t.isTrashMode())return this._graphController.emitGraphEvent(zi),!1;const s=t.getCurrentTargetType();if(t.isMoveMode(e.getInputAdapter())&&s===gt){const r=t.getSelectionBox(),o=t.getCurrentTargetSource();return r&&r.hasSelection()&&(r.isTargetInSelection(o)?(this._cachedPosition.x=e.x,this._cachedPosition.y=e.y):r.clearSelection()),t.bindActiveTarget(o,s,!1),!0}return!1}onDragMove(e){const t=this._inputController,s=t.getSelectionBox(),r=t.getActiveTargetSource();if(s&&s.hasSelection()){const o=e.x-this._cachedPosition.x,i=e.y-this._cachedPosition.y;for(const l of s.getSelection())l.x+=o,l.y+=i;this._cachedPosition.x=e.x,this._cachedPosition.y=e.y}else this.moveNodeTo(this._graphController.getGraph(),r,e.x,e.y)}onDragStop(e){const t=this._inputController,s=this._graphController,r=t.getSelectionBox(),o=t.getActiveTargetSource();if(t.unbindActiveTarget(),t.isTrashMode()){if(r.hasSelection()){const i=s.getGraph(),l=[];for(const c of r.getSelection())i.deleteNode(c),l.push(c);r.clearSelection(),s.emitGraphEvent(yn,{target:l})}else s.getGraph().deleteNode(o),s.emitGraphEvent(ds,{target:o});return}r.hasSelection()?s.emitGraphEvent(Cv,{target:r.getSelection()}):s.emitGraphEvent(Sv,{target:o})}moveNodeTo(e,t,s,r){s=hs(t.x,s,Qh),r=hs(t.y,r,Qh);const o=t.getNodeSize();for(const i of e.getNodes()){if(t===i)continue;const l=s-i.x,c=r-i.y,u=Math.atan2(c,l),h=o*2,d=i.x+Math.cos(u)*h-s,p=i.y+Math.sin(u)*h-r;l*l+c*c<o*o*4&&(s+=d,r+=p)}t.x=s,t.y=r}}const Ev=.01,xv=4,Xh=10,ao=Math.PI/6,qh=Math.PI/4,Tv=8,Ui="forward",Nv="backward",Zh="both",Mv="undirected",an="forward-endpoint",Jh="backward-endpoint",cn="edge",mi="label",ed=n=>C(S.Fragment,{children:[a("path",{d:"M "+(n.position.x-n.length*Math.sin(n.angle-ao))+" "+(n.position.y-n.length*Math.cos(n.angle-ao))+" L "+n.position.x+" "+n.position.y+" L "+(n.position.x-n.length*Math.sin(n.angle+ao))+" "+(n.position.y-n.length*Math.cos(n.angle+ao)),stroke:n.color,fill:"none"}),a("circle",{cx:n.position.x-n.length*Math.cos(-n.angle+qh),cy:n.position.y-n.length*Math.sin(-n.angle+qh),r:n.length,fill:"transparent",cursor:"pointer",onMouseOver:n.onMouseOver,onMouseOut:n.onMouseOut,pointerEvents:n.pointerEvents})]}),bv=n=>a("g",{transform:"translate("+n.position.x+","+n.position.y+") rotate("+n.direction*180/Math.PI+")",children:n.labels&&n.labels.length>0&&n.labels.map((e,t)=>{const s=n.onMouseOver,r=n.onMouseOut;return a("text",{transform:"translate(0,"+(t+1)*-15+")"+(n.reverse?" scale(-1,-1)":""),alignmentBaseline:"central",style:{userSelect:"none"},textAnchor:"middle",fill:n.color,cursor:"pointer",onMouseOver:s?o=>{const i=o.target.value||(o.target.value={});i.index=t,s(o)}:null,onMouseOut:r?o=>{const i=o.target.value||(o.target.value={});i.index=t,r(o)}:null,pointerEvents:n.pointerEvents,children:e},e+"."+t)})});class ru extends S.Component{constructor(e){super(e)}render(){const e=this.props.directed||Mv,t=e===Ui||e===Zh?this.props.forwardEndpointRenderer||this.props.endpointRenderer||ed:null,s=e===Nv||e===Zh?this.props.backwardEndpointRenderer||this.props.endpointRenderer||ed:null,r=this.props.labelRenderer||bv,o=this.props.from,i=this.props.to,l=this.props.center,c=this.props.label||"",u=this.props.direction||0,h=this.props.color||"#000000",d=this.props.onMouseOver,p=this.props.onMouseOut,v=this.props.pointerEvents||"visiblePainted";let m=!1,y,w,f=null;const g=o.x-i.x,_=o.y-i.y,E=o.x-l.x,x=o.y-l.y,N=Math.atan2(_,g),M=Math.atan2(x,E);if(Math.abs(N-M)<=Ev)w=Math.atan2(l.x-i.x,l.y-i.y)+Math.PI,y=Math.atan2(l.x-o.x,l.y-o.y)+Math.PI,f="L "+i.x+" "+i.y,m=!1;else{const A=(l.x*4-o.x-i.x)/2,b=(l.y*4-o.y-i.y)/2;w=Math.atan2(A-i.x,b-i.y)+Math.PI,y=Math.atan2(A-o.x,b-o.y)+Math.PI,f="Q "+A+" "+b+" "+i.x+" "+i.y,m=b>l.y+xv}const I=`M ${o.x} ${o.y} ${f}`;return C("g",{children:[a("path",{d:I,stroke:h,fill:"none"}),a("path",{d:I,stroke:"transparent",strokeWidth:`${Tv}px`,fill:"none",cursor:"pointer",onMouseOver:d?A=>{const b=A.target.value||(A.target.value={});b.type=cn,d(A)}:null,onMouseOut:p?A=>{const b=A.target.value||(A.target.value={});b.type=cn,p(A)}:null,pointerEvents:v}),t&&a(t,{position:i,angle:w,length:Xh,color:h,onMouseOver:d?A=>{const b=A.target.value||(A.target.value={});b.type=an,d(A)}:null,onMouseOut:p?A=>{const b=A.target.value||(A.target.value={});b.type=an,p(A)}:null,pointerEvents:v}),s&&a(s,{position:o,angle:y,length:Xh,color:h,onMouseOver:d?A=>{const b=A.target.value||(A.target.value={});b.type=Jh,d(A)}:null,onMouseOut:p?A=>{const b=A.target.value||(A.target.value={});b.type=Jh,p(A)}:null,pointerEvents:v}),r&&a(r,{position:l,labels:c.split(`
`),direction:u,reverse:m,color:h,onMouseOver:d?A=>{const b=A.target.value||(A.target.value={});b.type=mi,d(A)}:null,onMouseOut:p?A=>{const b=A.target.value||(A.target.value={});b.type=mi,p(A)}:null,pointerEvents:v})]})}}const Ja="edge-create",un="edge-delete",Iv="edge-label-change",td="edge-to-change",Lv="edge-quad-change",Vi="error-edge-edit-while-delete",nd=.6;class kv extends tn{constructor(e,t){super(),this._inputController=e,this._graphController=t,this._cachedEdgeQuads={radians:0,length:0},this._cachedEdgeTo=null,this._cachedPointer={x:0,y:0},this._newEdge=!1,this._shouldDeleteEdgePlaceholder=!1,this._shouldDeleteEdgeWithEmptyLabel=!1}setShouldDeleteEdgePlaceholder(e){return this._shouldDeleteEdgePlaceholder=e,this}setShouldDeleteEdgeWithEmptyLabel(e){return this._shouldDeleteEdgeWithEmptyLabel=e,this}onInputEvent(e){const t=this._inputController,s=t.getCurrentTargetType();if(t.isTrashMode()&&(s===cn||s===an||s===mi)){const r=t.getCurrentTargetSource(),o=this._graphController;return o.getGraph().deleteEdge(r),o.emitGraphEvent(un,{target:r}),!0}if(s===mi||s===cn){const r=t.getCurrentTargetSource(),o=this._graphController;return o.openLabelEditor(r,r.getEdgeLabel(),(i,l,c)=>{this._shouldDeleteEdgeWithEmptyLabel&&!l?(o.getGraph().deleteEdge(r),o.emitGraphEvent(un,{target:r})):c&&o.emitGraphEvent(Iv,{target:r})}),!0}return!1}onAltInputEvent(e){return this.onInputEvent(e)}onDragStart(e){const t=this._inputController;if(t.hasActiveTarget())return!1;if(t.isTrashMode())return this._graphController.emitGraphEvent(Vi),!1;const s=t.getCurrentTargetType();if(!t.isMoveMode(e.getInputAdapter())&&s===gt){const o=this._graphController.getGraph(),i=t.getCurrentTargetSource();this._cachedEdgeQuads.radians=0,this._cachedEdgeQuads.length=0,this._cachedEdgeTo=null,this._newEdge=!0,this._cachedPointer.x=e.x,this._cachedPointer.y=e.y;const l=o.createEdge(i,this._cachedPointer);return t.bindActiveTarget(l,an,!1),t.setNodeEventsOnly(!0),!0}else if(s===an){const r=t.getCurrentTargetSource();return this._cachedEdgeQuads.radians=r.getQuadraticRadians(),this._cachedEdgeQuads.length=r.getQuadraticLength(),this._cachedEdgeTo=r.getEdgeTo(),this._newEdge=!1,this._cachedPointer.x=e.x,this._cachedPointer.y=e.y,r.setQuadraticRadians(0),r.setQuadraticLength(0),r.setEdgeTo(this._cachedPointer),t.bindActiveTarget(r,s,!1),t.setNodeEventsOnly(!0),!0}else if(s===cn){const r=t.getCurrentTargetSource();return this._cachedEdgeQuads.radians=r.getQuadraticRadians(),this._cachedEdgeQuads.length=r.getQuadraticLength(),this._cachedEdgeTo=r.getEdgeTo(),this._newEdge=!1,this._cachedPointer.x=e.x,this._cachedPointer.y=e.y,t.bindActiveTarget(r,s,!1),!0}return!1}onDragMove(e){const t=this._inputController,s=t.getActiveTargetSource(),r=t.getActiveTargetType();r===cn?s.setQuadraticByCoords(e.x,e.y):r===an&&this.handleDragMoveForEndpoint(s,r,e,t)}handleDragMoveForEndpoint(e,t,s,r){if(r.getImmediateTargetType()===gt){const i=r.getImmediateTargetSource();if(e.getEdgeTo()===this._cachedEdgeTo)e.setQuadraticRadians(this._cachedEdgeQuads.radians),e.setQuadraticLength(this._cachedEdgeQuads.length);else if(e.getEdgeFrom()===i){const l=e.getEdgeFrom(),c=l.x-s.x,u=l.y-s.y,h=Math.PI+Math.atan2(u,c);e.setQuadraticRadians(h),e.setEdgeTo(i)}else e.setQuadraticRadians(0),e.setQuadraticLength(0),e.setEdgeTo(i)}else this._cachedPointer.x=hs(this._cachedPointer.x,s.x,nd),this._cachedPointer.y=hs(this._cachedPointer.y,s.y,nd),e.getEdgeTo()!==this._cachedPointer&&(e.setQuadraticRadians(0),e.setQuadraticLength(0),e.setEdgeTo(this._cachedPointer))}onDragStop(e){const t=this._inputController,s=t.getActiveTargetSource(),r=t.getActiveTargetType(),o=this._newEdge;t.unbindActiveTarget(),r===an&&t.setNodeEventsOnly(!1);const i=this._graphController;if(t.isTrashMode()){i.getGraph().deleteEdge(s),i.emitGraphEvent(un,{target:s});return}if(r===cn)i.emitGraphEvent(Lv,{target:s});else{const l=s.getEdgeTo();if(!l||l===this._cachedPointer)if(this._shouldDeleteEdgePlaceholder){i.getGraph().deleteEdge(s),i.emitGraphEvent(un,{target:s});return}else if(s.setEdgeTo(null),o){const c=i.getLabelFormatter();c&&s.setEdgeLabel(c.getDefaultEdgeLabel()),i.emitGraphEvent(Ja,{target:s})}else i.emitGraphEvent(td,{target:s});else if(l!==this._cachedEdgeTo){const c=i.getLabelFormatter();o&&c&&s.setEdgeLabel(c.getDefaultEdgeLabel()),i.openLabelEditor(s,o?null:s.getEdgeLabel(),(u,h,d)=>{this._shouldDeleteEdgeWithEmptyLabel&&!h?(i.getGraph().deleteEdge(s),i.emitGraphEvent(un,{target:s})):o?i.emitGraphEvent(Ja,{target:s}):d&&i.emitGraphEvent(td,{target:s})})}}}}const Wn="start-marker";class Av extends S.Component{constructor(e){super(e)}render(){const e=this.props.position,t=this.props.radians||Math.PI,s=this.props.offset||0,r=this.props.size||24,o=this.props.color||"#000000",i=Math.cos(t),l=Math.sin(t),c=e.x+i*s,u=e.y+l*s,d=i*r*2,p=this.props.onMouseOver,v=this.props.onMouseOut,m=this.props.pointerEvents;return a("g",{children:a("path",{d:"M"+c+" "+u+" L"+(c+d)+" "+(u+Math.sin(t+Math.PI/2)*r*2)+" L"+(c+d)+" "+(u-Math.sin(t+Math.PI/2)*r*2)+" Z",fill:"transparent",stroke:o,cursor:"pointer",onMouseOver:p?y=>{const w=y.target.value||(y.target.value={});w.type=Wn,p(y)}:null,onMouseOut:v?y=>{const w=y.target.value||(y.target.value={});w.type=Wn,v(y)}:null,pointerEvents:m})})}}const ou="start-marker-change",sd=.6;class Dv extends tn{constructor(e,t){super(),this._inputController=e,this._graphController=t,this._ghostMarker=null,this._cachedMarkerTarget=null,this._cachedPointer={x:0,y:0}}onDragStart(e){const t=this._inputController;if(t.getCurrentTargetType()===Wn){const r=t.getCurrentTargetSource();return this._cachedMarkerTarget=r,this._cachedPointer.x=e.x,this._cachedPointer.y=e.y,this._ghostMarker=this._cachedPointer,t.bindActiveTarget(r,Wn,!0),t.setNodeEventsOnly(!0),!0}return!1}onDragMove(e){const t=this._inputController;if(t.getActiveTargetType()===Wn)if(t.getImmediateTargetType()===gt){const o=t.getImmediateTargetSource();this._ghostMarker=o}else this._cachedPointer.x=hs(this._cachedPointer.x,e.x,sd),this._cachedPointer.y=hs(this._cachedPointer.y,e.y,sd),this._ghostMarker!==this._cachedPointer&&(this._ghostMarker=this._cachedPointer)}onDragStop(e){const t=this._inputController,s=t.getActiveTargetType();t.unbindActiveTarget(),s===Wn&&(!this._ghostMarker||this._ghostMarker===this._cachedPointer||(this._graphController.getGraph().setStartNode(this._ghostMarker),this._graphController.emitGraphEvent(ou,{target:this._ghostMarker})),this._ghostMarker=null)}getGhostMarker(){return this._ghostMarker}}class Pv{constructor(e,t,s,r,o){this._notificationManager=e,this._message=t,this._layoutID=s,this._tags=r,this._props=o,this._id=we()}close(){this._notificationManager.removeNotification(this)}hasTag(e){return this._tags.includes(e)}getMessage(){return this._message}getLayoutID(){return this._layoutID}getTags(){return this._tags}getProps(){return this._props}getID(){return this._id}getNotificationManager(){return this._notificationManager}}class Fv extends S.Component{constructor(e){super(e)}render(){const{message:e,notification:t,onClick:s,...r}=this.props;return C("div",{className:mf.notification_container,...r,children:[e&&e.split(`
`).map((o,i)=>a("p",{children:o},o+":"+i)),this.props.children,a("button",{style:{marginBottom:"1em"},onClick:s,children:I18N.toString("message.action.next")}),t&&a("button",{onClick:o=>t.close(),children:I18N.toString("message.action.close")})]})}}const Ov="default",Gi="warning",iu="error",$i="success",ec="sequence";class Rv{constructor(){this._layouts=new Map,this._notifications=[]}registerNotificationLayout(e,t){return this._layouts.set(e,t),this}unregisterNotificationLayout(e){return this._layouts.delete(e),this}pushNotification(e,t=null,s=[],r={},o=!0){o&&s.length>0&&this.clearNotifications(s);const i=new Pv(this,e,t,s,r);return this._notifications.push(i),i}popNotification(e=null){if(this._notifications.length<=0)return null;if(Array.isArray(e))for(let t=this._notifications.length-1;t>=0;--t){const s=this._notifications[t];let r=!0;for(const o of e)if(!s.hasTag(o)){r=!1;break}if(r)return this._notifications.splice(t,1),s}else if(typeof e=="string")for(let t=0,s=this._notifications.length;t<s;++t){const r=this._notifications[t];if(r.hasTag(e))return this._notifications.splice(t,1),r}else return this._notifications.pop()}removeNotification(e){const t=this._notifications.indexOf(e);t>=0&&this._notifications.splice(t,1)}clearNotifications(e=null){if(!(this._notifications.length<=0))if(Array.isArray(e))for(let t=this._notifications.length-1;t>=0;--t){const s=this._notifications[t];let r=!0;for(const o of e)if(!s.hasTag(o)){r=!1;break}r&&this._notifications.splice(t,1)}else if(typeof e=="string")for(let t=this._notifications.length-1;t>=0;--t)this._notifications[t].hasTag(e)&&this._notifications.splice(t,1);else this._notifications.length=0}onSessionStart(e){this.registerNotificationLayout(Ov,t=>a(Ie,{styleType:Q1,...t})),this.registerNotificationLayout(Gi,t=>a(Ie,{styleType:Hi,...t})),this.registerNotificationLayout(iu,t=>a(Ie,{styleType:ys,...t})),this.registerNotificationLayout($i,t=>a(Ie,{styleType:X1,...t})),this.registerNotificationLayout(ec,t=>a(Fv,{...t}))}onSessionStop(e){this.clearNotifications()}hasNotificationLayout(e){return this._layouts.has(e)}getNotificationLayout(e){return this._layouts.get(e)}getNotifications(){return this._notifications}isEmpty(){return this._notifications.length<=0}}class yf{constructor(){}getDefaultLabel(e){return e instanceof bt?this.getDefaultEdgeLabel():this.getDefaultNodeLabel()}getLabelFormatter(e){return e instanceof bt?this.getEdgeLabelFormatter():this.getNodeLabelFormatter()}getDefaultNodeLabel(){return""}getDefaultEdgeLabel(){return""}getNodeLabelFormatter(){throw new Error("Node label formatting is not supported")}getEdgeLabelFormatter(){throw new Error("Edge label formatting is not supported")}}const Bv="q";class Hv extends yf{constructor(){super(),this._prefix=Bv,this._graphController=null}setGraphController(e){return this._graphController=e,this}setDefaultNodeLabelPrefix(e){this._prefix=e}getDefaultNodeLabelPrefix(){return this._prefix}getDefaultNodeLabel(){if(this._graphController.shouldAutoRenameNodes()){const e=this._graphController.getGraph(),t=[];let s=0;const r=e.getStartNode();r&&r.getNodeCustom()&&(s=1);let o=this.getDefaultNodeLabelPrefix()+s;for(;e.getNodesByLabel(o,t).length>0;)t.length=0,++s,o=this.getDefaultNodeLabelPrefix()+s;return o}else return this.getDefaultNodeLabelPrefix()}getDefaultEdgeLabel(){return""}getNodeLabelFormatter(){return e=>e||""}getEdgeLabelFormatter(){return zv}}function zv(n,e=!1){const t=n.split(ft),s=new Set;let r="",o=0;const i=t.length;for(let l=0;l<i;++l)if(r=t[l].trim(),o=r.length,o!==1){if(o>1)for(let c of r.split(""))c=c.trim(),s.has(c)||s.add(c)}else s.add(r);return s.size<=0?e?null:It:Array.from(s).join(ft)}function Uv(n){let e=[],t=n.getStartNode();e.push(t);for(let s=0;s<e.length;s++)for(const r of n.getEdges())r._from==e[s]&&(e.includes(r._to)||e.push(r._to));return e}class Ar{static applyLayout(e,t="circle"){if(t!="circle")throw new Error("Invalid layout type");const s=Uv(e);function r(p){return!s.includes(p)}const o=e.getNodes().filter(r),i=s.length,l=o.length,c=e.getNodes().length,u=Math.max(i,l);if(c==0)return;var h;i<10&&l<10?h=u/4*50+30:h=u/5*40+30;let d=0;if(i==1){let p=2*Math.PI/c;for(const v of e.getNodes())v.y=Math.sin(p*d+Math.PI)*h,v.x=Math.cos(p*d+Math.PI)*h,d+=1}else{const p=2*Math.PI/i,v=2*Math.PI/l;d=0;for(const m of s)m.y=Math.sin(p*d+Math.PI)*h,m.x=Math.cos(p*d+Math.PI)*h,d+=1;d=0;for(const m of o)m.y=Math.sin(v*d+Math.PI)*(h+100),m.x=Math.cos(v*d+Math.PI)*(h+100),d+=1}}}const Vv="tryCreateWhileTrash",Gv=!0,co=64;class $v extends su{constructor(e,t,s){super(t),this._app=e,this.setLabelFormatter(new Hv().setGraphController(this)),this.shouldAutoLabel=Gv}onGraphEvent(e,t){switch(super.onGraphEvent(e,t),e){case Ja:Kv(this.getGraph(),t.target);break;case ou:case ds:case yn:this.shouldAutoLabel&&this.applyAutoRename(),this._app.getUndoManager().captureEvent();break;case zi:case Vi:this._app.getNotificationManager().pushNotification(I18N.toString("message.warning.cannotmodify"),Gi,Vv,null,!0);break;default:this._app.getUndoManager().captureEvent()}}getApp(){return this._app}deleteTargetNodes(e){if(!e||e.length<=0)return;const t=this.getGraph();for(const s of e)t.deleteNode(s);this.emitGraphEvent(yn,{target:e})}getGraphLabeler(){return this.getLabelFormatter()}applyAutoLayout(){Ar.applyLayout(this.getGraph()),this._app.getUndoManager().captureEvent()}applyAutoRename(){const e=this._labelFormatter,t=this._graph;if(!t.isEmpty()){for(const s of t.getNodes())s.getNodeCustom()||s.setNodeLabel("");for(const s of t.getNodes())s.getNodeCustom()||s.setNodeLabel(e.getDefaultNodeLabel())}}setAutoRenameNodes(e){const t=this.shouldAutoLabel;this.shouldAutoLabel=e,e&&!t&&this.applyAutoRename()}shouldAutoRenameNodes(){return this.shouldAutoLabel}deleteSelectedNodes(e){const t=this.inputController.getSelectionBox(),s=t.getSelection(this.getGraph()).slice();for(const r of s)this._graph.deleteNode(r);t.clearSelection(),this.emitGraphEvent(yn,{target:s})}deleteTargetNode(e){this._graph.deleteNode(e),this.emitGraphEvent(ds,{target:e})}deleteTargetEdge(e){this._graph.deleteEdge(e),this.emitGraphEvent(un,{target:e})}deleteTargetEdges(e){if(!(!e||e.length<=0))for(const t of e)this.deleteTargetEdge(t)}createNode(e,t){typeof e>"u"&&(e=Math.random()*co*2-co),typeof t>"u"&&(t=Math.random()*co*2-co);const s=this._graph.createNode(e,t),r=this.getGraphLabeler().getDefaultNodeLabel();return s.setNodeLabel(r),this._app.getUndoManager().captureEvent(),s}renameNode(e,t){e.setNodeLabel(t),e.setNodeCustom(!0),this._app.getUndoManager().captureEvent()}}function Kv(n,e){const s=e.getEdgeFrom(),r=e.getEdgeTo(),o=e.getEdgeLabel().split(ft);for(const i of n.getEdges())if(i!==e&&i.getEdgeFrom()===s&&i.getEdgeTo()===r){const l=i.getEdgeSymbolsFromLabel();if(o.length>0){const c=l.concat(o);i.setEdgeLabel(c.join(ft))}return i}if(!e.isSelfLoop()){let i=!1;const l=16,c=Math.PI/2;for(const u of n.getEdges())if(!(u.isQuadratic()&&Math.abs(u.getQuadratic().length)>=l*2)&&u.getEdgeTo()===s&&u.getEdgeFrom()===r){e.setQuadraticRadians(c).setQuadraticLength(l),u.setQuadraticRadians(c).setQuadraticLength(l),i=!0;break}if(!i){const u=Math.max(s.getNodeSize(),r.getNodeSize()),h=s.x,d=s.y,p=r.x,v=r.y,m=(p-h)*(p-h)+(v-d)*(v-d);let y=!1,w=0,f=0;h>p?(w=(d-v)/(h-p),f=v-w*p):h<p?(w=(v-d)/(p-h),f=d-w*h):y=!0;for(const g of n.getNodes()){if(g===s||g===r)continue;const _=g.x,E=g.y,x=(h-_)*(h-_)+(d-E)*(d-E),N=(p-_)*(p-_)+(v-E)*(v-E);if(x>m||N>m)continue;let M=0;if(y?M=Math.abs(h-_):M=Math.abs(f+w*_-E)/Math.sqrt(1+w*w),M<g.getNodeSize()){i=!0;break}}i&&(e.setQuadraticRadians(-Math.PI/2),e.setQuadraticLength(u+10))}}return e}class vf{constructor(e,t){if(!e)throw new Error("Missing module for machine controller");if(!t)throw new Error("Missing machine builder for machine controller");this._module=e,this._machineBuilder=t}initialize(e){this._machineBuilder.initialize(e)}destroy(e){this._machineBuilder.destroy(e)}update(e){}getMachineBuilder(){return this._machineBuilder}getModule(){return this._module}}class jv{constructor(){this._listeners=[]}addListener(e){if(typeof e!="function")throw new Error("Cannot add uncallable listener");this._listeners.push(e)}removeListener(e){const t=this._listeners.indexOf(e);return t>=0?(this._listeners.splice(t,1),!0):!1}clearListeners(){this._listeners.length=0}getListeners(){return this._listeners}update(e){for(const t of this._listeners)t(e)}}class Sf{constructor(){this._machineChangeHandler=new jv,this._errors=[],this._warnings=[],this.onGraphChange=this.onGraphChange.bind(this)}initialize(e){e.getGraphController().getGraphChangeHandler().addListener(this.onGraphChange)}destroy(e){e.getGraphController().getGraphChangeHandler().removeListener(this.onGraphChange)}onGraphChange(e){this.attemptBuildMachine(e,this.getMachine(),this._errors,this._warnings),this._machineChangeHandler.update(this)}attemptBuildGraph(e,t){throw new Error("Missing graph build operation")}attemptBuildMachine(e,t,s,r){throw new Error("Missing machine build operation")}getMachineErrors(){return this._errors}getMachineWarnings(){return this._warnings}getMachineChangeHandler(){return this._machineChangeHandler}isMachineValid(){return this._errors.length<=0}getMachine(){throw new Error("Missing machine for builder")}}const rd=1,Wv=2,B="&empty";class ps{constructor(e="",t=null){this._label=e,this._src=t,this._id=t instanceof kr?t.getGraphElementID():we()}copy(){const e=new ps;return e._label=this._label,e._src=this._src,e._id=this._id,e}getStateLabel(){return this._label}getStateID(){return this._id}getSource(){return this._src}getHashString(){return this._id}}class lu{constructor(e,t,s=[]){this._from=e,this._to=t,this._symbols=s}copy(){const e=new lu;return e._from=this._from,e._to=this._to,e._symbols=this._symbols.slice(),e}getSourceState(){return this._from}getDestinationState(){return this._to}addSymbol(e){this._symbols.push(e)}hasSymbol(e){return this._symbols.includes(e)}getSymbols(){return this._symbols}getHashString(){return this._from.getHashString()+":"+this._symbols.join(",")+":"+this._to.getHashString()}}class lt{constructor(e=!1){this._states=new Map,this._alphabet=new Map,this._transitions=new Map,this._finalStates=new Set,this._customSymbols=new Set,this._startState=null,this._deterministic=e,this._errors=[]}copy(e){if(e!==this){this.clear();for(const[t,s]of e._states.entries()){const r=s.copy();this._states.set(t,r),e.isStartState(s)&&(this._startState=r),e.isFinalState(s)&&this._finalStates.add(r)}for(const[t,s]of e._alphabet.entries())this._alphabet.set(t,s);for(const[t,s]of e._transitions.entries()){const r=s.copy();r._from=this._states.get(s.getSourceState().getStateID()),r._to=this._states.get(s.getDestinationState().getStateID()),this._transitions.set(t,r)}for(const t of e._customSymbols)this._customSymbols.add(t);this._deterministic=e._deterministic;for(const t of e._errors)this._errors.push(t)}}clear(){this._states.clear(),this._alphabet.clear(),this._transitions.clear(),this._finalStates.clear(),this._customSymbols.clear(),this._startState=null,this._errors.length=0}setDeterministic(e){this._deterministic=e}isDeterministic(){return this._deterministic}validate(){if(this._errors.length=0,this._deterministic){const e=new Map;for(const t of this._alphabet.keys())e.set(t,!1);for(const t of this._states.values()){const s=this.getOutgoingTransitions(t);for(const r of s){const o=r[rd];if(!e.get(o))e.set(o,!0);else return this._errors.push("duplicate symbol: "+o),!1}for(const r of e.keys()){if(!e.get(r))return this._errors.push("missing symbol: "+r),!1;e.set(r,!1)}}return this._errors.length=0,!0}else return this._errors.length=0,!0}isValid(){return this._errors.length==0}getErrors(){return this._errors}createState(e=""){return this.addState(new ps(e))}addState(e){const t=e.getStateID();if(this._states.has(t))throw new Error("Already added state with id '"+t+"'");return this._states.size<=0&&(this._startState=e),this._states.set(t,e),e}removeState(e){const t=e.getStateID();return this._states.has(t)?(this._states.delete(t),this._startState===e&&(this._states.size<=0?this._startState=null:this._startState=this._states.values().next().value),!0):!1}hasStateWithLabel(e){for(const t of this._states.values())if(t.getStateLabel()==e)return!0;return!1}getStatesByLabel(e,t=[]){for(const s of this._states.values())s.getStateLabel()==e&&t.push(s);return t}getStateByID(e){return this._states.get(e)}hasState(e){return this._states.has(e.getStateID())}getStates(){return this._states.values()}getStateCount(){return this._states.size}addTransition(e,t,s){if(!this.hasState(e))throw new Error("Trying to add a transition to unknown state with label '"+e.getStateLabel()+"'");if(!this.hasState(t))throw new Error("Trying to add a transition to unknown state with label '"+t.getStateLabel()+"'");if(!s)throw new Error("Cannot add transition for null symbol - use the empty symbol instead");const r=e.getStateID()+"->"+t.getStateID();if(this._transitions.has(r)){const o=this._transitions.get(r);if(!o.hasSymbol(s))o.addSymbol(s);else return!1}else this._transitions.set(r,new lu(e,t,[s]));return this._incrSymbolCount(s),!0}removeTransition(e,t,s=null){const r=e.getStateID()+"->"+t.getStateID();if(!this._transitions.has(r))return!1;const i=this._transitions.get(r).getSymbols();if(s){const l=i.indexOf(s);return l>=0?(this._decrSymbolCount(s),i.splice(l,1),i.length<=0&&this._transitions.delete(r),!0):!1}else{for(const l of i)this._decrSymbolCount(l);return this._transitions.delete(r),!0}}hasTransition(e,t,s=null){const r=e.getStateID()+"->"+t.getStateID();return this._transitions.has(r)?s?this._transitions.get(r).hasSymbol(s):!0:!1}getTransitionSymbols(e,t){const s=e.getStateID()+"->"+t.getStateID();return this._transitions.has(s)?this._transitions.get(s).getSymbols():null}getTransitions(){return this._transitions.values()}_incrSymbolCount(e){if(e===B)return;const t=this._alphabet.get(e)||0;this._alphabet.set(e,t+1)}_decrSymbolCount(e){if(!this._alphabet.has(e))throw new Error("Unable to find valid transition symbol in alphabet");if(e===B)return;const t=this._alphabet.get(e);t<=1?this.isCustomSymbol(e)?this._alphabet.set(e,0):this._alphabet.delete(e):this._alphabet.set(e,t-1)}changeSymbol(e,t){if(e===B)throw new Error("Cannot change the empty symbol");if(t===B)throw new Error("Cannot change to the empty symbol");if(this._alphabet.has(t))throw new Error("Cannot change symbol to another existing symbol");for(const r of this._transitions.values()){const o=r.getSymbols(),i=o.indexOf(e);i>=0&&(o[i]=t)}const s=this._alphabet.get(e);this._alphabet.set(t,s),this._alphabet.delete(e),this._customSymbols.has(e)&&(this._customSymbols.delete(e),this._customSymbols.add(t))}removeSymbol(e){const t=[];for(const[s,r]of this._transitions.entries()){const o=r.getSymbols(),i=o.indexOf(e);i>=0&&(o.splice(i,1),o.length<=0&&t.push(s))}for(const s of t)this._transitions.delete(s);e!==B&&(this._customSymbols.has(e)?this._alphabet.set(e,0):this._alphabet.delete(e))}setCustomSymbol(e,t=!0){if(e===B)throw new Error("Cannot change the empty symbol as a custom symbol");t?this._customSymbols.has(e)||(this._customSymbols.add(e),this._alphabet.has(e)||this._alphabet.set(e,0)):this._customSymbols.has(e)&&(this._customSymbols.delete(e),this._alphabet.has(e)&&this._alphabet.get(e)<=0&&this._alphabet.delete(e))}isCustomSymbol(e){return this._customSymbols.has(e)}getCustomSymbols(){return this._customSymbols}clearCustomSymbols(){this._customSymbols.clear()}isUsedSymbol(e){return this._alphabet.has(e)&&this._alphabet.get(e)>0}isSymbol(e){return this._alphabet.has(e)}getAlphabet(){return this._alphabet.keys()}setStartState(e){const t=e.getStateID();this._states.has(t)||this._states.set(t,e),this._startState=e}isStartState(e){return this._startState===e}getStartState(){return this._startState}setFinalState(e,t=!0){if(t)this._states.has(e.getStateID())||this.addState(e),this._finalStates.add(e);else{if(!this._states.has(e.getStateID()))throw new Error("Trying to change final for missing state '"+e.getStateLabel()+"'");this._finalStates.delete(e)}}isFinalState(e){return this._finalStates.has(e)}getFinalStates(){return this._finalStates}doTransition(e,t,s=!1,r=[]){if(!e)return r;if(!(e instanceof ps))throw new Error("Invalid state instance type '"+typeof e+"'");if(!this._states.has(e.getStateID()))throw new Error("Unable to find source state with id '"+e.getStateID()+"'");t||(t=B);const o=e.getStateID()+"->";for(const i of this._transitions.keys())if(i.startsWith(o)){const l=this._transitions.get(i);if(l.hasSymbol(t)&&(r.push(l.getDestinationState()),!s&&this._deterministic))return r}return r}doTerminalTransition(e,t,s=[]){if(!e)return s;if(!this._states.has(e.getStateID()))throw new Error("Unable to find source state with id '"+e.getStateID()+"'");t||(t=B);const r=e.getStateID()+"->";for(const o of this._transitions.keys())if(o.startsWith(r)){const i=this._transitions.get(o);if(i.hasSymbol(t)){const l=i.getDestinationState(),c=this.doClosureTransition(l);for(const u of c)s.includes(u)||s.push(u)}}return s}doClosureTransition(e,t=[]){if(!e)return t;t.push(e);for(let s=0;s<t.length;++s){const r=this.getOutgoingTransitions(t[s]);for(const o of r)if(o[rd]===B){const i=o[Wv];t.includes(i)||t.push(i)}}return t}getOutgoingTransitions(e,t=[]){if(!e)return t;if(!this._states.has(e.getStateID()))throw new Error("Unable to find source state with id '"+e.getStateID()+"'");const s=e.getStateID()+"->";for(const r of this._transitions.keys())if(r.startsWith(s)){const o=this._transitions.get(r),i=o.getSymbols();for(const l of i)t.push([e,l,o.getDestinationState()])}return t}getHashCode(){let e="";for(const t of this._states.values())e+=t.getHashString()+",";e+="|";for(const t of this._transitions.values())e+=t.getHashString()+",";e+="|";for(const t of this._finalStates)e+=t.getHashString();return e+="|",e+=this._startState?this._startState.getHashString():"",e+="|",e+=this._deterministic?"d":"n",pt(e)}}function Ki(n){if(n.getNodeCount()<=1)return[];const e=n.getEdges(),t=n.getNodes().slice(),s=t.shift();let r=[];for(r.push(s);r.length>0;){const o=r.pop();for(const i of e)if(i.getEdgeFrom()===o){const l=t.indexOf(i.getEdgeTo());if(l>=0){const c=t.splice(l,1)[0];r.push(c)}}}return t}const Cf="unreachable_state",wf="duplicate_state",Ef="incomplete_transition",xf="duplicate_transition",Tf="missing_transition",Nf="empty_transition";class Mf extends Sf{constructor(){super(),this._machine=new lt}attemptBuildGraph(e,t){t.clear();const s=new Map;let r;for(const d of e.getStates())r=t.createNode(0,0),r.setNodeLabel(d.getStateLabel()),e.isFinalState(d)&&r.setNodeAccept(!0),s.set(d,r);let o,i,l,c;for(let d of e.getTransitions())i=s.get(d.getSourceState()),i&&(c=d.getSymbols().join(" "),l=s.get(d.getDestinationState()),l&&(o=t.createEdge(i,l),o.setEdgeLabel(c)));const u=e.getStartState();let h=t.getNodesByLabel(u);return h&&h.length>0&&t.setStartNode(h[0]),t}attemptBuildMachine(e,t,s=[],r=[]){s.length=0,r.length=0;const o=t.isDeterministic();t.clear();const i=new Map,l=new Map,c=new Set,u=[],h=[],d=e.getNodes(),p=e.getEdges(),v=e.getStartNode();for(const y of d){const w=y.getNodeLabel(),f=new ps(w,y);t.addState(f),y.getNodeAccept()&&t.setFinalState(f,!0),v===y&&t.setStartState(f),i.has(w)?i.get(w).push(f):i.set(w,[f]),l.set(f,new Map)}for(const y of p){const w=y.getEdgeFrom(),f=y.getEdgeTo();if(!y.isPlaceholder()&&w instanceof Za&&f instanceof Za){const g=t.getStateByID(w.getGraphElementID()),_=t.getStateByID(f.getGraphElementID());if(!g||!_)throw new Error("Cannot find state for edge source/destination nodes - mismatch id");const E=y.getEdgeLabel().split(ft);for(const x of E){if(!x)continue;x===It?h.push(y):c.add(x);let N;switch(x){case It:N=B;break;default:N=x}let M=l.get(g),I=M.get(N);I||M.set(N,I=new Array),I.push(y),t.addTransition(g,_,N)}}else{u.push(y);continue}}for(const[y,w]of i.entries())w.length>1&&s.push({name:wf,label:y,nodes:w.map(f=>f.getSource())});u.length>0&&s.push({name:Ef,edges:u});const m=Ki(e);if(m&&m.length>0&&r.push({name:Cf,nodes:m}),o){h.length>0&&s.push({name:Nf,edges:h});const y=[];for(const[w,f]of l.entries()){for(const g of c){const _=f.get(g);_?_.length!==1&&s.push({name:xf,edges:_,symbol:g}):y.push(g)}y.length>0&&(s.push({name:Tf,node:w.getSource(),symbols:y.slice()}),y.length=0)}}return s.length<=0?t:null}getMachine(){return this._machine}}function tc(n,e=new lt(!0)){if(n.isDeterministic())return e.copy(n),e;e.setDeterministic(!0);const t=n.getStartState(),s={nfaSource:n,dfaStateMap:new Map,dfaFinalStates:[],dfaTransitionMap:new Map,dfaStartState:null,dfaTrapState:null},r=n.doClosureTransition(t);s.dfaStartState=_i(r,s),s.dfaTrapState=_i([],s);const o=Xv(n.getStates());for(const i of o)i.length>0&&Yv(i,s);for(const i of s.dfaStateMap.values())for(const l of n.getAlphabet()){const c=bf(i,l);s.dfaTransitionMap.has(c)||s.dfaTransitionMap.set(c,[i,l,s.dfaTrapState])}e.clear();for(const i of s.dfaStateMap.values())e.addState(i);e.setStartState(s.dfaStartState);for(const i of s.dfaFinalStates)e.setFinalState(i);for(const i of s.dfaTransitionMap.values())e.addTransition(i[0],i[2],i[1]);return e}function Yv(n,e){let t=_i(n,e),s=null,r=[];for(const o of e.nfaSource.getAlphabet()){for(const i of n)e.nfaSource.doTerminalTransition(i,o,r);if(r.length>0){s=_i(r,e);const i=bf(t,o);e.dfaTransitionMap.set(i,[t,o,s])}r.length=0}}function Qv(n,e){let t="";for(const s of e.nfaSource.getStates())n.includes(s)?t+="x":t+="-";return t}function bf(n,e,t){return n.getStateID()+";"+e}function _i(n,e){const t=Qv(n,e);let s=e.dfaStateMap.get(t);if(!s){let r=!1,o="{";for(const i of n)o.length>1&&(o+=","),o+=i.getStateLabel(),r||(r=e.nfaSource.isFinalState(i));o+="}",s=new ps(o),e.dfaStateMap.set(t,s),r&&e.dfaFinalStates.push(s)}return s}function Xv(n){var e=[[]];for(const t of n)for(let s=0,r=e.length;s<r;++s)e.push(e[s].concat(t));return e}const qv=1e3;function Zv(n,e){if(typeof e=="string"&&(e=e[Symbol.iterator]()),n.isDeterministic()){let t=n.getStartState(),s=null;for(;s=e.next().value;){const r=n.doTransition(t,s);if(r.length<1)return!1;t=r[0]}return n.isFinalState(t)}else{const t=[],s=[],r=n.getStartState();t.push({state:r,index:0});for(const l of n.doClosureTransition(r))t.push({state:l,index:0});let o=null,i=0;for(;t.length>0;){if(o=e.next().value,nc(n,o,t,s))return!0;if(++i,i>qv)return!1}return!1}}function nc(n,e,t,s){let r=null,o=[],i=0;e&&s.push(e);for(const l of t){if(r=l.state,e=l.index<s.length?s[l.index]:null,e){i=l.index+1;for(const c of n.doTerminalTransition(r,e))o.push({state:c,index:i})}else if(n.isFinalState(r))return!0;i=l.index}return t.length=0,t.push(...o),!1}function Jv(n,e,t=new lt(!0)){if(!eS(n,e))throw new Error("Mismatched machine alphabet");const s=n.getAlphabet(),r=n.getStartState(),o=e.getStartState();if(!r&&!o)return t.clear(),t;if(r){if(!o)return t.copy(n)}else return t.copy(e);const i=new Map,l=new Set,c=[],u=[r,o],h=r.getStateID()+":"+o.getStateID();n.isFinalState(r)&&e.isFinalState(o)&&l.add(h),i.set(h,u);const d=[];for(d.push(h);d.length>0;){const m=d.pop(),y=i.get(m),w=y[0],f=y[1],g=[];for(const _ of s){let E,x;if(n.doTransition(w,_,!1,g),g.length!==1)throw new Error("Found non-deterministic transition from '"+w.getStateLabel()+"' for '"+_+"' - transitions to '"+g.join(",")+"'");if(E=g[0],g.length=0,e.doTransition(f,_,!1,g),g.length!==1)throw new Error("Found non-deterministic transition from '"+f.getStateLabel()+"' for '"+_+"' - transitions to '"+g.join(",")+"'");x=g[0],g.length=0;const N=E.getStateID()+":"+x.getStateID();i.has(N)||(i.set(N,[E,x]),d.push(N),n.isFinalState(E)&&e.isFinalState(x)&&l.add(N)),c.push([m,_,N])}}t.clear();const p=new Map;for(const[m,y]of i.entries()){const w=t.createState("("+y[0].getStateLabel()+","+y[1].getStateLabel()+")");l.has(m)&&t.setFinalState(w,!0),p.set(m,w)}const v=p.get(h);if(!v)throw new Error("Unable to find start state for pair");t.setStartState(v);for(const m of c){const y=m[0],w=m[1],f=m[2],g=p.get(y),_=p.get(f);if(!g||!_)throw new Error("Cannot find state for pair");t.addTransition(g,_,w)}return t}function eS(n,e){const t=new Set;for(let s of n.getAlphabet())t.add(s);for(let s of e.getAlphabet())if(t.has(s))t.delete(s);else return!1;return t.size<=0}function If(n,e=new lt(!0)){e.copy(n);const t=new Set(e.getFinalStates());for(const s of e.getStates())t.has(s)?e.setFinalState(s,!1):e.setFinalState(s,!0);return e}function Lf(n,e){const t=n.isDeterministic()?n:tc(n),s=e.isDeterministic()?e:tc(e);return tS(t,s)}function tS(n,e){let t=od(n,e);if(!t)return{value:!1,witnessString:null};let s=id(t);if(s)return{value:!1,witnessString:s};let r=od(e,n);if(!r)return{value:!1,witnessString:null};let o=id(r);return o?{value:!1,witnessString:o}:{value:!0,witnessString:null}}function od(n,e){if(!nS(n,e))return null;const s=If(e);return Jv(n,s)}function id(n){const e=[],t=[n.getStartState()],s=new Map;for(s.set(n.getStartState(),"");t.length;){let r=t.shift();e.push(r);let o=s.get(r);if(n.isFinalState(r))return o;for(const i of n.getOutgoingTransitions(r)){let l=i[2];if(!e.includes(l)&&!t.includes(l)){t.push(l);let c=i[1];s.set(l,o+c)}}}return!1}function nS(n,e){let t=new Set,s=new Set;for(const r of n.getAlphabet())n.isUsedSymbol(r)&&t.add(r);for(const r of e.getAlphabet())e.isUsedSymbol(r)&&s.add(r);if(t.size!=s.size)return!1;for(const r of t)if(!s.has(r))return!1;return t}class sS extends vf{constructor(e){super(e,new Mf),this.graphController=null}initialize(e){super.initialize(e),this.graphController=e.getGraphController()}destroy(e){super.destroy(e)}update(e){super.update(e)}getMachineType(){return this._machineBuilder.getMachine().isDeterministic()?"DFA":"NFA"}setMachineType(e){this._machineBuilder.getMachine().setDeterministic(e==="DFA")}changeMachineTo(e){this.getMachineType()!=e&&this.setMachineType(e)}getFirstGraphNodeByLabel(e,t){for(const s of e.getNodes())if(s.getNodeLabel()==t)return s;return null}setGraphToMachine(e,t){this._machineBuilder.attemptBuildGraph(t,e),Ar.applyLayout(e)}convertMachineTo(e){const t=this.getMachineType();if(t!==e)if(e=="DFA"&&t=="NFA"){const s=tc(this.getMachineBuilder().getMachine());this.setGraphToMachine(this.graphController.getGraph(),s),this.setMachineType(e)}else if(e=="NFA"&&t=="DFA")this.changeMachineTo(e);else throw new Error("Conversion scheme between '"+t+"' to '"+e+"' is not supported")}invertMachine(){const e=this.getMachineBuilder().getMachine(),t=If(e,e);for(const s of t.getStates())s.getSource().setNodeAccept(e.isFinalState(s))}getStates(){return this._machineBuilder.getMachine().getStates()}countStates(){return this._machineBuilder.getMachine().getStateCount()}getFinalStates(){return this._machineBuilder.getMachine().getFinalStates()}getTransitions(){return this._machineBuilder.getMachine().getTransitions()}getAlphabet(){const e=this._machineBuilder.getMachine();return Array.from(e.getAlphabet())}isUsedSymbol(e){return!this.isCustomSymbol(e)}createSymbol(e){this.addCustomSymbol(e)}deleteSymbol(e){let t=null,s=null,r=null;const o=[],i=this.graphController.getGraph();for(let l=i.getEdges().length-1;l>=0;--l)t=i.getEdges()[l],s=t.getEdgeLabel().indexOf(e),s>=0&&(r=t.getEdgeLabel().substring(0,s)+t.getEdgeLabel().substring(s+1),r.length>0?t.setEdgeLabel(r):(t.setEdgeLabel(""),i.deleteEdge(t)),o.push(t));o.length<=0&&this.getMachineBuilder().removeCustomSymbol(e)}renameSymbol(e,t){let s=null,r=null;const o=[],i=this.graphController.getGraph(),l=i.getEdges().length;for(let c=0;c<l;++c)s=i.getEdges()[c],r=s.getEdgeLabel().replace(e,t),r!=s.getEdgeLabel()&&o.push(s),s.setEdgeLabel(r);o.length<=0&&this.getMachineBuilder().renameCustomSymbol(e,t)}getCustomSymbols(){return Array.from(this._machineBuilder.getMachine().getCustomSymbols())}isCustomSymbol(e){return this._machineBuilder.isCustomSymbol(e)}addCustomSymbol(e){this._machineBuilder.getMachine().setCustomSymbol(e)}clearCustomSymbols(){this._machineBuilder.getMachine().clearCustomSymbols()}}const rS=!1,au={__eventListeners:null,mixin(n){const e=n.prototype;Object.assign(e,au),delete e.mixin},registerEvent(n){if(this.__eventListeners||(this.__eventListeners=new Map),!this.__eventListeners.has(n))this.__eventListeners.set(n,[]);else throw new Error("Already registered event '"+n+"'")},unregisterEvent(n){if(!!this.__eventListeners)if(this.__eventListeners.has(n))this.__eventListeners.delete(n);else throw new Error("Unable to find event '"+n+"'")},addEventListener(n,e){this.__eventListeners||(this.__eventListeners=new Map);let t;if(this.__eventListeners.has(n))t=this.__eventListeners.get(n);else throw new Error("Unable to find event '"+n+"'");t.push(e)},removeEventListener(n,e){if(!!this.__eventListeners)if(this.__eventListeners.has(n)){const t=this.__eventListeners.get(n);let s=!1,r=t.length;for(;r--;)t[r]===e&&(t.splice(r,1),s=!0);if(!s)throw new Error("Unable to find listener for event '"+n+"'")}else throw new Error("Unknown event '"+n+"'")},clearEventListeners(n){if(!!this.__eventListeners)if(!n)this.__eventListeners.clear();else if(this.__eventListeners.has(n)){const e=this.__eventListeners.get(n);e.length=0}else throw new Error("Unable to find event '"+n+"'")},countEventListeners(n){return this.__eventListeners&&this.__eventListeners.has(n)?this.__eventListeners.get(n).length:0},getEventListeners(n){return this.__eventListeners?this.__eventListeners.get(n):null},on(n,e){this.addEventListener(n,e)},once(n,e){const t=(...s)=>{try{e.apply(null,s)}finally{this.removeEventListener(n,t)}};this.addEventListener(n,t)},emit(n,...e){try{if(!this.__eventListeners)return;let t;if(this.__eventListeners.has(n)){t=this.__eventListeners.get(n);let s=null,r=t.length;for(;r--;){try{s=t[r].apply(null,e)}catch{continue}if(s===!0)break}}else if(!rS)throw new Error("Unable to find event '"+n+"'")}finally{this.onEventProcessed(n,...e)}},onEventProcessed(n,...e){}};class oS{constructor(e,t=!1,s=!1){this._tapeInput=e?e.split(""):[],this._left=t,this._right=s,this._index=0}stepForward(){++this._index}stepBackward(){--this._index}finish(){this._index=this._tapeInput.length*2}reset(){this._index=-1}stop(){this.finish(),this.reset()}changeTapeSymbol(e,t=""){this._tapeInput[e]=t}getTapeSourceStatesByIndex(e){return null}getTapeSymbolByIndex(e){return e<0||e>=this._tapeInput.length?"":this._tapeInput[e]||""}isTapeLeftInfinite(){return this._left}isTapeRightInfinite(){return this._right}setCurrentTapeIndex(e){this._index=e}getCurrentTapeIndex(){return this._index}getTapeInput(){return this._tapeInput}}class iS extends oS{constructor(e,t,s){super(e.getTestString(),!1,!0),this._tester=e,this._graphController=t,this._machineController=s}stepForward(){const e=this._graphController,t=this._machineController;this._tester.stepForward(e,t)}stepBackward(){const e=this._graphController,t=this._machineController;this._tester.stepBackward(e,t)}reset(){this._tester.resetPosition()}finish(){const e=this._graphController,t=this._machineController;this._tester.runTest(e,t,!1)}stop(){this._tester.stopTest()}changeTapeSymbol(e,t=""){throw new Error("Operation not yet supported")}getTapeSourceStatesByIndex(e){return e<0||e>=this._tapeInput.length?null:this._tester.getNodesAtPosition(e)}getTapeSymbolByIndex(e){return e<0||e>=this._tapeInput.length?[]:this._tapeInput[e]||""}setCurrentTapeIndex(e){this._tester.changePosition(e)}getCurrentTapeIndex(){return this._tester.getPosition()}}class kf{constructor(){this._testString=null,this._testIndex=-1,this._tapeContext=null,this._cachePath=[],this._cachedResult=null,this._resolve=null,this._reject=null,this.registerEvent("startTest"),this.registerEvent("stepTest"),this.registerEvent("stopTest")}get targets(){return this._cachePath.length<=0?[]:this._cachePath[this._cachePath.length-1].targets}startTest(e,t,s){if(e||(e=""),this._tapeContext)throw new Error("Unable to start an already running test");return t.getGraph().isEmpty()?Promise.reject():(this._testString=e,this._testIndex=-1,this._cachePath.length=0,this._cachedResult=null,this._tapeContext=new iS(this,t,s),this.emit("startTest",this),new Promise((o,i)=>{this._resolve=o,this._reject=i}))}stopTest(){if(!this._tapeContext)throw new Error("Unable to stop null test");if(this.emit("stopTest",this),!this._resolve)throw new Error("Must call startTest() before anything else");if(!this._reject)throw new Error("Must call startTest() before anything else");let e=null;return this._cachePath.length>=this._testString.length?(e=this._cachedResult,this._resolve(e)):(e=null,this._reject()),this._testString=null,this._testIndex=-1,this._cachePath.length=0,this._cachedResult=null,this._tapeContext=null,Promise.resolve(e)}runTest(e,t,s=!1){if(!this._tapeContext)throw new Error("Unable to run null test");return new Promise((r,o)=>{let i=!1;do i=this.stepForward(e,t,!s);while(i);r(this._cachedResult)}).then(r=>s?this.stopTest():r)}stepForward(e,t,s=!0){const r=t.getMachineBuilder().getMachine();if(this._testIndex>=this._testString.length)return!1;if(++this._testIndex,this._cachePath.length<=this._testIndex){let o,i=null;const l=this._testIndex===this._testString.length;if(this._testIndex<=0){o=[],i=[];const h=r.getStartState();for(const d of r.doClosureTransition(h))o.push({state:d,index:0})}else{const h=this._cachePath[this._testIndex-1];o=h.states.slice(),i=h.symbols.slice();const d=this._testString[this._testIndex-1];nc(r,d,o,i)}l&&(this._cachedResult=nc(r,null,o,i));const c=new Set;for(const h of o){const d=h.state.getSource();if(!d)throw new Error("Could not find node '"+h.state+"'");c.add(d)}const u={targets:Array.from(c),states:o,symbols:i};this._cachePath.push(u)}return this.emit("stepTest"),!0}stepBackward(e,t){return this._testIndex<=0?!1:(--this._testIndex,this.emit("stepTest"),!0)}isTesting(){return this._testString!==null}changePosition(e){e>=this._cachePath.length?this._testIndex=this._cachePath.length-1:e<0?this._testIndex=0:e>=this._testString.length?this._testIndex=this._testString.length-1:this._testIndex=e}resetPosition(){this._testIndex=-1}getPosition(){return this._testIndex}isComputedPosition(e){return this._cachePath.length>e}getCurrentNodes(){return this._testIndex>=0&&this._testIndex<this._cachePath.length?this._cachePath[this._testIndex]:null}getNodesAtPosition(e){return e>=0&&e<this._cachePath.length?this._cachePath[e].targets:null}getTestString(){return this._testString}getTapeContext(){return this._tapeContext}}au.mixin(kf);class lS extends S.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){const t=this.props.notification;switch(e.target.value){case"convert":this.props.machineController.convertMachineTo("DFA"),t.close();break}}render(){const t=this.props.machineController.countStates();return C(Ie,{id:this.props.id,className:this.props.className,style:this.props.style,styleType:Hi,notification:this.props.notification,children:[a("p",{children:I18N.toString("message.warning.convertNFAToDFA")}),a("p",{children:`${t} states -> ${Math.pow(2,t)} states`}),a("button",{value:"convert",onClick:this.onClick,children:I18N.toString("message.action.convert")})]})}}class aS extends S.Component{constructor(e){super(e),this._targetIndex=0,this._targetLabel="";const t=e.message.targets;for(const s of t)this._targetLabel.length>0&&(this._targetLabel+=", "),this._targetLabel+=s.getNodeLabel();this.onClick=this.onClick.bind(this)}onClick(e){const t=this.props.notification,s=this.props.message,r=this.props.app,o=this.props.graphController;switch(e.target.value){case"locate":{const i=s.targets,l=i.length;if(l>0&&this._targetIndex<l){const c=i[this._targetIndex++];this._targetIndex>=l&&(this._targetIndex=0),r.getSession().getCurrentModule().getGraphView().moveViewToPosition(c.x,c.y)}}break;case"deleteall":{const i=s.targets;o.deleteTargetNodes(i),o.applyAutoRename(),t.close()}break}}render(){const e=this.props.message;return C(Ie,{id:this.props.id,className:this.props.className,style:this.props.style,styleType:ys,notification:this.props.notification,children:[a("p",{children:e.text+": "+this._targetLabel}),a("button",{value:"locate",onClick:this.onClick,children:I18N.toString("message.action.locate")}),a("button",{value:"deleteall",onClick:this.onClick,children:I18N.toString("message.action.deleteall")})]})}}const cS="\u2192";class uS extends S.Component{constructor(e){super(e),this.targetIndex=0,this.targetLabel="";const t=e.message.targets;for(const s of t)this.targetLabel.length>0&&(this.targetLabel+=", "),this.targetLabel+="("+s.getEdgeFrom().getNodeLabel()+", "+s.getEdgeLabel()+") "+cS+" "+(s.getEdgeTo()instanceof Ye?s.getEdgeTo().getNodeLabel():"null");this.onClick=this.onClick.bind(this)}onClick(e){const t=this.props.notification,s=this.props.message,r=this.props.app,o=this.props.graphController;switch(e.target.value){case"locate":{const i=s.targets,l=i.length;if(l>0&&this.targetIndex<l){const c=i[this.targetIndex++];this.targetIndex>=l&&(this.targetIndex=0);const u=r.getSession().getCurrentModule().getGraphView(),h=c.getCenterPoint();u.moveViewToPosition(h.x,h.y)}}break;case"deleteall":{const i=s.targets;o.deleteTargetEdges(i),t.close()}break}}render(){return C(Ie,{id:this.props.id,className:this.props.className,style:this.props.style,styleType:ys,notification:this.props.notification,children:[a("p",{children:this.props.message.text+": "+this.targetLabel}),a("button",{value:"locate",onClick:this.onClick,children:I18N.toString("message.action.locate")}),a("button",{value:"deleteall",onClick:this.onClick,children:I18N.toString("message.action.deleteall")})]})}}class hS extends S.Component{constructor(e){super(e),this.targetIndex=0,this.targetLabel="";const t=e.message.targets;for(const s of t)this.targetLabel.length>0&&(this.targetLabel+=", "),this.targetLabel+=s.getNodeLabel();this.targetLabel+=" for "+e.message.symbol,this.onClick=this.onClick.bind(this)}onClick(e){const t=this.props.message,s=this.props.app;switch(e.target.value){case"locate":{const r=t.targets,o=r.length;if(o>0&&this.targetIndex<o){const i=r[this.targetIndex++];this.targetIndex>=o&&(this.targetIndex=0),s.getSession().getCurrentModule().getGraphView().moveViewToPosition(i.x,i.y)}}break}}render(){return C(Ie,{id:this.props.id,className:this.props.className,style:this.props.style,styleType:ys,notification:this.props.notification,children:[a("p",{children:I18N.toString("message.error.missing")+": "+this.targetLabel}),a("button",{value:"locate",onClick:this.onClick,children:I18N.toString("message.action.locate")})]})}}class dS extends S.Component{constructor(e){super(e),this.targetIndex=0,this.targetLabel="";const t=e.message;for(const s of t)this.targetLabel.length>0&&(this.targetLabel+=", "),this.targetLabel+=s.getNodeLabel();this.onClick=this.onClick.bind(this)}onClick(e){const t=this.props.notification,s=this.props.message,r=this.props.app,o=this.props.graphController;switch(e.target.value){case"locate":{const i=s[this.targetIndex++];this.targetIndex>=s.length&&(this.targetIndex=0),r.getSession().getCurrentModule().getGraphView().moveViewToPosition(i.x,i.y)}break;case"deleteall":{const i=s;o.deleteTargetNodes(i),o.applyAutoRename(),t.close()}break}}render(){return C(Ie,{id:this.props.id,className:this.props.className,style:this.props.style,styleType:Hi,notification:this.props.notification,children:[a("p",{children:I18N.toString("message.warning.unreachable")+": "+this.targetLabel}),a("button",{value:"locate",onClick:this.onClick,children:I18N.toString("message.action.locate")}),a("button",{value:"deleteall",onClick:this.onClick,children:I18N.toString("message.action.deleteall")})]})}}const Af="machine-convert",pS="machine-convert",Df="machine-state",Bo="machine-transition",Pf="machine-state-missing",Ff="machine-state-unreachable",yt="machine-error";function gS(n){n.registerNotificationLayout(Af,lS),n.registerNotificationLayout(Pf,hS),n.registerNotificationLayout(Ff,dS),n.registerNotificationLayout(Df,aS),n.registerNotificationLayout(Bo,uS)}class fS{constructor(e,t,s){this._app=e,this._graphController=t,this._machineController=s,this._showErrorOnChange=!1,this.onMachineChange=this.onMachineChange.bind(this),s.getMachineBuilder().getMachineChangeHandler().addListener(this.onMachineChange)}onMachineChange(e){this._showErrorOnChange&&this.showErrors()}setErrorChecking(e){this._showErrorOnChange=e}isErrorChecking(){return this._showErrorOnChange}showErrors(){const e={graphController:this._graphController,machineController:this._machineController,app:this._app},t=this._machineController.getMachineBuilder(),s=t.getMachineErrors(),r=t.getMachineWarnings(),i=this._app.getNotificationManager();if(i.clearNotifications(yt),s.length<=0&&r.length<=0)i.pushNotification(I18N.toString("message.error.none"),$i,yt,null,!1);else{for(const l of r)switch(l.name){case Cf:i.pushNotification(l.nodes,Ff,yt,e,!1);break}for(const l of s)switch(l.name){case wf:i.pushNotification({text:"Found duplicate nodes of similar names",targets:l.nodes},Df,yt,e,!1);break;case Ef:i.pushNotification({text:I18N.toString("message.error.incomplete"),targets:l.edges},Bo,yt,e,!1);break;case xf:i.pushNotification({text:I18N.toString("message.error.dupe"),targets:l.edges},Bo,yt,e,!1);break;case Tf:i.pushNotification({targets:[l.node],symbol:l.symbols},Pf,yt,e,!1);break;case Nf:i.pushNotification({text:I18N.toString("message.error.empty"),targets:l.edges},Bo,yt,e,!1);break}}}}const Of="1.0.0",ts={parse(n,e=null){e?e.clear():e=new xn;const t=n.nodes||[],s=Math.min(t.length||0,n.nodeCount||0),r=n.edges||[],o=Math.min(r.length||0,n.edgeCount||0),i=n.initial||0,l=new Map;for(let u=0;u<s;++u){const h=t[u];if(!h)continue;const d=e.createNode(h.x||0,h.y||0,h.id);d.setNodeLabel(h.label||""),d.setNodeAccept(h.accept||!1),d.setNodeCustom(h.custom||!1),l.set(u,d)}const c=l.get(i);c&&e.setStartNode(c);for(let u=0;u<o;++u){const h=r[u];if(!h)continue;const d=l.get(h.from)||null;if(!d)continue;const p=l.get(h.to)||null,v=e.createEdge(d,p,h.id),m=h.quad||{};v.setEdgeLabel(h.label||""),v.setQuadraticRadians(m.radians||0),v.setQuadraticLength(m.length||0)}return e},objectify(n){const e=n.getNodes()||[],t=e.length||0,s=n.getEdges()||[],r=s.length||0,o=n.getStartNode(),i=new Array(t),l=new Map;for(let h=0;h<t;++h){const d=e[h];if(d){const p=d.getGraphElementID();l.set(d,h),i[h]={id:p,x:d.x||0,y:d.y||0,label:d.getNodeLabel()||"",accept:d.getNodeAccept()||!1,custom:d.getNodeCustom()||!1}}}const c=new Array(r);for(let h=0;h<r;++h){const d=s[h];if(d){const p=d.getGraphElementID(),v=d.getQuadratic()||{},m=d.getEdgeFrom(),y=d.getEdgeTo(),w=l.has(m)?l.get(m):-1,f=l.has(y)?l.get(y):-1;c[h]={id:p,from:w,to:f,quad:{radians:v.radians||0,length:v.length||0},label:d.getEdgeLabel()||""}}}const u=l.get(o)||0;return{nodeCount:t,nodes:i,edgeCount:r,edges:c,initial:u,_version:Of}}},ld={parse(n,e=null){e?e.clear():e=new xn;const t=n.getElementsByTagName("state")||[],s=t.length,r=n.getElementsByTagName("transition")||[],o=r.length;let i="0";const l=new Map;for(let w=0;w<s;++w){const f=t[w];if(!f)continue;const g=f.getAttribute("id");if(!g)continue;let _=0;const E=f.getElementsByTagName("x");if(E.length>0){const Qe=E[0];if(Qe.hasChildNodes()){const Xe=Qe.childNodes[0];if(Xe)try{_=parseFloat(Xe.nodeValue)||0}catch{_=0}}}let x=0;const N=f.getElementsByTagName("y");if(N.length>0){const Qe=N[0];if(Qe.hasChildNodes()){const Xe=Qe.childNodes[0];if(Xe)try{x=parseFloat(Xe.nodeValue)||0}catch{x=0}}}const I=f.getElementsByTagName("initial").length>0,b=f.getElementsByTagName("final").length>0,G=e.createNode(_,x);G.setNodeLabel(f.getAttribute("name")||""),G.setNodeAccept(b),I&&(i=g),l.set(g,G)}const c=l.get(i);c&&e.setStartNode(c);const u=e.getBoundingRect(),h=u.minX,d=u.minY,p=u.width,v=u.height,m=e.getNodes();for(let w=0,f=m.length;w<f;++w)m[w].x-=h+p/2,m[w].y-=d+v/2;const y=new Map;for(let w=0;w<o;++w){const f=r[w];if(!f)continue;let g=null;const _=f.getElementsByTagName("from");if(_.length>0){const b=_[0];if(b.hasChildNodes()){const G=b.childNodes[0];G&&(g=G.nodeValue)}}if(!l.has(g))continue;let E="";const x=f.getElementsByTagName("to");if(x.length>0){const b=x[0];if(b.hasChildNodes()){const G=b.childNodes[0];G&&(E=G.nodeValue||"")}}let N="";const M=f.getElementsByTagName("read");if(M.length>0){const b=M[0];if(b.hasChildNodes()){const G=b.childNodes[0];G&&(N=G.nodeValue||"")}}const I=g+`
`+E;let A;y.has(I)?A=y.get(I):(A=[],y.set(I,A)),A.push(N)}for(const w of y.keys()){const f=w.split(`
`);if(f.length!==2)continue;const _=y.get(w).join(ft),E=l.get(f[0]),x=l.get(f[1]);e.createEdge(E,x).setEdgeLabel(_)}return e},objectify(n){const e=n.getNodes()||[],t=e.length||0,s=n.getEdges()||[],r=n.getStartNode(),o='<?xml version="1.0" encoding="UTF-8" standalone="no"?><!--Created with flap.js '+Of+"--><structure></structure>",l=new DOMParser().parseFromString(o,"application/xml"),c=l.getElementsByTagName("structure")[0],u=l.createElement("type");u.innerHTML="fa",c.appendChild(u);const h=l.createElement("automaton");c.appendChild(h);const d=new Map;for(let p=0;p<t;++p){const v=e[p];d.set(v,p);const m=l.createElement("state");m.id=""+p,m.setAttribute("name",v.getNodeLabel()),h.appendChild(m);const y=l.createElement("x");y.innerHTML=""+(v.x||0),m.appendChild(y);const w=l.createElement("y");w.innerHTML=""+(v.y||0),m.appendChild(w),r===v&&m.appendChild(l.createElement("initial")),v.getNodeAccept()&&m.appendChild(l.createElement("final"))}for(let p of s){const v=p.getEdgeLabel().split(ft);for(let m of v){const y=l.createElement("transition");h.appendChild(y);const w=l.createElement("from");w.innerHTML=""+(d.get(p.getEdgeFrom())||0),y.appendChild(w);const f=l.createElement("to");f.innerHTML=""+(d.get(p.getEdgeTo())||0),y.appendChild(f);const g=l.createElement("read");g.innerHTML=""+(m||""),y.appendChild(g)}}return l}};class mS{constructor(){}importFileData(e,t,s){return Promise.resolve(s)}getDataType(){return"text"}}class ji extends mS{constructor(e){super(),this._app=e}onParseSession(e,t){return t}onPreImportSession(e){e.getApp().getUndoManager().captureEvent()}onImportSession(e,t){}onPostImportSession(e){e.getApp().getUndoManager().captureEvent()}importFileData(e,t,s){const r=this._app,o=r.getSession(),i=o.getCurrentModule(),l=this.onParseSession(o,s);this.onPreImportSession(o),this.onImportSession(o,l);let c;return e?c=e.substring(0,e.length-t.length):c=l._metadata.name,r.getSession().setProjectName(c),this.onPostImportSession(o),i}}class _S extends ji{constructor(e,t){super(e),this._graphParser=t,this._prevGraphHash=0}onParseSession(e,t){return JSON.parse(t)}onPreImportSession(e){const r=e.getCurrentModule().getGraphController().getGraph();this._prevGraphHash=r.getHashCode(!0),r.isEmpty()||e.getApp().getUndoManager().captureEvent()}onImportSession(e,t){const s=e.getCurrentModule(),r=s.getGraphController(),o=s.getMachineController(),i=r.getGraph();this._graphParser.parse(t.graphData,i),yS(r,o,t.machineData)}onPostImportSession(e){const o=e.getCurrentModule().getGraphController().getGraph().getHashCode(!0);this._prevGraphHash!==o&&e.getApp().getUndoManager().captureEvent()}}function yS(n,e,t){const s=t.type;s&&e.setMachineType(s);const r=t.symbols;if(r&&Array.isArray(r)){e.clearCustomSymbols();for(const o of r)e.addCustomSymbol(o)}if(n){const o=t.statePrefix;o&&n.getGraphLabeler().setDefaultNodeLabelPrefix(o)}}class vS extends ji{constructor(e,t){super(),this._app=e,this._graphParser=t}onParseSession(e,t){return new DOMParser().parseFromString(t,"text/xml")}onPreImportSession(e){const r=e.getCurrentModule().getGraphController().getGraph();this._prevGraphHash=r.getHashCode(!0),r.isEmpty()||e.getApp().getUndoManager().captureEvent()}onImportSession(e,t){const o=e.getCurrentModule().getGraphController().getGraph();this._graphParser.parse(t,o)}onPostImportSession(e){const o=e.getCurrentModule().getGraphController().getGraph().getHashCode(!0);this._prevGraphHash!==o&&e.getApp().getUndoManager().captureEvent()}}class Wi extends S.PureComponent{constructor(e){super(e)}render(){return C("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 56 56",children:[a("path",{fill:"#E9E9E0",d:"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"}),a("polygon",{fill:"#D9D7CA",points:"37.5,0.151 37.5,12 49.349,12 	"}),a("path",{fill:"#9777A8",d:"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"}),a("path",{fill:"#FFFFFF",d:"M17.021,42.719v7.848c0,0.474-0.087,0.873-0.26,1.196s-0.405,0.583-0.697,0.779 s-0.627,0.333-1.005,0.41c-0.378,0.077-0.768,0.116-1.169,0.116c-0.2,0-0.436-0.021-0.704-0.062s-0.547-0.104-0.834-0.191 s-0.563-0.185-0.827-0.294s-0.487-0.232-0.67-0.369l0.697-1.107c0.091,0.063,0.221,0.13,0.39,0.198s0.354,0.132,0.554,0.191 s0.41,0.111,0.629,0.157s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95v-7.711H17.021z"}),a("path",{fill:"#FFFFFF",d:"M25.184,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622 s-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116c-0.237-0.055-0.463-0.13-0.677-0.226 s-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144 s0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39s0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793 s-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23 c0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191 c0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396 s-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137 s-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321 s-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588 s0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S25.184,49.7,25.184,50.238z"}),a("path",{fill:"#FFFFFF",d:"M35.082,47.914c0,0.848-0.107,1.595-0.321,2.242s-0.511,1.185-0.889,1.613s-0.82,0.752-1.326,0.971 s-1.06,0.328-1.661,0.328s-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971s-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242 s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.82-0.754,1.326-0.978s1.06-0.335,1.661-0.335s1.155,0.111,1.661,0.335 s0.948,0.549,1.326,0.978s0.675,0.964,0.889,1.606S35.082,47.066,35.082,47.914z M30.844,51.729c0.337,0,0.658-0.066,0.964-0.198 s0.579-0.349,0.82-0.649s0.431-0.695,0.567-1.183s0.21-1.082,0.219-1.784c-0.009-0.684-0.08-1.265-0.212-1.743 s-0.314-0.873-0.547-1.183s-0.497-0.533-0.793-0.67s-0.608-0.205-0.937-0.205c-0.337,0-0.658,0.063-0.964,0.191 s-0.579,0.344-0.82,0.649s-0.431,0.699-0.567,1.183c-0.137,0.483-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.267,0.212,1.75 s0.314,0.877,0.547,1.183s0.497,0.528,0.793,0.67S30.516,51.729,30.844,51.729z"}),a("path",{fill:"#FFFFFF",d:"M44.68,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H44.68z"}),a("path",{fill:"#9777A8",d:"M19.5,19v-4c0-0.551,0.448-1,1-1c0.553,0,1-0.448,1-1s-0.447-1-1-1c-1.654,0-3,1.346-3,3v4 c0,1.103-0.897,2-2,2c-0.553,0-1,0.448-1,1s0.447,1,1,1c1.103,0,2,0.897,2,2v4c0,1.654,1.346,3,3,3c0.553,0,1-0.448,1-1 s-0.447-1-1-1c-0.552,0-1-0.449-1-1v-4c0-1.2-0.542-2.266-1.382-3C18.958,21.266,19.5,20.2,19.5,19z"}),a("circle",{fill:"#9777A8",cx:"27.5",cy:"18.5",r:"1.5"}),a("path",{fill:"#9777A8",d:"M39.5,21c-1.103,0-2-0.897-2-2v-4c0-1.654-1.346-3-3-3c-0.553,0-1,0.448-1,1s0.447,1,1,1 c0.552,0,1,0.449,1,1v4c0,1.2,0.542,2.266,1.382,3c-0.84,0.734-1.382,1.8-1.382,3v4c0,0.551-0.448,1-1,1c-0.553,0-1,0.448-1,1 s0.447,1,1,1c1.654,0,3-1.346,3-3v-4c0-1.103,0.897-2,2-2c0.553,0,1-0.448,1-1S40.053,21,39.5,21z"}),a("path",{fill:"#9777A8",d:"M27.5,24c-0.553,0-1,0.448-1,1v3c0,0.552,0.447,1,1,1s1-0.448,1-1v-3 C28.5,24.448,28.053,24,27.5,24z"})]})}}class SS extends Mn{constructor(e){super(".fsa.json"),this._graphParser=e}onExportSession(e,t){const s=e.getCurrentModule(),r=s.getGraphController(),o=s.getMachineController(),i=r.getGraph(),l=this._graphParser.objectify(i);t.graphData=l,t.machineData={type:o.getMachineType(),symbols:o.getCustomSymbols(),statePrefix:r.getGraphLabeler().getDefaultNodeLabelPrefix()}}getIconClass(){return Wi}getLabel(){return I18N.toString("file.export.machine")}getTitle(){return I18N.toString("file.export.machine.hint")}}class CS extends S.PureComponent{constructor(e){super(e)}render(){return C("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 56 56",children:[a("path",{fill:"#E9E9E0",d:"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"}),a("polygon",{fill:"#D9D7CA",points:"37.5,0.151 37.5,12 49.349,12 	"}),a("path",{fill:"#F29C1F",d:"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"}),a("path",{fill:"#FFFFFF",d:"M19.379,48.105L21.936,53h-1.9l-1.6-3.801h-0.137L16.576,53h-1.9l2.557-4.895l-2.721-5.182h1.873 l1.777,4.102h0.137l1.928-4.102H22.1L19.379,48.105z"}),a("path",{fill:"#FFFFFF",d:"M31.998,42.924h1.668V53h-1.668v-6.932l-2.256,5.605h-1.449l-2.27-5.605V53h-1.668V42.924h1.668 l2.994,6.891L31.998,42.924z"}),a("path",{fill:"#FFFFFF",d:"M37.863,42.924v8.832h4.635V53h-6.303V42.924H37.863z"}),a("path",{fill:"#F29C1F",d:"M15.5,24c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C16.012,23.902,15.756,24,15.5,24z"}),a("path",{fill:"#F29C1F",d:"M21.5,30c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C22.012,29.902,21.756,30,21.5,30z"}),a("path",{fill:"#F29C1F",d:"M33.5,30c-0.256,0-0.512-0.098-0.707-0.293c-0.391-0.391-0.391-1.023,0-1.414l6-6 c0.391-0.391,1.023-0.391,1.414,0s0.391,1.023,0,1.414l-6,6C34.012,29.902,33.756,30,33.5,30z"}),a("path",{fill:"#F29C1F",d:"M39.5,24c-0.256,0-0.512-0.098-0.707-0.293l-6-6c-0.391-0.391-0.391-1.023,0-1.414 s1.023-0.391,1.414,0l6,6c0.391,0.391,0.391,1.023,0,1.414C40.012,23.902,39.756,24,39.5,24z"}),a("path",{fill:"#F29C1F",d:"M24.5,32c-0.11,0-0.223-0.019-0.333-0.058c-0.521-0.184-0.794-0.755-0.61-1.276l6-17 c0.185-0.521,0.753-0.795,1.276-0.61c0.521,0.184,0.794,0.755,0.61,1.276l-6,17C25.298,31.744,24.912,32,24.5,32z"})]})}}class wS extends Mn{constructor(e){super(".jff"),this._graphParser=e}onExportSession(e,t){const o=e.getCurrentModule().getGraphController().getGraph();t.graphData=this._graphParser.objectify(o)}onStringifySession(e,t){return new XMLSerializer().serializeToString(t.graphData)}getIconClass(){return CS}getLabel(){return I18N.toString("file.export.jff")}getTitle(){return I18N.toString("file.export.jff.hint")}}const ES=[255,255,255],xS=[0,0,0];function TS(n,e=[]){const t=n[0]*.3+n[1]*.59+n[2]*.11;return e[0]=t,e[1]=t,e[2]=t,e}function Rf(n,e,t=null,s=[]){const r=Math.abs(n);return t||(t=n<0?xS:ES),s[0]=e[0]+Math.round(r*(t[0]-e[0])),s[1]=e[1]+Math.round(r*(t[1]-e[1])),s[2]=e[2]+Math.round(r*(t[2]-e[2])),s}function cu(n,e=!1,t=[]){return e?n[0]*.299+n[1]*.587+n[2]*.114>186?(t[0]=0,t[1]=0,t[2]=0):(t[0]=255,t[1]=255,t[2]=255):(t[0]=255-n[0],t[1]=255-n[1],t[2]=255-n[2]),t}function Yi(n,e=[]){if(n||(n="000000"),n.indexOf("#")===0&&(n=n.slice(1)),n.length===3&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),n.length!==6)throw new Error("Invalid hex color format");const t=n.substring(0,2),s=n.substring(2,4),r=n.substring(4,6);return e[0]=parseInt(t,16),e[1]=parseInt(s,16),e[2]=parseInt(r,16),e}function Qi(n){return"#"+(n[2]|n[1]<<8|n[0]<<16|1<<24).toString(16).slice(1)}class NS extends S.Component{constructor(e){super(e)}render(){return a("svg",{className:"png-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 56",children:C("g",{children:[a("path",{fill:"#E9E9E0",d:"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"}),a("path",{fill:"#659C35",d:"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"}),a("polygon",{fill:"#D9D7CA",points:"37.5,0.151 37.5,12 49.349,12 	"}),C("g",{children:[a("path",{fill:"#FFFFFF",d:"M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205 c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032 c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492 c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z"}),a("path",{fill:"#FFFFFF",d:"M31.316,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H31.316z"}),a("path",{fill:"#FFFFFF",d:"M41.16,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 S39.052,52.954,38.747,53c-0.306,0.046-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 v-1.121H41.16z"})]}),a("circle",{fill:"#F3D55B",cx:"18.931",cy:"14.431",r:"4.569"}),a("polygon",{fill:"#88C057",points:"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 	"})]})})}}class MS extends S.Component{constructor(e){super(e)}render(){return a("svg",{className:"jpg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 56",children:C("g",{children:[a("path",{fill:"#E9E9E0",d:"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"}),a("polygon",{fill:"#D9D7CA",points:"37.5,0.151 37.5,12 49.349,12 	"}),a("circle",{fill:"#F3D55B",cx:"18.931",cy:"14.431",r:"4.569"}),a("polygon",{fill:"#26B99A",points:"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 	"}),a("path",{fill:"#14A085",d:"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"}),C("g",{children:[a("path",{fill:"#FFFFFF",d:"M21.426,42.65v7.848c0,0.474-0.087,0.873-0.26,1.196c-0.173,0.323-0.406,0.583-0.697,0.779 c-0.292,0.196-0.627,0.333-1.005,0.41C19.085,52.961,18.696,53,18.295,53c-0.201,0-0.436-0.021-0.704-0.062 c-0.269-0.041-0.547-0.104-0.834-0.191s-0.563-0.185-0.827-0.294c-0.265-0.109-0.488-0.232-0.67-0.369l0.697-1.107 c0.091,0.063,0.221,0.13,0.39,0.198c0.168,0.068,0.353,0.132,0.554,0.191c0.2,0.06,0.41,0.111,0.629,0.157 s0.424,0.068,0.615,0.068c0.483,0,0.868-0.094,1.155-0.28s0.439-0.504,0.458-0.95V42.65H21.426z"}),a("path",{fill:"#FFFFFF",d:"M25.514,52.932h-1.641V42.855h2.898c0.428,0,0.852,0.068,1.271,0.205 c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 s-0.921,0.232-1.449,0.232h-1.217V52.932z M25.514,44.1v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 c0.196-0.068,0.376-0.18,0.54-0.335s0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032c0-0.164-0.023-0.354-0.068-0.567 c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492C27.5,44.166,27.163,44.1,26.744,44.1H25.514z"}),a("path",{fill:"#FFFFFF",d:"M39.5,47.736v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 s-0.583,0.187-0.889,0.232C36.781,52.978,36.479,53,36.178,53c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 v-1.121H39.5z"})]})]})})}}class bS extends S.Component{constructor(e){super(e)}render(){return a("svg",{className:"svg-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 56 56",children:C("g",{children:[a("path",{fill:"#E9E9E0",d:"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"}),a("polygon",{fill:"#D9D7CA",points:"37.5,0.151 37.5,12 49.349,12 	"}),a("path",{fill:"#E57E25",d:"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"}),C("g",{children:[a("path",{fill:"#FFFFFF",d:"M21.459,50.238c0,0.364-0.075,0.718-0.226,1.06s-0.362,0.643-0.636,0.902s-0.61,0.467-1.012,0.622 s-0.856,0.232-1.367,0.232c-0.219,0-0.444-0.012-0.677-0.034s-0.467-0.062-0.704-0.116s-0.463-0.13-0.677-0.226 s-0.398-0.212-0.554-0.349l0.287-1.176c0.128,0.073,0.289,0.144,0.485,0.212s0.398,0.132,0.608,0.191s0.419,0.107,0.629,0.144 s0.405,0.055,0.588,0.055c0.556,0,0.982-0.13,1.278-0.39c0.296-0.26,0.444-0.645,0.444-1.155c0-0.31-0.104-0.574-0.314-0.793 s-0.472-0.417-0.786-0.595s-0.654-0.355-1.019-0.533s-0.706-0.388-1.025-0.629s-0.583-0.526-0.793-0.854s-0.314-0.738-0.314-1.23 c0-0.446,0.082-0.843,0.246-1.189s0.385-0.641,0.663-0.882s0.602-0.426,0.971-0.554s0.759-0.191,1.169-0.191 c0.419,0,0.843,0.039,1.271,0.116s0.774,0.203,1.039,0.376c-0.055,0.118-0.118,0.248-0.191,0.39s-0.142,0.273-0.205,0.396 s-0.118,0.226-0.164,0.308s-0.073,0.128-0.082,0.137c-0.055-0.027-0.116-0.063-0.185-0.109s-0.166-0.091-0.294-0.137 s-0.296-0.077-0.506-0.096s-0.479-0.014-0.807,0.014c-0.183,0.019-0.355,0.07-0.52,0.157s-0.31,0.193-0.438,0.321 s-0.228,0.271-0.301,0.431s-0.109,0.313-0.109,0.458c0,0.364,0.104,0.658,0.314,0.882s0.47,0.419,0.779,0.588 s0.647,0.333,1.012,0.492s0.704,0.354,1.019,0.581s0.576,0.513,0.786,0.854S21.459,49.7,21.459,50.238z"}),a("path",{fill:"#FFFFFF",d:"M25.861,53.055L22.73,42.924h1.873l2.338,8.695l2.475-8.695h1.859l-3.281,10.131H25.861z"}),a("path",{fill:"#FFFFFF",d:"M40.668,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 S38.561,52.954,38.255,53s-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 s-0.675-0.966-0.889-1.613s-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235s0.511-1.178,0.889-1.606s0.822-0.754,1.333-0.978 s1.062-0.335,1.654-0.335c0.547,0,1.058,0.091,1.531,0.273s0.897,0.456,1.271,0.82l-1.135,1.012 c-0.219-0.265-0.47-0.456-0.752-0.574s-0.574-0.178-0.875-0.178c-0.337,0-0.658,0.063-0.964,0.191s-0.579,0.344-0.82,0.649 s-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777s0.314,0.911,0.547,1.23 s0.497,0.556,0.793,0.711s0.608,0.232,0.937,0.232c0.101,0,0.234-0.007,0.403-0.021s0.337-0.036,0.506-0.068 s0.33-0.075,0.485-0.13s0.269-0.132,0.342-0.232v-2.488h-1.709v-1.121H40.668z"})]}),a("path",{fill:"#C8BDB8",d:"M45.5,22v-6h-6v2h-6v-4h-10v4h-6v-2h-6v6h6v-2h3.548c-4.566,2.636-7.548,7.588-7.548,13 c0,0.552,0.447,1,1,1s1-0.448,1-1c0-5.246,3.229-9.999,8-11.995V24h10v-2.995c4.771,1.997,8,6.75,8,11.995c0,0.552,0.447,1,1,1 s1-0.448,1-1c0-5.412-2.982-10.364-7.548-13H39.5v2H45.5z M15.5,20h-2v-2h2V20z M31.5,22h-6v-3.754V16h6v2.246V22z M41.5,18h2v2h-2 V18z"})]})})}}class IS extends S.PureComponent{constructor(e){super(e)}render(){return C("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 56 56",children:[a("path",{fill:"#E9E9E0",d:"M36.985,0H7.963C7.155,0,6.5,0.655,6.5,1.926V55c0,0.345,0.655,1,1.463,1h40.074 c0.808,0,1.463-0.655,1.463-1V12.978c0-0.696-0.093-0.92-0.257-1.085L37.607,0.257C37.442,0.093,37.218,0,36.985,0z"}),a("path",{fill:"#659C35",d:"M48.037,56H7.963C7.155,56,6.5,55.345,6.5,54.537V39h43v15.537C49.5,55.345,48.845,56,48.037,56z"}),a("polygon",{fill:"#D9D7CA",points:"37.5,0.151 37.5,12 49.349,12 	"}),a("path",{fill:"#FFFFFF",d:"M17.385,53h-1.641V42.924h2.898c0.428,0,0.852,0.068,1.271,0.205 c0.419,0.137,0.795,0.342,1.128,0.615c0.333,0.273,0.602,0.604,0.807,0.991s0.308,0.822,0.308,1.306 c0,0.511-0.087,0.973-0.26,1.388c-0.173,0.415-0.415,0.764-0.725,1.046c-0.31,0.282-0.684,0.501-1.121,0.656 s-0.921,0.232-1.449,0.232h-1.217V53z M17.385,44.168v3.992h1.504c0.2,0,0.398-0.034,0.595-0.103 c0.196-0.068,0.376-0.18,0.54-0.335c0.164-0.155,0.296-0.371,0.396-0.649c0.1-0.278,0.15-0.622,0.15-1.032 c0-0.164-0.023-0.354-0.068-0.567c-0.046-0.214-0.139-0.419-0.28-0.615c-0.142-0.196-0.34-0.36-0.595-0.492 c-0.255-0.132-0.593-0.198-1.012-0.198H17.385z"}),a("path",{fill:"#FFFFFF",d:"M31.316,42.924V53h-1.668l-3.951-6.945V53h-1.668V42.924h1.668l3.951,6.945v-6.945H31.316z"}),a("path",{fill:"#FFFFFF",d:"M41.16,47.805v3.896c-0.21,0.265-0.444,0.48-0.704,0.649s-0.533,0.308-0.82,0.417 S39.052,52.954,38.747,53c-0.306,0.046-0.608,0.068-0.909,0.068c-0.602,0-1.155-0.109-1.661-0.328s-0.948-0.542-1.326-0.971 c-0.378-0.429-0.675-0.966-0.889-1.613c-0.214-0.647-0.321-1.395-0.321-2.242s0.107-1.593,0.321-2.235 c0.214-0.643,0.51-1.178,0.889-1.606c0.378-0.429,0.822-0.754,1.333-0.978c0.51-0.224,1.062-0.335,1.654-0.335 c0.547,0,1.057,0.091,1.531,0.273c0.474,0.183,0.897,0.456,1.271,0.82l-1.135,1.012c-0.219-0.265-0.47-0.456-0.752-0.574 c-0.283-0.118-0.574-0.178-0.875-0.178c-0.337,0-0.659,0.063-0.964,0.191c-0.306,0.128-0.579,0.344-0.82,0.649 c-0.242,0.306-0.431,0.699-0.567,1.183s-0.21,1.075-0.219,1.777c0.009,0.684,0.08,1.276,0.212,1.777 c0.132,0.501,0.314,0.911,0.547,1.23s0.497,0.556,0.793,0.711c0.296,0.155,0.608,0.232,0.937,0.232c0.1,0,0.234-0.007,0.403-0.021 c0.168-0.014,0.337-0.036,0.506-0.068c0.168-0.032,0.33-0.075,0.485-0.13c0.155-0.055,0.269-0.132,0.342-0.232v-2.488h-1.709 v-1.121H41.16z"}),a("circle",{fill:"#F3D55B",cx:"18.931",cy:"14.431",r:"4.569"}),a("polygon",{fill:"#88C057",points:"6.5,39 17.5,39 49.5,39 49.5,28 39.5,18.5 29,30 23.517,24.517 	"})]})}}const An="png",Ho="jpg",zo="svg",Dn="bw",ad=30,cd=0;class uo extends Mn{constructor(e=An){super(),this._imageType=e}exportTarget(e,t){const s=t,r=s.getCurrentModule(),o=s.getProjectName(),l=s.getCurrentModule().getGraphView().getViewportComponent().getSVGElement(),c=l.viewBox.baseVal,u=c.width,h=c.height,d=this.processSVGForExport(l,u,h,r),p=this._imageType===Dn?An:this._imageType;return Promise.resolve({name:o+"."+p,type:"image",data:d,width:u,height:h,"image-type":p})}processColorAttribute(e,t){if(!t)return t;const s=t.indexOf("var(--");if(s<0)return t;const r=t.indexOf(")",s),o=t.substring(s+4,r),i=e.getStyleByName(o);let l=i?i.getValue():"#000000";if(this._imageType===Dn){const c=Yi(l);TS(c,c),l=Qi(c)}return l}processSVGForExport(e,t,s,r){const o=r.getGraphController(),i=r.getGraphView().getViewportAdapter(),l=i.getOffsetX(),c=i.getOffsetY(),u=o.getGraph().getBoundingRect(),h=u.minX+l-ad,d=u.minY+c-cd,p=u.width+ad*2,v=u.height+cd*2,m=e.cloneNode(!0);m.setAttribute("viewBox",h+" "+d+" "+p+" "+v),m.setAttribute("width",t),m.setAttribute("height",s),m.setAttribute("font-size","16px"),m.setAttribute("font-family","monospace"),m.setAttribute("style",".graph-ui {display: none;}");const y=r.getApp().getThemeManager();for(const f of m.getElementsByTagName("*")){const g=f.getAttribute("stroke"),_=this.processColorAttribute(y,g);g!==_&&f.setAttribute("stroke",_);const E=f.getAttribute("fill"),x=this.processColorAttribute(y,E);E!==x&&f.setAttribute("fill",x)}const w=m.getElementsByClassName("graph-ui");for(;w.length>0;)w[0].remove();return m}getIconClass(){switch(this._imageType){case An:return NS;case Ho:return MS;case zo:return bS;case Dn:return IS;default:return null}}getLabel(){switch(this._imageType){case An:return I18N.toString("file.export.png");case Ho:return I18N.toString("file.export.jpg");case zo:return I18N.toString("file.export.svg");case Dn:return I18N.toString("file.export.bw");default:return super.getLabel()}}getTitle(){switch(this._imageType){case An:return I18N.toString("file.export.png.hint");case Ho:return I18N.toString("file.export.jpg.hint");case zo:return I18N.toString("file.export.svg.hint");case Dn:return I18N.toString("file.export.bw.hint");default:return super.getTitle()}}getImageType(){return this._imageType}}const LS=[new uo(An),new uo(Ho),new uo(zo),new uo(Dn)];function uu(n){for(const e of LS)n.registerExporter(e,"image-"+e.getImageType())}class hu{constructor(){}applyUndo(e){throw new Error("Undo operation for handler not supported")}applyRedo(e){throw new Error("Redo operation for handler not supported")}}class Xi extends hu{constructor(e,t){super(),this._graphController=e,this._graphParser=t,this._graphData=t.objectify(e.getGraph())}applyUndo(e){const t=e.getPreviousEvent();t instanceof Xi?t.applyRedo(e):this._graphController.getGraph().clear()}applyRedo(e){this._graphParser.parse(this._graphData,this._graphController.getGraph())}}class kS{constructor(){this._broadcastManager=null}setBroadcastManager(e){return this._broadcastManager=e,this}onBroadcastMessage(e,t,s,r){return!1}getBroadcastManager(){return this._broadcastManager}}const ud="fsa-machine-request",hd="fsa-machine-response";class AS extends kS{constructor(){super()}testEquivalence(e){this._broadcastManager.sendMessageTo(e,ud)}onBroadcastMessage(e,t,s,r){if(e===ud){const o=this._broadcastManager.getApp().getSession().getCurrentModule().getGraphController().getGraph(),i=ts.objectify(o);return this._broadcastManager.sendMessageTo(t,hd,{graphData:i}),!0}else if(e===hd){const o=this._broadcastManager.getApp().getSession().getCurrentModule().getMachineController(),i=r.graphData,l=ts.parse(i),c=o.getMachineBuilder().attemptBuild(l,new lt),u=o.getMachineBuilder().getMachine(),h=Lf(c,u);return window.alert("The machines are "+(h.value?"EQUAL":"NOT EQUAL")+"!"),!0}return!1}}const Hl="tutorial",dd="prefs-tut_fsa";class DS{constructor(){}start(e,t=!1){!t&&qt.getData(dd)||e.getNotificationManager().pushNotification(`-=-= Bab's First Graph =-=-
            We can make a graph by creating nodes and edges.
            
            Nodes
            > DOUBLE CLICK on empty space.

            Edges
            > RIGHT-HOLD on a node, then DRAG out to target.

            If using touchscreen, you can TAP & HOLD instead of a RIGHT-CLICK.`,ec,[Hl],{onClick:()=>{e.getNotificationManager().pushNotification(`-=-= More Bab's Graph =-=-
                    You can do so much more.
        
                    Move stuff
                    > CLICK & HOLD on target, then DRAG.
                    
                    Delete stuff
                    > DRAG to Trash Can at bottom-right.
        
                    Edit labels, etc.
                    > RIGHT-CLICK on target.
                    
                    More tools in the Drawer on the right. Check it out!`,ec,[Hl],{onClick:()=>{qt.setData(dd,"true"),e.getNotificationManager().pushNotification(`-=- Bab's Masterpiece -=-
                            Action Mode Tray (Bottom Left)
                            > This will show you whether you are currently editing or moving stuff or you can manually switch them here!
                            
                            Trash Can (Bottom Right)
                            > This will turn RED if deleting stuff. You can also enter Delete Mode with a CLICK.
                            
                            Drawer (Right)
                            > Open the drawer by a CLICK on the tabs. You can toggle fullscreen with the Expand Arrow at the top.
                            
                            Any additional questions, please use the ? button on the toolbar.
                            Have fun!
                            `,null,[Hl])}})}})}}const PS="_machine_type_select_1qm89_1",FS="_autolayout_button_1qm89_6",pd={machine_type_select:PS,autolayout_button:FS},OS="_panel_divider_1v4km_1",RS={panel_divider:OS};class Yn extends S.Component{constructor(e){super(e)}render(){return a("div",{id:this.props.id,className:RS.panel_divider+" "+this.props.className,style:this.props.style})}}const BS="_list_container_1f0xw_1",HS="_element_list_1f0xw_4",zS="_add_button_1f0xw_10",US="_first_marker_1f0xw_17",ho={list_container:BS,element_list:HS,add_button:zS,first_marker:US};class Dr extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})})}}class Bf extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M12 7.77L18.39 18H5.61L12 7.77M12 4L2 20h20L12 4z"})})}}const VS="_element_container_1b5k1_1",GS={element_container:VS},gd="Enter",fd="Escape";class $S extends S.Component{constructor(e){super(e),this.state={value:null,error:!1},this.onValueChange=this.onValueChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}onFocus(e){const t=e.target,s=this.props.node,r=s?s.getNodeLabel():null;this.setState({value:r,error:!1},()=>t.select()),this.props.onFocus&&this.props.onFocus(e,this)}onBlur(e){const t=this.state.value;this.setState({value:null,error:!1}),this.props.onBlur&&this.props.onBlur(e,this,t)}onKeyDown(e){const t=e.key;(t===gd||t===fd)&&(e.preventDefault(),e.stopPropagation())}onKeyUp(e){const t=e.key,s=e.target;t===gd?s.blur():t===fd&&this.setState({value:null,error:!1},()=>s.blur())}onValueChange(e){let t=e.target.value.trim(),s=!1;if(this.props.onChange)try{this.props.onChange(e,this,t)}catch{s=!0}this.setState({value:t,error:s})}render(){const e=this.props.node,t=this.state.value,s=e?e.getNodeLabel():"",r=e?e.getNodeCustom()||t!==null&&t!==s:!1,o=e?e.getNodeAccept():!1,i=t===null?s:t;return a("div",{id:this.props.id,className:GS.element_container+(r?" custom ":"")+(!e.getNodeCustom()&&i.length<=0?" empty ":"")+(t!==null&&this.state.error?" error ":"")+(o?" accept ":"")+" "+this.props.className,style:this.props.style,children:a("input",{spellCheck:!1,style:{width:i.length+"ch"},value:i,onChange:this.onValueChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp})})}}class KS extends S.Component{constructor(e){super(e),this._prevX=0,this._prevY=0,this.onElementAdd=this.onElementAdd.bind(this),this.onElementFocus=this.onElementFocus.bind(this),this.onElementBlur=this.onElementBlur.bind(this),this.onElementChange=this.onElementChange.bind(this)}onElementAdd(e){const t=this.props.graphController;this._prevX+=16,this._prevY+=16;const s=t.createNode(this._prevX,this._prevY);this.props.graphView.moveViewToPosition(s.x,s.y)}onElementFocus(e,t){const s=t.props.node;this._prevX=s.x,this._prevY=s.y,this.props.graphView.moveViewToPosition(s.x,s.y)}onElementBlur(e,t,s){const r=t.props.node;if(!r)return;const o=this.props.graphController;if(s!==null){const i=o.getGraph();s.length>0?i.getNodesByLabel(s).length<=0&&o.renameNode(r,s):r.getNodeCustom()?(r.setNodeCustom(!1),o.applyAutoRename()):o.deleteTargetNode(r)}}onElementChange(e,t,s){const r=this.props.graphController;if(s.length>0){const i=r.getGraph().getNodesByLabel(s);if(i.length>1||i.length===1&&i[0]!==t.props.node)throw new Error("Not a valid node label")}}render(){const s=this.props.graphController.getGraph().getNodes();return C("div",{id:this.props.id,className:ho.list_container,style:this.props.style,children:[C("div",{className:ho.element_list,children:[a(Bf,{className:ho.first_marker}),s.map(r=>a($S,{node:r,onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange},r.getGraphElementID()))]}),a(D,{className:ho.add_button,title:"Add State",onClick:this.onElementAdd,children:a(Dr,{})})]})}}const jS="_list_container_1avrn_1",WS="_element_list_1avrn_4",YS="_add_button_1avrn_10",zl={list_container:jS,element_list:WS,add_button:YS},QS="_element_container_jddme_1",XS={element_container:QS},md="Enter",_d="Escape";class yd extends S.Component{constructor(e){super(e),this._inputElement=null,this.state={value:null,error:!1},this.onValueChange=this.onValueChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}onFocus(e){const t=e.target,s=this.props.symbol;this.setState({value:s,error:!1},()=>t.select()),this.props.onFocus&&this.props.onFocus(e,this)}onBlur(e){const t=this.state.value;this.props.onBlur&&this.props.onBlur(e,this,t),this.setState({value:null,error:!1})}onKeyDown(e){const t=e.key;(t===md||t===_d)&&(e.preventDefault(),e.stopPropagation())}onKeyUp(e){const t=e.key,s=e.target;t===md?s.blur():t===_d&&this.setState({value:null,error:!1},()=>s.blur())}onValueChange(e){let t=e.target.value.trim(),s=!1;if(this.props.onChange)try{this.props.onChange(e,this,t)}catch{s=!0}this.setState({value:t,error:s})}focus(){this._inputElement.focus()}render(){const e=this.state.value,t=e===null?this.props.symbol:e,s=this.props.used||!1;return a("div",{id:this.props.id,className:XS.element_container+(t!==null&&t.length<=0?" empty ":"")+(e!==null&&this.state.error?" error ":"")+(s?" used ":"")+" "+this.props.className,style:this.props.style,children:a("input",{ref:r=>this._inputElement=r,spellCheck:!1,maxLength:1,style:{width:"1ch"},value:t,onChange:this.onValueChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp})})}}class qS extends S.Component{constructor(e){super(e),this.newSymbolComponent=null,this.state={useNewSymbol:!1},this.onElementAdd=this.onElementAdd.bind(this),this.onElementFocus=this.onElementFocus.bind(this),this.onElementBlur=this.onElementBlur.bind(this),this.onElementChange=this.onElementChange.bind(this)}onElementAdd(e){this.setState({useNewSymbol:!0},()=>{this.newSymbolComponent.focus()})}onElementFocus(e,t){}onElementBlur(e,t,s){const r=t.props.symbol,o=this.props.machineController;if(s!==null){const i=o.getMachineBuilder().getMachine();s.length>0?i.isSymbol(s)||(r?o.renameSymbol(r,s):o.createSymbol(s)):r&&o.deleteSymbol(r)}this.state.useNewSymbol&&this.setState({useNewSymbol:!1})}onElementChange(e,t,s){const r=this.props.machineController;if(s.length>0&&r.getMachineBuilder().getMachine().isSymbol(s)&&s!==t.props.symbol)throw new Error("Not a valid symbol")}renderAlphabetList(e,t){const s=[];for(const r of t)!r||s.push(a(yd,{symbol:r,used:e.isUsedSymbol(r),onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange},r));return s}render(){const t=this.props.machineController.getMachineBuilder().getMachine(),s=t.getAlphabet();return C("div",{id:this.props.id,className:zl.list_container,style:this.props.style,children:[C("div",{className:zl.element_list,children:[this.renderAlphabetList(t,s),a(yd,{ref:r=>this.newSymbolComponent=r,style:{display:this.state.useNewSymbol?"block":"none"},symbol:"",onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange})]}),a(D,{className:zl.add_button,title:"Add Symbol",onClick:this.onElementAdd,children:a(Dr,{})})]})}}const ZS="_chart_container_1h850_1",JS="_chart_key_1h850_19",eC="_chart_value_1h850_19",Ul={chart_container:ZS,chart_key:JS,chart_value:eC};class tC extends S.Component{constructor(e){super(e),this._cachedMachineHash=0,this._cachedMachineComponents=[]}componentWillUnmount(){this._cachedMachineHash=0,this._cachedMachineComponents.length=0}renderTransitionEntry(e,t,s){const r=e.isDeterministic();let o=e.doTransition(t,s,!0),i="",l=!1;if(o.length<=0)if(r){if(l=!0,i="-",s===B)return null}else return null;else if(o.length===1)l=!1,i=o[0].getStateLabel(),r||(i="{"+i+"}");else{r&&(l=!0);let c="";for(const u of o)c.length>0&&(c+=","),c+=u.getStateLabel();i="{"+c+"}"}return s===B&&(s=It,r&&(l=!0)),C("tr",{children:[a("td",{className:Ul.chart_key+(l?" error ":""),children:"("+t.getStateLabel()+","+s+")"}),a("td",{className:Ul.chart_value+(l?" error ":""),children:i})]},t.getStateID()+":"+s)}renderTransitionTable(e){const t=e.getHashCode();if(t!==this._cachedMachineHash)this._cachedMachineHash=t;else return this._cachedMachineComponents;const s=this._cachedMachineComponents=[];for(const r of e.getStates()){let o=null;o=this.renderTransitionEntry(e,r,B),o&&s.push(o);for(const i of e.getAlphabet())o=this.renderTransitionEntry(e,r,i),o&&s.push(o)}return s}render(){const e=this.props.machineController,t=e.getMachineBuilder().getMachine(),s=e.getMachineType()==="DFA";return a("div",{id:this.props.id,className:Ul.chart_container+" "+this.props.className,style:this.props.style,children:a("table",{children:C("tbody",{children:[C("tr",{children:[a("th",{children:"Q\xD7\u03A3"}),a("th",{children:s?a("span",{children:"Q"}):C("span",{children:[a("span",{style:{fontFamily:"cursive"},children:"P"}),a("span",{children:"(Q)"})]})})]}),this.renderTransitionTable(t)]})})})}}const nC="_table_container_tm11g_1",sC="_table_entry_tm11g_19",rC="_table_axis_header_tm11g_19",In={table_container:nC,table_entry:sC,table_axis_header:rC},Ln="symbols",Vl="states";class oC extends S.Component{constructor(e){super(e),this.state={rowAxis:Ln},this.onRowAxisSwitch=this.onRowAxisSwitch.bind(this)}onRowAxisSwitch(e){this.setState((t,s)=>({rowAxis:t.rowAxis===Ln?Vl:Ln}))}renderTableEntryForSymbolAxis(e,t,s){const r=e.isDeterministic(),o=e.doTransition(t,s);let i="",l=!1;if(o.length<=0)r&&s!==B&&(l=!0),i="-";else if(o.length===1)r&&s===B&&(l=!0),i=o[0].getStateLabel();else{r&&(l=!0);let u="";for(const h of o)u.length>0&&(u+=","),u+=h.getStateLabel();i="{"+u+"}"}const c=r&&s===B;return a("td",{className:In.table_entry+(l?" error ":"")+(c?" disabled ":""),children:i},t.getStateID()+":"+s)}renderTableEntries(e,t){const s=[];for(const r of e.getStates()){const o=[];switch(t){case Ln:for(const i of e.getAlphabet())o.push(this.renderTableEntryForSymbolAxis(e,r,i));o.push(this.renderTableEntryForSymbolAxis(e,r,B));break;case Vl:for(const i of e.getStates()){const l=e.getTransitionSymbols(r,i);let c="";if(l)for(const u of l)c.length>0&&(c+=`
`),u===B?c+=It:c+=u;else c="-";o.push(a("td",{children:c},r.getStateID()+":"+i.getStateID()))}break;default:throw new Error("Unknown row axis type '"+t+"'")}s.push(C("tr",{children:[a("th",{scope:"row",className:In.table_axis_header+" row",children:r.getStateLabel()}),o]},r.getStateID()))}return s}renderTableAxis(e,t){let s=[];const r=e.isDeterministic();switch(t){case Ln:for(const o of e.getAlphabet())s.push(a("th",{scope:"col",className:In.table_axis_header+" col",children:o},o));return s.push(a("th",{scope:"col",className:In.table_axis_header+(r?" disabled ":"")+" col",children:It},B)),s;case Vl:for(const o of e.getStates())s.push(a("th",{scope:"col",className:In.table_axis_header+" col",children:o.getStateLabel()},o.getStateID()));return s;default:throw new Error("Unknown row axis type '"+t+"'")}}render(){const e=this.state.rowAxis,s=this.props.machineController.getMachineBuilder().getMachine();return a("div",{id:this.props.id,className:In.table_container+" "+this.props.className,style:this.props.style,children:a("table",{children:C("tbody",{children:[C("tr",{children:[a("th",{children:a("button",{onClick:this.onRowAxisSwitch,children:e===Ln?"Q/\u03A3":"Q/Q"})}),this.renderTableAxis(s,e)]}),this.renderTableEntries(s,e)]})})})}}const iC="_select_container_2syqf_1",lC="_select_label_2syqf_5",aC="_prefix_editor_2syqf_10",cC="_postfix_selector_2syqf_24",po={select_container:iC,select_label:lC,prefix_editor:aC,postfix_selector:cC};class uC extends S.Component{constructor(e){super(e),this.onAutoStatePrefixSubmit=this.onAutoStatePrefixSubmit.bind(this),this.onAutoStatePrefixFormat=this.onAutoStatePrefixFormat.bind(this)}onAutoStatePrefixSubmit(e,t){const s=this.props.graphController,r=s.getGraphLabeler();r.getDefaultNodeLabelPrefix()!=e&&(r.setDefaultNodeLabelPrefix(e),s.applyAutoRename())}onAutoStatePrefixFormat(e){return e&&e.length>0?e:this.props.graphController.getGraphLabeler().getDefaultNodeLabelPrefix()}render(){const e=this.props.graphController;return C("div",{id:this.props.id,className:po.select_container+" "+this.props.className,style:this.props.style,children:[a("label",{className:po.select_label,children:"State Labels"}),a(eu,{className:po.prefix_editor,defaultValue:e.getGraphLabeler().getDefaultNodeLabelPrefix(),captureOnExit:"save",formatter:this.onAutoStatePrefixFormat,onSubmit:this.onAutoStatePrefixSubmit}),C("select",{className:po.postfix_selector,onChange:this.onMachineTypeChange,disabled:!0,children:[a("option",{children:"0-9"}),a("option",{children:"a-z"}),a("option",{children:"A-Z"})]})]})}}const Gl="DFA",$l="NFA";class qi extends S.Component{constructor(e){super(e),this.onMachineTypeChange=this.onMachineTypeChange.bind(this),this.onAutoLayoutApply=this.onAutoLayoutApply.bind(this),this.onAutoLayoutChange=this.onAutoLayoutChange.bind(this),this.onAutoLabelChange=this.onAutoLabelChange.bind(this),this.onSnapToGridChange=this.onSnapToGridChange.bind(this)}onMachineTypeChange(e){const t=e.target.value,i=this.props.session.getCurrentModule().getMachineController().getMachineBuilder().getMachine();switch(t){case Gl:i.setDeterministic(!0);break;case $l:i.setDeterministic(!1);break;default:throw new Error("Unknown machine type '"+t+"'")}}onAutoLayoutApply(e){this.props.session.getCurrentModule().getGraphController().applyAutoLayout()}onAutoLayoutChange(e){}onAutoLabelChange(e){this.props.session.getCurrentModule().getGraphController().setAutoRenameNodes(e.target.checked)}onSnapToGridChange(e){}render(){const e=this.props.drawer,s=this.props.session.getCurrentModule(),r=s.getGraphController(),o=s.getMachineController(),i=s.getGraphView(),l=o.getMachineBuilder().getMachine().isDeterministic()?Gl:$l,c=r.shouldAutoRenameNodes(),u=e.isDrawerFullscreen();return C(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:qi.TITLE,children:[C("select",{className:pd.machine_type_select,value:l,onChange:this.onMachineTypeChange,children:[a("option",{children:Gl}),a("option",{children:$l})]}),a(Yn,{}),a(oe,{title:"States",initial:!0,full:u,children:a(KS,{graphController:r,graphView:i})}),a(oe,{title:"Alphabet",initial:!0,full:u,children:a(qS,{machineController:o})}),a(Yn,{}),a(oe,{title:"Transition Chart",full:u,disabled:r.getGraph().getEdgeCount()<=0,children:a(tC,{machineController:o})}),a(oe,{title:"Transition Table",full:u,disabled:r.getGraph().getNodeCount()<=0,children:a(oC,{machineController:o})}),a(Yn,{}),a(uC,{graphController:r}),a("button",{className:pd.autolayout_button,onClick:this.onAutoLayoutApply,disabled:r.getGraph().isEmpty(),children:I18N.toString("action.overview.autolayout")}),a(Yn,{}),a(ot,{id:"overview-auto-label",checked:c,title:"Auto rename nodes",onChange:this.onAutoLabelChange}),a(ot,{id:"overview-auto-layout",checked:!1,title:"Auto layout nodes",disabled:!0,onChange:this.onAutoLayoutChange}),a(ot,{id:"overview-snap-grid",checked:!1,title:"Snap-to-grid",disabled:!0,onChange:this.onSnapToGridChange})]})}}Object.defineProperty(qi,"TITLE",{get:function(){return I18N.toString("component.overview.title")}});const hC={},dC="_test_container_11rsm_1",pC="_test_control_tray_11rsm_11",gC="_test_control_button_11rsm_15",fC="_test_list_container_11rsm_28",mC="_test_list_scroll_container_11rsm_39",_C="_test_list_11rsm_28",yC="_test_list_add_11rsm_53",vC="_test_list_runall_11rsm_53",SC="_test_list_count_11rsm_65",Re={test_container:dC,test_control_tray:pC,test_control_button:gC,test_list_container:fC,test_list_scroll_container:mC,test_list:_C,test_list_add:yC,test_list_runall:vC,test_list_count:SC};function du(n,e){CC(n,wC(e))}function CC(n,e){const t=document.createElement("a"),s=e.indexOf(";");e=e.substring(0,s+1)+"headers=Content-Disposition%3A%20attachment%3B%20filename="+n+";"+e.substring(s+1),t.setAttribute("href",e),t.setAttribute("download",n),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t)}function wC(n){return"data:text/plain; charset=utf-8,"+encodeURIComponent(n)}const EC="_upload_button_1e0rr_1",xC="_upload_input_1e0rr_6",vd={upload_button:EC,upload_input:xC};class Zi extends S.Component{constructor(e){super(e),this.onFileUpload=this.onFileUpload.bind(this)}onFileUpload(e){const t=e.target.files;t.length>0&&(this.props.onUpload&&this.props.onUpload(t[0]),e.target.value="")}render(){const e=this.props.accept;return C(D,{id:this.props.id,className:vd.upload_button+" "+this.props.className,style:this.props.style,title:this.props.title,disabled:this.props.disabled,children:[a("input",{type:"file",name:"import",className:vd.upload_input,disabled:this.props.disabled,accept:e,onChange:this.onFileUpload}),this.props.children]})}}class pu extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"})})}}class Ji extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z"})})}}class gu extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"})})}}class vs extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M13.49 5.48c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm-3.6 13.9l1-4.4 2.1 2v6h2v-7.5l-2.1-2 .6-3c1.3 1.5 3.3 2.5 5.5 2.5v-2c-1.9 0-3.5-1-4.3-2.4l-1-1.6c-.4-.6-1-1-1.7-1-.3 0-.5.1-.8.1l-5.2 2.2v4.7h2v-3.4l1.8-.7-1.6 8.1-4.9-1-.4 2 7 1.4z"})})}}const TC="_test_item_container_ew09k_1",NC="_test_button_ew09k_13",MC="_delete_button_ew09k_23",bC="_test_input_ew09k_53",go={test_item_container:TC,test_button:NC,delete_button:MC,test_input:bC};class fu extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11H7v-2h10v2z"})})}}class mu extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M16.59 7.58L10 14.17l-3.59-3.58L5 12l5 5 8-8zM12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"})})}}class _u extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M14.59 8L12 10.59 9.41 8 8 9.41 10.59 12 8 14.59 9.41 16 12 13.41 14.59 16 16 14.59 13.41 12 16 9.41 14.59 8zM12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"})})}}class yu extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M19 8l-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"})})}}const zs="default",Hf="success",zf="failure",Uf="working";class IC extends S.Component{constructor(e){super(e),this.inputElement=null,this.state={value:this.props.defaultValue||"",status:zs},this.onChange=this.onChange.bind(this)}focus(){this.inputElement&&this.inputElement.focus()}setValue(e,t=null){this.state.value!==e?this.setState({value:e},t):t&&t()}setStatus(e,t=null){this.state.status!==e?this.setState({status:e},t):t&&t()}resetStatus(e=null){this.state.status!==zs?this.setState({status:zs},e):e&&e()}getValue(){return this.state.value}getStatus(){return this.state.status}onChange(e){const t=e.target.value;this.state.value!==t&&this.setState({value:t,status:zs})}render(){const e=this.props.onDelete,t=this.props.onTest,s=this.props.active,r=this.props.placeholder,o=this.state.status;return C("div",{id:this.props.id,className:go.test_item_container+(s?" active ":"")+" "+o+" "+this.props.className,style:this.props.style,children:[a(D,{className:go.test_button,title:"Test",disabled:!t,onClick:i=>t(i,this),children:o===Hf?a(mu,{}):o===zf?a(_u,{}):o===Uf?a(yu,{}):a(vs,{})}),C("div",{className:go.test_input,children:[a("input",{ref:i=>this.inputElement=i,type:"text",placeholder:r,value:this.state.value,onChange:this.onChange}),a("label",{children:this.props.subtitle})]}),a(D,{className:go.delete_button,title:"Delete",disabled:!e,onClick:i=>e(i,this),children:a(fu,{})})]})}}const LC=[".txt"],kC="test.txt";class AC extends S.Component{constructor(e){super(e),this._testList=[],this._testName=kC,this.onTestNew=this.onTestNew.bind(this),this.onTestUpload=this.onTestUpload.bind(this),this.onTestDownload=this.onTestDownload.bind(this),this.onTestClose=this.onTestClose.bind(this),this.onTestAdd=this.onTestAdd.bind(this),this.onTestDelete=this.onTestDelete.bind(this),this.onTestTest=this.onTestTest.bind(this),this.onTestRunAll=this.onTestRunAll.bind(this),this.onGraphChange=this.onGraphChange.bind(this)}componentDidMount(){this.props.graphController.getGraphChangeHandler().addListener(this.onGraphChange)}componentWillUnmount(){this.props.graphController.getGraphChangeHandler().removeListener(this.onGraphChange)}onGraphChange(e){for(const t of this._testList)t.ref.resetStatus()}onTestNew(e){this.isEmpty()||this.onTestClose(e),this.onTestAdd(e)}onTestUpload(e){const t=new FileReader;t.onload=s=>{try{this._testName=e.name,this._testList.length=0;const r=s.target.result.split(`
`);for(let o of r)o=o.trim(),o.length>0&&this._testList.push({id:we(),defaultValue:o,ref:null});this._testList.length<=0&&this.onTestAdd(null)}catch{t.abort()}},t.readAsText(e)}onTestDownload(e){const t=[];for(const s of this._testList){const r=s.ref;r&&t.push(r.getValue())}du(this._testName,t.join(`
`))}onTestClose(e){const t=this.props.tester;t.isTesting()&&t.stopTest(),this._testList.length=0}onTestAdd(e){this._testList.push({id:we(),defaultValue:"",ref:null})}onTestRunAll(e){let t=0;const s=()=>{const r=this._testList[t];this.onTestTest(null,r.ref,!0,()=>{++t,t<this._testList.length&&s()})};s()}onTestDelete(e,t){}onTestTest(e,t,s=!1,r=null){const o=s||this.props.immediate,i=this.props.tester,l=t.getValue();t.setState({status:Uf});const c=this.props.graphController,u=this.props.machineController;if(i.startTest(l,c,u).then(h=>{t.setState({status:h?Hf:zf})},h=>{t.setState({status:zs})}),o){const h=i.runTest(c,u,!0);r&&h.then(r)}}isEmpty(){return this._testList.length<=0}render(){const e=this.props.tester,t=this.props.graphController,s=this.isEmpty(),r=e&&e.isTesting();return C("div",{id:this.props.id,className:Re.test_container+" "+this.props.className,style:this.props.style,children:[C("div",{className:Re.test_control_tray,children:[a(D,{className:Re.test_control_button,title:I18N.toString("action.testing.new"),onClick:this.onTestNew,children:a(pu,{})}),a(Zi,{className:Re.test_control_button,title:I18N.toString("action.testing.import"),accept:LC.join(","),onUpload:this.onTestUpload,children:a(br,{})}),a(D,{className:Re.test_control_button,title:I18N.toString("action.testing.save"),disabled:s,onClick:this.onTestDownload,children:a(Ji,{})}),a(D,{className:Re.test_control_button,title:I18N.toString("action.testing.clear"),disabled:s,onClick:this.onTestClose,children:a(Bi,{})})]}),C("div",{className:Re.test_list_container+(s?" empty ":"")+(r?" disabled ":""),children:[C(D,{className:Re.test_list_add,title:"Add",onClick:this.onTestAdd,children:[a(gu,{}),a("span",{className:Re.test_list_count,children:s?"":""+this._testList.length})]}),a("div",{className:Re.test_list_scroll_container,children:a("div",{className:Re.test_list,children:this._testList.map((o,i)=>{const l=o.id,c=o.defaultValue||"";let u=this.onTestTest;return(!e||t.getGraph().isEmpty())&&(u=null),a(IC,{ref:h=>o.ref=h,defaultValue:c,onTest:u,onDelete:(h,d)=>{this._testList.splice(i,1),this.onTestDelete(h,d)}},l)})})}),a(D,{className:Re.test_list_runall,title:"Run All",onClick:this.onTestRunAll,children:a(vs,{})})]})]})}}class _r extends S.Component{constructor(e){super(e),this.state={stepMode:!1},this.onStepTestChange=this.onStepTestChange.bind(this),this.onAutoErrorCheckChange=this.onAutoErrorCheckChange.bind(this)}componentDidMount(){const e=this.props.session,t=e.getApp(),s=e.getCurrentModule(),r=s._tester;r.on("startTest",o=>{s._testMode=!0,t._drawer.setDrawerSoloClass(_r),t._drawer.closeDrawer()}),r.on("stopTest",o=>{s._testMode=!1,t._drawer.setDrawerSoloClass(null),t._drawer.openDrawer()})}onStepTestChange(e){this.setState((t,s)=>({stepMode:!t.stepMode}))}onAutoErrorCheckChange(e){const s=this.props.session.getCurrentModule().getErrorChecker(),r=s.isErrorChecking();s.setErrorChecking(!r),r?this.props.session.getApp().getNotificationManager().clearNotifications(yt):s.showErrors()}render(){const t=this.props.session.getCurrentModule(),s=t.getGraphController(),r=t.getMachineController(),o=t.getStringTester(),i=t.getErrorChecker(),l=this.state.stepMode,c=i.isErrorChecking();return C(de,{id:this.props.id,className:hC.panel_container+" "+this.props.className,style:this.props.style,title:_r.TITLE,children:[a(AC,{tester:o,graphController:s,machineController:r,immediate:!l}),a(ot,{id:"testing-step-test",checked:l,onChange:this.onStepTestChange,title:"Step testing"}),a(ot,{id:"testing-error-check",checked:c,onChange:this.onAutoErrorCheckChange,title:"Auto error checking"})]})}}Object.defineProperty(_r,"TITLE",{get:function(){return I18N.toString("component.testing.title")}});const DC="_analysis_button_9i6te_1",Ls={analysis_button:DC},PC="_checkbox_container_hizv8_1",FC={checkbox_container:PC};class yi extends S.Component{constructor(e){super(e),this.state={checked:e.initial||!1},this.onChange=this.onChange.bind(this)}setChecked(e){this.setState({checked:e})}isChecked(){return this.state.checked}onChange(e){const t=e.target.checked;this.state.checked!==t&&this.setState({checked:t})}render(){return C("div",{id:this.props.id,className:FC.checkbox_container+" "+this.props.className,style:this.props.style,children:[a("input",{type:"checkbox",id:this.props.id+"-checkbox",name:this.props.id+"-checkbox",value:this.props.value,checked:this.state.checked,disabled:this.props.disabled,onChange:this.onChange}),a("label",{htmlFor:this.props.id+"-checkbox",children:this.props.title})]})}}class OC{constructor(){}uploadFile(e){return Promise.resolve(e)}}class Vf extends OC{constructor(){super()}uploadFile(e){return new Promise((t,s)=>{const r=new FileReader;r.addEventListener("load",o=>{const i=o.target.result;t(i)}),r.addEventListener("error",o=>{s(new Error("Unable to import file: "+o.target.error.code))}),r.readAsText(e)})}}class Gf{constructor(){}parse(e,t=null){return t}compose(e,t=null){return t}}const RC="1.0.0";class BC extends Gf{constructor(){super()}parse(e,t=null){if(typeof e!="object")throw new Error("Unable to parse data of non-object type");t?t.clear():t=new xn;const s=e.nodes||[],r=Math.min(s.length||0,e.nodeCount||0),o=e.edges||[],i=Math.min(o.length||0,e.edgeCount||0),l=e.initial||0,c=new Map;for(let h=0;h<r;++h){const d=s[h];if(!d)continue;const p=t.createNode(d.x||0,d.y||0,d.id);p.setNodeLabel(d.label||""),p.setNodeAccept(d.accept||!1),p.setNodeCustom(d.custom||!1),c.set(h,p)}const u=c.get(l);u&&t.setStartNode(u);for(let h=0;h<i;++h){const d=o[h];if(!d)continue;const p=c.get(d.from)||null;if(!p)continue;const v=c.get(d.to)||null,m=t.createEdge(p,v,d.id),y=d.quad||{};m.setEdgeLabel(d.label||""),m.setQuadraticRadians(y.radians||0),m.setQuadraticLength(y.length||0)}return t}compose(e,t=null){if(!(e instanceof xn))throw new Error("Unable to compose target of unknown type");t||(t={});const s=e.getNodes()||[],r=s.length||0,o=e.getEdges()||[],i=o.length||0,l=e.getStartNode(),c=new Array(r),u=new Map;let h;for(let m=0;m<r;++m)if(h=s[m],h){const y=h.getGraphElementID();u.set(h,m),c[m]={id:y,x:h.x||0,y:h.y||0,label:h.getNodeLabel()||"",accept:h.getNodeAccept()||!1,custom:h.getNodeCustom()||!1}}const d=new Array(i);let p;for(let m=0;m<i;++m)if(p=o[m],p){const y=p.getGraphElementID(),w=p.getQuadratic()||{},f=p.getEdgeFrom(),g=p.getEdgeTo(),_=u.has(f)?u.get(f):-1,E=u.has(g)?u.get(g):-1;d[m]={id:y,from:_,to:E,quad:{radians:w.radians||0,length:w.length||0},label:p.getEdgeLabel()||""}}const v=u.get(l)||0;return t._version=RC,t.nodeCount=r,t.nodes=c,t.edgeCount=i,t.edges=d,t.initial=v,t}}function HC(n){return new Promise((e,t)=>{new Vf().uploadFile(n).then(s=>{const r=JSON.parse(s),o=new BC,i=new xn;o.parse(r.graphData,i);const l=new Mf,c=new lt;l.attemptBuildMachine(i,c),e(c||null)})})}class el extends S.Component{constructor(e){super(e),this.state={isEqual:null,witnessString:""},this.optimizeUnreachOption=null,this.optimizeRedundOption=null,this.onConvertToDFA=this.onConvertToDFA.bind(this),this.onConvertToNFA=this.onConvertToNFA.bind(this),this.onInvertDFA=this.onInvertDFA.bind(this),this.onEquivalentTest=this.onEquivalentTest.bind(this),this.onOptimizeMachine=this.onOptimizeMachine.bind(this),this.onFileUpload=this.onFileUpload.bind(this)}onDeleteAllUnreachable(e){const r=this.props.session.getCurrentModule().getGraphController(),o=Ki(r.getGraph());r.deleteTargetNodes(o)}onConvertToDFA(e){const t=this.props.session,s=t.getCurrentModule(),r=s.getGraphController(),o=s.getMachineController(),i={graphController:r,machineController:o};t.getApp().getNotificationManager().pushNotification(I18N.toString("message.warning.convertNFAToDFA"),Af,pS,i,!0)}onConvertToNFA(e){this.props.session.getCurrentModule().getMachineController().convertMachineTo("NFA")}onInvertDFA(e){this.props.session.getCurrentModule().getMachineController().invertMachine()}onEquivalentTest(e){HC(e).then(t=>{const l=this.props.session.getCurrentModule().getMachineController().getMachineBuilder().getMachine(),c=Lf(t,l);c.value?this.setState({isEqual:!0,witnessString:""}):c.witnessString?this.setState({isEqual:!1,witnessString:"Witness: "+c.witnessString}):this.setState({isEqual:!1,witnessString:"Sorry, the machines have different alphabets"})}).catch(t=>{this.setState({isEqual:null,witnessString:t.message})})}onOptimizeMachine(e){this.optimizeUnreachOption.isChecked()&&this.onDeleteAllUnreachable(e)}canOptimize(){return this.optimizeRedundOption&&this.optimizeRedundOption.isChecked()||this.optimizeUnreachOption&&this.optimizeUnreachOption.isChecked()}onFileUpload(e){const t=e.target.files;t.length>0&&(this.onEquivalentTest(t[0]),e.target.value="")}render(){const s=this.props.session.getCurrentModule().getMachineController();return C(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:el.TITLE,children:[C(oe,{title:"Optimizations",initial:!0,children:[a(yi,{ref:r=>this.optimizeUnreachOption=r,id:"opt-unreach",title:"Unreachables",value:"unreach"}),a(yi,{ref:r=>this.optimizeRedundOption=r,disabled:!0,id:"opt-redund",title:"Redundant States",value:"redund"}),a("button",{className:Ls.analysis_button,onClick:this.onOptimizeMachine,disabled:!this.canOptimize(),children:"Optimize"}),s.getMachineType()=="DFA"?a("button",{className:Ls.analysis_button,onClick:this.onConvertToNFA,children:I18N.toString("action.overview.convertnfa")}):s.getMachineType()=="NFA"?a("button",{className:Ls.analysis_button,onClick:this.onConvertToDFA,children:I18N.toString("action.overview.convertdfa")}):null]}),a(oe,{title:"Related Machines",children:s.getMachineType()==="DFA"&&a("button",{className:Ls.analysis_button,onClick:this.onInvertDFA,children:"Flip all accept states"})}),C(oe,{title:"Equivalent Test",children:[a("input",{type:"file",name:"import",className:Ls.upload_input,onChange:this.onFileUpload}),a("div",{children:a("label",{children:this.state.isEqual===null?"-- ??? --":this.state.isEqual?"-- Equivalent --":"-- Not Equivalent --"})}),a("div",{children:a("label",{children:this.state.witnessString})})]})]})}}Object.defineProperty(el,"TITLE",{get:function(){return I18N.toString("component.analysis.title")}});class zC extends S.Component{constructor(e){super(e)}render(){const e=this.props.node,t=this.props.fill,s=this.props.stroke,r=this.props.onMouseOver,o=this.props.onMouseOut,i=this.props.pointerEvents,l=e.getNodeLabel(),c=e.getNodeSize();return a(S.Fragment,{children:a(mr,{position:e,radius:c,label:l,color:t,outline:s,onMouseOver:r?u=>{const h=u.target.value||(u.target.value={});h.source=e,r(u)}:null,onMouseOut:o?u=>{const h=u.target.value||(u.target.value={});h.source=e,o(u)}:null,pointerEvents:i})})}}class vu extends S.Component{constructor(e){super(e);const t=e.inputController,s=e.graphController;this._graphNodeInputHandler=new wv(t,s)}componentDidMount(){const e=this.props.inputContext;if(e){const t=this.props.inputPriority||-1;e.addInputHandler(this._graphNodeInputHandler,t)}}componentWillUnmount(){const e=this.props.inputContext;e&&e.removeInputHandler(this._graphNodeInputHandler)}getGraphNodeInputHandler(){return this._graphNodeInputHandler}render(){const e=this.props.inputController,t=this.props.nodeRenderer||zC,s=this.props.editable,r=e?e.onMouseOver:null,o=e?e.onMouseOut:null,i=[];for(const l of this.props.nodes)i.push(a(t,{node:l,fill:"var(--color-graph-node)",stroke:"var(--color-graph-text)",onMouseOver:r,onMouseOut:o,pointerEvents:s&&e&&e.hasPointerEvents(l)?"all":"none"},l.getGraphElementID()));return a("g",{children:i})}}class UC extends S.Component{constructor(e){super(e)}render(){const e=this.props.edge,t=this.props.stroke,s=this.props.onMouseOver,r=this.props.onMouseOut,o=this.props.pointerEvents,i=e.getStartPoint(),l=e.getEndPoint(),c=e.getCenterPoint(),u=e.getEdgeLabel(),h=e.getEdgeDirection();return a(S.Fragment,{children:a(ru,{directed:Ui,from:i,to:l,center:c,label:u,direction:h,color:t,onMouseOver:s?d=>{const p=d.target.value||(d.target.value={});p.source=e,s(d)}:null,onMouseOut:r?d=>{const p=d.target.value||(d.target.value={});p.source=e,r(d)}:null,pointerEvents:o})})}}class Su extends S.Component{constructor(e){super(e);const t=e.inputController,s=e.graphController;this._graphEdgeInputHandler=new kv(t,s)}componentDidMount(){const e=this.props.inputContext;if(e){const t=this.props.inputPriority||-1;e.addInputHandler(this._graphEdgeInputHandler,t)}}componentWillUnmount(){const e=this.props.inputContext;e&&e.removeInputHandler(this._graphEdgeInputHandler)}getGraphEdgeInputHandler(){return this._graphEdgeInputHandler}render(){const e=this.props.inputController,t=this.props.edgeRenderer||UC,s=this.props.editable,r=e?e.onMouseOver:null,o=e?e.onMouseOut:null,i=[];for(const l of this.props.edges)i.push(a(t,{edge:l,stroke:"var(--color-graph-text)",onMouseOver:r,onMouseOut:o,pointerEvents:s&&e&&e.hasPointerEvents(l)?"all":"none"},l.getGraphElementID()));return a("g",{children:i})}}const VC=.1;class GC extends S.Component{constructor(e){super(e)}render(){const e=this.props.visible,t=this.props.fromX||0,s=this.props.fromY||0,r=this.props.toX||t+1,o=this.props.toY||s+1,i=this.props.color||"#000000",l=r-t,c=o-s;return a("g",{children:e&&a("rect",{className:"graph-ui",x:Math.min(r,t),y:Math.min(o,s),width:Math.abs(l),height:Math.abs(c),stroke:i,fill:i,fillOpacity:VC})})}}const $C=3,KC=[8,6],jC=0;class Sd extends S.Component{constructor(e){super(e)}render(){const e=this.props.center,t=this.props.color||"#CCCCCC",s=this.props.radius||24;return a(S.Fragment,{children:a("circle",{className:"graph-ui",cx:e.x,cy:e.y,r:s,stroke:t,strokeDashoffset:jC,strokeDasharray:KC,strokeWidth:$C,fill:"none",pointerEvents:"none"})})}}const WC=4;class $f extends S.Component{constructor(e){super(e)}render(){const e=[],t=this.props.nodes;if(t)for(const r of t)e.push(a(Sd,{center:r,radius:r.getNodeSize()+WC},r.getGraphElementID()));const s=this.props.edges;if(s)for(const r of s)e.push(a(Sd,{center:r.getCenterPoint()},r.getGraphElementID()));return a("g",{children:e})}}class YC{constructor(){this._boundingBox={fromX:0,fromY:0,toX:0,toY:0,visible:!1},this.targets=[]}getBoundingBox(){return this._boundingBox}getSelection(e,t=!1){if(t){const s=this._boundingBox,r=Math.max(s.toX,s.fromX),o=Math.max(s.toY,s.fromY),i=Math.min(s.toX,s.fromX),l=Math.min(s.toY,s.fromY);this.clearSelection(),QC(e,i,l,r,o,this.targets)}return this.targets}beginSelection(e,t,s){const r=this._boundingBox;r.fromX=r.toX=t,r.fromY=r.toY=s,this.clearSelection(),r.visible=!0}updateSelection(e,t,s){const r=this._boundingBox;r.toX=t,r.toY=s,this.getSelection(e,!0)}endSelection(e,t,s){const r=this._boundingBox;r.toX=t,r.toY=s,this.getSelection(e,!0),r.visible=!1}isTargetInSelection(e){return this.targets.includes(e)}hasSelection(){return this.targets.length>0}clearSelection(){this.targets.length=0}isVisible(){return this._boundingBox.visible}}function QC(n,e,t,s,r,o){const i=Math.min(e,s),l=Math.min(t,r),c=Math.max(e,s),u=Math.max(t,r);for(const h of n.getNodes())h.x>=i&&h.x<c&&h.y>=l&&h.y<u&&o.push(h);return o}class XC extends tn{constructor(e,t,s){super(),this._inputController=e,this._graphController=t,this._selectionBox=s}onPreInputEvent(e){const t=this._inputController,s=this._selectionBox;return s.hasSelection()&&(!t.isMoveMode(e.getInputAdapter())||!s.isTargetInSelection(t.getImmediateTargetSource()))&&s.clearSelection(),!1}onDragStart(e){const t=this._inputController;if(t.hasActiveTarget()||t.isMoveMode(e.getInputAdapter())||t.hasCurrentTarget())return!1;const s=e.getInputEventPosition();return this._selectionBox.beginSelection(this._graphController.getGraph(),s.x,s.y),!0}onDragMove(e){this._selectionBox.isVisible()&&this._selectionBox.updateSelection(this._graphController.getGraph(),e.x,e.y)}onDragStop(e){this._selectionBox.isVisible()&&this._selectionBox.endSelection(this._graphController.getGraph(),e.x,e.y)}}class Cu extends S.Component{constructor(e){super(e);const t=e.inputController,s=e.graphController;this._selectionBox=new YC,this._selectionBoxInputHandler=new XC(t,s,this._selectionBox)}componentDidMount(){const e=this.props.inputController;e&&e.setSelectionBox(this._selectionBox);const t=this.props.inputContext;if(t){const s=this.props.inputPriority||-1;t.addInputHandler(this._selectionBoxInputHandler,s)}}componentWillUnmount(){this._selectionBox.clearSelection();const e=this.props.inputContext;e&&e.removeInputHandler(this._selectionBoxInputHandler)}getSelectionBox(){return this._selectionBox}getSelectionBoxInputHandler(){return this._selectionBoxInputHandler}render(){const e=this._selectionBox,t=e.getBoundingBox();return C(S.Fragment,{children:[a($f,{nodes:e.getSelection()}),a(GC,{visible:e.isVisible(),fromX:t.fromX,fromY:t.fromY,toX:t.toX,toY:t.toY})]})}}class qC extends S.Component{constructor(e){super(e),this._prevSize=1}render(){const e=this.props.node,t=this.props.color,s=this.props.onMouseOver,r=this.props.onMouseOut,o=this.props.pointerEvents;let i,l;return"getNodeSize"in e?(i=e.getNodeSize(),l=e.getNodeSize()/2,this._prevSize=l):(i=0,l=this._prevSize),a(S.Fragment,{children:a(Av,{position:e,offset:i,size:l,color:t,onMouseOver:s?c=>{const u=c.target.value||(c.target.value={});u.source=e,s(c)}:null,onMouseOut:r?c=>{const u=c.target.value||(c.target.value={});u.source=e,r(c)}:null,pointerEvents:o})})}}class wu extends S.Component{constructor(e){super(e);const t=e.inputController,s=e.graphController;this._startMarkerInputHandler=new Dv(t,s)}componentDidMount(){const e=this.props.inputContext;if(e){const t=this.props.inputPriority||-1;e.addInputHandler(this._startMarkerInputHandler,t)}}componentWillUnmount(){const e=this.props.inputContext;e&&e.removeInputHandler(this._startMarkerInputHandler)}render(){const e=this.props.inputController,t=this.props.startMarkerRenderer||qC,s=this.props.editable,o=this.props.graphController.getGraph();let i=this._startMarkerInputHandler.getGhostMarker();"getStartNode"in o&&!i&&(i=o.getStartNode());const l=e?e.onMouseOver:null,c=e?e.onMouseOut:null;return a("g",{children:i&&a(t,{node:i,color:"var(--color-graph-text)",onMouseOver:l,onMouseOut:c,pointerEvents:s&&e&&e.hasPointerEvents(i)?"all":"none"})})}}class ZC extends S.Component{constructor(e){super(e)}render(){const e=this.props.node,t=this.props.fill,s=this.props.stroke,r=this.props.onMouseOver,o=this.props.onMouseOut,i=this.props.pointerEvents,l=e.getNodeLabel(),c=e.getNodeSize(),u=e.getNodeAccept();return C(S.Fragment,{children:[a(mr,{position:e,radius:c,label:l,color:t,outline:s,onMouseOver:r?h=>{const d=h.target.value||(h.target.value={});d.source=e,r(h)}:null,onMouseOut:o?h=>{const d=h.target.value||(h.target.value={});d.source=e,o(h)}:null,pointerEvents:i}),u&&a(mr,{position:e,radius:c*.7,color:"none",outline:s})]})}}const JC="node-accept-change";class ew extends tn{constructor(e,t){super(),this._inputController=e,this._graphController=t}onDblInputEvent(e){const t=this._inputController,s=this._graphController;if(t.getCurrentTargetType()===gt){const o=t.getCurrentTargetSource();o.setNodeAccept(!o.getNodeAccept()),s.emitGraphEvent(JC,{target:o})}}}class tw extends S.Component{constructor(e){super(e)}render(){const e=this.props.edge,t=this.props.stroke,s=this.props.onMouseOver,r=this.props.onMouseOut,o=this.props.pointerEvents,i=e.getStartPoint(),l=e.getEndPoint(),c=e.getCenterPoint(),u=e.getEdgeLabel(),h=e.getEdgeDirection();return a(S.Fragment,{children:a(ru,{directed:Ui,from:i,to:l,center:c,label:u.split(ft).join(`
`),direction:h,color:t,onMouseOver:s?d=>{const p=d.target.value||(d.target.value={});p.source=e,s(d)}:null,onMouseOut:r?d=>{const p=d.target.value||(d.target.value={});p.source=e,r(d)}:null,pointerEvents:o})})}}class nw extends S.Component{constructor(e){super(e);const t=e.graphView,s=e.graphController,r=t.getInputController();this._fsaNodeInputHandler=new ew(r,s)}componentDidMount(){this.props.graphView.getInputContext().addInputHandler(this._fsaNodeInputHandler)}componentWillUnmount(){this.props.graphView.getInputContext().removeInputHandler(this._fsaNodeInputHandler)}render(){const e=this.props.graphView,t=this.props.graphController,s=this.props.editable,r=t.getGraph(),o=e.getInputController(),i=e.getInputContext(),c=this.props.session.getCurrentModule()._tester.targets;return C(S.Fragment,{children:[a(wu,{inputController:o,graphController:t,inputContext:i,inputPriority:-1,editable:s}),a(vu,{nodes:r.getNodes(),inputController:o,graphController:t,nodeRenderer:ZC,inputContext:i,inputPriority:-1,editable:s}),a(Su,{ref:u=>{!u||u.getGraphEdgeInputHandler().setShouldDeleteEdgeWithEmptyLabel(!0).setShouldDeleteEdgePlaceholder(!0)},edges:r.getEdges(),inputController:o,graphController:t,edgeRenderer:tw,inputContext:i,inputPriority:-1,editable:s}),a(Cu,{inputController:o,graphController:t,inputContext:i,inputPriority:-1}),a($f,{nodes:c})]})}}const sw="_view_container_28kdr_1",rw="_view_widget_28kdr_6",Kl={view_container:sw,view_widget:rw},ow="_trash_container_1uab7_1",iw={trash_container:ow};class lw extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 26 26",children:a("path",{d:"M 11.5 -0.03125 C 9.542969 -0.03125 7.96875 1.59375 7.96875 3.5625 L 7.96875 4 L 4 4 C 3.449219 4 3 4.449219 3 5 L 3 6 L 2 6 L 2 8 L 4 8 L 4 23 C 4 24.644531 5.355469 26 7 26 L 19 26 C 20.644531 26 22 24.644531 22 23 L 22 8 L 24 8 L 24 6 L 23 6 L 23 5 C 23 4.449219 22.550781 4 22 4 L 18.03125 4 L 18.03125 3.5625 C 18.03125 1.59375 16.457031 -0.03125 14.5 -0.03125 Z M 11.5 2.03125 L 14.5 2.03125 C 15.304688 2.03125 15.96875 2.6875 15.96875 3.5625 L 15.96875 4 L 10.03125 4 L 10.03125 3.5625 C 10.03125 2.6875 10.695313 2.03125 11.5 2.03125 Z M 6 8 L 11.125 8 C 11.25 8.011719 11.371094 8.03125 11.5 8.03125 L 14.5 8.03125 C 14.628906 8.03125 14.75 8.011719 14.875 8 L 20 8 L 20 23 C 20 23.5625 19.5625 24 19 24 L 7 24 C 6.4375 24 6 23.5625 6 23 Z M 8 10 L 8 22 L 10 22 L 10 10 Z M 12 10 L 12 22 L 14 22 L 14 10 Z M 16 10 L 16 22 L 18 22 L 18 10 Z "})})}}const aw=250;class cw extends S.Component{constructor(e){super(e),this._ref=S.createRef(),this._buttonElement=S.createRef(),this.state={active:!1,forceActive:!1},this._doubleTapTimeout=null,this.onMouseEnter=this.onMouseEnter.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.onClick=this.onClick.bind(this),this.onAnyMouseDownNotConsumed=this.onAnyMouseDownNotConsumed.bind(this)}onMouseEnter(e){this.state.forceActive||this.setState({active:!0},()=>{const t=this.props.onChange;t&&t(!0)})}onMouseLeave(e){this.state.forceActive||this.setState({active:!1},()=>{const t=this.props.onChange;t&&t(!1)})}onClick(e){e.stopPropagation(),e.preventDefault(),this._doubleTapTimeout?(clearTimeout(this._doubleTapTimeout),this._doubleTapTimeout=null,this.setState({active:!1,forceActive:!1},()=>{const t=this.props.onClear;t&&t();const s=this.props.onChange;s&&s(!1)})):this.setState((t,s)=>{const r=!t.forceActive;return this._doubleTapTimeout=setTimeout(()=>{this._doubleTapTimeout=null},aw),r&&document.documentElement.addEventListener("mousedown",this.onAnyMouseDownNotConsumed),{active:r,forceActive:r}},()=>{const t=this.props.onChange;t&&t(this.state.active)})}onAnyMouseDownNotConsumed(e){this.state.forceActive&&this._buttonElement.current!==e.target&&(e.stopPropagation(),e.preventDefault(),document.documentElement.removeEventListener("mousedown",this.onAnyMouseDownNotConsumed),this.setState({active:!1,forceActive:!1},()=>{const t=this.props.onChange;t&&t(!1)}))}render(){const e=this.props.visible,t=this.state.active,s=!t&&!e;return a(D,{ref:this._ref,refButton:this._buttonElement,id:this.props.id,className:iw.trash_container+(t?" active ":"")+(s?" hide ":"")+" "+this.props.className,style:this.props.style,title:"Delete",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick,children:a(lw,{})})}}const uw="_tray_container_7sw1o_1",hw="_tray_button_7sw1o_17",jl={tray_container:uw,tray_button:hw};class Kf extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})})}}class dw extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M13,6V11H18V7.75L22.25,12L18,16.25V13H13V18H16.25L12,22.25L7.75,18H11V13H6V16.25L1.75,12L6,7.75V11H11V6H7.75L12,1.75L16.25,6H13Z"})})}}const vi=0,qs=1;class pw extends S.Component{constructor(e){super(e)}render(){const e=this.props.visible,t=this.props.mode,s=this.props.onChange,r=!e;return C("div",{id:this.props.id,className:jl.tray_container+(r?" hide ":"")+" "+this.props.className,style:this.props.style,children:[a(D,{className:jl.tray_button+(t===vi?" active ":""),onClick:()=>{s&&s(vi)},title:I18N.toString("cursor.actionmode"),children:a(Kf,{})}),a(D,{className:jl.tray_button+(t===qs?" active ":""),onClick:()=>{s&&s(qs)},title:I18N.toString("cursor.movemode"),children:a(dw,{})})]})}}class Eu extends S.Component{constructor(e){super(e),this.onTrashChange=this.onTrashChange.bind(this),this.onTrashClear=this.onTrashClear.bind(this),this.onModeChange=this.onModeChange.bind(this)}onTrashChange(e){this.props.inputController.setTrashMode(e),e?this.props.session.getApp().getDrawerComponent().setViewportColor("var(--color-viewport-error)"):this.props.session.getApp().getDrawerComponent().setViewportColor(null)}onTrashClear(){this.props.graphController.clearGraph()}onModeChange(e){this.props.inputController.setMoveModeFirst(e===qs)}render(){const e=this.props.inputController,t=this.props.graphController,s=this.props.viewport,r=t.getGraph();let o=null;return e&&(e.isHandlingInput()?o=e.isMoveMode(s.getInputAdapter())?qs:vi:o=e.isMoveModeFirst()?qs:vi),C("div",{id:this.props.id,className:Kl.view_container+" "+this.props.className,style:this.props.style,children:[a(cw,{className:Kl.view_widget,style:{bottom:0,right:0},visible:!r.isEmpty()&&s&&(!s.getInputAdapter().isUsingTouch()||!s.getInputAdapter().isDragging()),onChange:this.onTrashChange,onClear:this.onTrashClear}),a(pw,{className:Kl.view_widget,style:{bottom:0,left:0},visible:e,mode:o,onChange:this.onModeChange}),this.props.children]})}}const gw="_navbar_container_1hcp4_1",fw="_navbar_widget_1hcp4_9",mw="_navbar_widget_container_1hcp4_9",Wl={navbar_container:gw,navbar_widget:fw,navbar_widget_container:mw},_w="_zoom_container_guozc_1",yw="_zoom_button_guozc_5",vw="_zoom_label_guozc_8",fo={zoom_container:_w,zoom_button:yw,zoom_label:vw};class Sw extends S.PureComponent{constructor(e){super(e)}render(){return C("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[a("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),a("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"})]})}}class Cw extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})})}}class ww extends S.Component{constructor(e){super(e),this.onZoomIn=this.onZoomIn.bind(this),this.onZoomOut=this.onZoomOut.bind(this)}onZoomIn(e){const t=this.props.viewportAdapter,s=-t.getScale()*.4;t.addScale(s)}onZoomOut(e){const t=this.props.viewportAdapter,s=t.getScale()*.75;t.addScale(s)}render(){const e=this.props.viewportAdapter,t="x"+(1/(e.getScale()||1)).toFixed(2);return C("div",{id:this.props.id,className:fo.zoom_container+" "+this.props.className,style:this.props.style,children:[a(D,{className:fo.zoom_button,title:"Zoom In",onClick:this.onZoomIn,children:a(Sw,{})}),a(D,{className:fo.zoom_button,title:"Zoom Out",onClick:this.onZoomOut,children:a(Cw,{})}),a("label",{className:fo.zoom_label,children:t})]})}}const Ew="_center_focus_button_1ni2g_1",xw={center_focus_button:Ew};class Tw extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M12 8c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4zm8.94 3c-.46-4.17-3.77-7.48-7.94-7.94V1h-2v2.06C6.83 3.52 3.52 6.83 3.06 11H1v2h2.06c.46 4.17 3.77 7.48 7.94 7.94V23h2v-2.06c4.17-.46 7.48-3.77 7.94-7.94H23v-2h-2.06zM12 19c-3.87 0-7-3.13-7-7s3.13-7 7-7 7 3.13 7 7-3.13 7-7 7z"})})}}const Cd=.1;class Nw extends S.Component{constructor(e){super(e),this.onClick=this.onClick.bind(this)}onClick(e){this.props.viewportAdapter.setOffset(0,0)}render(){const e=this.props.viewportAdapter;return a(D,{id:this.props.id,className:xw.center_focus_button+" "+this.props.className,style:this.props.style,title:"Center Workspace",disabled:Math.abs(e.getOffsetX())<Cd&&Math.abs(e.getOffsetY())<Cd,onClick:this.onClick,children:a(Tw,{})})}}class Pr extends S.Component{constructor(e){super(e)}render(){const e=this.props.viewportAdapter;return C("div",{id:this.props.id,className:Wl.navbar_container+" "+this.props.className,style:this.props.style,children:[a(ww,{className:Wl.navbar_widget_container,viewportAdapter:e}),a(Nw,{className:Wl.navbar_widget,viewportAdapter:e}),this.props.children]})}}const Mw="_editor_container_1ytdp_1",bw="_tray_container_1ytdp_22",wd={editor_container:Mw,tray_container:bw},Iw=30,Lw="Enter",kw="Escape";class Aw extends S.Component{constructor(e){super(e),this.inputElement=null,this.placeholder="",this.maxLength=524288,this.multiLine=!0,this.formatter=null,this._submitTimeout=null,this._submit=e.submitOnBlur,this._skipBlur=!1,this._skipSelect=!1,this.state={prevValue:"",value:""},this.onChange=this.onChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this)}setFormatter(e){return this.formatter=e,this}setPlaceholder(e){return this.placeholder=e,this}onFocus(e){this._skipSelect&&(this.inputElement.select(),this._skipSelect=!1)}onBlur(e){this._submitTimeout||(this._submitTimeout=setTimeout(()=>{if(this._submitTimeout=null,this._skipBlur)return;const t=this._submit;if(this._submit=this.props.submitOnBlur,document.activeElement!==this.inputElement&&t){const s=this.state.value;this.props.onSubmit&&this.props.onSubmit(s),this.setState({prevValue:s})}else this.setState((s,r)=>({value:s.prevValue}));this.props.onBlur&&this.props.onBlur(e)},Iw))}onKeyDown(e){if(e.key===Lw){if(e.shiftKey&&this.multiLine)return;this._submit=!0,this.inputElement.blur(),e.preventDefault(),e.stopPropagation()}else e.key===kw&&(this.setState((t,s)=>({value:t.prevValue}),()=>{this._submit=!1,this.inputElement.blur()}),e.preventDefault(),e.stopPropagation())}onChange(e){const t=e.target,s=t.selectionStart;let r=t.value;this.formatter&&(r=this.formatter(r,this.state.value)),this.setState({value:r},()=>{t.selectionEnd=s})}focus(e=!0){this._skipSelect=e,this.inputElement.focus()}ignoreBlur(e){const t=this._skipBlur;return this._skipBlur=e,t!==e}appendValue(e,t="",s=!0){const r=this.state.value;if(r&&r.length+e.length>this.maxLength)return;let o;r&&r.length>0?o=r+t+e:o=e,s&&this.formatter&&(o=this.formatter(o,this.state.value)),this.setState((i,l)=>({value:o}))}resetValue(e){this.setState({prevValue:e,value:e})}setValue(e,t=!0){let s=e;t&&this.formatter&&(s=this.formatter(s,this.state.value)),this.setState({value:s})}getValue(){return this.state.value}render(){const e=this.placeholder,t=this.maxLength,s=this.multiLine,r=this.props.disabled,o=this.state.value;return a("div",{id:this.props.id,className:this.props.className,style:this.props.style,children:s?a("textarea",{ref:i=>this.inputElement=i,type:"text",rows:"1",spellCheck:"false",disabled:r,placeholder:e,maxLength:t,value:o||"",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown}):a("input",{ref:i=>this.inputElement=i,type:"text",spellCheck:"false",disabled:r,placeholder:e,maxLength:t,value:o||"",onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown})})}}class xu extends S.Component{constructor(e){super(e),this._ref=S.createRef(),this.inputComponent=null,this.state={open:!1},this._target=null,this._targetCallback=null,this.onInputSubmit=this.onInputSubmit.bind(this),this.onInputBlur=this.onInputBlur.bind(this)}openEditor(e,t=null,s=null,r=null){if(!(e instanceof kr))throw new Error("Can only open editor for GraphElements");if(this._target=e,this._targetOnSubmit=s,this._targetOnCancel=r,e instanceof Ye){const o=this.props.labelFormatter.getNodeLabelFormatter();this.inputComponent.setFormatter(o)}else if(e instanceof bt){const o=this.props.labelFormatter.getEdgeLabelFormatter();this.inputComponent.setFormatter(o)}this.setState({open:!0},()=>{this.inputComponent.resetValue(t||""),this.inputComponent.focus()})}closeEditor(){this._target=null,this._targetOnSubmit=null,this._targetOnCancel=null,this.inputComponent.setFormatter(null),this.setState({open:!1})}isEditorOpen(){return this.state.open}getTarget(){return this._target}onInputSubmit(e){this._targetOnSubmit&&(this._targetOnSubmit(this._target,e),this._targetOnCancel=null)}onInputBlur(e){this._targetOnCancel&&(this._targetOnCancel(this._target),this._targetOnSubmit=null),this.closeEditor()}render(){const e=this.state.open,t=this._target,s=this.props.style||{};if(this.props.viewport){const o=this.props.viewport.getViewportAdapter();if(t){const i=t.getCenterPoint(),l=o.getElement(),c=l.getBoundingClientRect(),u=Dw(l,i.x+o.getOffsetX(),i.y+o.getOffsetY()),h=u.x,d=u.y,p=-(this._ref.current.offsetWidth/2)-c.left,v=-(this._ref.current.offsetHeight/2)-c.top;s.top=d+v+"px",s.left=h+p+"px"}}return C("div",{ref:this._ref,id:this.props.id,className:wd.editor_container+(e?" open ":"")+" "+this.props.className,style:s,children:[a(Aw,{ref:o=>this.inputComponent=o,submitOnBlur:this.props.saveOnExit,onSubmit:this.onInputSubmit,onBlur:this.onInputBlur}),a("div",{className:wd.tray_container,children:this.props.children})]})}}function Dw(n,e,t){const s=n.getScreenCTM();return{x:e*s.a+s.e,y:t*s.d+s.f}}const Pw="_tray_container_1xagi_1",Fw="_tray_used_1xagi_7",Ow="_tray_default_1xagi_10",Yl={tray_container:Pw,tray_used:Fw,tray_default:Ow},Rw=50;class ns extends S.Component{constructor(e){super(e),this.ref=null,this._timeout=null,this.onMouseDown=this.onMouseDown.bind(this),this.onAnyMouseUp=this.onAnyMouseUp.bind(this)}onMouseDown(e){this.props.parent.ignoreBlur(!0)&&document.addEventListener("mouseup",this.onAnyMouseUp),this.props.onClick&&this.props.onClick(e,this)}onAnyMouseUp(){document.removeEventListener("mouseup",this.onAnyMouseUp),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(()=>{this._timeout=null;const e=this.props.parent;e.ignoreBlur(!1),document.activeElement===this.ref?e.focus(!1):document.activeElement!==this.props.parent.inputElement&&e.onBlur()},Rw)}render(){return a("button",{ref:e=>this.ref=e,id:this.props.id,className:this.props.className,style:this.props.style,title:this.props.title,onMouseDown:this.onMouseDown,children:this.props.title})}}const Bw=["0","1"],Hw=[It];class zw extends S.Component{constructor(e){super(e)}renderSymbol(e){const s=this.props.graphController.getLabelEditor();if(!s)return null;const r=s.inputComponent;return a(ns,{parent:r,title:e,onClick:o=>r.appendValue(e,ft)},e)}render(){const t=this.props.graphController.getLabelEditor(),o=this.props.currentModule.getMachineController().getAlphabet(),i=t&&t.getTarget()instanceof bt,l=t&&t.getTarget()instanceof Ye,c=!o||o.length<=1;return C("div",{className:Yl.tray_container,children:[i&&C("span",{children:[a("span",{className:Yl.tray_used,children:o.map(u=>this.renderSymbol(u))}),C("span",{className:Yl.tray_default,children:[c&&Bw.map(u=>this.renderSymbol(u)),Hw.map(u=>this.renderSymbol(u))]})]}),l&&C("span",{children:[a(ns,{parent:t.inputComponent,title:t.getTarget().getNodeCustom()?"Custom":"Auto",onClick:()=>{t.getTarget().setNodeCustom(!t.getTarget().getNodeCustom())}}),a(ns,{parent:t.inputComponent,title:t.getTarget().getNodeAccept()?"Accept":"Reject",onClick:()=>{t.getTarget().setNodeAccept(!t.getTarget().getNodeAccept())}})]})]})}}class Uw extends S.Component{constructor(e){super(e)}render(){const e=this.props.session,t=e.getCurrentModule(),s=this.props.graphView,r=this.props.graphController,o=r.getLabelFormatter(),i=s.getInputController();return C(S.Fragment,{children:[a(Eu,{graphController:r,inputController:i,viewport:s.getViewportComponent(),session:e}),a(Pr,{style:{right:0},viewportAdapter:s.getViewportAdapter()}),a(xu,{ref:l=>r.setLabelEditor(l),labelFormatter:o,viewport:s.getViewportComponent(),saveOnExit:!0,children:a(zw,{graphController:r,currentModule:t})})]})}}const Vw="_tape_container_1wg46_1",Gw="_tape_control_tray_1wg46_19",Ql={tape_container:Vw,tape_control_tray:Gw};class jf extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"})})}}class $w extends S.Component{constructor(e){super(e),this.onTapeStepBackward=this.onTapeStepBackward.bind(this),this.onTapeStepForward=this.onTapeStepForward.bind(this),this.onTapeFinish=this.onTapeFinish.bind(this),this.onTapeReset=this.onTapeReset.bind(this),this.onTapeSkipForward=this.onTapeSkipForward.bind(this),this.onTapeSkipBackward=this.onTapeSkipBackward.bind(this),this.onTapeStop=this.onTapeStop.bind(this)}onTapeStepBackward(e){this.props.value.stepBackward()}onTapeStepForward(e){this.props.value.stepForward()}onTapeSkipForward(e){}onTapeSkipBackward(e){}onTapeReset(e){this.props.value.reset()}onTapeFinish(e){this.props.value.finish()}onTapeStop(e){this.props.value.stop()}render(){const e=this.props.value,t=e?e.getCurrentTapeIndex():-1;return e?C("div",{id:this.props.id,className:Ql.tape_container+" "+this.props.className,style:this.props.style,children:[C("div",{className:Ql.tape_control_tray,children:[a("button",{onClick:this.onTapeStepBackward,children:"BACK"}),a("button",{onClick:this.onTapeStepForward,children:"STEP"}),a("button",{onClick:this.onTapeReset,children:"RESET"}),a("button",{onClick:this.onTapeFinish,children:"TO END"})]}),C("div",{className:Ql.tape_control_tray,children:[a("button",{onClick:this.onTapeSkipForward,children:"SKIP TO NEXT"}),a("button",{onClick:this.onTapeSkipBackward,children:"SKIP TO PREV"}),a("button",{onClick:this.onTapeStop,children:"STOP"})]}),C("div",{className:"tape-row",children:[e.isTapeLeftInfinite()&&C("div",{className:"tape-row-entry infinite",children:[a("span",{className:"tape-row-states"}),a("label",{className:"tape-row-symbol",children:"..."})]}),a(jf,{className:"tape-pointer",style:{opacity:t<0?0:1,left:t+"em"}}),e.getTapeInput().map((s,r)=>{let o=!1,i=!1;o=t===r,i=t===r-1;const l=e.getTapeSourceStatesByIndex(r),c=l===null;return C("div",{className:"tape-row-entry"+(o?" active ":"")+(i?" active-read ":"")+(c?" disabled ":""),onClick:u=>c?null:e.setCurrentTapeIndex(r),children:[l&&a("span",{className:"tape-row-states",children:l.map(u=>a("label",{children:u.getNodeLabel()},u.getGraphElementID()))}),a("label",{className:"tape-row-symbol",children:s})]},s+":"+r)}),e.isTapeRightInfinite()&&C("div",{className:"tape-row-entry infinite",children:[a("span",{className:"tape-row-states"}),a("label",{className:"tape-row-symbol",children:"..."})]})]})]}):null}}class Kw extends S.Component{constructor(e){super(e)}render(){const e=this.props.graphView,t=this.props.tester;return C(S.Fragment,{children:[a(Pr,{style:{right:0},viewportAdapter:e.getViewportAdapter()}),a($w,{style:{position:"absolute",bottom:0},value:t?t.getTapeContext():null})]})}}const jw="_viewport_component_1gz9k_1",Ww={viewport_component:jw};class Yw{constructor(){this._element=null,this._offsetX=0,this._offsetY=0,this._nextOffsetX=0,this._nextOffsetY=0,this._offsetDamping=.1,this._scaleFactor=1,this._minScale=1,this._maxScale=1}setElement(e){return this._element=e,this}setMinScale(e){return this._minScale=e,this._scaleFactor<this._minScale&&(this._scaleFactor=this._minScale),this}setMaxScale(e){return this._maxScale=e,this._scaleFactor>this._maxScale&&(this._scaleFactor=this._maxScale),this}setOffsetDamping(e){return this._offsetDamping=e,this}update(){const e=this._nextOffsetX-this._offsetX;this._offsetX+=e*this._offsetDamping;const t=this._nextOffsetY-this._offsetY;this._offsetY+=t*this._offsetDamping}transformScreenToView(e,t){if(!this._element)return{x:e-this._offsetX,y:t-this._offsetY};const s=this._element.getScreenCTM();return{x:(e-s.e)/s.a-this._offsetX,y:(t-s.f)/s.d-this._offsetY}}setOffset(e,t,s=!1){s?(this._nextOffsetX=this._offsetX=e,this._nextOffsetY=this._offsetY=t):(this._nextOffsetX=e,this._nextOffsetY=t)}addOffset(e,t,s=!1){s?(this._offsetX+=e,this._offsetY+=t,this._nextOffsetX=this._offsetX,this._nextOffsetY=this._offsetY):(this._nextOffsetX+=e,this._nextOffsetY+=t)}setScale(e){this._scaleFactor=Math.min(this._maxScale,Math.max(this._minScale,e))}addScale(e){this._scaleFactor=Math.min(this._maxScale,Math.max(this._minScale,this._scaleFactor+e))}getOffsetX(){return this._offsetX}getOffsetY(){return this._offsetY}getOffsetDamping(){return this._offsetDamping}getScale(){return this._scaleFactor}getMinScale(){return this._minScale}getMaxScale(){return this._maxScale}getElement(){return this._element}}class Uo{constructor(){this._inputHandlers=[]}addInputHandler(e,t=-1){return t<0?this._inputHandlers.push(e):(this._inputHandlers.length<=t&&(this._inputHandlers.length=t+1),this._inputHandlers[t]?this._inputHandlers.splice(1,0,e):this._inputHandlers[t]=e),this}removeInputHandler(e){const t=this._inputHandlers.indexOf(e);return t>=0&&(this._inputHandlers[t]=null),this}clearInputHandlers(){this._inputHandlers.length=0}handleEvent(e,...t){for(const s of this._inputHandlers){if(!s)continue;const r=s[e];if(typeof r=="function"&&r.apply(s,t))return s}return null}getInputHandlers(){return this._inputHandlers}}class Qw{constructor(e,t,s){this._inputAdapter=e,this._viewportAdapter=t,this._element=s,this._active=!1,this._x=0,this._y=0,this._inputpos={x:0,y:0}}get x(){return this._x}get y(){return this._y}setPosition(e,t){return this._x=e,this._y=t,this}beginInput(){this._active=!0,this._inputpos.x=this._x,this._inputpos.y=this._y}getInputEventPosition(){return this._inputpos}changeInputEventPosition(e,t){this._inputpos.x=e,this._inputpos.y=t}endInput(){this._active=!1}isActive(){return this._active}getDistanceSquToInitial(){const e=this._inputpos,t=e.x-this._x,s=e.y-this._y;return t*t+s*s}getElement(){return this._element}getViewportAdapter(){return this._viewportAdapter}getInputAdapter(){return this._inputAdapter}}const Xw=600,qw=600,Zw=1/300,Ed=4,xd=Ed*Ed,Td=18,Jw=Td*Td;class eE extends Uo{constructor(e){super(),this._viewportAdapter=e,this._contexts=[],this._activeDragHandler=null,this._element=null,this._cursor={_mousemove:null,_mouseup:null,_touchmove:null,_touchend:null,_timer:null},this._pointer=null,this._dragging=!1,this._altinput=!1,this._holdInputDelay=Xw,this._dblInputDelay=qw,this._scrollSensitivity=Zw,this._minTapRadius=xd*16,this._draggingRadiusSqu=xd+Jw,this._prevEmptyInput=!1,this._prevEmptyTime=0,this._prevEmptyX=0,this._prevEmptyY=0,this.onContextMenu=this.onContextMenu.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onTouchStart=this.onTouchStart.bind(this),this.onWheel=this.onWheel.bind(this),this.onMouseDownThenMove=this.onMouseDownThenMove.bind(this),this.onMouseDownThenUp=this.onMouseDownThenUp.bind(this),this.onTouchStartThenMove=this.onTouchStartThenMove.bind(this),this.onTouchStartThenEnd=this.onTouchStartThenEnd.bind(this),this.onDelayedInputDown=this.onDelayedInputDown.bind(this)}bindContext(e){if(!(e instanceof Uo))throw new Error("Cannot bind invalid context - must be an instance of InputContext");return this._contexts.unshift(e),this}bindContextAsLast(e){if(!(e instanceof Uo))throw new Error("Cannot bind invalid context - must be an instance of InputContext");return this._contexts.push(e),this}unbindContext(e=null){if(e){const t=this._contexts.indexOf(e);return t>=0?(this._contexts.splice(t,1),e):null}else return this._contexts.shift()}clearContexts(){this._contexts.length=0}hasContexts(){return this._contexts.length>0}getCurrentContext(){return this._contexts.length>0?this._contexts[this._contexts.length-1]:this}initialize(e){if(!(e instanceof SVGElement))throw new Error("Missing SVG element for input adapter's viewport");if(this._element)throw new Error("Trying to initialize an InputAdapter already initialized");this._viewportAdapter.setElement(this._element=e),this._pointer=new Qw(this,this._viewportAdapter,this._element),this._element.addEventListener("mousedown",this.onMouseDown),this._element.addEventListener("mousemove",this.onMouseMove),this._element.addEventListener("touchstart",this.onTouchStart),this._element.addEventListener("touchmove",this.onTouchMove),this._element.addEventListener("contextmenu",this.onContextMenu),this._element.addEventListener("wheel",this.onWheel)}destroy(){if(!this._element)throw new Error("Trying to destroy an InputAdapter that is not yet initialized");this._element.removeEventListener("mousedown",this.onMouseDown),this._element.removeEventListener("mousemove",this.onMouseMove),this._element.removeEventListener("touchstart",this.onTouchStart),this._element.removeEventListener("contextmenu",this.onContextMenu),this._element.removeEventListener("wheel",this.onWheel),this._element=null}update(){this._element&&this._viewportAdapter.update()}handleEvent(e,...t){for(const s of this._contexts){const r=s.handleEvent(e,...t);if(r)return r}return super.handleEvent(e,...t)}onMouseDown(e){e.stopPropagation(),e.preventDefault();const t=this._cursor;document.activeElement.blur(),this._element.focus(),t._mousemove&&(document.removeEventListener("mousemove",t._mousemove),t._mousemove=null),t._mouseup&&(document.removeEventListener("mouseup",t._mouseup),t._mouseup=null);const s=e.ctrlKey?2:e.button;return this.onInputDown(e.clientX,e.clientY,s)&&(t._mousemove=this.onMouseDownThenMove,t._mouseup=this.onMouseDownThenUp,document.addEventListener("mousemove",t._mousemove),document.addEventListener("mouseup",t._mouseup)),!1}onMouseMove(e){const t=this._viewportAdapter.transformScreenToView(e.clientX,e.clientY),s=this._pointer;s.setPosition(t.x,t.y),this.handleEvent("onMoveInputEvent",s)&&(e.stopPropagation(),e.preventDefault(),this.cancelInputEvent())}onMouseDownThenMove(e){return e.stopPropagation(),e.preventDefault(),this.onInputMove(e.clientX,e.clientY),!1}onMouseDownThenUp(e){e.stopPropagation(),e.preventDefault();const t=this._cursor;return t._mousemove&&(document.removeEventListener("mousemove",t._mousemove),t._mousemove=null),t._mouseup&&(document.removeEventListener("mouseup",t._mouseup),t._mouseup=null),this.onInputUp(e.clientX,e.clientY),!1}onTouchStart(e){if(e.changedTouches.length==1){e.stopPropagation(),e.preventDefault();const t=this._cursor;document.activeElement.blur(),this._element.focus(),t._touchmove&&(document.removeEventListener("touchmove",t._touchmove),t._touchmove=null),t._touchend&&(document.removeEventListener("touchend",t._touchend),t._touchend=null);const s=e.changedTouches[0];return this.onInputDown(s.clientX,s.clientY,0)&&(t._touchmove=this.onTouchStartThenMove,t._touchend=this.onTouchStartThenEnd,document.addEventListener("touchmove",t._touchmove),document.addEventListener("touchend",t._touchend)),!1}}onTouchStartThenEnd(e){e.stopPropagation(),e.preventDefault();const t=this._cursor;t._touchmove&&(document.removeEventListener("touchmove",t._touchmove),t._touchmove=null),t._touchend&&(document.removeEventListener("touchend",t._touchend),t._touchend=null);const s=e.changedTouches[0];return this.onInputUp(s.clientX,s.clientY),!1}onTouchStartThenMove(e){e.stopPropagation(),e.preventDefault();const t=e.changedTouches[0];return this.onInputMove(t.clientX,t.clientY),!1}onContextMenu(e){return e.stopPropagation(),e.preventDefault(),!1}onWheel(e){e.stopPropagation(),e.preventDefault();const t=this._pointer,s=e.deltaY*this._scrollSensitivity,r=this._viewportAdapter.getScale(),o=r+s;return this.handleEvent("onZoomChange",t,o,r)||this._viewportAdapter.setScale(o),!1}onInputDown(e,t,s){const r=this._cursor,o=this._pointer,i=this._viewportAdapter.transformScreenToView(e,t);return o.setPosition(i.x,i.y),this._dragging=!1,this._altinput=s==2,this.handleEvent("onPreInputEvent",o)?!1:(o.beginInput(),r._timer=setTimeout(this.onDelayedInputDown,this._holdInputDelay),!0)}onDelayedInputDown(){this._dragging||(this._altinput=!0)}onInputMove(e,t){const s=this._pointer,r=this._viewportAdapter.transformScreenToView(e,t);if(s.setPosition(r.x,r.y),this._dragging)this._activeDragHandler&&this._activeDragHandler.onDragMove(s);else if(s.getDistanceSquToInitial()>this._draggingRadiusSqu){this._dragging=!0;const o=s.getInputEventPosition(),i=this.handleEvent("onDragStart",s,o.x,o.y);i?this._activeDragHandler=i:(this._dragging=!1,this.cancelInputEvent())}}onInputUp(e,t){const s=this._cursor,r=s._timer;r&&(clearTimeout(r),s._timer=null);const o=this._pointer,i=this._viewportAdapter.transformScreenToView(e,t);if(o.setPosition(i.x,i.y),this._dragging)this._activeDragHandler&&(this._activeDragHandler.onDragStop(o),this._activeDragHandler=null);else if(this._altinput)this.handleEvent("onAltInputEvent",o);else if(!this.handleEvent("onInputEvent",o)){const l=e-this._prevEmptyX,c=t-this._prevEmptyY,u=l*l+c*c,h=Date.now()-this._prevEmptyTime;this._prevEmptyInput&&u<this._minTapRadius&&h<this._dblInputDelay?(this.handleEvent("onDblInputEvent",o),this._prevEmptyInput=!1):(this._prevEmptyInput=!0,this._prevEmptyTime=Date.now(),this._prevEmptyX=e,this._prevEmptyY=t)}o.endInput(),this.handleEvent("onPostInputEvent",o)}cancelInputEvent(){const e=this._pointer,t=this._cursor;t._mousemove&&(document.removeEventListener("mousemove",t._mousemove),t._mousemove=null),t._mouseup&&(document.removeEventListener("mouseup",t._mouseup),t._mouseup=null);const s=t._timer;s&&(clearTimeout(s),t._timer=null),e.endInput(),this.handleEvent("onPostInputEvent",e)}getContexts(){return this._contexts}getActiveElement(){return this._element}getViewportAdapter(){return this._viewportAdapter}getPointerX(){return this._pointer?this._pointer.x:0}getPointerY(){return this._pointer?this._pointer.y:0}isPointerActive(){return this._pointer?this._pointer.isActive():!1}isUsingTouch(){return this._cursor._touchmove||this._cursor._touchend}isAltInput(){return this._altinput}isDragging(){return this._dragging}}const tE=300,nE=.4,sE=.1,rE=10;class oE extends S.Component{constructor(e){super(e),this._ref=S.createRef(),this._viewportAdapter=new Yw().setMinScale(sE).setMaxScale(rE).setOffsetDamping(nE),this._inputAdapter=new eE(this._viewportAdapter)}addInputHandler(e){if(!(e instanceof tn))throw new Error("input handler must be an instanceof AbstractInputHandler");return this._inputAdapter.addInputHandler(e),this}componentDidMount(){this._inputAdapter.initialize(this._ref.current)}componentWillUnmount(){this._inputAdapter.destroy()}componentDidUpdate(){this._inputAdapter.update()}getSVGTransformString(){const e=this._viewportAdapter;return"translate("+e.getOffsetX()+" "+e.getOffsetY()+")"}getSVGViewBoxString(e){const t=this._viewportAdapter,s=e*Math.max(Number.MIN_VALUE,t.getScale()),r=s/2;return-r+" "+-r+" "+s+" "+s}getSVGElement(){return this._ref.current}getInputAdapter(){return this._inputAdapter}getViewportAdapter(){return this._inputAdapter.getViewportAdapter()}render(){const e=this.getSVGViewBoxString(this.props.viewSize||tE),t=this.getSVGTransformString();return a("svg",{ref:this._ref,id:this.props.id,className:Ww.viewport_component+" "+this.props.className,style:this.props.style,viewBox:e,children:a("g",{transform:t,children:this.props.children})})}}const iE=!0;class lE{constructor(){this._trashMode=!1,this._nodeOnly=!1,this._moveModeFirst=iE,this._handlingInput=!1,this._target={source:null,type:null},this._activeTarget={source:null,type:null,input:!0},this._immediateTarget={source:null,type:null},this._selectionBox=null,this.onMouseOver=this.onMouseOver.bind(this),this.onMouseOut=this.onMouseOut.bind(this)}setSelectionBox(e){return this._selectionBox=e,this}setTrashMode(e){return this._trashMode=e,this}setNodeEventsOnly(e){return this._nodeOnly=e,this}setMoveModeFirst(e){return this._moveModeFirst=e,this}onPreInputEvent(e){return this._handlingInput=!0,this.updateCurrentTarget(this._immediateTarget.source,this._immediateTarget.type),!1}onPostInputEvent(e){this.updateCurrentTarget(null,null),this._handlingInput=!1}onMouseOver(e){const s=e.target.value;this._immediateTarget.source=s.source,this._immediateTarget.type=s.type,this._immediateTarget.data=s}onMouseOut(e){this._immediateTarget.source=null,this._immediateTarget.type=null,this._immediateTarget.data=null}bindActiveTarget(e,t,s=!0){this._activeTarget.source=e,this._activeTarget.type=t,this._activeTarget.input=s}unbindActiveTarget(){this._activeTarget.source=null,this._activeTarget.type=null,this._activeTarget.input=!1}updateCurrentTarget(e,t){this._target.source=e,this._target.type=t}getActiveTargetSource(){return this._activeTarget.source}getActiveTargetType(){return this._activeTarget.type}hasActiveTarget(){return this._activeTarget.type!==null}hasPointerEvents(e){return this._activeTarget.source===e?this._activeTarget.input:this._nodeOnly?e instanceof Ye:!0}getCurrentTargetSource(){return this._target.source}getCurrentTargetType(){return this._target.type}hasCurrentTarget(){return this._target.type!==null}getImmediateTargetSource(){return this._immediateTarget.source}getImmediateTargetType(){return this._immediateTarget.type}hasImmediateTarget(){return this._immediateTarget.type!==null}isTrashMode(){return this._trashMode}isMoveMode(e){return!(this._moveModeFirst^!e.isAltInput())}isNodeEventsOnly(){return this._nodeOnly}isMoveModeFirst(){return this._moveModeFirst}isHandlingInput(){return this._handlingInput}getSelectionBox(){return this._selectionBox}}class aE extends tn{constructor(e){super(),this._inputController=e,this._cachedPosition={x:0,y:0}}onDragStart(e){const t=this._inputController;if(t.hasActiveTarget()||t.hasCurrentTarget()||!t.isMoveMode(e.getInputAdapter()))return!1;const s=e.getInputEventPosition();return this._cachedPosition.x=s.x,this._cachedPosition.y=s.y,!0}onDragMove(e){const t=e.x-this._cachedPosition.x,s=e.y-this._cachedPosition.y;e.getViewportAdapter().addOffset(t,s,!0)}onDragStop(e){}}class Tu extends S.Component{constructor(e){super(e),this._inputController=new lE,this._inputContext=new Uo,this._viewportComponent=S.createRef(),this._viewportInputHandler=new aE(this._inputController)}componentDidMount(){const e=this._inputContext,s=this._viewportComponent.current.getInputAdapter();e.addInputHandler(this._inputController).addInputHandler(this._viewportInputHandler,10),s.bindContext(e)}componentWillUnmount(){const e=this._inputContext,s=this._viewportComponent.current.getInputAdapter();e.clearInputHandlers(),s.unbindContext(e)}moveViewToPosition(e,t){this.getViewportAdapter().setOffset(-e,-t)}getInputController(){return this._inputController}getInputContext(){return this._inputContext}getViewportComponent(){return this._viewportComponent.current}getInputAdapter(){return this._viewportComponent.current.getInputAdapter()}getViewportAdapter(){return this._viewportComponent.current.getViewportAdapter()}render(){const e=this._inputController,t=this._viewportComponent.current,s=this.props.renderGraph,r=this.props.renderOverlay;return C("div",{id:this.props.id,className:this.props.className,style:this.props.style,children:[a(oE,{ref:this._viewportComponent,children:s&&t&&s(this,t,e)}),r&&t&&r(this,t,e)]})}}const cE="fsa",uE="3.0.0";class hE{constructor(e){this._app=e,this._graph=new xn,this._graphController=new $v(e,this._graph,null),this._graphViewComponent=S.createRef();const t=this._graphController;e.getRenderManager().addRenderer(Lr,s=>a(Tu,{ref:this._graphViewComponent,renderGraph:r=>a(nw,{graphView:r,graphController:t,editable:!this._testMode,session:this._app.getSession()}),renderOverlay:r=>this._testMode?a(Kw,{graphView:r,tester:this._tester}):a(Uw,{graphView:r,graphController:t,session:this._app.getSession()})})),this._machineController=new sS(this),this._errorChecker=new fS(e,this._graphController,this._machineController),this._tester=new kf,this._testMode=!1,this._broadcastHandler=new AS,this._tutorialHandler=new DS(e)}initialize(e){gS(e.getNotificationManager()),e.getExportManager().registerExporter(new SS(ts),"session").registerExporter(new wS(ld),"jflap"),uu(e.getExportManager()),e.getImportManager().addImporter(new _S(e,ts),".fsa.json",".json").addImporter(new vS(e,ld),".jff"),e.getUndoManager().setEventHandlerFactory((...t)=>new Xi(this._graphController,ts)),e.getDrawerManager().addPanelClass(t=>C(de,{id:t.id,className:t.className,style:t.style,title:"Finite State Automata",children:[a("p",{children:"Brought to you with \u2764 by the Flap.js team."}),a("p",{children:"<- Tap on a tab to begin!"}),C("div",{style:{position:"absolute",bottom:0,right:0,marginRight:"1em"},children:["Looking for Bab's Tutorial?",a("div",{style:{display:"flex",margin:"0.5em 0"},children:a("button",{style:{flex:1},onClick:s=>{e.getDrawerComponent().closeDrawer(),this._tutorialHandler.start(e,!0)},children:I18N.toString("message.action.next")})})]})]})).addPanelClass(qi).addPanelClass(_r).addPanelClass(el),e.getHotKeyManager().registerHotKey("Export to PNG",[Le,"KeyP"],()=>{e.getExportManager().tryExportFile("image-png",e.getSession())}).registerHotKey("Save as JSON",[Le,"KeyS"],()=>{e.getExportManager().tryExportFile("session",e.getSession())}),e.getMenuManager().setSubtitleComponentClass(t=>C("select",{onChange:s=>{this._machineController.setMachineType(s.target.value)},value:this._machineController.getMachineType(),children:[a("option",{value:"DFA",children:"DFA"}),a("option",{value:"NFA",children:"NFA"})]})),e.getTooltipManager().addTooltip(I18N.toString("message.workspace.empty")).addTooltip("If you need help, try the '?' at the top.").addTooltip("Or you can choose to do nothing.").addTooltip("I can't do anything about that.").addTooltip("You really should consider doing something though, for the sake of both of us.").addTooltip("Of course, it is your free will.").addTooltip("You do you.").addTooltip("Please do something.").addTooltip("I need my job.").addTooltip(I18N.toString("message.workspace.empty")),e.getBroadcastManager().addMessageHandler(this._broadcastHandler),this._machineController.initialize(this),this._graphController.initialize(),this._tutorialHandler.start(e)}update(e){this._graphController.update(),this._machineController.update(this)}destroy(e){this._machineController.destroy(this),this._graphController.destroy()}clear(e,t=!1){tu(e,t,()=>e.getToolbarComponent().closeBar())}getMachineController(){return this._machineController}getGraphController(){return this._graphController}getGraphView(){return this._graphViewComponent.current}getErrorChecker(){return this._errorChecker}getStringTester(){return this._tester}getBroadcastHandler(){return this._broadcastHandler}getModuleVersion(){return uE}getModuleName(){return cE}getLocalizedModuleName(){return"Finite Automata"}getApp(){return this._app}}class sc extends Ye{constructor(e,t,s){super(e,t,s),this._accept=!1,this._custom=!1}setNodeAccept(e){this._accept=e}getNodeAccept(){return this._accept}setNodeCustom(e){this._custom=e}getNodeCustom(){return this._custom}getHashString(e=!0){return super.getHashString(e)+":"+(this._accept?"1":"0")}}const yr=`
`,Si=" ",fn=",",ss="\u2192",ze="\u03B5";class dE extends gn{constructor(e,t,s=null){super(e,t,s)}setEdgeLabel(e){e?super.setEdgeLabel(e):super.setEdgeLabel(ze+fn+ze+ss+ze)}getEdgeSymbolsFromLine(e){e=e.trim();let t=e.indexOf(fn),s=e.indexOf(ss);if(t<=0)return[ze,ze,ze];let r=e.substring(0,t);if(s<=0)return[r,ze,ze];let o=e.substring(t+1,s),i=e.substring(s+1);return i.length<=0?[r,o,ze]:[r,o,i]}}class Wf extends _f{constructor(){super(sc,dE)}}const pE="q";class gE extends yf{constructor(){super(),this._prefix=pE,this._graphController=null}setGraphController(e){return this._graphController=e,this}setDefaultNodeLabelPrefix(e){this._prefix=e}getDefaultNodeLabelPrefix(){return this._prefix}getDefaultNodeLabel(){if(this._graphController.shouldAutoRenameNodes()){const e=this._graphController.getGraph(),t=[];let s=0;const r=e.getStartNode();r&&r.getNodeCustom()&&(s=1);let o=this.getDefaultNodeLabelPrefix()+s;for(;e.getNodesByLabel(o,t).length>0;)t.length=0,++s,o=this.getDefaultNodeLabelPrefix()+s;return o}else return this.getDefaultNodeLabelPrefix()}getDefaultEdgeLabel(){return""}getNodeLabelFormatter(){return e=>e||""}getEdgeLabelFormatter(){return fE}}function Xl(n){return n.length===1&&n!==yr&&n!==Si&&n!==fn&&n!==ss}function fE(n,e=!1){const t=n.split(yr),s=new Set,r=t.length;let o,i=0;for(let l=0;l<r;++l){if(o=t[l].trim().split(""),i=o.length,i<=0){s.add("");continue}let c=null,u=null,h=null,d=null;for(let p=0;p<i;++p)if(c===null)d=o[p].trim(),Xl(d)&&(c=d,p+1<i&&(o[p+1]===fn||o[p+1]===Si)&&++p);else if(u===null)d=o[p].trim(),Xl(d)&&(u=d,p+1<i&&(o[p+1]===ss||o[p+1]===Si)&&++p);else if(h===null&&(d=o[p].trim(),Xl(d))){h=d;break}c===null?s.add(""):u===null?s.add(c+fn):h===null?s.add(c+fn+u+ss):s.add(c+fn+u+ss+h)}return s.size<=0?e?null:ze:Array.from(s).join(yr)}const mE="tryCreateWhileTrash",_E=!0,mo=64;class yE extends su{constructor(e,t,s){super(t),this._app=e,this.setLabelFormatter(new gE().setGraphController(this)),this.shouldAutoLabel=_E}onGraphEvent(e,t){switch(super.onGraphEvent(e,t),e){case ou:case ds:case yn:this.shouldAutoLabel&&this.applyAutoRename(),this._app.getUndoManager().captureEvent();break;case zi:case Vi:this._app.getNotificationManager().pushNotification(I18N.toString("message.warning.cannotmodify"),Gi,mE,null,!0);break;default:this._app.getUndoManager().captureEvent()}}getApp(){return this._app}deleteTargetNodes(e){if(!e||e.length<=0)return;const t=this.getGraph();for(const s of e)t.deleteNode(s);this.emitGraphEvent(yn,{target:e})}getGraphLabeler(){return this.getLabelFormatter()}applyAutoLayout(){Ar.applyLayout(this.getGraph()),this._app.getUndoManager().captureEvent()}applyAutoRename(){const e=this._labelFormatter,t=this._graph;if(!t.isEmpty()){for(const s of t.getNodes())s.getNodeCustom()||s.setNodeLabel("");for(const s of t.getNodes())s.getNodeCustom()||s.setNodeLabel(e.getDefaultNodeLabel())}}setAutoRenameNodes(e){const t=this.shouldAutoLabel;this.shouldAutoLabel=e,e&&!t&&this.applyAutoRename()}shouldAutoRenameNodes(){return this.shouldAutoLabel}deleteSelectedNodes(e){const t=this.inputController.getSelectionBox(),s=t.getSelection(this.getGraph()).slice();for(const r of s)this._graph.deleteNode(r);t.clearSelection(),this.emitGraphEvent(yn,{target:s})}deleteTargetNode(e){this._graph.deleteNode(e),this.emitGraphEvent(ds,{target:e})}deleteTargetEdge(e){this._graph.deleteEdge(e),this.emitGraphEvent(un,{target:e})}deleteTargetEdges(e){if(!(!e||e.length<=0))for(const t of e)this.deleteTargetEdge(t)}createNode(e,t){typeof e>"u"&&(e=Math.random()*mo*2-mo),typeof t>"u"&&(t=Math.random()*mo*2-mo);const s=this._graph.createNode(e,t),r=this.getGraphLabeler().getDefaultNodeLabel();return s.setNodeLabel(r),this._app.getUndoManager().captureEvent(),s}renameNode(e,t){e.setNodeLabel(t),e.setNodeCustom(!0),this._app.getUndoManager().captureEvent()}}const vE=1,SE=2,CE=3,wE=4,K="&empty";class vr{constructor(e="",t=null){this._label=e,this._src=t,this._id=t instanceof kr?t.getGraphElementID():we()}copy(){const e=new vr;return e._label=this._label,e._src=this._src,e._id=this._id,e}getStateLabel(){return this._label}getStateID(){return this._id}getSource(){return this._src}getHashString(){return this._id}}class Nu{constructor(e,t){this._from=e,this._to=t,this._symbols=new Map}copy(){const e=new Nu;throw e._from=this._from,e._to=this._to,new Error("Not yet implemented")}getSourceState(){return this._from}getDestinationState(){return this._to}addSymbol(e,t,s){const r=new EE(e,t,s);this._symbols.set(r.getHashString(),r)}hasSymbol(e,t=null,s=null){for(const r of this._symbols.values())if(r.getReadSymbol()===e&&(!t||r.getPopSymbol()===t)&&(!s||r.getPushSymbol()===s))return!0;return!1}getSymbolsByReadPop(e,t=null,s=[]){for(const r of this._symbols.values())r.getReadSymbol()===e&&(!t||r.getPopSymbol()===t)&&s.push(r);return s}getSymbols(){return this._symbols.values()}getHashString(){let e="";for(const t of this._symbols.values())e+=t.getHashString()+",";return this._from.getHashString()+":"+e+":"+this._to.getHashString()}}class EE{constructor(e,t,s){this._read=e,this._pop=t,this._push=s}getReadSymbol(){return this._read}getPopSymbol(){return this._pop}getPushSymbol(){return this._push}getHashString(){return this._read+";"+this._pop+";"+this._push}}class xE{constructor(){this._states=new Map,this._alphabet=new Map,this._stackAlphabet=new Map,this._transitions=new Map,this._finalStates=new Set,this._customSymbols=new Set,this._customStackSymbols=new Set,this._startState=null,this._errors=[]}copy(e){if(e!==this){this.clear();for(const[t,s]of e._states.entries()){const r=s.copy();this._states.set(t,r),e.isStartState(s)&&(this._startState=r),e.isFinalState(s)&&this._finalStates.add(r)}for(const[t,s]of e._alphabet.entries())this._alphabet.set(t,s);for(const[t,s]of e._stackAlphabet.entries())this._stackAlphabet.set(t,s);for(const[t,s]of e._transitions.entries()){const r=s.copy();r._from=this._states.get(s.getSourceState().getStateID()),r._to=this._states.get(s.getDestinationState().getStateID()),this._transitions.set(t,r)}for(const t of e._customSymbols)this._customSymbols.add(t);for(const t of e._customStackSymbols)this._customStackSymbols.add(t);for(const t of e._errors)this._errors.push(t)}}clear(){this._states.clear(),this._alphabet.clear(),this._stackAlphabet.clear(),this._transitions.clear(),this._finalStates.clear(),this._customSymbols.clear(),this._customStackSymbols.clear(),this._startState=null,this._errors.length=0}validate(){return this._errors.length=0,!0}isValid(){return this._errors.length==0}getErrors(){return this._errors}createState(e=""){return this.addState(new vr(e))}addState(e){const t=e.getStateID();if(this._states.has(t))throw new Error("Already added state with id '"+t+"'");return this._states.size<=0&&(this._startState=e),this._states.set(t,e),e}removeState(e){const t=e.getStateID();return this._states.has(t)?(this._states.delete(t),this._startState===e&&(this._states.size<=0?this._startState=null:this._startState=this._states.values().next().value),!0):!1}hasStateWithLabel(e){for(const t of this._states.values())if(t.getStateLabel()==e)return!0;return!1}getStatesByLabel(e,t=[]){for(const s of this._states.values())s.getStateLabel()==e&&t.push(s);return t}getStateByID(e){return this._states.get(e)}hasState(e){return this._states.has(e.getStateID())}getStates(){return this._states.values()}getStateCount(){return this._states.size}addTransition(e,t,s,r,o){if(!this.hasState(e))throw new Error("Trying to add a transition to unknown state with label '"+e.getStateLabel()+"'");if(!this.hasState(t))throw new Error("Trying to add a transition to unknown state with label '"+t.getStateLabel()+"'");if(!s)throw new Error("Cannot add transition for null read symbol - use the empty symbol instead");if(!r)throw new Error("Cannot add transition for null pop symbol - use the empty symbol instead");if(!o)throw new Error("Cannot add transition for null push symbol - use the empty symbol instead");const i=e.getStateID()+"->"+t.getStateID();if(this._transitions.has(i)){const l=this._transitions.get(i);if(!l.hasSymbol(s,r,o))l.addSymbol(s,r,o);else return!1}else{const l=new Nu(e,t);l.addSymbol(s,r,o),this._transitions.set(i,l)}return this._incrSymbolCount(s),this._incrStackSymbolCount(r),this._incrStackSymbolCount(o),!0}removeTransition(e,t,s=null){const r=e.getStateID()+"->"+t.getStateID();if(!this._transitions.has(r))return!1;const i=this._transitions.get(r).getSymbols();if(s){const l=i.indexOf(s);return l>=0?(this._decrSymbolCount(s),i.splice(l,1),i.length<=0&&this._transitions.delete(r),!0):!1}else{for(const l of i)this._decrSymbolCount(l);return this._transitions.delete(r),!0}}hasTransition(e,t,s=null){const r=e.getStateID()+"->"+t.getStateID();return this._transitions.has(r)?s?this._transitions.get(r).hasSymbol(s):!0:!1}getTransitionSymbols(e,t){const s=e.getStateID()+"->"+t.getStateID();return this._transitions.has(s)?this._transitions.get(s).getSymbols():null}getTransitions(){return this._transitions.values()}_incrSymbolCount(e){if(e===K)return;const t=this._alphabet.get(e)||0;this._alphabet.set(e,t+1)}_incrStackSymbolCount(e){if(e===K)return;const t=this._stackAlphabet.get(e)||0;this._stackAlphabet.set(e,t+1)}_decrSymbolCount(e){if(!this._alphabet.has(e))throw new Error("Unable to find valid transition symbol in alphabet");if(e===K)return;const t=this._alphabet.get(e);t<=1?this.isCustomSymbol(e)?this._alphabet.set(e,0):this._alphabet.delete(e):this._alphabet.set(e,t-1)}_decrStackSymbolCount(e){if(!this._stackAlphabet.has(e))throw new Error("Unable to find valid transition symbol in alphabet");if(e===K)return;const t=this._stackAlphabet.get(e);t<=1?this.isCustomStackSymbol(e)?this._stackAlphabet.set(e,0):this._stackAlphabet.delete(e):this._stackAlphabet.set(e,t-1)}changeSymbol(e,t){throw e===K?new Error("Cannot change the empty symbol"):t===K?new Error("Cannot change to the empty symbol"):this._stackAlphabet.has(t)?new Error("Cannot change symbol to another existing symbol"):new Error("Not yet implemented")}removeSymbol(e){throw new Error("Not yet implemented")}setCustomSymbol(e,t=!0){if(e===K)throw new Error("Cannot change the empty symbol as a custom symbol");t?this._customSymbols.has(e)||(this._customSymbols.add(e),this._alphabet.has(e)||this._alphabet.set(e,0)):this._customSymbols.has(e)&&(this._customSymbols.delete(e),this._alphabet.has(e)&&this._alphabet.get(e)<=0&&this._alphabet.delete(e))}isCustomSymbol(e){return this._customSymbols.has(e)}getCustomSymbols(){return this._customSymbols}clearCustomSymbols(){this._customSymbols.clear()}isUsedSymbol(e){return this._alphabet.has(e)&&this._alphabet.get(e)>0}isSymbol(e){return this._alphabet.has(e)}getAlphabet(){return this._alphabet.keys()}changeStackSymbol(e,t){throw e===K?new Error("Cannot change the empty symbol"):t===K?new Error("Cannot change to the empty symbol"):this._stackAlphabet.has(t)?new Error("Cannot change symbol to another existing symbol"):new Error("Not yet implemented")}removeStackSymbol(e){throw new Error("Not yet implemented")}setCustomStackSymbol(e,t=!0){if(e===K)throw new Error("Cannot change the empty symbol as a custom symbol");t?this._customStackSymbols.has(e)||(this._customStackSymbols.add(e),this._stackAlphabet.has(e)||this._stackAlphabet.set(e,0)):this._customStackSymbols.has(e)&&(this._customStackSymbols.delete(e),this._stackAlphabet.has(e)&&this._stackAlphabet.get(e)<=0&&this._stackAlphabet.delete(e))}isCustomStackSymbol(e){return this._customStackSymbols.has(e)}getCustomStackSymbols(){return this._customStackSymbols}clearCustomStackSymbols(){this._customStackSymbols.clear()}isUsedStackSymbol(e){return this._stackAlphabet.has(e)&&this._stackAlphabet.get(e)>0}isStackSymbol(e){return this._stackAlphabet.has(e)}getStackAlphabet(){return this._stackAlphabet.keys()}setStartState(e){const t=e.getStateID();this._states.has(t)||this._states.set(t,e),this._startState=e}isStartState(e){return this._startState===e}getStartState(){return this._startState}setFinalState(e,t=!0){if(t)this._states.has(e.getStateID())||this.addState(e),this._finalStates.add(e);else{if(!this._states.has(e.getStateID()))throw new Error("Trying to change final for missing state '"+e.getStateLabel()+"'");this._finalStates.delete(e)}}isFinalState(e){return this._finalStates.has(e)}getFinalStates(){return this._finalStates}doTransition(e,t,s,r=[]){if(!e)return r;if(!(e instanceof vr))throw new Error("Invalid state instance type '"+typeof e+"'");if(!this._states.has(e.getStateID()))throw new Error("Unable to find source state with id '"+e.getStateID()+"'");t||(t=K);const o=e.getStateID()+"->";for(const i of this._transitions.keys())if(i.startsWith(o)){const l=this._transitions.get(i),c=l.getDestinationState(),u=[];l.getSymbolsByReadPop(t,s[s.length-1],u),l.getSymbolsByReadPop(t,K,u);for(const h of u){const d=s.slice(),p=h.getPopSymbol(),v=h.getPushSymbol();p!==K&&d.pop(),v!==K&&d.push(v),r.push([c,d])}}return r}doTerminalTransition(e,t,s,r=[]){if(!e)return r;if(!this._states.has(e.getStateID()))throw new Error("Unable to find source state with id '"+e.getStateID()+"'");t||(t=K);const o=e.getStateID()+"->";for(const i of this._transitions.keys())if(i.startsWith(o)){const l=this._transitions.get(i),c=l.getDestinationState(),u=[];l.getSymbolsByReadPop(t,s[s.length-1],u),l.getSymbolsByReadPop(t,K,u);for(const h of u){const d=s.slice(),p=h.getPopSymbol(),v=h.getPushSymbol();if(p!==K){if(s.length==0)continue;d.pop()}v!==K&&d.push(v);const m=this.doClosureTransition(c,d);for(const y of m){let w=!1;for(const f of r)if(f[0]===y[0]&&Nd(f[1],y[1])){w=!0;break}w||r.push(y)}}}return r}doClosureTransition(e,t,s=[]){if(!e)return s;s.push([e,t]);for(let r=0;r<s.length;++r){const o=s[r],i=o[0],l=o[1],c=this.getOutgoingTransitions(i);for(const u of c){const h=u[vE],d=u[CE],p=u[wE];if(h===K&&(d===l[l.length-1]||d===K)){const v=l.slice(),m=u[SE];d!==K&&v.pop(),p!==K&&v.push(p);let y=!1;for(const w of s)if(w[0]===m&&Nd(w[1],v)){y=!0;break}y||s.push([m,v])}}}return s}getOutgoingTransitions(e,t=[]){if(!e)return t;if(!this._states.has(e.getStateID()))throw new Error("Unable to find source state with id '"+e.getStateID()+"'");const s=e.getStateID()+"->";for(const r of this._transitions.keys())if(r.startsWith(s)){const o=this._transitions.get(r),i=o.getSymbols();for(const l of i)t.push([e,l.getReadSymbol(),o.getDestinationState(),l.getPopSymbol(),l.getPushSymbol()])}return t}getHashCode(){let e="";for(const t of this._states.values())e+=t.getHashString()+",";e+="|";for(const t of this._transitions.values())e+=t.getHashString()+",";e+="|";for(const t of this._finalStates)e+=t.getHashString();return e+="|",e+=this._startState?this._startState.getHashString():"",pt(e)}}function Nd(n,e){const t=[];for(const s of n)t.push(s);for(const s of e){const r=t.indexOf(s);if(r===-1)return!1;t.splice(r,1)}return t.length<=0}const Yf="unreachable_state",Qf="duplicate_state",Xf="incomplete_transition";class TE extends Sf{constructor(){super(),this._machine=new xE}attemptBuildGraph(e,t){t.clear();let s;for(const u of e.getStates())s=t.createNode(0,0),s.setNodeLabel(u.getStateLabel()),e.isFinalState(u)&&s.setNodeAccept(!0);let r,o,i,l;for(let u of e.getTransitions()){o=this.getFirstGraphNodeByLabel(t,u[0]),l=u[1],i=this.getFirstGraphNodeByLabel(t,u[2]),r=t.createEdge(o,i),r.setEdgeLabel(l);const h=t.formatEdge(r);r!=h&&t.deleteEdge(r)}const c=e.getStartState();return t.setStartNode(this.getFirstGraphNodeByLabel(t,c)),t}attemptBuildMachine(e,t,s=[],r=[]){s.length=0,r.length=0;const o=Array.from(t.getCustomSymbols()),i=Array.from(t.getCustomStackSymbols());t.clear();for(const m of o)t.setCustomSymbol(m);for(const m of i)t.setCustomStackSymbol(m);const l=new Map,c=new Map,u=[],h=e.getNodes(),d=e.getEdges(),p=e.getStartNode();for(const m of h){const y=m.getNodeLabel(),w=new vr(y,m);t.addState(w),m.getNodeAccept()&&t.setFinalState(w,!0),p===m&&t.setStartState(w),l.has(y)?l.get(y).push(w):l.set(y,[w]),c.set(w,new Map)}for(const m of d){const y=m.getEdgeFrom(),w=m.getEdgeTo();if(!m.isPlaceholder()&&y instanceof sc&&w instanceof sc){const f=t.getStateByID(y.getGraphElementID()),g=t.getStateByID(w.getGraphElementID());if(!f||!g)throw new Error("Cannot find state for edge source/destination nodes - mismatch id");const _=m.getEdgeLabel().split(yr);for(const E of _){if(!E)continue;const x=m.getEdgeSymbolsFromLine(E);for(let N=0;N<x.length;++N){let M=x[N];switch(M){case ze:x[N]=K;break;default:x[N]=M}}t.addTransition(f,g,x[0],x[1],x[2])}}else{u.push(m);continue}}for(const[m,y]of l.entries())y.length>1&&r.push({name:Qf,label:m,nodes:y.map(w=>w.getSource())});u.length>0&&s.push({name:Xf,edges:u});const v=Ki(e);return v&&v.length>0&&r.push({name:Yf,nodes:v}),s.length<=0?this._machine:null}getMachine(){return this._machine}}class NE extends vf{constructor(e){super(e,new TE),this.graphController=null}initialize(e){super.initialize(e),this.graphController=e.getGraphController()}destroy(e){super.destroy(e)}update(e){super.update(e)}getFirstGraphNodeByLabel(e,t){for(const s of e.getNodes())if(s.getNodeLabel()==t)return s;return null}setGraphToMachine(e,t){this._machineBuilder.attemptBuildGraph(t,e),Ar.applyLayout(e)}getStates(){return this._machineBuilder.getMachine().getStates()}countStates(){return this.getStates().length}getFinalStates(){return this._machineBuilder.getMachine().getFinalStates()}getTransitions(){return this._machineBuilder.getMachine().getTransitions()}getAlphabet(){const e=this._machineBuilder.getMachine();return Array.from(e.getAlphabet())}isUsedSymbol(e){return!this.isCustomSymbol(e)}createSymbol(e){this.addCustomSymbol(e)}deleteSymbol(e){let t=null,s=null,r=null;const o=[],i=this.graphController.getGraph();for(let l=i.getEdges().length-1;l>=0;--l)t=i.getEdges()[l],s=t.getEdgeLabel().indexOf(e),s>=0&&(r=t.getEdgeLabel().substring(0,s)+t.getEdgeLabel().substring(s+1),r.length>0?t.setEdgeLabel(r):(t.setEdgeLabel(""),i.deleteEdge(t)),o.push(t));o.length<=0&&this.getMachineBuilder().removeCustomSymbol(e)}renameSymbol(e,t){let s=null,r=null;const o=[],i=this.graphController.getGraph(),l=i.getEdges().length;for(let c=0;c<l;++c)s=i.getEdges()[c],r=s.getEdgeLabel().replace(e,t),r!=s.getEdgeLabel()&&o.push(s),s.setEdgeLabel(r);o.length<=0&&this.getMachineBuilder().renameCustomSymbol(e,t)}getCustomSymbols(){return Array.from(this._machineBuilder.getMachine().getCustomSymbols())}isCustomSymbol(e){return this._machineBuilder.isCustomSymbol(e)}addCustomSymbol(e){this._machineBuilder.getMachine().setCustomSymbol(e)}clearCustomSymbols(){this._machineBuilder.getMachine().clearCustomSymbols()}getStackAlphabet(){const e=this._machineBuilder.getMachine();return Array.from(e.getStackAlphabet())}isUsedStackSymbol(e){return!this.isCustomStackSymbol(e)}createStackSymbol(e){this.addCustomStackSymbol(e)}deleteStackSymbol(e){let t=null,s=null,r=null;const o=[],i=this.graphController.getGraph();for(let l=i.getEdges().length-1;l>=0;--l)t=i.getEdges()[l],s=t.getEdgeLabel().indexOf(e),s>=0&&(r=t.getEdgeLabel().substring(0,s)+t.getEdgeLabel().substring(s+1),r.length>0?t.setEdgeLabel(r):(t.setEdgeLabel(""),i.deleteEdge(t)),o.push(t));o.length<=0&&this.getMachineBuilder().removeCustomStackSymbol(e)}renameStackSymbol(e,t){let s=null,r=null;const o=[],i=this.graphController.getGraph(),l=i.getEdges().length;for(let c=0;c<l;++c)s=i.getEdges()[c],r=s.getEdgeLabel().replace(e,t),r!=s.getEdgeLabel()&&o.push(s),s.setEdgeLabel(r);o.length<=0&&this.getMachineBuilder().renameCustomStackSymbol(e,t)}getCustomStackSymbols(){return Array.from(this._machineBuilder.getMachine().getCustomStackSymbols())}isCustomStackSymbol(e){return this._machineBuilder.isCustomStackSymbol(e)}addCustomStackSymbol(e){this._machineBuilder.getMachine().setCustomStackSymbol(e)}clearCustomStackSymbols(){this._machineBuilder.getMachine().clearCustomStackSymbols()}}function Md(n,e,t,s){let r=null,o=null,i=[],l=0;e&&s.push(e);for(const c of t){if(r=c.state,o=c.stack,e=c.index<s.length?s[c.index]:null,e){l=c.index+1;for(let u of n.doTerminalTransition(r,e,o))i.push({state:u[0],stack:u[1],index:l})}else if(n.isFinalState(r))return!0;l=c.index}return t.length=0,t.push(...i),!1}class ME{constructor(e,t=!1,s=!1){this._tapeInput=e?e.split(""):[],this._left=t,this._right=s,this._index=0}stepForward(){++this._index}stepBackward(){--this._index}finish(){this._index=this._tapeInput.length*2}reset(){this._index=-1}stop(){this.finish(),this.reset()}changeTapeSymbol(e,t=""){this._tapeInput[e]=t}getTapeSourceStatesByIndex(e){return null}getTapeSymbolByIndex(e){return e<0||e>=this._tapeInput.length?"":this._tapeInput[e]||""}isTapeLeftInfinite(){return this._left}isTapeRightInfinite(){return this._right}setCurrentTapeIndex(e){this._index=e}getCurrentTapeIndex(){return this._index}getTapeInput(){return this._tapeInput}}class bE extends ME{constructor(e,t,s){super(e.getTestString(),!1,!0),this._tester=e,this._graphController=t,this._machineController=s}stepForward(){const e=this._graphController,t=this._machineController;this._tester.stepForward(e,t)}stepBackward(){const e=this._graphController,t=this._machineController;this._tester.stepBackward(e,t)}reset(){this._tester.resetPosition()}finish(){const e=this._graphController,t=this._machineController;this._tester.runTest(e,t,!1)}stop(){this._tester.stopTest()}changeTapeSymbol(e,t=""){throw new Error("Operation not yet supported")}getTapeSourceStatesByIndex(e){return e<0||e>=this._tapeInput.length?null:this._tester.getNodesAtPosition(e)}getTapeSymbolByIndex(e){return e<0||e>=this._tapeInput.length?[]:this._tapeInput[e]||""}setCurrentTapeIndex(e){this._tester.changePosition(e)}getCurrentTapeIndex(){return this._tester.getPosition()}}class qf{constructor(){this._testString=null,this._testIndex=-1,this._tapeContext=null,this._cachePath=[],this._cachedResult=null,this._resolve=null,this._reject=null,this.registerEvent("startTest"),this.registerEvent("stepTest"),this.registerEvent("stopTest")}get targets(){return this._cachePath.length<=0?[]:this._cachePath[this._cachePath.length-1].targets}startTest(e,t,s){if(e||(e=""),this._tapeContext)throw new Error("Unable to start an already running test");return t.getGraph().isEmpty()?Promise.reject():(this._testString=e,this._testIndex=-1,this._cachePath.length=0,this._cachedResult=null,this._tapeContext=new bE(this,t,s),this.emit("startTest",this),new Promise((o,i)=>{this._resolve=o,this._reject=i}))}stopTest(){if(!this._tapeContext)throw new Error("Unable to stop null test");if(this.emit("stopTest",this),!this._resolve)throw new Error("Must call startTest() before anything else");if(!this._reject)throw new Error("Must call startTest() before anything else");let e=null;return this._cachePath.length>=this._testString.length?(e=this._cachedResult,this._resolve(e)):(e=null,this._reject()),this._testString=null,this._testIndex=-1,this._cachePath.length=0,this._cachedResult=null,this._tapeContext=null,Promise.resolve(e)}runTest(e,t,s=!1){if(!this._tapeContext)throw new Error("Unable to run null test");return new Promise((r,o)=>{let i=!1;do i=this.stepForward(e,t,!s);while(i);r(this._cachedResult)}).then(r=>s?this.stopTest():r)}stepForward(e,t,s=!0){const r=t.getMachineBuilder().getMachine();if(this._testIndex>=this._testString.length)return!1;if(++this._testIndex,this._cachePath.length<=this._testIndex){let o,i=null;const l=this._testIndex===this._testString.length;if(this._testIndex<=0){o=[],i=[];const h=r.getStartState();for(const d of r.doClosureTransition(h,[]))o.push({state:d[0],stack:d[1],index:0})}else{const h=this._cachePath[this._testIndex-1];o=h.states.slice(),i=h.symbols.slice();const d=this._testString[this._testIndex-1];Md(r,d,o,i)}l&&(this._cachedResult=Md(r,null,o,i));const c=new Set;for(const h of o){const d=h.state.getSource();if(!d)throw new Error("Could not find node '"+h.state+"'");c.add(d)}const u={targets:Array.from(c),states:o,symbols:i};this._cachePath.push(u)}return this.emit("stepTest"),!0}stepBackward(e,t){return this._testIndex<=0?!1:(--this._testIndex,this.emit("stepTest"),!0)}isTesting(){return this._testString!==null}changePosition(e){e>=this._cachePath.length?this._testIndex=this._cachePath.length-1:e<0?this._testIndex=0:e>=this._testString.length?this._testIndex=this._testString.length-1:this._testIndex=e}resetPosition(){this._testIndex=-1}getPosition(){return this._testIndex}isComputedPosition(e){return this._cachePath.length>e}getCurrentNodes(){return this._testIndex>=0&&this._testIndex<this._cachePath.length?this._cachePath[this._testIndex]:null}getNodesAtPosition(e){return e>=0&&e<this._cachePath.length?this._cachePath[e].targets:null}getTestString(){return this._testString}getTapeContext(){return this._tapeContext}}au.mixin(qf);class IE extends S.Component{constructor(e){super(e),this.targetIndex=0,this.targetLabel="";const t=e.message.targets;for(const s of t)this.targetLabel.length>0&&(this.targetLabel+=", "),this.targetLabel+=s.getNodeLabel();this.onClick=this.onClick.bind(this)}onClick(e){const t=this.props.notification,s=this.props.message,r=this.props.graphController;switch(e.target.value){case"locate":{const o=s.targets,i=o.length;if(i>0&&this.targetIndex<i){const l=o[this.targetIndex++];this.targetIndex>=i&&(this.targetIndex=0),r.focusOnNode(l)}}break;case"deleteall":{const o=s.targets;r.deleteTargetNodes(o),r.applyAutoRename(),t.close()}break}}render(){const e=this.props.message;return C(Ie,{id:this.props.id,className:this.props.className,style:this.props.style,styleType:ys,notification:this.props.notification,children:[a("p",{children:e.text+": "+this.targetLabel}),a("button",{value:"locate",onClick:this.onClick,children:I18N.toString("message.action.locate")}),a("button",{value:"deleteall",onClick:this.onClick,children:I18N.toString("message.action.deleteall")})]})}}const LE="\u2192";class kE extends S.Component{constructor(e){super(e),this.targetIndex=0,this.targetLabel="";const t=e.message.targets;for(const s of t)this.targetLabel.length>0&&(this.targetLabel+=", "),this.targetLabel+="("+s.getEdgeFrom().getNodeLabel()+", "+s.getEdgeLabel()+") "+LE+" "+(s.getEdgeTo()instanceof Ye?s.getEdgeTo().getNodeLabel():"null");this.onClick=this.onClick.bind(this)}onClick(e){const t=this.props.notification,s=this.props.message,r=this.props.graphController;switch(e.target.value){case"locate":{const o=s.targets,i=o.length;if(i>0&&this.targetIndex<i){const l=o[this.targetIndex++];this.targetIndex>=i&&(this.targetIndex=0),r.focusOnEdge(l)}}break;case"deleteall":{const o=s.targets;r.deleteTargetEdges(o),t.close()}break}}render(){return C(Ie,{id:this.props.id,className:this.props.className,style:this.props.style,styleType:ys,notification:this.props.notification,children:[a("p",{children:this.props.message.text+": "+this.targetLabel}),a("button",{value:"locate",onClick:this.onClick,children:I18N.toString("message.action.locate")}),a("button",{value:"deleteall",onClick:this.onClick,children:I18N.toString("message.action.deleteall")})]})}}class AE extends S.Component{constructor(e){super(e),this.targetIndex=0,this.targetLabel="";const t=e.message;for(const s of t)this.targetLabel.length>0&&(this.targetLabel+=", "),this.targetLabel+=s.getNodeLabel();this.onClick=this.onClick.bind(this)}onClick(e){const t=this.props.notification,s=this.props.message,r=this.props.graphController;switch(e.target.value){case"locate":{const o=s[this.targetIndex++];this.targetIndex>=s.length&&(this.targetIndex=0),r.focusOnNode(o)}break;case"deleteall":{const o=s;r.deleteTargetNodes(o),r.applyAutoRename(),t.close()}break}}render(){return C(Ie,{id:this.props.id,className:this.props.className,style:this.props.style,styleType:Hi,notification:this.props.notification,children:[a("p",{children:I18N.toString("message.warning.unreachable")+": "+this.targetLabel}),a("button",{value:"locate",onClick:this.onClick,children:I18N.toString("message.action.locate")}),a("button",{value:"deleteall",onClick:this.onClick,children:I18N.toString("message.action.deleteall")})]})}}const Zf="machine-state",Jf="machine-transition",em="machine-state-unreachable",Pn="machine-error";function DE(n){n.registerNotificationLayout(em,AE),n.registerNotificationLayout(Zf,IE),n.registerNotificationLayout(Jf,kE)}class PE{constructor(e,t,s){this._app=e,this._graphController=t,this._machineController=s,this._showErrorOnChange=!1,this.onMachineChange=this.onMachineChange.bind(this),s.getMachineBuilder().getMachineChangeHandler().addListener(this.onMachineChange)}onMachineChange(e){this._showErrorOnChange&&this.showErrors()}setErrorChecking(e){this._showErrorOnChange=e}isErrorChecking(){return this._showErrorOnChange}showErrors(){const e={graphController:this._graphController,machineController:this._machineController},t=this._machineController.getMachineBuilder(),s=t.getMachineErrors(),r=t.getMachineWarnings(),i=this._app.getNotificationManager();if(i.clearNotifications(Pn),s.length<=0&&r.length<=0)i.pushNotification(I18N.toString("message.error.none"),$i,Pn,null,!1);else{for(const l of r)switch(l.name){case Qf:i.pushNotification({text:"Found duplicate nodes of similar names",targets:l.nodes},Zf,Pn,e,!1);break;case Yf:i.pushNotification(l.nodes,em,Pn,e,!1);break}for(const l of s)switch(l.name){case Xf:i.pushNotification({text:I18N.toString("message.error.incomplete"),targets:l.edges},Jf,Pn,e,!1);break}}}}const FE="1.0.0",ql={parse(n,e=null){e?e.clear():e=new Wf;const t=n.nodes||[],s=Math.min(t.length||0,n.nodeCount||0),r=n.edges||[],o=Math.min(r.length||0,n.edgeCount||0),i=n.initial||0,l=new Map;for(let u=0;u<s;++u){const h=t[u];if(!h)continue;const d=e.createNode(h.x||0,h.y||0,h.id);d.setNodeLabel(h.label||""),d.setNodeAccept(h.accept||!1),d.setNodeCustom(h.custom||!1),l.set(u,d)}const c=l.get(i);c&&e.setStartNode(c);for(let u=0;u<o;++u){const h=r[u];if(!h)continue;const d=l.get(h.from)||null;if(!d)continue;const p=l.get(h.to)||null,v=e.createEdge(d,p,h.id),m=h.quad||{};v.setEdgeLabel(h.label||""),v.setQuadraticRadians(m.radians||0),v.setQuadraticLength(m.length||0)}return e},objectify(n){const e=n.getNodes()||[],t=e.length||0,s=n.getEdges()||[],r=s.length||0,o=n.getStartNode(),i=new Array(t),l=new Map;for(let h=0;h<t;++h){const d=e[h];if(d){const p=d.getGraphElementID();l.set(d,h),i[h]={id:p,x:d.x||0,y:d.y||0,label:d.getNodeLabel()||"",accept:d.getNodeAccept()||!1,custom:d.getNodeCustom()||!1}}}const c=new Array(r);for(let h=0;h<r;++h){const d=s[h];if(d){const p=d.getGraphElementID(),v=d.getQuadratic()||{},m=d.getEdgeFrom(),y=d.getEdgeTo(),w=l.has(m)?l.get(m):-1,f=l.has(y)?l.get(y):-1;c[h]={id:p,from:w,to:f,quad:{radians:v.radians||0,length:v.length||0},label:d.getEdgeLabel()||""}}}const u=l.get(o)||0;return{nodeCount:t,nodes:i,edgeCount:r,edges:c,initial:u,_version:FE}}};class OE extends ji{constructor(e,t){super(e),this._graphParser=t,this._prevGraphHash=0}onParseSession(e,t){return JSON.parse(t)}onPreImportSession(e){const r=e.getCurrentModule().getGraphController().getGraph();this._prevGraphHash=r.getHashCode(!0),r.isEmpty()||e.getApp().getUndoManager().captureEvent()}onImportSession(e,t){const s=e.getCurrentModule(),r=s.getGraphController(),o=s.getMachineController(),i=r.getGraph();this._graphParser.parse(t.graphData,i),RE(s,r,o,t.machineData)}onPostImportSession(e){const o=e.getCurrentModule().getGraphController().getGraph().getHashCode(!0);this._prevGraphHash!==o&&e.getApp().getUndoManager().captureEvent()}}function RE(n,e,t){const s=t.type;s&&e.setMachineType(s);const r=t.symbols;if(r&&Array.isArray(r)){e.clearCustomSymbols();for(const i of r)e.addCustomSymbol(i)}const o=t.statePrefix;o&&n.getGraphLabeler().setDefaultNodeLabelPrefix(o)}class BE extends Mn{constructor(e){super(".pda.json"),this._graphParser=e}onExportSession(e,t){const s=e.getCurrentModule(),r=s.getGraphController(),o=s.getMachineController(),i=r.getGraph(),l=this._graphParser.objectify(i);t.graphData=l,t.machineData={symbols:o.getCustomSymbols(),statePrefix:r.getGraphLabeler().getDefaultNodeLabelPrefix()}}getIconClass(){return Wi}getLabel(){return I18N.toString("file.export.machine")}getTitle(){return I18N.toString("file.export.machine.hint")}}const HE="_machine_type_select_1qm89_1",zE="_autolayout_button_1qm89_6",UE={machine_type_select:HE,autolayout_button:zE},VE="_list_container_1f0xw_1",GE="_element_list_1f0xw_4",$E="_add_button_1f0xw_10",KE="_first_marker_1f0xw_17",_o={list_container:VE,element_list:GE,add_button:$E,first_marker:KE},jE="_element_container_1b5k1_1",WE={element_container:jE},bd="Enter",Id="Escape";class YE extends S.Component{constructor(e){super(e),this.state={value:null,error:!1},this.onValueChange=this.onValueChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}onFocus(e){const t=e.target,s=this.props.node,r=s?s.getNodeLabel():null;this.setState({value:r,error:!1},()=>t.select()),this.props.onFocus&&this.props.onFocus(e,this)}onBlur(e){const t=this.state.value;this.setState({value:null,error:!1}),this.props.onBlur&&this.props.onBlur(e,this,t)}onKeyDown(e){const t=e.key;(t===bd||t===Id)&&(e.preventDefault(),e.stopPropagation())}onKeyUp(e){const t=e.key,s=e.target;t===bd?s.blur():t===Id&&this.setState({value:null,error:!1},()=>s.blur())}onValueChange(e){let t=e.target.value.trim(),s=!1;if(this.props.onChange)try{this.props.onChange(e,this,t)}catch{s=!0}this.setState({value:t,error:s})}render(){const e=this.props.node,t=this.state.value,s=e?e.getNodeLabel():"",r=e?e.getNodeCustom()||t!==null&&t!==s:!1,o=e?e.getNodeAccept():!1,i=t===null?s:t;return a("div",{id:this.props.id,className:WE.element_container+(r?" custom ":"")+(!e.getNodeCustom()&&i.length<=0?" empty ":"")+(t!==null&&this.state.error?" error ":"")+(o?" accept ":"")+" "+this.props.className,style:this.props.style,children:a("input",{spellCheck:!1,style:{width:i.length+"ch"},value:i,onChange:this.onValueChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp})})}}class QE extends S.Component{constructor(e){super(e),this._prevX=0,this._prevY=0,this.onElementAdd=this.onElementAdd.bind(this),this.onElementFocus=this.onElementFocus.bind(this),this.onElementBlur=this.onElementBlur.bind(this),this.onElementChange=this.onElementChange.bind(this)}onElementAdd(e){const t=this.props.graphController;this._prevX+=16,this._prevY+=16;const s=t.createNode(this._prevX,this._prevY);t.focusOnNode(s)}onElementFocus(e,t){this._prevX=t.props.node.x,this._prevY=t.props.node.y,this.props.graphController.focusOnNode(t.props.node)}onElementBlur(e,t,s){const r=t.props.node;if(!r)return;const o=this.props.graphController;if(s!==null){const i=o.getGraph();s.length>0?i.getNodesByLabel(s).length<=0&&o.renameNode(r,s):r.getNodeCustom()?(r.setNodeCustom(!1),o.applyAutoRename()):o.deleteTargetNode(r)}}onElementChange(e,t,s){const r=this.props.graphController;if(s.length>0){const i=r.getGraph().getNodesByLabel(s);if(i.length>1||i.length===1&&i[0]!==t.props.node)throw new Error("Not a valid node label")}}render(){const s=this.props.graphController.getGraph().getNodes();return C("div",{id:this.props.id,className:_o.list_container,style:this.props.style,children:[C("div",{className:_o.element_list,children:[a(Bf,{className:_o.first_marker}),s.map(r=>a(YE,{node:r,onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange},r.getGraphElementID()))]}),a(D,{className:_o.add_button,title:"Add State",onClick:this.onElementAdd,children:a(Dr,{})})]})}}const XE="_list_container_1danl_1",qE="_element_list_1danl_4",ZE="_add_button_1danl_10",Zl={list_container:XE,element_list:qE,add_button:ZE},JE="_element_container_uset6_1",e2={element_container:JE},Ld="Enter",kd="Escape";class Ad extends S.Component{constructor(e){super(e),this._inputElement=null,this.state={value:null,error:!1},this.onValueChange=this.onValueChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}onFocus(e){const t=e.target,s=this.props.symbol;this.setState({value:s,error:!1},()=>t.select()),this.props.onFocus&&this.props.onFocus(e,this)}onBlur(e){const t=this.state.value;this.props.onBlur&&this.props.onBlur(e,this,t),this.setState({value:null,error:!1})}onKeyDown(e){const t=e.key;(t===Ld||t===kd)&&(e.preventDefault(),e.stopPropagation())}onKeyUp(e){const t=e.key,s=e.target;t===Ld?s.blur():t===kd&&this.setState({value:null,error:!1},()=>s.blur())}onValueChange(e){let t=e.target.value.trim(),s=!1;if(this.props.onChange)try{this.props.onChange(e,this,t)}catch{s=!0}this.setState({value:t,error:s})}focus(){this._inputElement.focus()}render(){const e=this.state.value,t=e===null?this.props.symbol:e,s=this.props.used||!1;return a("div",{id:this.props.id,className:e2.element_container+(t!==null&&t.length<=0?" empty ":"")+(e!==null&&this.state.error?" error ":"")+(s?" used ":"")+" "+this.props.className,style:this.props.style,children:a("input",{ref:r=>this._inputElement=r,spellCheck:!1,maxLength:1,style:{width:"1ch"},value:t,onChange:this.onValueChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp})})}}class t2 extends S.Component{constructor(e){super(e),this.newSymbolComponent=null,this.state={useNewSymbol:!1},this.onElementAdd=this.onElementAdd.bind(this),this.onElementFocus=this.onElementFocus.bind(this),this.onElementBlur=this.onElementBlur.bind(this),this.onElementChange=this.onElementChange.bind(this)}onElementAdd(e){this.setState({useNewSymbol:!0},()=>{this.newSymbolComponent.focus()})}onElementFocus(e,t){}onElementBlur(e,t,s){const r=t.props.symbol,o=this.props.machineController;if(s!==null){const i=o.getMachineBuilder().getMachine();s.length>0?i.isSymbol(s)||(r?o.renameSymbol(r,s):o.createSymbol(s)):r&&o.deleteSymbol(r)}this.state.useNewSymbol&&this.setState({useNewSymbol:!1})}onElementChange(e,t,s){const r=this.props.machineController;if(s.length>0&&r.getMachineBuilder().getMachine().isSymbol(s)&&s!==t.props.symbol)throw new Error("Not a valid symbol")}renderAlphabetList(e,t){const s=[];for(const r of t)!r||s.push(a(Ad,{symbol:r,used:e.isUsedSymbol(r),onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange},r));return s}render(){const t=this.props.machineController.getMachineBuilder().getMachine(),s=t.getAlphabet();return C("div",{id:this.props.id,className:Zl.list_container,style:this.props.style,children:[C("div",{className:Zl.element_list,children:[this.renderAlphabetList(t,s),a(Ad,{ref:r=>this.newSymbolComponent=r,style:{display:this.state.useNewSymbol?"block":"none"},symbol:"",onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange})]}),a(D,{className:Zl.add_button,title:"Add Symbol",onClick:this.onElementAdd,children:a(Dr,{})})]})}}const n2="_list_container_1danl_1",s2="_element_list_1danl_4",r2="_add_button_1danl_10",Jl={list_container:n2,element_list:s2,add_button:r2},o2="_element_container_uset6_1",i2={element_container:o2},Dd="Enter",Pd="Escape";class Fd extends S.Component{constructor(e){super(e),this._inputElement=null,this.state={value:null,error:!1},this.onValueChange=this.onValueChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}onFocus(e){const t=e.target,s=this.props.symbol;this.setState({value:s,error:!1},()=>t.select()),this.props.onFocus&&this.props.onFocus(e,this)}onBlur(e){const t=this.state.value;this.props.onBlur&&this.props.onBlur(e,this,t),this.setState({value:null,error:!1})}onKeyDown(e){const t=e.key;(t===Dd||t===Pd)&&(e.preventDefault(),e.stopPropagation())}onKeyUp(e){const t=e.key,s=e.target;t===Dd?s.blur():t===Pd&&this.setState({value:null,error:!1},()=>s.blur())}onValueChange(e){let t=e.target.value.trim(),s=!1;if(this.props.onChange)try{this.props.onChange(e,this,t)}catch{s=!0}this.setState({value:t,error:s})}focus(){this._inputElement.focus()}render(){const e=this.state.value,t=e===null?this.props.symbol:e,s=this.props.used||!1;return a("div",{id:this.props.id,className:i2.element_container+(t!==null&&t.length<=0?" empty ":"")+(e!==null&&this.state.error?" error ":"")+(s?" used ":"")+" "+this.props.className,style:this.props.style,children:a("input",{ref:r=>this._inputElement=r,spellCheck:!1,maxLength:1,style:{width:"1ch"},value:t,onChange:this.onValueChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp})})}}class l2 extends S.Component{constructor(e){super(e),this.newSymbolComponent=null,this.state={useNewSymbol:!1},this.onElementAdd=this.onElementAdd.bind(this),this.onElementFocus=this.onElementFocus.bind(this),this.onElementBlur=this.onElementBlur.bind(this),this.onElementChange=this.onElementChange.bind(this)}onElementAdd(e){this.setState({useNewSymbol:!0},()=>{this.newSymbolComponent.focus()})}onElementFocus(e,t){}onElementBlur(e,t,s){const r=t.props.symbol,o=this.props.machineController;if(s!==null){const i=o.getMachineBuilder().getMachine();s.length>0?i.isStackSymbol(s)||(r?o.renameStackSymbol(r,s):o.createStackSymbol(s)):r&&o.deleteStackSymbol(r)}this.state.useNewSymbol&&this.setState({useNewSymbol:!1})}onElementChange(e,t,s){const r=this.props.machineController;if(s.length>0&&r.getMachineBuilder().getMachine().isStackSymbol(s)&&s!==t.props.symbol)throw new Error("Not a valid symbol")}renderStackAlphabetList(e,t){const s=[];for(const r of t)!r||s.push(a(Fd,{symbol:r,used:e.isUsedStackSymbol(r),onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange},r));return s}render(){const t=this.props.machineController.getMachineBuilder().getMachine(),s=t.getStackAlphabet();return C("div",{id:this.props.id,className:Jl.list_container,style:this.props.style,children:[C("div",{className:Jl.element_list,children:[this.renderStackAlphabetList(t,s),a(Fd,{ref:r=>this.newSymbolComponent=r,style:{display:this.state.useNewSymbol?"block":"none"},symbol:"",onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange})]}),a(D,{className:Jl.add_button,title:"Add Stack",onClick:this.onElementAdd,children:a(Dr,{})})]})}}const a2="_select_container_2syqf_1",c2="_select_label_2syqf_5",u2="_prefix_editor_2syqf_10",h2="_postfix_selector_2syqf_24",yo={select_container:a2,select_label:c2,prefix_editor:u2,postfix_selector:h2};class d2 extends S.Component{constructor(e){super(e),this.onAutoStatePrefixSubmit=this.onAutoStatePrefixSubmit.bind(this),this.onAutoStatePrefixFormat=this.onAutoStatePrefixFormat.bind(this)}onAutoStatePrefixSubmit(e,t){const s=this.props.graphController,r=s.getGraphLabeler();r.getDefaultNodeLabelPrefix()!=e&&(r.setDefaultNodeLabelPrefix(e),s.applyAutoRename())}onAutoStatePrefixFormat(e){return e&&e.length>0?e:this.props.graphController.getGraphLabeler().getDefaultNodeLabelPrefix()}render(){const e=this.props.graphController;return C("div",{id:this.props.id,className:yo.select_container+" "+this.props.className,style:this.props.style,children:[a("label",{className:yo.select_label,children:"State Labels"}),a(eu,{className:yo.prefix_editor,defaultValue:e.getGraphLabeler().getDefaultNodeLabelPrefix(),captureOnExit:"save",formatter:this.onAutoStatePrefixFormat,onSubmit:this.onAutoStatePrefixSubmit}),C("select",{className:yo.postfix_selector,onChange:this.onMachineTypeChange,disabled:!0,children:[a("option",{children:"0-9"}),a("option",{children:"a-z"}),a("option",{children:"A-Z"})]})]})}}class tl extends S.Component{constructor(e){super(e),this.onAutoLayoutApply=this.onAutoLayoutApply.bind(this),this.onAutoLayoutChange=this.onAutoLayoutChange.bind(this),this.onAutoLabelChange=this.onAutoLabelChange.bind(this),this.onSnapToGridChange=this.onSnapToGridChange.bind(this)}onAutoLayoutApply(e){this.props.session.getCurrentModule().getGraphController().applyAutoLayout()}onAutoLayoutChange(e){}onAutoLabelChange(e){this.props.session.getCurrentModule().getGraphController().setAutoRenameNodes(e.target.checked)}onSnapToGridChange(e){}render(){const e=this.props.drawer,s=this.props.session.getCurrentModule(),r=s.getGraphController(),o=s.getMachineController(),i=r.shouldAutoRenameNodes(),l=e.isDrawerFullscreen();return C(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:tl.TITLE,children:[a(oe,{title:"States",initial:!0,full:l,children:a(QE,{graphController:r})}),a(oe,{title:"Alphabet",initial:!0,full:l,children:a(t2,{machineController:o})}),a(oe,{title:"Stack Alphabet",initial:!0,full:l,children:a(l2,{machineController:o})}),a(Yn,{}),a(d2,{graphController:r}),a("button",{className:UE.autolayout_button,onClick:this.onAutoLayoutApply,disabled:r.getGraph().isEmpty(),children:I18N.toString("action.overview.autolayout")}),a(Yn,{}),a(ot,{id:"overview-auto-label",checked:i,title:"Auto rename nodes",onChange:this.onAutoLabelChange}),a(ot,{id:"overview-auto-layout",checked:!1,title:"Auto layout nodes",disabled:!0,onChange:this.onAutoLayoutChange}),a(ot,{id:"overview-snap-grid",checked:!1,title:"Snap-to-grid",disabled:!0,onChange:this.onSnapToGridChange})]})}}Object.defineProperty(tl,"TITLE",{get:function(){return I18N.toString("component.overview.title")}});const p2={},g2="_test_container_11rsm_1",f2="_test_control_tray_11rsm_11",m2="_test_control_button_11rsm_15",_2="_test_list_container_11rsm_28",y2="_test_list_scroll_container_11rsm_39",v2="_test_list_11rsm_28",S2="_test_list_add_11rsm_53",C2="_test_list_runall_11rsm_53",w2="_test_list_count_11rsm_65",Be={test_container:g2,test_control_tray:f2,test_control_button:m2,test_list_container:_2,test_list_scroll_container:y2,test_list:v2,test_list_add:S2,test_list_runall:C2,test_list_count:w2},E2="_test_item_container_ew09k_1",x2="_test_button_ew09k_13",T2="_delete_button_ew09k_23",N2="_test_input_ew09k_53",vo={test_item_container:E2,test_button:x2,delete_button:T2,test_input:N2},Us="default",tm="success",nm="failure",sm="working";class M2 extends S.Component{constructor(e){super(e),this.inputElement=null,this.state={value:this.props.defaultValue||"",status:Us},this.onChange=this.onChange.bind(this)}focus(){this.inputElement&&this.inputElement.focus()}setValue(e,t=null){this.state.value!==e?this.setState({value:e},t):t&&t()}setStatus(e,t=null){this.state.status!==e?this.setState({status:e},t):t&&t()}resetStatus(e=null){this.state.status!==Us?this.setState({status:Us},e):e&&e()}getValue(){return this.state.value}getStatus(){return this.state.status}onChange(e){const t=e.target.value;this.state.value!==t&&this.setState({value:t,status:Us})}render(){const e=this.props.onDelete,t=this.props.onTest,s=this.props.active,r=this.props.placeholder,o=this.state.status;return C("div",{id:this.props.id,className:vo.test_item_container+(s?" active ":"")+" "+o+" "+this.props.className,style:this.props.style,children:[a(D,{className:vo.test_button,title:"Test",disabled:!t,onClick:i=>t(i,this),children:o===tm?a(mu,{}):o===nm?a(_u,{}):o===sm?a(yu,{}):a(vs,{})}),C("div",{className:vo.test_input,children:[a("input",{ref:i=>this.inputElement=i,type:"text",placeholder:r,value:this.state.value,onChange:this.onChange}),a("label",{children:this.props.subtitle})]}),a(D,{className:vo.delete_button,title:"Delete",disabled:!e,onClick:i=>e(i,this),children:a(fu,{})})]})}}const b2=[".txt"],I2="test.txt";class L2 extends S.Component{constructor(e){super(e),this._testList=[],this._testName=I2,this.onTestNew=this.onTestNew.bind(this),this.onTestUpload=this.onTestUpload.bind(this),this.onTestDownload=this.onTestDownload.bind(this),this.onTestClose=this.onTestClose.bind(this),this.onTestAdd=this.onTestAdd.bind(this),this.onTestDelete=this.onTestDelete.bind(this),this.onTestTest=this.onTestTest.bind(this),this.onTestRunAll=this.onTestRunAll.bind(this),this.onGraphChange=this.onGraphChange.bind(this)}componentDidMount(){this.props.graphController.getGraphChangeHandler().addListener(this.onGraphChange)}componentWillUnmount(){this.props.graphController.getGraphChangeHandler().removeListener(this.onGraphChange)}onGraphChange(e){for(const t of this._testList)t.ref.resetStatus()}onTestNew(e){this.isEmpty()||this.onTestClose(e),this.onTestAdd(e)}onTestUpload(e){const t=new FileReader;t.onload=s=>{try{this._testName=e.name,this._testList.length=0;const r=s.target.result.split(`
`);for(let o of r)o=o.trim(),o.length>0&&this._testList.push({id:we(),defaultValue:o,ref:null});this._testList.length<=0&&this.onTestAdd(null)}catch{t.abort()}},t.readAsText(e)}onTestDownload(e){const t=[];for(const s of this._testList){const r=s.ref;r&&t.push(r.getValue())}du(this._testName,t.join(`
`))}onTestClose(e){const t=this.props.tester;t.isTesting()&&t.stopTest(),this._testList.length=0}onTestAdd(e){this._testList.push({id:we(),defaultValue:"",ref:null})}onTestRunAll(e){let t=0;const s=()=>{const r=this._testList[t];this.onTestTest(null,r.ref,!0,()=>{++t,t<this._testList.length&&s()})};s()}onTestDelete(e,t){}onTestTest(e,t,s=!1,r=null){const o=s||this.props.immediate,i=this.props.tester,l=t.getValue();t.setState({status:sm});const c=this.props.graphController,u=this.props.machineController;if(i.startTest(l,c,u).then(h=>{t.setState({status:h?tm:nm})},h=>{t.setState({status:Us})}),o){const h=i.runTest(c,u,!0);r&&h.then(r)}}isEmpty(){return this._testList.length<=0}render(){const e=this.props.tester,t=this.props.graphController,s=this.isEmpty(),r=e&&e.isTesting();return C("div",{id:this.props.id,className:Be.test_container+" "+this.props.className,style:this.props.style,children:[C("div",{className:Be.test_control_tray,children:[a(D,{className:Be.test_control_button,title:I18N.toString("action.testing.new"),onClick:this.onTestNew,children:a(pu,{})}),a(Zi,{className:Be.test_control_button,title:I18N.toString("action.testing.import"),accept:b2.join(","),onUpload:this.onTestUpload,children:a(br,{})}),a(D,{className:Be.test_control_button,title:I18N.toString("action.testing.save"),disabled:s,onClick:this.onTestDownload,children:a(Ji,{})}),a(D,{className:Be.test_control_button,title:I18N.toString("action.testing.clear"),disabled:s,onClick:this.onTestClose,children:a(Bi,{})})]}),C("div",{className:Be.test_list_container+(s?" empty ":"")+(r?" disabled ":""),children:[C(D,{className:Be.test_list_add,title:"Add",onClick:this.onTestAdd,children:[a(gu,{}),a("span",{className:Be.test_list_count,children:s?"":""+this._testList.length})]}),a("div",{className:Be.test_list_scroll_container,children:a("div",{className:Be.test_list,children:this._testList.map((o,i)=>{const l=o.id,c=o.defaultValue||"";let u=this.onTestTest;return(!e||t.getGraph().isEmpty())&&(u=null),a(M2,{ref:h=>o.ref=h,defaultValue:c,onTest:u,onDelete:(h,d)=>{this._testList.splice(i,1),this.onTestDelete(h,d)}},l)})})}),a(D,{className:Be.test_list_runall,title:"Run All",onClick:this.onTestRunAll,children:a(vs,{})})]})]})}}class Sr extends S.Component{constructor(e){super(e),this.state={stepMode:!1},this.onStepTestChange=this.onStepTestChange.bind(this),this.onAutoErrorCheckChange=this.onAutoErrorCheckChange.bind(this)}componentDidMount(){const e=this.props.session,t=e.getApp(),r=e.getCurrentModule()._tester;r.on("startTest",o=>{t._viewport.setCurrentView(1),t._drawer.setDrawerSoloClass(Sr),t._drawer.closeDrawer()}),r.on("stopTest",o=>{t._viewport.setCurrentView(0),t._drawer.setDrawerSoloClass(null),t._drawer.openDrawer()})}onStepTestChange(e){this.setState((t,s)=>({stepMode:!t.stepMode}))}onAutoErrorCheckChange(e){const s=this.props.session.getCurrentModule().getErrorChecker(),r=s.isErrorChecking();s.setErrorChecking(!r),r&&this.props.session.getApp().getNotificationManager().clearNotifications(Pn)}render(){const t=this.props.session.getCurrentModule(),s=t.getGraphController(),r=t.getMachineController(),o=t.getStringTester(),i=t.getErrorChecker(),l=this.state.stepMode,c=i.isErrorChecking();return C(de,{id:this.props.id,className:p2.panel_container+" "+this.props.className,style:this.props.style,title:Sr.TITLE,children:[a(L2,{tester:o,graphController:s,machineController:r,immediate:!l}),a(ot,{id:"testing-error-check",checked:c,onChange:this.onAutoErrorCheckChange,title:"Auto error checking"})]})}}Object.defineProperty(Sr,"TITLE",{get:function(){return I18N.toString("component.testing.title")}});const k2="_analysis_button_u5ks6_1",A2={analysis_button:k2};class nl extends S.Component{constructor(e){super(e),this.optimizeUnreachOption=null,this.optimizeRedundOption=null,this.onOptimizeMachine=this.onOptimizeMachine.bind(this)}onDeleteAllUnreachable(e){const r=this.props.session.getCurrentModule().getGraphController(),o=Ki(r.getGraph());r.deleteTargetNodes(o)}onOptimizeMachine(e){this.optimizeUnreachOption.isChecked()&&this.onDeleteAllUnreachable(e)}canOptimize(){return this.optimizeRedundOption&&this.optimizeRedundOption.isChecked()||this.optimizeUnreachOption&&this.optimizeUnreachOption.isChecked()}render(){return a(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:nl.TITLE,children:C(oe,{title:"Optimizations",initial:!0,children:[a(yi,{ref:e=>this.optimizeUnreachOption=e,id:"opt-unreach",title:"Unreachables",value:"unreach"}),a(yi,{ref:e=>this.optimizeRedundOption=e,disabled:!0,id:"opt-redund",title:"Redundant States",value:"redund"}),a("button",{className:A2.analysis_button,onClick:this.onOptimizeMachine,disabled:!this.canOptimize(),children:"Optimize"})]})})}}Object.defineProperty(nl,"TITLE",{get:function(){return I18N.toString("component.analysis.title")}});class D2 extends S.Component{constructor(e){super(e)}render(){const e=this.props.node,t=this.props.fill,s=this.props.stroke,r=this.props.onMouseOver,o=this.props.onMouseOut,i=this.props.pointerEvents,l=e.getNodeLabel(),c=e.getNodeSize(),u=e.getNodeAccept();return C(S.Fragment,{children:[a(mr,{position:e,radius:c,label:l,color:t,outline:s,onMouseOver:r?h=>{const d=h.target.value||(h.target.value={});d.source=e,r(h)}:null,onMouseOut:o?h=>{const d=h.target.value||(h.target.value={});d.source=e,o(h)}:null,pointerEvents:i}),u&&a(mr,{position:e,radius:c*.7,color:"none",outline:s})]})}}const P2="node-accept-change";class F2 extends tn{constructor(e,t){super(),this._inputController=e,this._graphController=t}onDblInputEvent(e){const t=this._inputController,s=this._graphController;if(t.getCurrentTargetType()===gt){const o=t.getCurrentTargetSource();o.setNodeAccept(!o.getNodeAccept()),s.emitGraphEvent(P2,{target:o})}}}class O2 extends S.Component{constructor(e){super(e)}render(){const e=this.props.edge,t=this.props.stroke,s=this.props.onMouseOver,r=this.props.onMouseOut,o=this.props.pointerEvents,i=e.getStartPoint(),l=e.getEndPoint(),c=e.getCenterPoint(),u=e.getEdgeLabel(),h=e.getEdgeDirection();return a(S.Fragment,{children:a(ru,{directed:Ui,from:i,to:l,center:c,label:u.split(yr).join(`
`),direction:h,color:t,onMouseOver:s?d=>{const p=d.target.value||(d.target.value={});p.source=e,s(d)}:null,onMouseOut:r?d=>{const p=d.target.value||(d.target.value={});p.source=e,r(d)}:null,pointerEvents:o})})}}class R2 extends S.Component{constructor(e){super(e);const t=e.graphView,s=e.graphController,r=t.getInputController();this._fsaNodeInputHandler=new F2(r,s)}componentDidMount(){this.props.graphView.getInputContext().addInputHandler(this._fsaNodeInputHandler)}componentWillUnmount(){this.props.graphView.getInputContext().removeInputHandler(this._fsaNodeInputHandler)}render(){const e=this.props.graphView,t=this.props.graphController,s=this.props.editable,r=t.getGraph(),o=e.getInputController(),i=e.getInputContext();return C(S.Fragment,{children:[a(wu,{inputController:o,graphController:t,inputContext:i,inputPriority:-1,editable:s}),a(vu,{nodes:r.getNodes(),inputController:o,graphController:t,nodeRenderer:D2,inputContext:i,inputPriority:-1,editable:s}),a(Su,{ref:l=>{!l||l.getGraphEdgeInputHandler().setShouldDeleteEdgeWithEmptyLabel(!0).setShouldDeleteEdgePlaceholder(!0)},edges:r.getEdges(),inputController:o,graphController:t,edgeRenderer:O2,inputContext:i,inputPriority:-1,editable:s}),a(Cu,{inputController:o,graphController:t,inputContext:i,inputPriority:-1})]})}}const B2="_tray_container_1xagi_1",H2="_tray_used_1xagi_7",z2="_tray_default_1xagi_10",ea={tray_container:B2,tray_used:H2,tray_default:z2},U2=["0","1"],V2=[ze];class G2 extends S.Component{constructor(e){super(e)}renderSymbol(e){const s=this.props.graphController.getLabelEditor();if(!s)return null;const r=s.inputComponent;return a(ns,{parent:r,title:e,onClick:o=>r.appendValue(e,Si)},e)}render(){const t=this.props.graphController.getLabelEditor(),o=this.props.currentModule.getMachineController().getAlphabet(),i=t&&t.getTarget()instanceof bt,l=t&&t.getTarget()instanceof Ye,c=!o||o.length<=1;return C("div",{className:ea.tray_container,children:[i&&C("span",{children:[a("span",{className:ea.tray_used,children:o.map(u=>this.renderSymbol(u))}),C("span",{className:ea.tray_default,children:[c&&U2.map(u=>this.renderSymbol(u)),V2.map(u=>this.renderSymbol(u))]})]}),l&&C("span",{children:[a(ns,{parent:t.inputComponent,title:t.getTarget().getNodeCustom()?"Custom":"Auto",onClick:()=>{t.getTarget().setNodeCustom(!t.getTarget().getNodeCustom())}}),a(ns,{parent:t.inputComponent,title:t.getTarget().getNodeAccept()?"Accept":"Reject",onClick:()=>{t.getTarget().setNodeAccept(!t.getTarget().getNodeAccept())}})]})]})}}class $2 extends S.Component{constructor(e){super(e)}render(){const e=this.props.session,t=e.getCurrentModule(),s=this.props.graphView,r=this.props.graphController,o=r.getLabelFormatter(),i=s.getInputController();return C(S.Fragment,{children:[a(Eu,{graphController:r,inputController:i,viewport:s.getViewportComponent(),session:e}),a(Pr,{style:{right:0},viewportAdapter:s.getViewportAdapter()}),a(xu,{ref:l=>r.setLabelEditor(l),labelFormatter:o,viewport:s.getViewportComponent(),saveOnExit:!0,children:a(G2,{graphController:r,currentModule:t})})]})}}const K2="_tape_container_1wg46_1",j2="_tape_control_tray_1wg46_19",ta={tape_container:K2,tape_control_tray:j2};class W2 extends S.Component{constructor(e){super(e),this.onTapeStepBackward=this.onTapeStepBackward.bind(this),this.onTapeStepForward=this.onTapeStepForward.bind(this),this.onTapeFinish=this.onTapeFinish.bind(this),this.onTapeReset=this.onTapeReset.bind(this),this.onTapeSkipForward=this.onTapeSkipForward.bind(this),this.onTapeSkipBackward=this.onTapeSkipBackward.bind(this),this.onTapeStop=this.onTapeStop.bind(this)}onTapeStepBackward(e){this.props.value.stepBackward()}onTapeStepForward(e){this.props.value.stepForward()}onTapeSkipForward(e){}onTapeSkipBackward(e){}onTapeReset(e){this.props.value.reset()}onTapeFinish(e){this.props.value.finish()}onTapeStop(e){this.props.value.stop()}render(){const e=this.props.value,t=e?e.getCurrentTapeIndex():-1;return e?C("div",{id:this.props.id,className:ta.tape_container+" "+this.props.className,style:this.props.style,children:[C("div",{className:ta.tape_control_tray,children:[a("button",{onClick:this.onTapeStepBackward,children:"BACK"}),a("button",{onClick:this.onTapeStepForward,children:"STEP"}),a("button",{onClick:this.onTapeReset,children:"RESET"}),a("button",{onClick:this.onTapeFinish,children:"TO END"})]}),C("div",{className:ta.tape_control_tray,children:[a("button",{onClick:this.onTapeSkipForward,children:"SKIP TO NEXT"}),a("button",{onClick:this.onTapeSkipBackward,children:"SKIP TO PREV"}),a("button",{onClick:this.onTapeStop,children:"STOP"})]}),C("div",{className:"tape-row",children:[e.isTapeLeftInfinite()&&C("div",{className:"tape-row-entry infinite",children:[a("span",{className:"tape-row-states"}),a("label",{className:"tape-row-symbol",children:"..."})]}),a(jf,{className:"tape-pointer",style:{opacity:t<0?0:1,left:t+"em"}}),e.getTapeInput().map((s,r)=>{let o=!1,i=!1;o=t===r,i=t===r-1;const l=e.getTapeSourceStatesByIndex(r),c=l===null;return C("div",{className:"tape-row-entry"+(o?" active ":"")+(i?" active-read ":"")+(c?" disabled ":""),onClick:u=>c?null:e.setCurrentTapeIndex(r),children:[l&&a("span",{className:"tape-row-states",children:l.map(u=>a("label",{children:u.getNodeLabel()},u.getGraphElementID()))}),a("label",{className:"tape-row-symbol",children:s})]},s+":"+r)}),e.isTapeRightInfinite()&&C("div",{className:"tape-row-entry infinite",children:[a("span",{className:"tape-row-states"}),a("label",{className:"tape-row-symbol",children:"..."})]})]})]}):null}}class Y2 extends S.Component{constructor(e){super(e)}render(){const e=this.props.graphView,t=this.props.tester;return C(S.Fragment,{children:[a(Pr,{style:{right:0},viewportAdapter:e.getViewportAdapter()}),a(W2,{style:{position:"absolute",bottom:0},value:t?t.getTapeContext():null})]})}}const Q2="pda",X2="Pushdown Automata",q2="0.0.1";class Z2{constructor(e){this._app=e,this._graph=new Wf,this._graphController=new yE(e,this._graph,null),this._graphViewComponent=S.createRef();const t=this._graphController;e.getRenderManager().addRenderer(Lr,s=>a(Tu,{ref:this._graphViewComponent,renderGraph:r=>a(R2,{graphView:r,graphController:t,editable:!this._testMode}),renderOverlay:r=>this._testMode?a(Y2,{graphView:r,tester:this._tester}):a($2,{graphView:r,graphController:t,session:this._app.getSession()})})),this._machineController=new NE(this),this._errorChecker=new PE(e,this._graphController,this._machineController),this._tester=new qf,this._testMode=!1}initialize(e){DE(e.getNotificationManager()),e.getExportManager().registerExporter(new BE(ql),"session"),uu(e.getExportManager()),e.getImportManager().addImporter(new OE(e,ql),".pda.json",".json"),e.getUndoManager().setEventHandlerFactory((...t)=>new Xi(this._graphController,ql)),e.getDrawerManager().addPanelClass(t=>C(de,{id:t.id,className:t.className,style:t.style,title:"Pushdown Automata",children:[a("p",{children:"Brought to you with \u2764 by the Flap.js team."}),a("p",{children:"<- Tap on a tab to begin!"})]})).addPanelClass(tl).addPanelClass(Sr).addPanelClass(nl),e.getHotKeyManager().registerHotKey("Export to PNG",[Le,"KeyP"],()=>{e.getExportManager().tryExportFile("image-png",e.getSession())}).registerHotKey("Save as JSON",[Le,"KeyS"],()=>{e.getExportManager().tryExportFile("session",e.getSession())}),this._machineController.initialize(this),this._graphController.initialize()}update(e){this._graphController.update(),this._machineController.update(this)}destroy(e){this._machineController.destroy(this),this._graphController.destroy()}clear(e,t=!1){tu(e,t,()=>e.getToolbarComponent().closeBar())}getMachineController(){return this._machineController}getGraphController(){return this._graphController}getGraphView(){return this._graphViewComponent.current}getErrorChecker(){return this._errorChecker}getStringTester(){return this._tester}getModuleVersion(){return q2}getModuleName(){return Q2}getLocalizedModuleName(){return X2}getApp(){return this._app}}const Cr="\u03B5",ge="\u25E6",Se="\u222A",tt="*",wr="\u03A3",gs="\u2205",nt="\u207A";class J2{constructor(e=""){this._expression=e,this._terminals=new Set,this._errors=[]}copy(e){if(e!==this){this.clear(),this._expression=e._expression;for(const t of e._terminals)this._terminals.add(t);for(const t of e._errors)this._errors.push(t)}}clear(){this._expression="",this._terminals.clear(),this._errors.length=0}validate(){this._errors.length=0;try{if(this.isExpressionValid())return!0}catch(e){this._errors.push(e)}return!1}isValid(){return this._errors.length==0}getErrors(){return this._errors}addTerminal(e){this._terminals.add(e)}hasTerminal(e){return this._terminals.has(e)}getTerminals(){return this._terminals}clearTerminals(){this._terminals.clear()}areParenthesisBalanced(){let e=0,t=this.getExpression();for(let s=0;s<t.length;s++)if(t.charAt(s)=="("?e++:t.charAt(s)==")"&&e--,e<0)return!1;return e==0}isExpressionValid(){let e=this.getExpression();if(!e||e.length==0)return!0;if(!this.areParenthesisBalanced())throw new Error("The parentheses are unbalanced!");switch(e.charAt(0)){case")":case Se:case tt:case ge:case nt:throw new Error("Operators are poorly formatted.")}for(let t=1;t<e.length;t++){let s=e.charAt(t),r=e.charAt(t-1);switch(s){case Se:case ge:if(t==e.length-1)throw new Error("Operators are poorly formatted.");case")":case tt:case nt:if(r=="("||r==Se||r==ge)throw new Error("Operators are poorly formatted.");if((s==tt||s==nt)&&r==gs)throw new Error("Empty set can only be part of a union or concatenation");break}}return!0}insertConcatSymbols(){let e="",t=this.getExpression();for(let s=0;s<t.length;s++){let r=t.charAt(s);if(e+=r,s+1<t.length){let o=t.charAt(s+1);r!="("&&r!=Se&&r!=ge&&o!=")"&&o!=Se&&o!=tt&&o!=nt&&o!=ge&&(e+=ge)}}this.setExpression(e)}setExpression(e){return this._expression=e,this}getExpression(){return this._expression}getHashCode(){return pt(this._expression)}}class At{constructor(e,t,s,r){this._symbol=e,this._isTerminal=t,this._parent=s,this._children=[],this._childrenLimit=2,this._index=r}addChild(e){if(this.hasRoomForChildren())this._children.push(e),this._isTerminal=!1;else throw new Error("Trying to add more than 2 children to an ASTNode")}replaceChild(e,t){if(this._children.includes(e)){let s=this._children.indexOf(e);this._children[s]=t}else throw new Error("The child to replace isn't a child already")}hasRoomForChildren(){return this._children.length<this._childrenLimit}getChildrenLimit(){return this._childrenLimit}setChildrenLimit(e){this._childrenLimit=e}isTerminal(){return this._isTerminal}setTerminal(e){this._isTerminal=e}getSymbol(){return this._symbol}setSymbol(e){this._symbol=e}getParent(){return this._parent}setParent(e){this._parent=e}getChildren(){return this._children}getIndex(){return this._index}setIndex(e){this._index=e}}class rm{constructor(){this.rootNode=null,this.size=0,this.indexToNode=new Map,this.closedParensIndicies=[]}parseRegex(e){if(this.rootNode=null,this.size=0,e.clearTerminals(),e.getExpression().length==0){e.clear();return}else if(e.isExpressionValid()){let t=this.rootNode,s=[],r=e.getExpression(),o=-1;for(const i of r)switch(this.size=this.size+1,o++,i){case"(":t=this.createOpenParenNode(t,o),s.push(t);break;case")":t=s.pop(),this.closedParensIndicies.push(o);break;case tt:t=this.createUnaryOperNode(t,o,tt);break;case nt:t=this.createUnaryOperNode(t,o,nt);break;case ge:t=this.createBinaryOperNode(t,o,ge);break;case Se:t=this.createBinaryOperNode(t,o,Se);break;case" ":break;default:t=this.createTerminalNode(t,o,i),i!=wr&&i!=gs&&i!=Cr&&e.addTerminal(i)}}}makeParentOf(e,t){let s=t.getParent();e.setParent(s),e.addChild(t),s!=null&&s.replaceChild(t,e),t.setParent(e),this.rootNode==t&&(this.rootNode=e)}createOpenParenNode(e,t){if(!e)e=new At("(",!1,null,t),this.indexToNode.set(t,e),this.rootNode=e;else{let s=new At("(",!1,e,t);this.indexToNode.set(t,s),e.addChild(s),e=s}return e}createUnaryOperNode(e,t,s){let r=new At(s,!1,e.getParent(),t);return this.indexToNode.set(t,r),this.makeParentOf(r,e),e=r,e}createBinaryOperNode(e,t,s){if(e.getParent()){let r=0;const o=e.getParent(),i=o.getSymbol();switch(s){case ge:i==ge&&(r=1);break;case Se:i!="("&&(r=1);break}if(r){let l=o.getParent(),c=new At(s,!1,l,t);this.indexToNode.set(t,c),this.makeParentOf(c,o),e=c}else{let l=new At(s,!1,o,t);this.indexToNode.set(t,l),this.makeParentOf(l,e),e=l}}else{let r=new At(s,!1,null,t);this.indexToNode.set(t,r),this.makeParentOf(r,e),e=r}return e}createTerminalNode(e,t,s){if(!e)e=new At(s,!0,null,t),this.indexToNode.set(t,e),this.rootNode=e;else{let r=new At(s,!0,e,t);this.indexToNode.set(t,r),e.addChild(r),e=r}return e}scopeFromSpaceIndexing(e,t){if(t==0)return[[0,0],[0,0]];if(t>0&&t<=this.size+1){const s=t-1,r=this.scopeFromCharAtIndex(e,s);return r?(r[1][1]+=1,r):[[t,t],[t,t]]}else throw new Error("Invalid index")}scopeFromCharAtIndex(e,t){this.parseRegex(e);let s=this.indexToNode.get(t),r=s.getSymbol();if(r==tt||r==nt){let o=this.smallestIndexOfChildren(s),i=this.largestIndexOfChildren(s);return[[o,o],[i,i]]}else if(r==Se||r==ge){let o=this.smallestIndexOfChildren(s),i=this.largestIndexOfChildren(s);return[[o,t-1],[t+1,i]]}else return null}largestIndexOfChildren(e){let t=e.getIndex();for(let s of e.getChildren())t=Math.max(t,this.largestIndexOfChildren(s));return t}smallestIndexOfChildren(e){let t=e.getIndex();for(let s of e.getChildren())t=Math.min(t,this.smallestIndexOfChildren(s));return t}}function ex(n){const e=n.getExpression();n.setExpression(e.replace(/\s/g,"")),n.insertConcatSymbols();const t=new rm;t.parseRegex(n);const s=Pt(t.rootNode,n);return n.setExpression(e),s}function Pt(n,e){if(n.isTerminal())switch(n.getSymbol()){case gs:return om();case wr:return tx(e);default:return im(n.getSymbol())}switch(n.getSymbol()){case tt:return am(Pt(n._children[0],e));case nt:return nx(Pt(n._children[0],e));case ge:return lm(Pt(n._children[0],e),Pt(n._children[1],e));case Se:return cm(Pt(n._children[0],e),Pt(n._children[1],e));case"(":return Pt(n._children[0],e);default:throw new Error("You've got a weird node in the AST tree with symbol "+n.getSymbol())}}function om(){const n=new lt(!1),e=n.createState("q0");return n.setStartState(e),n}function tx(n){const e=n.getTerminals(),t=[];if(e.size==0)return om();for(const s of e)t.push(im(s));for(;t.length>1;)t[0]=cm(t[0],t[1]),t.splice(1,1);return t[0]}function im(n){n==Cr&&(n=B);const e=new lt(!1),t=e.createState("q0"),s=e.createState("q1");return e.addTransition(t,s,n),e.setStartState(t),e.setFinalState(s),e}function lm(n,e){const t=new lt(!1);let s=0,r=new Map,o=null;for(const d of n.getStates()){let p=t.createState("q"+s++);r.set(d,p),o===null&&(o=p)}let i=new Map,l=null,c=null;for(const d of e.getStates()){let p=t.createState("q"+s++);i.set(d,p),l===null&&(l=p),e.isFinalState(d)&&(c=p)}const u=n.getTransitions();for(const d of u){const p=r.get(d.getSourceState()),v=r.get(d.getDestinationState());if(p===null||v===null)throw new Error("Unable to find state endpoints for transition");for(const m of d.getSymbols())t.addTransition(p,v,m)}for(const d of n.getFinalStates()){const p=r.get(d);t.addTransition(p,l,B)}const h=e.getTransitions();for(const d of h){const p=i.get(d.getSourceState()),v=i.get(d.getDestinationState());if(p===null||v===null)throw new Error("Unable to find state endpoints for transition");for(const m of d.getSymbols())t.addTransition(p,v,m)}return t.setStartState(o),c!=null&&t.setFinalState(c),t}function am(n){const e=new lt(!1);let t=0;const s=new Map,r=e.createState("q"+t++);let o=null,i=null;for(const u of n.getStates()){let h=e.createState("q"+t++);s.set(u,h),o===null&&(o=h),i=h}const l=e.createState("q"+t++);e.addTransition(r,o,B);const c=n.getTransitions();for(const u of c){const h=s.get(u.getSourceState()),d=s.get(u.getDestinationState());if(h===null||d===null)throw new Error("Unable to find state endpoints for transition");for(const p of u.getSymbols())e.addTransition(h,d,p)}return e.addTransition(i,l,B),e.addTransition(i,o,B),e.addTransition(r,l,B),e.setStartState(r),e.setFinalState(l),e}function nx(n){return lm(n,am(n))}function cm(n,e){const t=new lt(!1);let s=0;const r=t.createState("q"+s++);let o=new Map,i=null,l=null;for(const m of n.getStates()){let y=t.createState("q"+s++);o.set(m,y),i===null&&(i=y),n.isFinalState(m)&&(l=y)}let c=new Map,u=null,h=null;for(const m of e.getStates()){let y=t.createState("q"+s++);c.set(m,y),u===null&&(u=y),e.isFinalState(m)&&(h=y)}const d=t.createState("q"+s++);t.addTransition(r,i,B);const p=n.getTransitions();for(const m of p){const y=o.get(m.getSourceState()),w=o.get(m.getDestinationState());if(y===null||w===null)throw new Error("Unable to find state endpoints for transition");for(const f of m.getSymbols())t.addTransition(y,w,f)}l!=null&&t.addTransition(l,d,B),t.addTransition(r,u,B);const v=e.getTransitions();for(const m of v){const y=c.get(m.getSourceState()),w=c.get(m.getDestinationState());if(y===null||w===null)throw new Error("Unable to find state endpoints for transition");for(const f of m.getSymbols())t.addTransition(y,w,f)}return h!=null&&t.addTransition(h,d,B),t.setStartState(r),t.setFinalState(d),t}class sx{constructor(e=10){this._cachedExpressionHash=0,this._refreshTicks=e,this._elapsedTicks=1/0,this._listeners=[]}addListener(e){if(typeof e!="function")throw new Error("Cannot add uncallable listener");this._listeners.push(e)}removeListener(e){const t=this._listeners.indexOf(e);return t>=0?(this._listeners.splice(t,1),!0):!1}clearListeners(){this._listeners.length=0}getListeners(){return this._listeners}reset(){this._elapsedTicks=0,this._cachedExpressionHash=0}update(e){if(++this._elapsedTicks>=this._refreshTicks){this._elapsedTicks=0;const t=pt(e);if(t!==this._cachedExpressionHash){this._cachedExpressionHash=t;for(const s of this._listeners)s(e)}}}}const rx=30;class ox{constructor(){this._machine=new J2,this._parser=new rm,this._expressionChangeHandler=new sx(rx),this._equalFSA=null,this._equalREHash=pt(this._machine.getExpression())}update(){this._expressionChangeHandler.update(this._machine.getExpression())}clear(){this.setMachineExpression("")}isSymbol(e){return this._machine.hasTerminal(e)}isUsedSymbol(e){return this.isSymbol(e)}renameSymbol(e,t){const r=this._machine.getExpression().replace(new RegExp(e,"g"),t);this.setMachineExpression(r)}deleteSymbol(e){const s=this._machine.getExpression().replace(new RegExp(e,"g"),"");this.setMachineExpression(s)}getMachineTerminals(){return Array.from(this._machine.getTerminals())}getEquivalentFSA(){return(!this._equalFSA||pt(this._machine.getExpression())!==this._equalREHash)&&(this._equalREHash=pt(this._machine.getExpression()),this._equalFSA=ex(this._machine)),this._equalFSA}setMachineExpression(e){this._machine.setExpression(e),this._machine.validate()&&this._parser.parseRegex(this._machine)}getMachineExpression(){return this._machine.getExpression()||""}getMachineErrors(){return this._machine.getErrors()}getMachine(){return this._machine}getExpressionChangeHandler(){return this._expressionChangeHandler}}const Vo="machine-error";class ix{constructor(e,t){this._app=e,this._machineController=t,this._showErrorOnChange=!1,this.onExpressionChange=this.onExpressionChange.bind(this),t.getExpressionChangeHandler().addListener(this.onExpressionChange)}onExpressionChange(e){this._showErrorOnChange&&this.showErrors()}setErrorChecking(e){this._showErrorOnChange=e}isErrorChecking(){return this._showErrorOnChange}showErrors(){const e=this._machineController.getMachine().getErrors(),s=this._app.getNotificationManager();if(s.clearNotifications(Vo),e.length<=0)s.pushNotification(I18N.toString("message.error.none"),$i,Vo,null,!1);else for(const r of e)s.pushNotification(r.name+" - "+r.message,iu,Vo,null,!1)}}class Mu extends hu{constructor(e){super(),this._machineController=e,this._expression=e.getMachineExpression()}applyUndo(e){const t=e.getPreviousEvent();t instanceof Mu?t.applyRedo(e):this._machineController.clear()}applyRedo(e){this._machineController.setMachineExpression(this._expression)}}const lx="_list_container_1avrn_1",ax="_element_list_1avrn_4",cx="_add_button_1avrn_10",Od={list_container:lx,element_list:ax,add_button:cx},ux="_element_container_uset6_1",hx={element_container:ux},Rd="Enter",Bd="Escape";class Hd extends S.Component{constructor(e){super(e),this._inputElement=null,this.state={value:null,error:!1},this.onValueChange=this.onValueChange.bind(this),this.onFocus=this.onFocus.bind(this),this.onBlur=this.onBlur.bind(this),this.onKeyDown=this.onKeyDown.bind(this),this.onKeyUp=this.onKeyUp.bind(this)}onFocus(e){const t=e.target,s=this.props.symbol;this.setState({value:s,error:!1},()=>t.select()),this.props.onFocus&&this.props.onFocus(e,this)}onBlur(e){const t=this.state.value;this.props.onBlur&&this.props.onBlur(e,this,t),this.setState({value:null,error:!1})}onKeyDown(e){const t=e.key;(t===Rd||t===Bd)&&(e.preventDefault(),e.stopPropagation())}onKeyUp(e){const t=e.key,s=e.target;t===Rd?s.blur():t===Bd&&this.setState({value:null,error:!1},()=>s.blur())}onValueChange(e){let t=e.target.value.trim(),s=!1;if(this.props.onChange)try{this.props.onChange(e,this,t)}catch{s=!0}this.setState({value:t,error:s})}focus(){this._inputElement.focus()}render(){const e=this.state.value,t=e===null?this.props.symbol:e,s=this.props.used||!1;return a("div",{id:this.props.id,className:hx.element_container+(t!==null&&t.length<=0?" empty ":"")+(e!==null&&this.state.error?" error ":"")+(s?" used ":"")+" "+this.props.className,style:this.props.style,children:a("input",{ref:r=>this._inputElement=r,spellCheck:!1,maxLength:1,style:{width:"1ch"},value:t,onChange:this.onValueChange,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp})})}}class dx extends S.Component{constructor(e){super(e),this.newSymbolComponent=null,this.state={useNewSymbol:!1},this.onElementAdd=this.onElementAdd.bind(this),this.onElementFocus=this.onElementFocus.bind(this),this.onElementBlur=this.onElementBlur.bind(this),this.onElementChange=this.onElementChange.bind(this)}onElementAdd(e){this.setState({useNewSymbol:!0},()=>{this.newSymbolComponent.focus()})}onElementFocus(e,t){}onElementBlur(e,t,s){const r=t.props.symbol,o=this.props.machineController;s!==null&&(s.length>0?o.isSymbol(s)||r&&o.renameSymbol(r,s):r&&o.deleteSymbol(r)),this.state.useNewSymbol&&this.setState({useNewSymbol:!1})}onElementChange(e,t,s){const r=this.props.machineController;if(s.length>0&&r.isSymbol(s)&&s!==t.props.symbol)throw new Error("Not a valid symbol")}renderTerminalList(e,t){const s=[];for(const r of t)!r||s.push(a(Hd,{symbol:r,used:e.isUsedSymbol(r),onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange},r));return s}render(){const e=this.props.machineController,t=e.getMachineTerminals();return a("div",{id:this.props.id,className:Od.list_container,style:this.props.style,children:C("div",{className:Od.element_list,children:[this.renderTerminalList(e,t),a(Hd,{ref:s=>this.newSymbolComponent=s,style:{display:this.state.useNewSymbol?"block":"none"},symbol:"",onFocus:this.onElementFocus,onBlur:this.onElementBlur,onChange:this.onElementChange})]})})}}class sl extends S.Component{constructor(e){super(e)}render(){const e=this.props.drawer,r=this.props.session.getCurrentModule().getMachineController(),o=e.isDrawerFullscreen();return C(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:sl.TITLE,children:[a(oe,{title:"Terminals",initial:!0,full:o,children:a(dx,{machineController:r})}),a(oe,{title:"Symbol Key",initial:!0,full:!0,children:a("table",{children:C("tbody",{children:[C("tr",{children:[a("td",{children:"Epsilon"}),a("td",{children:Cr})]}),C("tr",{children:[a("td",{children:"Union"}),a("td",{children:Se})]}),C("tr",{children:[a("td",{children:"Concat"}),a("td",{children:ge})]}),C("tr",{children:[a("td",{children:"Kleene Star"}),a("td",{children:tt})]}),C("tr",{children:[a("td",{children:"Kleene Plus"}),a("td",{children:nt})]}),C("tr",{children:[a("td",{children:"Sigma"}),a("td",{children:wr})]}),C("tr",{children:[a("td",{children:"Empty Set"}),a("td",{children:gs})]})]})})})]})}}Object.defineProperty(sl,"TITLE",{get:function(){return I18N.toString("component.overview.title")}});const px="_analysis_button_u5ks6_1",gx={analysis_button:px};class rl extends S.Component{constructor(e){super(e),this.onConvertToNFA=this.onConvertToNFA.bind(this)}onConvertToNFA(e){this.props.session.getApp().getExportManager().tryExportFile("re2fsa",this.props.session)}render(){return C(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:rl.TITLE,children:[a(oe,{title:"Optimizations",initial:!0,children:a("button",{className:gx.analysis_button,onClick:this.onConvertToNFA,children:I18N.toString("action.overview.convertnfa")})}),a(oe,{title:"Related Machines"})]})}}Object.defineProperty(rl,"TITLE",{get:function(){return I18N.toString("component.analysis.title")}});const fx={},mx="_test_container_11rsm_1",_x="_test_control_tray_11rsm_11",yx="_test_control_button_11rsm_15",vx="_test_list_container_11rsm_28",Sx="_test_list_scroll_container_11rsm_39",Cx="_test_list_11rsm_28",wx="_test_list_add_11rsm_53",Ex="_test_list_runall_11rsm_53",xx="_test_list_count_11rsm_65",He={test_container:mx,test_control_tray:_x,test_control_button:yx,test_list_container:vx,test_list_scroll_container:Sx,test_list:Cx,test_list_add:wx,test_list_runall:Ex,test_list_count:xx},Tx="_test_item_container_ew09k_1",Nx="_test_button_ew09k_13",Mx="_delete_button_ew09k_23",bx="_test_input_ew09k_53",So={test_item_container:Tx,test_button:Nx,delete_button:Mx,test_input:bx},Co="default",um="success",hm="failure",dm="working";class Ix extends S.Component{constructor(e){super(e),this.inputElement=null,this.state={value:this.props.defaultValue||"",status:Co},this.onChange=this.onChange.bind(this)}focus(){this.inputElement&&this.inputElement.focus()}setValue(e,t=null){this.state.value!==e?this.setState({value:e},t):t&&t()}setStatus(e,t=null){this.state.status!==e?this.setState({status:e},t):t&&t()}resetStatus(e=null){this.state.status!==Co?this.setState({status:Co},e):e&&e()}getValue(){return this.state.value}getStatus(){return this.state.status}onChange(e){const t=e.target.value;this.state.value!==t&&this.setState({value:t,status:Co})}render(){const e=this.props.onDelete,t=this.props.onTest,s=this.props.active,r=this.props.placeholder,o=this.state.status;return C("div",{id:this.props.id,className:So.test_item_container+(s?" active ":"")+" "+o+" "+this.props.className,style:this.props.style,children:[a(D,{className:So.test_button,title:"Test",disabled:!t,onClick:i=>t(i,this),children:o===um?a(mu,{}):o===hm?a(_u,{}):o===dm?a(yu,{}):a(vs,{})}),C("div",{className:So.test_input,children:[a("input",{ref:i=>this.inputElement=i,type:"text",placeholder:r,value:this.state.value,onChange:this.onChange}),a("label",{children:this.props.subtitle})]}),a(D,{className:So.delete_button,title:"Delete",disabled:!e,onClick:i=>e(i,this),children:a(fu,{})})]})}}const Lx=[".txt"],kx="test.txt";class Ax extends S.Component{constructor(e){super(e),this._testList=[],this._testName=kx,this.onTestNew=this.onTestNew.bind(this),this.onTestUpload=this.onTestUpload.bind(this),this.onTestDownload=this.onTestDownload.bind(this),this.onTestClose=this.onTestClose.bind(this),this.onTestAdd=this.onTestAdd.bind(this),this.onTestDelete=this.onTestDelete.bind(this),this.onTestTest=this.onTestTest.bind(this),this.onTestRunAll=this.onTestRunAll.bind(this),this.onExpressionChange=this.onExpressionChange.bind(this)}componentDidMount(){this.props.machineController.getExpressionChangeHandler().addListener(this.onExpressionChange)}componentWillUnmount(){this.props.machineController.getExpressionChangeHandler().removeListener(this.onExpressionChange)}onExpressionChange(e){for(const t of this._testList)t.ref.resetStatus()}onTestNew(e){this.isEmpty()||this.onTestClose(e),this.onTestAdd(e)}onTestUpload(e){const t=new FileReader;t.onload=s=>{try{this._testName=e.name,this._testList.length=0;const r=s.target.result.split(`
`);for(let o of r)o=o.trim(),o.length>0&&this._testList.push({id:we(),defaultValue:o,ref:null});this._testList.length<=0&&this.onTestAdd(null)}catch{t.abort()}},t.readAsText(e)}onTestDownload(e){const t=[];for(const s of this._testList){const r=s.ref;r&&t.push(r.getValue())}du(this._testName,t.join(`
`))}onTestClose(e){this._testList.length=0}onTestAdd(e){this._testList.push({id:we(),defaultValue:"",ref:null})}onTestRunAll(e){let t=0;const s=()=>{const r=this._testList[t];this.onTestTest(null,r.ref,()=>{++t,t<this._testList.length&&s()})};s()}onTestDelete(e,t){}onTestTest(e,t,s=null){const r=t.getValue();t.setState({status:dm});const i=this.props.machineController.getEquivalentFSA(),l=Zv(i,r);t.setState({status:l?um:hm}),s&&s()}isEmpty(){return this._testList.length<=0}render(){const e=this.props.machineController,t=this.isEmpty();return C("div",{id:this.props.id,className:He.test_container+" "+this.props.className,style:this.props.style,children:[C("div",{className:He.test_control_tray,children:[a(D,{className:He.test_control_button,title:I18N.toString("action.testing.new"),onClick:this.onTestNew,children:a(pu,{})}),a(Zi,{className:He.test_control_button,title:I18N.toString("action.testing.import"),accept:Lx.join(","),onUpload:this.onTestUpload,children:a(br,{})}),a(D,{className:He.test_control_button,title:I18N.toString("action.testing.save"),disabled:t,onClick:this.onTestDownload,children:a(Ji,{})}),a(D,{className:He.test_control_button,title:I18N.toString("action.testing.clear"),disabled:t,onClick:this.onTestClose,children:a(Bi,{})})]}),C("div",{className:He.test_list_container+(t?" empty ":""),children:[C(D,{className:He.test_list_add,title:"Add",onClick:this.onTestAdd,children:[a(gu,{}),a("span",{className:He.test_list_count,children:t?"":""+this._testList.length})]}),a("div",{className:He.test_list_scroll_container,children:a("div",{className:He.test_list,children:this._testList.map((s,r)=>{const o=s.id,i=s.defaultValue||"";let l=this.onTestTest;return e.getMachineExpression().length===0&&(l=null),a(Ix,{ref:c=>s.ref=c,defaultValue:i,onTest:l,onDelete:(c,u)=>{this._testList.splice(r,1),this.onTestDelete(c,u)}},o)})})}),a(D,{className:He.test_list_runall,title:"Run All",onClick:this.onTestRunAll,children:a(vs,{})})]})]})}}class ol extends S.Component{constructor(e){super(e),this.onAutoErrorCheckChange=this.onAutoErrorCheckChange.bind(this)}onAutoErrorCheckChange(e){const t=this.props.session.getCurrentModule(),s=t.getErrorChecker(),r=s.isErrorChecking();if(s.setErrorChecking(!r),r)this.props.session.getApp().getNotificationManager().clearNotifications(Vo);else{const o=t.getMachineController();s.onExpressionChange(o.getMachineExpression())}}render(){const t=this.props.session.getCurrentModule(),s=t.getMachineController(),o=t.getErrorChecker().isErrorChecking();return C(de,{id:this.props.id,className:fx.panel_container+" "+this.props.className,style:this.props.style,title:ol.TITLE,children:[a(Ax,{machineController:s}),a(ot,{id:"testing-error-check",checked:o,onChange:this.onAutoErrorCheckChange,title:"Auto error checking"})]})}}Object.defineProperty(ol,"TITLE",{get:function(){return I18N.toString("component.testing.title")}});const Dx="_view_container_1km63_1",Px="_view_pane_1km63_10",Fx="_view_widget_1km63_14",wo={view_container:Dx,view_pane:Px,view_widget:Fx},Ox="_expression_vqlye_1",Rx="_expression_tray_vqlye_20",Bx="_tray_important_vqlye_40",Hx="_tray_symbol_vqlye_44",ks={expression:Ox,expression_tray:Rx,tray_important:Bx,tray_symbol:Hx},na="\u222A";class zx extends S.Component{constructor(e){super(e),this._inputElement=null,this.onInputChange=this.onInputChange.bind(this),this.onClick=this.onClick.bind(this)}onInputChange(e){const t=this.props.session,r=t.getCurrentModule().getMachineController(),i=e.target.value.replace(new RegExp(na,"g"),Se);r.setMachineExpression(i),t.getApp().getUndoManager().captureEvent()}onClick(e){const r=this.props.session.getCurrentModule().getMachineController(),o=this._inputElement.selectionStart,i=r._parser.scopeFromSpaceIndexing(r.getMachine(),o);this._inputElement.setSelectionRange(i[0][0],i[1][1])}_appendSymbol(e,t){const s=this.props.session,r=e.getMachineExpression(),o=this._inputElement.selectionStart,i=r.slice(0,o)+t+r.slice(o);e.setMachineExpression(i),s.getApp().getUndoManager().captureEvent(),this._inputElement.focus()}render(){const s=this.props.session.getCurrentModule().getMachineController(),r=s.getMachineTerminals(),o=!s.getMachine().isValid(),i=s.getMachineExpression().replace(new RegExp(Se,"g"),na);return C("div",{id:this.props.id,className:wo.view_pane+" "+this.props.className,style:this.props.style,children:[a("div",{className:wo.view_widget+" "+ks.expression+" "+(o?"error":""),children:a("input",{ref:l=>this._inputElement=l,value:i,onChange:this.onInputChange,onClick:this.onClick})}),C("div",{className:wo.view_widget+" "+ks.expression_tray+" "+ks.tray_important,children:[a("button",{title:"Epsilon",onClick:()=>{this._appendSymbol(s,Cr)},children:Cr}),a("button",{title:"Union",onClick:()=>{this._appendSymbol(s,Se)},children:na}),a("button",{title:"Concat",onClick:()=>{this._appendSymbol(s,ge)},children:ge}),a("button",{title:"Kleene Star",onClick:()=>{this._appendSymbol(s,tt)},children:tt}),a("button",{title:"Kleene Plus",onClick:()=>{this._appendSymbol(s,nt)},children:nt}),a("button",{title:"Sigma",onClick:()=>{this._appendSymbol(s,wr)},children:wr}),a("button",{title:"Empty Set",onClick:()=>{this._appendSymbol(s,gs)},children:gs})]}),a("div",{className:wo.view_widget+" "+ks.expression_tray+" "+ks.tray_symbol,children:r.map(l=>a("button",{onClick:()=>{this._appendSymbol(s,l)},children:l},l))})]})}}class Ux extends ji{constructor(e){super(e),this._prevExpression=""}onParseSession(e,t){return JSON.parse(t)}onPreImportSession(e){const s=e.getCurrentModule().getMachineController();this._prevExpression=s.getMachineExpression(),this._prevExpression||e.getApp().getUndoManager().captureEvent()}onImportSession(e,t){const r=e.getCurrentModule().getMachineController(),o=t.machineData.expression;o&&r.setMachineExpression(o)}onPostImportSession(e){const r=e.getCurrentModule().getMachineController().getMachineExpression();this._prevExpression!==r&&e.getApp().getUndoManager().captureEvent()}}class Vx extends Mn{constructor(){super(".re.json")}onExportSession(e,t){const r=e.getCurrentModule().getMachineController();t.machineData={expression:r.getMachineExpression()}}getIconClass(){return Wi}getLabel(){return I18N.toString("file.export.machine")}getTitle(){return I18N.toString("file.export.machine.hint")}}class Gx extends Mn{constructor(){super(".fsa.json")}onExportSession(e,t){const o=e.getCurrentModule().getMachineController().getEquivalentFSA(),i=new xn;$x(i,o);const l=ts.objectify(i);t.graphData=l,t.machineData={type:"NFA",symbols:[]}}getIconClass(){return Wi}getLabel(){return I18N.toString("file.export.convertfsa")}getTitle(){return I18N.toString("file.export.convertfsa")}}function $x(n,e){if(n.clear(),e.getStateCount()<=0)return;let t=new Map,s;for(const u of e.getStates())s=n.createNode(0,0),s.setNodeLabel(u.getStateLabel()),e.isFinalState(u)&&s.setNodeAccept(!0),t.set(u,s);let r,o,i,l;for(let u of e.getTransitions()){o=t.get(u.getSourceState()),i=t.get(u.getDestinationState()),l=[];for(const d of u.getSymbols())d===B?l.push(It):l.push(d);r=n.createEdge(o,i),r.setEdgeLabel(l.join(ft));const h=n.formatEdge(r);r!=h&&n.deleteEdge(r)}const c=e.getStartState();n.setStartNode(t.get(c)),Ar.applyLayout(n)}const Kx="re",jx="0.0.1",Wx="RE";class Yx{constructor(e){this._app=e,this._machineController=new ox,this._errorChecker=new ix(e,this._machineController),e.getRenderManager().addRenderer(Lr,t=>a(zx,{session:e.getSession()}))}initialize(e){e.getNotificationManager(),e.getDrawerManager().addPanelClass(t=>C(de,{id:t.id,className:t.className,style:t.style,title:"Regular Expressions",children:[a("p",{children:"Brought to you with \u2764 by the Flap.js team."}),a("p",{children:"<- Tap on a tab to begin!"})]})).addPanelClass(sl).addPanelClass(rl).addPanelClass(ol),e.getUndoManager().setEventHandlerFactory((...t)=>new Mu(this._machineController)),e.getExportManager().registerExporter(new Vx,"session").registerExporter(new Gx,"re2fsa"),e.getImportManager().addImporter(new Ux(e),".re.json",".json"),e.getHotKeyManager().registerHotKey("Save as JSON",[Le,"KeyS"],()=>{e.getExportManager().tryExportFile("session",e.getSession())}).registerHotKey("New",[Le,"KeyN"],()=>{this.clear(e)}).registerHotKey("Undo",[Le,"KeyZ"],()=>{e.getUndoManager().undo()}).registerHotKey("Redo",[Le,nu,"KeyZ"],()=>{e.getUndoManager().redo()})}update(e){this._machineController.update()}destroy(e){}clear(e){window.confirm(I18N.toString("alert.graph.clear"))&&(this._machineController.setMachineExpression(""),e.getUndoManager().clear(),e.getSession().setProjectName(null),e.getToolbarComponent().closeBar())}getMachineController(){return this._machineController}getErrorChecker(){return this._errorChecker}getModuleVersion(){return jx}getModuleName(){return Kx}getLocalizedModuleName(){return Wx}getApp(){return this._app}}const Qx=0,Xx=1,qx=2;class il{constructor(e=0,t=0,s=0){this.major=e,this.minor=t,this.patch=s}canSupportVersion(e){return this.major==e.major&&(this.minor<e.minor||this.minor==e.minor&&this.patch<=e.patch)}toString(){return this.major+"."+this.minor+"."+this.patch}static parse(e){if(typeof e!="string")throw new Error("Invalid argument type to parse as SemanticVersion");const t=e.split(".");if(t.length!=3)throw new Error("Invalid format for SemanticVersion");let s,r,o;try{s=Number.parseInt(t[Qx]),r=Number.parseInt(t[Xx]),o=Number.parseInt(t[qx])}catch(i){throw i}return new il(s,r,o)}}const pm="1.0.0",Zx=il.parse(pm);class Jx extends Gf{constructor(){super(),this._nodeIndices=new Map}parse(e,t=null){if(typeof e!="object")throw new Error("Unable to parse data of non-object type");const s=il.parse(e._version||"0.0.0");if(!s.canSupportVersion(Zx))throw new Error("Unable to parse data for incompatible version '"+s+"'");const r=e.nodes||[],o=Math.min(r.length||0,e.nodeCount||0),i=e.edges||[],l=Math.min(i.length||0,e.edgeCount||0);t=this.onParseGraphCreate(e,t);const c=this._nodeIndices;for(let u=0;u<o;++u){const h=r[u];if(!h)continue;const d=t.createNode(h.x||0,h.y||0,h.id);d.setNodeLabel(h.label||""),this.onParseNode(h,d),c.set(u,d)}for(let u=0;u<l;++u){const h=i[u];if(!h)continue;const d=c.get(h.from)||null;if(!d)continue;const p=c.get(h.to)||null,v=t.createEdge(d,p,h.id);v.setEdgeLabel(h.label||""),this.onParseEdge(h,v)}return this.onParseGraphResult(e,t),c.clear(),t}compose(e,t=null){if(!(e instanceof fi))throw new Error("Unable to compose target of non-graph type");t=this.onComposeGraphCreate(e,t);const s=e.getNodes()||[],r=s.length||0,o=e.getEdges()||[],i=o.length||0,l=new Array(r),c=this._nodeIndices;let u;for(let p=0;p<r;++p)if(u=s[p],u){const v=u.getGraphElementID();c.set(u,p);const m={id:v,x:u.x||0,y:u.y||0,label:u.getNodeLabel()||""};this.onComposeNode(u,m),l[p]=m}const h=new Array(i);let d;for(let p=0;p<i;++p)if(d=o[p],d){const v=d.getGraphElementID(),m=d.getEdgeFrom(),y=d.getEdgeTo(),w=c.has(m)?c.get(m):-1,f=c.has(y)?c.get(y):-1,g={id:v,from:w,to:f,label:d.getEdgeLabel()||""};this.onComposeEdge(d,g),h[p]=g}return t._version=pm,t.nodeCount=r,t.nodes=l,t.edgeCount=i,t.edges=h,this.onComposeGraphResult(e,t),c.clear(),t}onParseGraphCreate(e,t){const s=e.quad||!1;return t?t.clear():t=new fi(Ye,s?gn:bt),t}onParseNode(e,t){}onParseEdge(e,t){if(t instanceof gn){const s=e.quad||{};t.setQuadraticRadians(s.radians||0),t.setQuadraticLength(s.length||0)}}onParseGraphResult(e,t){}onComposeGraphCreate(e,t){return t||{}}onComposeNode(e,t){}onComposeEdge(e,t){if(e instanceof gn){const s=e.getQuadratic()||{};t.quad={radians:s.radians||0,length:s.length||0}}}onComposeGraphResult(e,t){let s=!1;const r=e.getEdges();for(const o of r)if(o instanceof gn){s=!0;break}t.hasQuad=s}}const eT="tryCreateWhileTrash";class tT extends su{constructor(e,t){super(t),this._app=e}onGraphEvent(e,t){switch(super.onGraphEvent(e,t),e){case zi:case Vi:this._app.getNotificationManager().pushNotification(I18N.toString("message.warning.cannotmodify"),Gi,eT,null,!0);break;default:this._app.getUndoManager().captureEvent()}}getApp(){return this._app}}class bu extends hu{constructor(e,t){super(),this._graphController=e,this._graphParser=t,this._graphData=this._graphParser.compose(e.getGraph())}applyUndo(e){const t=e.getPreviousEvent();t instanceof bu?t.applyRedo(e):this._graphController.getGraph().clear()}applyRedo(e){const t=this._graphController.getGraph();this._graphParser.parse(this._graphData,t)}}class nT extends S.Component{constructor(e){super(e)}componentDidMount(){this.props.graphView.getInputContext().addInputHandler(this._fsaNodeInputHandler)}componentWillUnmount(){this.props.graphView.getInputContext().removeInputHandler(this._fsaNodeInputHandler)}render(){const e=this.props.graphView,t=this.props.graphController,s=this.props.editable,r=t.getGraph(),o=e.getInputController(),i=e.getInputContext();return C(S.Fragment,{children:[a(wu,{inputController:o,graphController:t,inputContext:i,inputPriority:-1,editable:s}),a(vu,{nodes:r.getNodes(),inputController:o,graphController:t,inputContext:i,inputPriority:-1,editable:s}),a(Su,{edges:r.getEdges(),inputController:o,graphController:t,inputContext:i,inputPriority:-1,editable:s}),a(Cu,{inputController:o,graphController:t,inputContext:i,inputPriority:-1})]})}}class sT extends S.Component{constructor(e){super(e)}render(){const e=this.props.session,t=this.props.graphView,s=this.props.graphController,r=s.getLabelFormatter(),o=t.getInputController();return C(S.Fragment,{children:[a(Eu,{graphController:s,inputController:o,viewport:t.getViewportComponent(),session:e}),a(Pr,{style:{right:0},viewportAdapter:t.getViewportAdapter()}),a(xu,{ref:i=>s.setLabelEditor(i),labelFormatter:r,viewport:t.getViewportComponent(),saveOnExit:!0})]})}}const rT="nodegraph",oT="0.0.1",iT="Node Graph";class lT{constructor(e){this._app=e,this._graph=new fi(Ye,gn),this._graphParser=new Jx,this._graphController=new tT(e,this._graph),this._graphViewComponent=S.createRef();const t=this._graphController;e.getRenderManager().addRenderer(Lr,s=>a(Tu,{ref:this._graphViewComponent,renderGraph:r=>a(nT,{graphView:r,graphController:t,editable:!0}),renderOverlay:r=>a(sT,{graphView:r,graphController:t,session:this._app.getSession()})}))}initialize(e){uu(e.getExportManager()),e.getUndoManager().setEventHandlerFactory((...t)=>new bu(this._graphController,this._graphParser)),e.getDrawerManager().addPanelClass(t=>C(de,{id:t.id,className:t.className,style:t.style,title:"Your Average Graph Editor",children:[a("p",{children:"Brought to you with \u2764 by the Flap.js team."}),a("p",{children:"<- Tap on a tab to begin!"})]})),e.getHotKeyManager().registerHotKey("Export to PNG",[Le,"KeyP"],()=>{e.getExportManager().tryExportFile("image-png",e.getSession())}),this._graphController.initialize()}update(e){this._graphController.update()}destroy(e){this._graphController.destroy()}clear(e,t=!1){tu(e,t,()=>e.getToolbarComponent().closeBar())}getGraphController(){return this._graphController}getGraphView(){return this._graphViewComponent.current}getModuleVersion(){return oT}getModuleName(){return rT}getLocalizedModuleName(){return iT}getApp(){return this._app}}const De={};De.fsa={name:"Finite Automata",version:"3.0.0",experimental:!0,fetch:function(n){n(hE)}};De.pda={name:"Pushdown Automata",version:"1.0.0",experimental:!0,fetch:function(n){n(Z2)}};De.re={name:"Regular Expression",version:"1.0.0",experimental:!0,fetch:function(n){n(Yx)}};De.tm={name:"Turing Machine",version:"1.0.0",disabled:!0,fetch:function(n){throw new Error("Module not yet implemented. Sorry :(")}};De.node={name:"Node Graph",version:"1.0.0",experimental:!0,fetch:function(n){n(lT)}};De.tree={name:"Tree",version:"1.0.0",disabled:!0,fetch:function(n){throw new Error("Module not yet implemented. Sorry :(")}};De.hlsm={name:"High Level State Machine",version:"1.0.0",disabled:!0,fetch:function(n){throw new Error("Module not yet implemented. Sorry :(")}};De.mealy={name:"Mealy Machine",version:"1.0.0",disabled:!0,fetch:function(n){throw new Error("Module not yet implemented. Sorry :(")}};De.moore={name:"Moore Machine",version:"1.0.0",disabled:!0,fetch:function(n){throw new Error("Module not yet implemented. Sorry :(")}};class aT extends S.Component{constructor(e){super(e)}renderModuleButton(e,t){const s=this.props.session,o=s.getApp().isExperimental();return a(D,{className:Wh.module_button,title:t.name+" ("+t.version+")",disabled:t.experimental!==o||t.disabled,onClick:i=>{s.restartSession(s.getApp(),e)}},e)}render(){return a(de,{id:this.props.id,className:this.props.className,style:this.props.style,title:"Change Modules",children:a("div",{className:Wh.module_button_list,children:Object.keys(De).map(e=>this.renderModuleButton(e,De[e]))})})}}const cT="_divider_19anx_1",uT={divider:cT};class hT extends S.Component{constructor(e){super(e)}render(){return a("div",{id:this.props.id,className:uT.divider+" "+this.props.className,style:this.props.style})}}class dT extends S.Component{constructor(e){super(e)}render(){const e=this.props.icon;return a(Zi,{id:this.props.id,className:ff.toolbar_button+" "+this.props.className,style:this.props.style,title:this.props.title,disabled:this.props.disabled,accept:this.props.accept,onUpload:this.props.onUpload,children:a(e,{})})}}class pT extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 2zm-3-7V3.5L18.5 9H13z"})})}}class gT extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"})})}}class fT extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"})})}}class mT extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 .63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07.47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z"})})}}class _T extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z"})})}}class yT extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:a("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"})})}}class vT extends S.PureComponent{constructor(e){super(e)}render(){return a("svg",{id:this.props.id,className:this.props.className,style:this.props.style,xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 20 20",children:a("path",{d:"M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z"})})}}class Iu{onAutoSaveLoad(e){}onAutoSaveUpdate(e){}onAutoSaveUnload(e){}}class ST extends Iu{constructor(e){super(),this._app=e}onAutoSaveLoad(e){const t=this._app,o=t.getSession().getCurrentModule().getModuleName(),i=e.getDataAsObject("graph-"+o);if(i)try{t.getImportManager().tryImportFileFromData("",".json",i)}catch{}}onAutoSaveUpdate(e){const t=this._app,s=t.getSession(),o=s.getCurrentModule().getModuleName();try{t.getExportManager().tryExportTargetToData("session",s).then(i=>{e.setDataAsObject("graph-"+o,i.data)})}catch{}}onAutoSaveUnload(e){}getApp(){return this._app}}const CT="prefs-theme",zd="prefs-color";class wT extends Iu{constructor(e){super(),this._themeManager=e}onAutoSaveLoad(e){const t=this._themeManager,s=e.getDataAsObject(zd);for(const r in s){const o=t.getStyleByName(r);o&&o.setValue(s[r])}}onAutoSaveUnload(e){}onAutoSaveUpdate(e){const t=this._themeManager,s={},r=t.getCurrentTheme();for(const o of t.getStyles()){const i=o.getName(),l=o.getValue();s[i]=l}e.setDataAsObject(zd,s),e.setData(CT,r.getName())}getThemeManager(){return this._themeManager}}function As(n){const e=[],t=[];return Yi(n,e),cu(e,!0,t),Rf(.2,e,t,e),Qi(e)}function Ud(n){const e=[];return Yi(n,e),cu(e,!1,e),Qi(e)}function sa(n){const e=[],t=[];return Yi(n,e),cu(e,!0,t),Rf(.39,e,t,e),Qi(e)}const Vd="prefs-lang";class ET extends Iu{constructor(){super()}onAutoSaveLoad(e){const t=e.getDataAsObject(Vd);if(!!t)for(const s of Object.keys(t))I18N.languageMapping.set(s,t[s])}onAutoSaveUnload(e){}onAutoSaveUpdate(e){const t={};for(const s of I18N.languageMapping.keys())t[s]=I18N.languageMapping.get(s);e.setDataAsObject(Vd,t)}}const xT=1e3,Dt={_init:!1,_handlers:[],_interval:null,_storage:null,initialize(n){if(!n)throw new Error("Unable to initialize AutoSave for unknown data storage");if(!!n.isSupported()){this._storage=n,this._init=!0;for(const e of this._handlers)e.onAutoSaveLoad(this._storage);this.onIntervalUpdate=this.onIntervalUpdate.bind(this),this._interval=setInterval(this.onIntervalUpdate,xT)}},destroy(){if(!!this._storage.isSupported()&&!!this._init){clearInterval(this._interval),this._init=!1;for(const n of this._handlers)n.onAutoSaveUnload(this._storage);this._handlers.length=0,this._storage=null}},onIntervalUpdate(){for(const n of this._handlers)n.onAutoSaveUpdate(this._storage)},registerHandler(n){return this._handlers.push(n),this._init&&n.onAutoSaveLoad(this._storage),this},unregisterHandler(n){return this._handlers.splice(this._handlers.indexOf(n),1),this._init&&n.onAutoSaveUnload(this._storage),this},load(){if(!this._init)throw new Error("Cannot load when not yet initialized");for(const n of this._handlers)n.onAutoSaveLoad(this._storage)},unload(){if(!this._init)throw new Error("Cannot save when not yet initialized");for(const n of this._handlers)n.onAutoSaveUnload(this._storage)}};function gm(n,e){const t=document.createElement("a"),s=e.indexOf(";");return e=e.substring(0,s+1)+"headers=Content-Disposition%3A%20attachment%3B%20filename="+n+";"+e.substring(s+1),t.setAttribute("href",e),t.setAttribute("download",n),t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),Promise.resolve(e)}class fm{constructor(){}downloadFile(e,t,s,r){return Promise.resolve(s)}}function TT(n){return"data:text/plain; charset=utf-8,"+encodeURIComponent(n)}class mm extends fm{constructor(){super()}downloadFile(e,t,s,r){return gm(e,TT(s)).then(o=>s)}}function _m(n){if(!n)return"";const e=n.lastIndexOf(".");return e<0?"":n.substring(e)}function NT(n){const t=new XMLSerializer().serializeToString(n);return new Blob([t],{type:"image/svg+xml"})}class MT extends fm{constructor(){super()}downloadFile(e,t,s,r){if(s instanceof SVGElement){const o=r.width||1,i=r.height||1,l=_m(e),c=r["image-type"]||l.substring(1),u=NT(s);return new Promise((h,d)=>{const p=URL.createObjectURL(u),v=document.createElement("canvas"),m=v.getContext("2d"),y=window.devicePixelRatio||1;v.width=o*y,v.height=i*y,v.style.width=o+"px",v.style.height=i+"px",m.setTransform(y,0,0,y,0,0);const w=new Image;w.onload=()=>{m.drawImage(w,0,0),URL.revokeObjectURL(p);const f="image/"+c,g=v.toDataURL(f).replace(f,"image/octet-stream");gm(e,g)},w.src=p})}else throw new Error("Cannot download file data of this type - can only download svg elements")}}class bT extends mm{constructor(){super()}downloadFile(e,t,s,r){return super.downloadFile(e,t,JSON.stringify(s),r)}}class IT{constructor(){this._downloaders=new Map,this.addDownloader(new mm,"text"),this.addDownloader(new MT,"image"),this.addDownloader(new bT,"object")}addDownloader(e,...t){for(const s of t)this._downloaders.has(s)?this._downloaders.get(s).push(e):this._downloaders.set(s,[e]);return this}removeDownloader(e,t){if(this._downloaders.has(t)){const s=this._downloaders.get(t);s.splice(s.indexOf(e),1),s.length<=0&&this._downloaders.delete(t)}return this}clearDownloadersByDownloadType(e){this._downloaders.delete(e)}clear(){this._downloaders.clear()}tryDownloadFile(e,t,s,r){const o=this.getDownloadersByDownloadType(t);if(o&&o.length>0)return o.reduce((i,l)=>i.catch(c=>l.downloadFile(e,t,s,r)),Promise.reject());throw new Error("No valid downloaders found for download type")}getDownloadersByDownloadType(e){return this._downloaders.get(e)}getDownloadTypes(){return this._downloaders.keys()}isEmpty(){return this._downloaders.size<=0}}class LT{constructor(){this._exporters=new Map,this._exportTypes=[],this._downloaderManager=new IT}registerExporter(e,...t){for(const s of t)this._exporters.set(s,e),this._exportTypes.push(s);return this}unregisterExporter(e){const t=[];for(const s of this._exporters.keys())this._exporters.get(s)===e&&t.push(s);for(const s of t)this.unregisterExportType(s);return t}unregisterExportType(e){const t=this._exporters.get(e);this._exporters.delete(e);const s=this._exportTypes.indexOf(e);return this._exportTypes.splice(s,1),t}clear(){this._exporters.clear(),this._exportTypes.length=0}tryExportFile(e,t){return this.tryExportTargetToData(e,t).then(s=>this._downloaderManager.tryDownloadFile(s.name,s.type,s.data,s)).catch(s=>{throw new Error("Failed to export target to data:"+s.message)})}tryExportTargetToData(e,t){if(!this._exporters.has(e))throw new Error("Unable to export unregistered export type");return this._exporters.get(e).exportTarget(e,t)}getExporterByExportType(e){return this._exporters.get(e)}getExportTypes(){return this._exportTypes}getExporters(){return this._exporters.values()}isEmpty(){return this._exporters.size<=0}}class kT{constructor(){this._importers=new Map,this._metaTypes=new Map,this._textUploader=new Vf}addImporter(e,...t){for(const s of t)this._addFileType(s),this._importers.get(s).push(e);return this}removeImporter(e,t){if(this._importers.has(t)){const s=this._importers.get(t);s.splice(s.indexOf(e),1),s.length<=0&&this._removeFileType(t)}return this}clearImportersByFileType(e){this._removeFileType(e)}clear(){this._importers.clear(),this._metaTypes.clear()}_addFileType(e){if(this._importers.has(e))return;const t=e.lastIndexOf(".");if(t<0)throw new Error("File types must start with '.'");if(t!==0){const s=e.substring(t);if(this._metaTypes.has(s)){const r=this._metaTypes.get(s);r.push(e),r.sort((o,i)=>{const l=o.match(/\./g),c=o.match(/\./g);return l.length-c.length})}else this._importers.has(s)||this._importers.set(s,[]),this._metaTypes.set(s,[e])}this._importers.set(e,[])}_removeFileType(e){this._importers.delete(e);const t=e.lastIndexOf(".");if(t!==0){const s=e.substring(t),r=this._metaTypes.get(s);r.splice(r.indexOf(s),1),r.length<=0&&this._metaTypes.delete(s)}}tryImportFile(e){if(!e)throw new Error("Unable to import null file");if(!(e instanceof File))throw new Error("Unable to import object as file");return this._textUploader.uploadFile(e).then(t=>{const s=e.name,r=_m(s),o=t;return this.tryImportFileFromData(s,r,o)}).catch(t=>{throw new Error("Failed to import file: "+t.message)})}tryImportFileFromData(e,t,s){const r=[];if(this._metaTypes.has(t)){const o=this._metaTypes.get(t);for(const i of o)if(e.endsWith(i))for(const l of this.getImportersByFileType(i))r.push({src:l,type:i})}for(const o of this.getImportersByFileType(t))r.push({src:o,type:t});if(r&&r.length>0)return r.reduce((o,i)=>o.catch(l=>i.src.importFileData(e,i.type,s)),Promise.reject());throw new Error("No valid importers found for file")}getImportersByFileType(e){return this._importers.get(e)}getFileTypes(){return this._importers.keys()}getFileTypesAsAcceptString(){return Array.from(this._importers.keys()).join(",")}isEmpty(){return this._importers.size<=0}}function AT(){return window.location.href}function DT(n){const e={},t=document.createElement("a");t.href=n;const r=t.search.substring(1).split("&");for(const o of r){const i=o.split("=");e[i[0]]=decodeURIComponent(i[1])}return e}const Gd="Session",$d="fsa",Kd="currentModule",PT=300;let Eo=null;class FT{constructor(){this._name=I18N.toString("file.untitled"),this._module=null,this._moduleClass=null,this._moduleStarted=!1,this._app=null,this._sessionID=null,this._listeners=[]}addListener(e){return this._listeners.push(e),this}startSession(e,t=null){if(this._module!==null)return;if(ve.out(Gd,`Starting session for module '${t}'...`),!t||t.length<=0){const o=DT(AT());"module"in o&&(t=o.module),(!t||t.length<=0)&&(t=qt.getData(Kd),(!t||t.length<=0)&&(t=$d))}let s=De[t];if(!s&&(t=$d,s=De[t],!s)){window.alert("Cannot find registered module with id '"+t+"'");return}const r=s.experimental;if(r&&!e.isExperimental()){window.alert("Cannot load experimental module with id '"+t+"' on stable app version.");return}else if(!r&&e.isExperimental()){window.alert("Cannot load stable module with id '"+t+"' on experimental app version.");return}Eo&&clearTimeout(Eo),Eo=setTimeout(()=>{s.fetch(o=>{Eo=null,this._app=e,this._moduleClass=o,this._sessionID="#"+we();try{this._module=new o(e),e.forceUpdate(),this._module.initialize(e);for(const i of this._listeners)i.onSessionStart(this);qt.setData(Kd,t),this._moduleStarted=!0}catch(i){window.alert("Could not load module with id '"+t+`':
`+i.message)}})},PT)}restartSession(e,t=null){if(this._module===null)throw new Error("Cannot restart session that is not yet started");this.stopSession(e),this.startSession(e,t)}updateSession(e){this._module&&this._moduleStarted&&this._module.update(e)}stopSession(e){if(this._module!==null){ve.out(Gd,"Stopping session...");for(const t of this._listeners)t.onSessionStop(this);this._module.destroy(this._app),this._moduleStarted=!1,this._moduleClass=null,this._module=null,this._sessionID=null,this._app=null}}setProjectName(e){!e||e.length<=0?this._name=I18N.toString("file.untitled"):this._name=e;const t=this._name,s=document.getElementById("window-title"),r=s.innerHTML,o=r.indexOf("-");o!==-1?s.innerHTML=r.substring(0,o).trim()+" - "+t:s.innerHTML=r+" - "+t}getProjectName(){return this._name}getCurrentModule(){return this._module}isModuleLoaded(){return this._module!==null}getSessionID(){return this._sessionID}getApp(){return this._app}}class OT{constructor(){this._panelClasses=[],this._panelProps=null}setPanelProps(e){return this._panelProps=e,this}addPanelClass(e){return this._panelClasses.push(e),this}onSessionStart(e){}onSessionStop(e){this._panelClasses.length=0,this._panelProps=null}getPanelProps(){return this._panelProps}getPanelClasses(){return this._panelClasses}}class RT{constructor(){this._panelClasses=[],this._panelProps=null,this._subtitleComponentClass=null}setSubtitleComponentClass(e){this._subtitleComponentClass=e}setPanelProps(e){return this._panelProps=e,this}addPanelClass(e){return this._panelClasses.push(e),this}onSessionStart(e){}onSessionStop(e){e.getApp().getToolbarComponent().closeBar(),this._panelClasses.length=0,this._panelProps=null}getPanelProps(){return this._panelProps}getPanelClasses(){return this._panelClasses}getSubtitleComponentClass(){return this._subtitleComponentClass}}class BT{constructor(){this._viewClasses=[],this._viewProps=null}setViewProps(e){return this._viewProps=e,this}addViewClass(e){return this._viewClasses.push(e),this}onSessionStart(e){}onSessionStop(e){this._viewClasses.length=0,this._viewProps=null}getViewProps(){return this._viewProps}getViewClasses(){return this._viewClasses}}const HT="_hotkey_container_1bdtm_1",zT="_hotkey_1bdtm_1",UT="_hotkey_name_1bdtm_27",xo={hotkey_container:HT,hotkey:zT,"hotkey-view-fadein":"_hotkey-view-fadein_1bdtm_1","hotkey-view-wiggle":"_hotkey-view-wiggle_1bdtm_1",hotkey_name:UT},VT=100;class GT extends S.Component{constructor(e){super(e),this._cachedHotKeys=[],this._cacheTimeout=null}render(){const e=this.props.hotKeyManager,t=!this.props.disabled&&e.isEnabled();!this._cacheTimeout&&t&&(this._cacheTimeout=setTimeout(()=>{this._cacheTimeout=null,this._cachedHotKeys.length=0,e.getCurrentlyPossibleHotKeys(this._cachedHotKeys)},VT));const s=e.getCurrentHotKeyRepeatCount(),r=e.getCurrentHotKey();return a("div",{id:this.props.id,className:xo.hotkey_container+" "+this.props.className,style:this.props.style,children:t&&this._cachedHotKeys.map((o,i)=>{const l=r===o;return C("div",{className:xo.hotkey+(l?" active ":""),children:[a("label",{className:xo.hotkey_label,children:o.localizedKeys}),a("label",{className:xo.hotkey_name,children:o.name+(l&&s>1?" x"+s:"")})]},o.localizedKeys+":"+i+":"+(l?s:0))})})}}const $T="UndoManager",KT=1e3;class jT{constructor(){this.history=[],this.offsetIndex=0,this._handlerFactory=null}setEventHandlerFactory(e){return this._handlerFactory=e,this}onSessionStart(e){}onSessionStop(e){this.clear()}captureEvent(...e){if(typeof this._handlerFactory=="function"){const t=this._handlerFactory(e);if(t)this.captureEventAsHandler(t);else throw new Error("Cannot create valid undo event handler for capture")}else ve.error($T,"Missing default undo event handler for event capture")}captureEventAsHandler(e){for(;this.offsetIndex>0;)this.history.pop(),--this.offsetIndex;for(this.history.push(e);this.history.length>KT;)this.history.unshift()}getPreviousEvent(){return this.canUndo()?this.history[this.history.length-this.offsetIndex-1]:null}getNextEvent(){return this.canRedo()?this.history[this.history.length-this.offsetIndex+1]:null}undo(){if(!this.canUndo())return;const e=this.history[this.history.length-this.offsetIndex-1];++this.offsetIndex,e.applyUndo(this)}canUndo(){return this.offsetIndex<this.history.length}redo(){if(!this.canRedo())return;--this.offsetIndex,this.history[this.history.length-this.offsetIndex-1].applyRedo(this)}canRedo(){return this.offsetIndex>0}clear(){this.history.length=0,this.offsetIndex=0}getEventHandlerFactory(){return this._handlerFactory}}class WT{constructor(){this._tooltips=[],this._transitionMode=gi}setTransitionMode(e){return this._transitionMode=e,this}addTooltip(e){return this._tooltips.push(e),this}onSessionStart(e){}onSessionStop(e){this._tooltips.length=0,this._transitionMode=gi}getTransitionMode(){return this._transitionMode}getTooltips(){return this._tooltips}hasTooltips(){return this._tooltips.length>0}}class rc{constructor(e,t){this._name=e,this._value=t}getValue(){return this._value}getName(){return this._name}}const Ds="Theme",YT="theme/";class Zs{constructor(e,t=new Map){this._name=e,this._styles=t}static fetchThemeFile(e,t){ve.out(Ds,`Fetching theme file '${e}'...`);const s=new XMLHttpRequest;s.onreadystatechange=function(){if(s.readyState===4&&s.status===200){const r=s.responseText;t(r)}},s.onerror=function(){ve.out(Ds,`Unable to find theme file for '${e}'.`)},s.open("GET",YT+e+".theme",!0),s.setRequestHeader("Content-Type","text/strings"),s.send()}static loadThemeFile(e,t,s){ve.out(Ds,`Loading theme file '${e}'...`);const r=new Zs(e);let o,i,l;const c=t.split(`
`);for(let u of c)u=u.trim(),!u.startsWith("//")&&(u.startsWith("//TODO:")&&ve.out(Ds,`Warning - found incomplete theme file: theme file '${u.substring(2).trim()}'.`),o=u.indexOf("="),!(o<0)&&(i=u.substring(0,o).trim(),l=u.substring(o+1).trim(),i.length!=0&&r._styles.set(i,new rc(i,l))));ve.out(Ds,`Theme file '${e}' loaded.`),s(r)}addStyle(e,t){return this._styles.set(e,new rc(e,t)),this}removeStyle(e){return this._styles.delete(e),this}getStyles(){return this._styles.values()}getStyleByName(e){return this._styles.get(e)}getName(){return this._name}}class QT extends rc{constructor(e,t,s=null,r=null){super(t,e.getComputedValue(t)),this._styleManager=e,this._children=[],s&&(this._source=s,s._children.push(this)),this._sourceTransform=r}updateValue(e=!0){if(this._source){const t=this._source.getValue();if(this._sourceTransform){const s=this._sourceTransform.call(this,t);this._value=s}else this._value=t;if(e){this._styleManager.setComputedValue(this._name,this._value);for(const s of this._children)s.updateValue(!0)}}}setValue(e,t=!0){if(this._value=e,t){this._styleManager.setComputedValue(this._name,e);for(const s of this._children)s.updateValue(!0)}}getSourceStyle(){return this._source}getSourceTransform(){return this._sourceTransform}getDerivedStyles(){return this._children}getStyleManager(){return this._styleManager}}const XT="general",jd="default";class qT{constructor(){this._styles=new Map,this._groups=new Map,this._element=null,this._elementTheme=null,this._theme=null}register(e,t=XT,s=null,r=null){const o=new QT(this,e,s,r);if(this._element){const i=this.getComputedValue(e);o.setValue(i,!1),this._elementTheme.addStyle(e,i)}return this._styles.set(e,o),this._groups.has(t)?this._groups.get(t).push(e):this._groups.set(t,[e]),o}unregister(e){this._styles.delete(e);for(const t of this._groups.values()){const s=t.indexOf(e);s>=0&&t.splice(s,1)}this._element&&this._elementTheme.removeStyle(e)}clear(){this._groups.clear(),this._styles.clear(),this._element=null,this._elementTheme=null}setElement(e){this._element=e,this._elementTheme=new Zs(jd);for(const t of this._styles.values())t.setValue(this.getComputedValue(t.getName()),!1);return this}reset(){const e=this._theme||this._elementTheme;if(e)for(const t of this._styles.values()){const s=t.getName(),r=e.getStyleByName(s);if(r)t.setValue(r.getValue());else if(t.getSourceStyle())t.updateValue();else if(e!==this._elementTheme){const o=this._elementTheme.getStyleByName(s);o&&t.setValue(o.getValue())}}}loadTheme(e){this._theme&&this._theme.getName()===e?this.reset():e===jd?(this._theme=this._elementTheme,this.reset()):Zs.fetchThemeFile(e,t=>{Zs.loadThemeFile(e,t,s=>{this._theme=s,this.reset()})})}getComputedValue(e){const s=window.getComputedStyle(this._element).getPropertyValue(e);return s?s.trim():null}setComputedValue(e,t){this._element.style.setProperty(e,t)}getValue(e){return this._styles.has(e)?this._styles.get(e).getValue():this.getComputedValue(e)}getStylesByGroup(e){return this._groups.has(e)?this._groups.get(e).map(t=>this._styles.get(t)):null}getStyleByName(e){return this._styles.has(e)?this._styles.get(e):null}getStyles(){return this._styles.values()}getStyleNames(){return this._styles.keys()}getStyleGroupNames(){return this._groups.keys()}getCurrentTheme(){return this._theme||this._elementTheme}}const ln={_channel:null,_listeners:[],initialize(n){!this.isSupported()||(this._channel=new BroadcastChannel(n),this._channel.onmessage=this.onBroadcastMessage.bind(this))},destroy(){!this.isSupported()||(this._channel.close(),this._channel=null,this._listeners.length=0)},addListener(n){return this._listeners.push(n),this},removeListener(n){this._listeners.splice(this._listeners.indexOf(n),1)},sendMessage(n,e,t,s={}){if(!this.isSupported())return;const r={type:t,src:n,dst:e};Object.assign(r,s),this._channel.postMessage(r)},onBroadcastMessage(n){const e=n.data.type,t=n.data.src,s=n.data.dst;for(const r of this._listeners)typeof r.onBroadcastMessage=="function"&&r.onBroadcastMessage(e,t,s,n.data)},getListeners(){return this._listeners},getChannel(){return this._channel},isSupported(){return"BroadcastChannel"in self}};class Wd{constructor(e,t){this._sessionID=e,this._sessionName=t}getSessionID(){return this._sessionID}getSessionName(){return this._sessionName}}const Yd="session-start",Qd="session-update",Xd="session-stop";class ZT{constructor(e){this._app=e,this._session=null,this._sessionID=null,this._remoteSessions=new Map,this._handlers=[]}addMessageHandler(e){return this._handlers.push(e),e.setBroadcastManager(this),this}removeMessageHandler(e){this._handlers.splice(this._handlers.indexOf(e),1)}clear(){this._handlers.length=0}sendMessageTo(e,t,s){ln.sendMessage(this._sessionID,e,t,s)}onBroadcastMessage(e,t,s,r){if(!(s&&s.startsWith("#")&&s!==this._sessionID)){if(e===Yd)this._remoteSessions.set(t,new Wd(t,r.name||"Workspace #"+pt(t))),ln.sendMessage(this._sessionID,t,Qd);else if(e===Xd)this._remoteSessions.delete(t);else if(e===Qd)this._remoteSessions.set(t,new Wd(t,r.name||"Workspace #"+pt(t)));else for(const o of this._handlers)if(o.onBroadcastMessage(e,t,s,r))break}}onSessionStart(e){this._session=e,this._sessionID=e.getSessionID(),ln.addListener(this),ln.sendMessage(this._sessionID,"all",Yd)}onSessionStop(e){ln.sendMessage(this._sessionID,"all",Xd),ln.removeListener(this),this.clear(),this._session=null,this._sessionID=null}getRemoteSessions(){return this._remoteSessions.values()}getSessionID(){return this._sessionID}getSession(){return this._session}getApp(){return this._app}}const JT="https://goo.gl/forms/XSil43Xl5xLHsa0E2",e4="https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md",qd=0,t4=0,n4=1,s4=2,Zd=3,r4="error_upload",o4="fla";function i4(n){n.register("--color-graph-node","graph"),n.register("--color-graph-text","graph"),n.register("--color-graph-select","graph"),n.register("--color-accent","general");const e=n.register("--color-primary","general");n.register("--color-primary-text","general"),n.register("--color-primary-lite","hidden",e,sa),n.register("--color-primary-dark","hidden",e,As);const t=n.register("--color-background","general");n.register("--color-background-active","hidden",t,Ud),n.register("--color-background-lite","hidden",t,sa),n.register("--color-success","general"),n.register("--color-warning","general");const s=n.register("--color-surface","surface");n.register("--color-surface-text","surface"),n.register("--color-surface-active","hidden",s,Ud),n.register("--color-surface-lite","hidden",s,sa),n.register("--color-surface-dark","hidden",s,As);const r=n.register("--color-surface-error","surface");n.register("--color-surface-error-dark","hidden",r,As);const o=n.register("--color-surface-success","surface");n.register("--color-surface-success-dark","hidden",o,As);const i=n.register("--color-surface-warning","surface");n.register("--color-surface-warning-dark","hidden",i,As)}class Ke extends S.Component{constructor(e){super(e),Ke.INSTANCE=this,this._toolbarComponent=S.createRef(),this._drawerComponent=S.createRef(),this._viewport=null,this._labeleditor=null,this._themeManager=new qT,this._colorSaver=new wT(this._themeManager),this._langSaver=new ET,this._saver=new ST(this),this._exportManager=new LT,this._importManager=new kT,this._undoManager=new jT,this._hotKeyManager=new ov,this._drawerManager=new OT,this._menuManager=new RT,this._viewportManager=new BT,this._renderManager=new av,this._tooltipManager=new WT,this._notificationManager=new Rv,this._broadcastManager=new ZT(this),this._session=new FT().addListener(this._undoManager).addListener(this._hotKeyManager).addListener(this._drawerManager).addListener(this._menuManager).addListener(this._viewportManager).addListener(this._renderManager).addListener(this._tooltipManager).addListener(this._notificationManager).addListener(this._broadcastManager).addListener(this),this._init=!1,this.state={hide:!1},this._mediaQuerySmallWidthList=window.matchMedia("only screen and (max-width: 400px)"),this._mediaQuerySmallHeightList=window.matchMedia("only screen and (min-height: 400px)"),this.onModuleTitleClick=this.onModuleTitleClick.bind(this),this.onToolbarClearButton=this.onToolbarClearButton.bind(this)}componentDidMount(){this._session.startSession(this)}componentWillUnmount(){this._session.stopSession(this)}static onWindowLoad(){Dt.initialize(qt),ln.initialize(o4)}static onWindowUnload(){Dt.destroy(),Ke.INSTANCE&&Ke.INSTANCE.componentWillUnmount()}onSessionStart(e){const t=e.getCurrentModule();this._menuManager.addPanelClass(_y).addPanelClass(qy).addPanelClass(ev).addPanelClass(aT),this._hotKeyManager.registerHotKey("New",[Le,"KeyN"],()=>t.clear(this)).registerAltHotKey("Show Hints",()=>{D.SHOW_LABEL=!D.SHOW_LABEL}),this._undoManager.getEventHandlerFactory()&&this._hotKeyManager.registerHotKey("Undo",[Le,"KeyZ"],()=>this.getUndoManager().undo()).registerHotKey("Redo",[Le,nu,"KeyZ"],()=>this.getUndoManager().redo()),this._tooltipManager.hasTooltips()||this._tooltipManager.addTooltip("If you need help, try the '?' at the top.").addTooltip("Or you can choose to do nothing.").addTooltip("I can't do anything about that.").addTooltip("You really should consider doing something though, for the sake of both of us.").addTooltip("Of course, it is your free will.").addTooltip("You do you.").addTooltip("Please do something.").addTooltip("I need my job.").addTooltip("Welcome to Flap.js!"),this._themeManager.setElement(document.getElementById("root")),i4(this._themeManager),Dt.registerHandler(this._saver),Dt.registerHandler(this._colorSaver),Dt.registerHandler(this._langSaver),this._init=!0}onSessionStop(e){this._init=!1,Dt.unregisterHandler(this._saver),Dt.unregisterHandler(this._colorSaver),Dt.unregisterHandler(this._langSaver),this._themeManager.clear(),this._importManager.clear(),this._exportManager.clear(),this._menuManager.setSubtitleComponentClass(null)}onModuleTitleClick(e){const t=this._drawerComponent.current;!t.isDrawerOpen()||!t.isCurrentTab(qd)?t.setCurrentTab(qd):this._toolbarComponent.current.setCurrentMenu(Zd),e.preventDefault(),e.stopPropagation()}onToolbarClearButton(e){const t=this._session.getCurrentModule();t&&t.clear(this)}getToolbarComponent(){return this._toolbarComponent.current}getDrawerComponent(){return this._drawerComponent.current}getExportManager(){return this._exportManager}getImportManager(){return this._importManager}getUndoManager(){return this._undoManager}getHotKeyManager(){return this._hotKeyManager}getDrawerManager(){return this._drawerManager}getMenuManager(){return this._menuManager}getViewportManager(){return this._viewportManager}getRenderManager(){return this._renderManager}getTooltipManager(){return this._tooltipManager}getNotificationManager(){return this._notificationManager}getThemeManager(){return this._themeManager}getBroadcastManager(){return this._broadcastManager}getSession(){return this._session}getCurrentModule(){return this._session.getCurrentModule()}isExperimental(){return!0}componentDidUpdate(){this._session.updateSession(this);const e=this._toolbarComponent.current,t=this._drawerComponent.current;this._hotKeyManager.setEnabled(!(e&&e.isBarOpen())&&!(t&&t.isDrawerOpen()&&t.isDrawerFullscreen()))}renderRenderLayer(e,t){const s=this._session.getSessionID(),r=this._renderManager.getRenderersByLayer(e);return r&&r.length>0?r.map((o,i)=>a(o,{...t},s+"."+o.constructor.name+"."+i)):null}render(){const e=this._session,t=e.getCurrentModule(),s=t?t.getLocalizedModuleName():null,r=this._mediaQuerySmallWidthList.matches,o=this._mediaQuerySmallHeightList.matches,i=this.state.hide,l=this._exportManager,c=this._importManager,u=this._undoManager,h=this._drawerManager,d=this._menuManager,p=this._tooltipManager,v=this._notificationManager,m=this._toolbarComponent.current,y=h.getPanelClasses(),w=h.getPanelProps()||{session:e},f=d.getPanelClasses(),g=d.getPanelProps()||{session:e},_=d.getSubtitleComponentClass();return C("div",{className:to.app_container+(t?" active ":""),children:[C(B1,{ref:this._toolbarComponent,className:to.app_bar,menus:f,menuProps:g,subtitle:_,hide:i,title:s,session:e,onTitleClick:this.onModuleTitleClick,children:[a(_t,{title:I18N.toString("action.toolbar.newmachine"),icon:pT,containerOnly:kn,onClick:this.onToolbarClearButton,disabled:!t}),a(dT,{title:I18N.toString("action.toolbar.uploadmachine"),icon:br,containerOnly:kn,accept:c.getFileTypesAsAcceptString(),onUpload:E=>{c.tryImportFile(E).catch(x=>v.pushNotification(`ERROR: Unable to import invalid file.
`+x.message,iu,r4)).finally(()=>m.closeBar())},disabled:c.isEmpty()}),a(_t,{title:I18N.toString("action.toolbar.undo"),icon:gT,containerOnly:kn,disabled:!u.canUndo(),onClick:()=>u.undo()}),a(_t,{title:I18N.toString("action.toolbar.redo"),icon:fT,containerOnly:kn,disabled:!u.canRedo(),onClick:()=>u.redo()}),a(_t,{title:I18N.toString("component.exporting.title"),icon:Ji,containerOnly:kn,onClick:()=>m.setCurrentMenu(t4),disabled:l.isEmpty()}),a(hT,{}),a(_t,{title:I18N.toString("action.toolbar.changemodule"),icon:Kf,containerOnly:Hs,onClick:()=>m.setCurrentMenu(Zd)}),a(_t,{title:I18N.toString("action.toolbar.lang"),icon:_T,containerOnly:Hs,onClick:()=>m.setCurrentMenu(s4)}),a(_t,{title:I18N.toString("component.options.title"),icon:vT,containerOnly:Hs,onClick:()=>m.setCurrentMenu(n4)}),a(_t,{title:I18N.toString("action.toolbar.help"),icon:yT,onClick:()=>window.open(e4,"_blank")}),a(_t,{title:I18N.toString("action.toolbar.bug"),icon:mT,containerOnly:Hs,onClick:()=>window.open(JT,"_blank")})]}),a(g1,{ref:this._drawerComponent,className:to.app_content,panels:y,panelProps:w,side:r?Bs:df,direction:o?pf:gf,hide:i,children:a(K1,{children:C("div",{className:"viewport",children:[a(V1,{mode:p.getTransitionMode(),visible:this._init&&!u.canUndo(),children:p.getTooltips().map((E,x)=>a("label",{children:E},E+":"+x))}),this.renderRenderLayer(iv),this.renderRenderLayer(Lr),this.renderRenderLayer(lv),a(sy,{className:to.fullscreen_widget,app:this}),a(q1,{notificationManager:v}),this._hotKeyManager.isEnabled()&&a(GT,{hotKeyManager:this._hotKeyManager})]})})})]})}}Ke.INSTANCE=null;const ra=`
### Added
- Equivalence test for Finite Automata with witness string

### Fixed
- Too large workspace widget
`.split(`
`),Jd=Ir,oa={show:ra&&ra.length>0,log:`
Changelog v`+Jd+`:
 - `+ra.join(`
 - `),version:Jd},Go="App";window.addEventListener("load",n=>{ve.out(Go,`Preparing for '${my}' environment...'`),ve.out(Go,`Loading app version '${Ir}'...`);try{l4()}catch(e){throw e}window.addEventListener("beforeunload",e=>{if(qt.getData("disableExitWarning")!=="true"){const t=I18N.toString("alert.window.exit");return e=e||window.event,e&&(e.returnValue=t),t}}),window.addEventListener("unload",e=>{ve.out(Go,"Unloading app..."),a4()}),window.requestAnimationFrame(vm)});typeof window.isUpdateAvailable=="function"&&window.isUpdateAvailable.then(n=>{if(n){let e="";oa&&oa.show&&(e+=oa.log),ve.out(Go,`Found update for version ${Ir}...`),window.alert(`*** New update available! *** 
 Please restart the browser.`+(e?`
`+e:""))}});var ym;function l4(){ym=document.getElementById("root"),Ke.onWindowLoad&&Ke.onWindowLoad.call(Ke)}function vm(n){B0.render(S.createElement(Ke),ym),window.requestAnimationFrame(vm)}function a4(){Ke.onWindowUnload&&Ke.onWindowUnload.call(Ke)}
