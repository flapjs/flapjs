{"version":3,"sources":["webpack:///./src/app/util/MathHelper.js","webpack:///./src/app/experimental/panels/PanelContainer.js","webpack:///./src/app/session/manager/hotkey/HotKeyManager.js","webpack:///./src/app/util/logger/Logger.js","webpack:///./src/app/components/iconset/ExpandDownIcon.js","webpack:///./src/app/experimental/drawer/DrawerView.js","webpack:///./src/app/experimental/toolbar/ToolbarButton.js","webpack:///./src/app/components/iconset/OfflineIcon.js","webpack:///./src/app/experimental/toolbar/ToolbarTitle.js","webpack:///./src/app/components/iconset/MenuIcon.js","webpack:///./src/app/experimental/toolbar/ToolbarView.js","webpack:///./src/app/experimental/tooltip/TooltipView.js","webpack:///./src/app/experimental/components/UploadDropZone.js","webpack:///./src/app/session/manager/notification/components/NotificationView.js","webpack:///./src/app/experimental/components/IconStateButton.js","webpack:///./src/app/components/iconset/FullscreenIcon.js","webpack:///./src/app/components/iconset/FullscreenExitIcon.js","webpack:///./src/app/experimental/components/FullscreenWidget.js","webpack:///./src/app/experimental/menus/export/ExportPanel.js","webpack:///./src/app/util/theme/components/StyleInput.js","webpack:///./src/app/experimental/panels/PanelButton.js","webpack:///./src/app/experimental/menus/option/PreviewView.js","webpack:///./src/app/experimental/menus/option/OptionPanel.js","webpack:///./src/app/experimental/menus/language/LanguagePanel.js","webpack:///./src/app/modules/Modules.js","webpack:///./src/app/experimental/menus/moduleloader/ModuleLoaderPanel.js","webpack:///./src/app/experimental/toolbar/ToolbarDivider.js","webpack:///./src/app/experimental/toolbar/ToolbarUploadButton.js","webpack:///./src/app/components/iconset/PageEmptyIcon.js","webpack:///./src/app/components/iconset/UndoIcon.js","webpack:///./src/app/components/iconset/RedoIcon.js","webpack:///./src/app/components/iconset/BugIcon.js","webpack:///./src/app/components/iconset/WorldIcon.js","webpack:///./src/app/components/iconset/HelpIcon.js","webpack:///./src/app/components/iconset/SettingsIcon.js","webpack:///./src/app/util/storage/AbstractAutoSaveHandler.js","webpack:///./src/app/experimental/AppSaver.js","webpack:///./src/app/experimental/ColorSaver.js","webpack:///./src/app/util/ColorTransform.js","webpack:///./src/app/experimental/LanguageSaver.js","webpack:///./src/app/util/storage/AutoSave.js","webpack:///./src/app/util/file/export/Downloader.js","webpack:///./src/app/util/file/export/TextDownloader.js","webpack:///./src/app/util/file/FileHelper.js","webpack:///./src/app/util/file/export/SVGImageDownloader.js","webpack:///./src/app/util/file/export/JSONDownloader.js","webpack:///./src/app/util/file/export/DownloadManager.js","webpack:///./src/app/util/file/export/ExportManager.js","webpack:///./src/app/util/file/import/ImportManager.js","webpack:///./src/app/util/URLHelper.js","webpack:///./src/app/session/Session.js","webpack:///./src/app/session/manager/DrawerManager.js","webpack:///./src/app/session/manager/MenuManager.js","webpack:///./src/app/session/manager/ViewportManager.js","webpack:///./src/app/session/manager/hotkey/HotKeyView.js","webpack:///./src/app/session/manager/undo/UndoManager.js","webpack:///./src/app/session/manager/TooltipManager.js","webpack:///./src/app/util/theme/style/StyleEntry.js","webpack:///./src/app/util/theme/Theme.js","webpack:///./src/app/util/theme/style/SourceStyleEntry.js","webpack:///./src/app/util/theme/ThemeManager.js","webpack:///./src/app/util/broadcast/Broadcast.js","webpack:///./src/app/session/manager/broadcast/RemoteSession.js","webpack:///./src/app/session/manager/broadcast/BroadcastManager.js","webpack:///./src/app/experimental/App.js","webpack:///./src/app/index.js","webpack:///./src/app/changelog.js","webpack:///./src/app/session/manager/RenderManager.js","webpack:///./src/app/components/iconset/UploadIcon.js","webpack:///./src/app/session/manager/notification/Notification.js","webpack:///./src/app/session/manager/notification/components/SequenceNotificationLayout.js","webpack:///./src/app/session/manager/notification/NotificationManager.js","webpack:///./src/app/components/iconset/TinyDownIcon.js","webpack:///./src/app/components/iconset/TinyUpIcon.js","webpack:///./src/app/experimental/panels/PanelSection.js","webpack:///./src/app/experimental/components/IconButton.js","webpack:///./src/app/session/SessionExporter.js","webpack:///./src/app/util/file/export/Exporter.js","webpack:///./src/app/experimental/panels/PanelSwitch.js","webpack:///./src/app/components/iconset/CrossIcon.js","webpack:///./src/app/experimental/components/IconUploadButton.js","webpack:///./src/app/components/iconset/DownloadIcon.js","webpack:///./src/app/components/iconset/EditPencilIcon.js","webpack:///./src/app/deprecated/system/formattedinput/FormattedInput.js","webpack:///./src/app/util/file/import/TextUploader.js","webpack:///./src/app/util/file/import/Uploader.js","webpack:///./src/app/util/ColorHelper.js","webpack:///./src/app/session/manager/notification/components/DefaultNotificationLayout.js","webpack:///./src/app/util/storage/LocalStorage.js"],"names":["guid","s4","Math","floor","random","toString","substring","lerp","a","b","dt","stringHash","value","hash","i","len","length","imul","charCodeAt","getDirectionalVector","x1","y1","x2","y2","dist","angleOffset","dst","x","y","dx","dy","angle","atan2","cos","sin","getMidPoint","PanelContainer","props","title","this","id","className","Style","panel_container","style","panel_title","panel_content","children","panel_bottom","React","Component","CTRL_KEY","SHIFT_KEY","HotKeyManager","_hotkeys","_cachedEvent","ctrlKey","metaKey","altKey","shiftKey","code","_prevHotKey","_repeatCount","_enabled","_altHotkey","onKeyDown","bind","onKeyUp","name","keys","callback","Array","isArray","Error","ctrlIndex","indexOf","splice","metaIndex","altIndex","shiftIndex","charKey","ctrl","alt","shift","result","localizedKeys","unshift","session","window","addEventListener","removeEventListener","enabled","e","hotkey","matchesHotKeyEvent","event","eventCtrl","eventAlt","eventShift","eventKey","flag","push","document","activeElement","HTMLInputElement","HTMLTextAreaElement","hasAttribute","repeat","captureKeyEvent","findMatchingHotKey","preventDefault","stopPropagation","isKeyUp","Logger","tag","message","console","call","err","out","ExpandDownIcon","xmlns","width","height","viewBox","d","PureComponent","DRAWER_WIDTH_CSSVAR","DRAWER_MIN_WIDTH","DrawerView","ref","drawerElement","state","open","tabIndex","soloClass","viewportColor","_handlingGrab","_handlingResize","_isfull","_hasintent","_prevWidth","_resizeTimeout","_resizeEndTimeout","_sideways","onDrawerHandleGrab","onDrawerHandleRelease","onDrawerHandleMove","onDrawerExpand","onWindowResize","fullscreen","setDrawerWidth","setState","prev","panels","color","hasIntent","drawerSide","side","drawerOffsetY","getBoundingClientRect","top","isDrawerSideBottom","documentSize","documentElement","clientHeight","clientWidth","minSize","getCSSDrawerWidth","setProperty","toggleDrawer","setTimeout","clearTimeout","clientY","clientX","abs","drawerPanels","drawerDirection","direction","shouldDrawerHide","hide","drawerSoloClass","isDrawerOpen","shouldDrawerBarSideways","showDrawerHandle","shouldDrawerOpenFull","shouldHideDrawerContent","showDrawerTabs","viewportStyle","app_content","app_viewport","app_drawer","drawer_handle","onMouseDown","drawer_content","drawer_content_bar","IconButton","drawer_tab_expander","onClick","map","current","isCurrentTab","disabled","key","drawer_tab","setCurrentTab","drawer_content_panel_container","drawer_content_panel","ComponentClass","drawer_panel_container","drawer_panel","panelProps","drawer","parseInt","getComputedStyle","getPropertyValue","replace","ToolbarButton","IconClass","icon","toolbar_button","OfflineIcon","ToolbarTitle","inputElement","onSubmit","resetValue","newValue","prevValue","onChange","SubtitleClass","subtitle","offline","navigator","onLine","title_container","title_input_container","FormattedInput","defaultValue","offline_status","title_label","title_subtitle","MenuIcon","TOOLBAR_DEFAULT_MENU_INDEX","ToolbarView","toolbarElement","menuIndex","onBarExpand","onTitleChange","menus","toggleBar","setProjectName","Children","child","containerOnly","toolbarMenus","toolbarMenuIndex","ToolbarMenu","showCustomToolbarMenu","onTitleClick","hasButtons","count","isBarOpen","shouldBarHide","showBarExpander","app_bar","bar_menu","menu_container","menuProps","toolbar","display","flexDirection","marginTop","menu_button_container","renderMenuButtons","bar_toolbar","toolbar_title","getProjectName","toolbar_button_container","renderToolbarButtons","toolbar_expander","CrossIcon","ONESHOT_MODE","TooltipView","_tooltipTimeout","index","initial","mode","visible","nextIndex","setTooltipIndex","tooltipIndex","updateTooltip","tooltip_container","opacity","UploadDropZone","_waiting","onDragEnter","onDragLeave","onFileDrop","dataTransfer","fileBlob","items","dataItems","file","kind","getAsFile","dataFiles","files","clear","clearData","isWaitingForFile","upload_container","UploadIcon","upload_icon","only","NotificationView","notificationManager","notifications_container","getNotifications","notification","layoutID","getLayoutID","NotificationLayout","getNotificationLayout","DefaultNotificationLayout","getID","getMessage","getProps","IconStateButton","prevIndex","FullscreenIcon","FullscreenExitIcon","FullscreenWidget","app","fullscreen_button","ExportPanel","exportType","exporter","getApp","getExportManager","getExporterByExportType","SessionExporter","getIconClass","getLabel","panel_button","tryExportFile","exportTypes","getExportTypes","I18N","renderExporterButton","StyleInput","target","setValue","variableName","getName","variableValue","getValue","inputID","type","htmlFor","PanelButton","button_container","PreviewView","preview_container","preview_app","preview_toolbar","preview_workspace","preview_viewport","preview_node","left","preview_notifications","preview_notification_info","preview_notification_error","preview_notification_warning","preview_notification_success","preview_drawer","DISABLE_EXIT_WARNING_STORAGE_ID","OptionPanel","theme","customTheme","exitWarning","LocalStorage","getData","onChangeTheme","themeManager","getThemeManager","prevTheme","loadTheme","getStyleGroupNames","groupName","styles","getStylesByGroup","PanelSection","full","input_option","renderStyleGroups","reset","PanelSwitch","checked","setData","version","process","LanguagePanel","localizedName","langFile","language_button","fetchLanguageFile","language_button_list","renderLanguageButton","Modules","experimental","fetch","then","_","ModuleLoaderPanel","moduleKey","moduleInfo","useExperimental","isExperimental","module_button","restartSession","module_button_list","Object","renderModuleButton","ToolbarDivider","divider","ToolbarUploadButton","IconUploadButton","ToolbarButtonStyle","accept","onUpload","PageEmptyIcon","UndoIcon","RedoIcon","BugIcon","WorldIcon","HelpIcon","SettingsIcon","AbstractAutoSaveHandler","dataStorage","AppSaver","_app","currentModuleName","getSession","getCurrentModule","getModuleName","data","getDataAsObject","getImportManager","tryImportFileFromData","tryExportTargetToData","setDataAsObject","ColorSaver","_themeManager","getStyleByName","getCurrentTheme","getStyles","styleName","styleValue","dark","hex","inverted","ColorHelper","invert","lite","LanguageSaver","languageMapping","set","get","AutoSave","_init","_handlers","_interval","_storage","initialize","isSupported","onAutoSaveLoad","onIntervalUpdate","setInterval","destroy","clearInterval","onAutoSaveUnload","onAutoSaveUpdate","registerHandler","handler","unregisterHandler","load","unload","downloadURL","filename","url","element","createElement","headerIndex","setAttribute","body","appendChild","click","removeChild","Promise","resolve","Downloader","fileName","downloadType","fileData","opts","TextDownloader","encodeURIComponent","getFileExtFromName","lastIndexOf","SVGImageDownloader","SVGElement","fileExt","imageType","blob","svg","svgString","XMLSerializer","serializeToString","Blob","reject","URL","createObjectURL","canvas","ctx","getContext","pixelRatio","devicePixelRatio","setTransform","image","Image","onload","drawImage","revokeObjectURL","imageDataType","imageURI","toDataURL","src","JSONDownloader","JSON","stringify","DownloadManager","_downloaders","Map","addDownloader","downloader","downloadTypes","has","downloaders","getDownloadersByDownloadType","reduce","acc","downloadFile","size","ExportManager","_exporters","_exportTypes","_downloaderManager","unregisterExportType","tryDownloadFile","exportTarget","values","ImportManager","_importers","_metaTypes","_textUploader","TextUploader","importer","fileTypes","fileType","_addFileType","importers","_removeFileType","fileExtIndex","metaTypes","sort","patternA","match","patternB","File","uploadFile","metaType","endsWith","getImportersByFileType","importFileData","from","join","getCurrentURL","location","href","getURLParameters","parser","vars","search","split","pair","decodeURIComponent","MODULE_TIMEOUT","Session","_name","_module","_moduleClass","_moduleStarted","_sessionID","_listeners","listener","moduleName","urlParams","URLHelper","ModuleClass","forceUpdate","onSessionStart","alert","stopSession","startSession","update","onSessionStop","getElementById","string","innerHTML","separator","trim","DrawerManager","_panelClasses","_panelProps","panelClass","MenuManager","_subtitleComponentClass","componentClass","getToolbarComponent","closeBar","ViewportManager","_viewClasses","_viewProps","viewClass","HotKeyView","_cachedHotKeys","_cacheTimeout","hotKeyManager","showHotKeys","isEnabled","getCurrentlyPossibleHotKeys","useCount","getCurrentHotKeyRepeatCount","currentHotKey","getCurrentHotKey","hotkey_container","isActive","hotkey_label","hotkey_name","UndoManager","history","offsetIndex","_handlerFactory","factory","args","captureEventAsHandler","error","eventHandler","pop","canUndo","canRedo","applyUndo","applyRedo","TooltipManager","_tooltips","_transitionMode","transitionMode","tooltip","StyleEntry","_value","Theme","themeName","styleMapping","_styles","request","XMLHttpRequest","onreadystatechange","readyState","status","responseText","onerror","setRequestHeader","send","themeData","lines","line","startsWith","SourceStyleEntry","styleManager","sourceStyle","sourceTransform","getComputedValue","_styleManager","_children","_source","_sourceTransform","propagateChange","sourceValue","setComputedValue","updateValue","ThemeManager","_groups","_element","_elementTheme","_theme","styleEntry","computedValue","addStyle","styleGroup","removeStyle","themeStyle","getSourceStyle","elementStyle","fetchThemeFile","themeFile","loadThemeFile","Broadcast","_channel","channelName","BroadcastChannel","onmessage","onBroadcastMessage","close","addListener","removeListener","sendMessage","source","destination","assign","postMessage","ev","messageType","messageSource","messageDestination","getListeners","getChannel","self","RemoteSession","sessionID","sessionName","_sessionName","BroadcastManager","_session","_remoteSessions","setBroadcastManager","getSessionID","App","INSTANCE","_toolbarComponent","createRef","_drawerComponent","_viewport","_labeleditor","_colorSaver","_langSaver","_saver","_exportManager","_importManager","_undoManager","_hotKeyManager","_drawerManager","_menuManager","_viewportManager","_renderManager","RenderManager","_tooltipManager","_notificationManager","NotificationManager","_broadcastManager","_mediaQuerySmallWidthList","matchMedia","_mediaQuerySmallHeightList","onModuleTitleClick","onToolbarClearButton","componentWillUnmount","currentModule","addPanelClass","registerHotKey","registerAltHotKey","SHOW_LABEL","getEventHandlerFactory","getUndoManager","undo","redo","hasTooltips","addTooltip","setElement","register","colorPrimary","ColorTransform","colorBackground","colorSurface","colorSurfaceError","colorSurfaceSuccess","colorSurfaceWarning","registerAppStyles","setSubtitleComponentClass","setCurrentMenu","updateSession","toolbarComponent","drawerComponent","setEnabled","isDrawerFullscreen","renderLayerName","renderers","getRenderersByLayer","R","constructor","currentModuleLocalizedName","getLocalizedModuleName","hasSmallWidth","matches","hasSmallHeight","isFullscreen","exportManager","importManager","undoManager","drawerManager","menuManager","tooltipManager","drawerPanelClasses","getPanelClasses","drawerPanelProps","getPanelProps","menuPanelClasses","menuPanelProps","MenuSubtitleClass","getSubtitleComponentClass","app_container","getFileTypesAsAcceptString","tryImportFile","pushNotification","ERROR_LAYOUT_ID","isEmpty","DownloadIcon","EditPencilIcon","getTransitionMode","getTooltips","renderRenderLayer","RENDER_LAYER_WORKSPACE_PRE","RENDER_LAYER_WORKSPACE","RENDER_LAYER_WORKSPACE_POST","fullscreen_widget","root","changeLog","show","log","updateApplication","time","ReactDOM","render","requestAnimationFrame","onWindowLoad","returnValue","onWindowUnload","isUpdateAvailable","hasUpdate","Changelog","_renderMapping","layerID","rendererClass","Notification","tags","_message","_layoutID","_tags","_props","_id","removeNotification","includes","SequenceNotificationLayout","notification_container","marginBottom","WARNING_LAYOUT_ID","SUCCESS_LAYOUT_ID","SEQUENCE_LAYOUT_ID","_layouts","_notifications","notificationLayout","clearNotifications","hasTag","registerNotificationLayout","styleType","STYLE_TYPE_DEFAULT","STYLE_TYPE_WARNING","STYLE_TYPE_ERROR","STYLE_TYPE_SUCCESS","TinyDownIcon","TinyUpIcon","isOpen","isDisabled","isFull","section_container","section_header","section_content_container","section_content","refButton","showButtonLabel","icon_button","_fileType","module","getModuleVersion","timestamp","Date","onExportSession","onPostExportSession","onStringifySession","switch_container","panel_switch","switch_slider","switch_label","onFileUpload","upload_button","upload_input","ignoreSaveOnExit","onBlur","nextProps","hasFocus","select","focus","blur","filter","captureOnExit","formatValue","next","multiline","selectionStart","selectionEnd","formatter","rows","reader","FileReader","readAsText","RGB_WHITE","RGB_BLACK","grayscaleRGB","rgb","grayscaleAmount","blendRGB","percent","rgb1","rgb2","blendAmount","round","invertRGB","blackwhite","HEXtoRGB","slice","red","green","blue","RGBtoHEX","localStorage","hidden","msHidden","webkitHidden","setItem","removeItem","getItem","objectValue","parse"],"mappings":"yFAUO,SAASA,IAEZ,SAASC,IAEL,OAAOC,KAAKC,MAA4B,OAArB,EAAID,KAAKE,WAAqBC,SAAS,IAAIC,UAAU,GAE5E,OAAOL,IAAOA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAO,IAAMA,IAAOA,IAAOA,IAuB7E,SAASM,EAAKC,EAAGC,EAAGC,GAEvB,OAAOF,GAAK,EAAIE,GAAMD,EAAIC,EASvB,SAASC,IAGZ,IAFJ,IAD2BC,EAC3B,uDADiC,GAEzBC,EAAO,EACHC,EAAI,EAAGC,EAAMH,EAAMI,OAAQF,EAAIC,EAAKD,IAExCD,EAAOX,KAAKe,KAAK,GAAIJ,GAAQD,EAAMM,WAAWJ,GAAK,EAEvD,OAAOD,EAeJ,SAASM,EAAqBC,EAAIC,EAAIC,EAAIC,GACjD,IADqDC,EACrD,uDAD0D,EAAGC,EAC7D,uDADyE,EAAGC,EAC5E,uDADgF,CAACC,EAAG,EAAGC,EAAG,GAEhFC,EAAKP,EAAKF,EACVU,EAAKP,EAAKF,EACVU,EAAQ7B,KAAK8B,MAAMF,EAAID,GAAMJ,EAGnC,OAFAC,EAAIC,EAAIzB,KAAK+B,IAAIF,GAASP,EAC1BE,EAAIE,EAAI1B,KAAKgC,IAAIH,GAASP,EACnBE,EAaJ,SAASS,EAAYf,EAAIC,EAAIC,EAAIC,GACxC,IAD4CG,EAC5C,uDADgD,CAACC,EAAG,EAAGC,EAAG,GAItD,OAFAF,EAAIC,EAAIP,GAAME,EAAKF,GAAM,EACzBM,EAAIE,EAAIP,GAAME,EAAKF,GAAM,EAClBK,EAhGX,2K,g3BCGMU,E,YAEF,WAAYC,GACZ,O,4FAAA,+BACUA,I,gSAMN,IAAMC,EAAQC,KAAKF,MAAMC,MAEzB,OACI,yBAAKE,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,IAAMC,gBACb,IAAMJ,KAAKF,MAAMI,UACrBG,MAAOL,KAAKF,MAAMO,OAClB,yBAAKH,UAAWC,IAAMG,aAClB,4BAAKP,IAET,yBAAKG,UAAWC,IAAMI,eACjBP,KAAKF,MAAMU,UAEhB,yBAAKN,UAAWC,IAAMM,qB,8BAvBTC,IAAMC,WA8BpBd,O,0QCjCR,IAAMe,EAAW,UAGXC,EAAY,QAGnBC,E,WAEF,c,4FACA,SACId,KAAKe,SAAW,GAChBf,KAAKgB,aAAe,CAChBC,SAAS,EACTC,SAAS,EACTC,QAAQ,EACRC,UAAU,EACVC,KAAM,MAEVrB,KAAKsB,YAAc,KACnBtB,KAAKuB,aAAe,EACpBvB,KAAKwB,UAAW,EAEhBxB,KAAKyB,WAAa,KAElBzB,KAAK0B,UAAY1B,KAAK0B,UAAUC,KAAK3B,MACrCA,KAAK4B,QAAU5B,KAAK4B,QAAQD,KAAK3B,M,8DAGtB6B,EAAMC,EAAMC,GAEvB,IAAKC,MAAMC,QAAQH,GAAO,MAAM,IAAII,MAAM,iCAC1C,IAAMC,EAAYL,EAAKM,QAAQxB,GAC3BuB,GAAa,GAAGL,EAAKO,OAAOF,EAAW,GAC3C,IAAMG,EAAYR,EAAKM,QAhCP,QAiCZE,GAAa,GAAGR,EAAKO,OAAOC,EAAW,GAC3C,IAAMC,EAAWT,EAAKM,QAjCP,OAkCXG,GAAY,GAAGT,EAAKO,OAAOE,EAAU,GACzC,IAAMC,EAAaV,EAAKM,QAAQvB,GAEhC,GADI2B,GAAc,GAAGV,EAAKO,OAAOG,EAAY,GAC1B,GAAfV,EAAKrD,OAAa,MAAM,IAAIyD,MAAM,yCACtC,IAAMO,EAAUX,EAAK,GAEfY,EAAOP,GAAa,GAAKG,GAAa,EACtCK,EAAMJ,GAAY,EAClBK,EAAQJ,GAAc,EAEtBK,EAAS,CACXhB,KAAMA,EACNiB,eAAgBJ,EAAO,UAAY,KACtCC,EAAM,SAAW,KACjBC,EAAQ,WAAa,IACtBH,EACIA,QAASA,EACTxB,QAASyB,EACTvB,OAAQwB,EACRvB,SAAUwB,EACVb,SAAUA,GAKd,OAFA/B,KAAKe,SAASgC,QAAQF,GAEf7C,O,wCAIO6B,EAAME,GAEpB,GAAI/B,KAAKyB,WAAY,MAAM,IAAIS,MAAM,uCAYrC,OAVAlC,KAAKyB,WAAa,CACdI,KAAMA,EACNiB,cAAe,MACfL,QAAS,KACTxB,SAAS,EACTE,QAAQ,EACRC,UAAU,EACVW,SAAUA,GAGP/B,O,qCAIIgD,GAEXC,OAAOC,iBAAiB,UAAWlD,KAAK0B,WACxCuB,OAAOC,iBAAiB,QAASlD,KAAK4B,SAEtC5B,KAAKwB,UAAW,I,oCAINwB,GAEVhD,KAAKwB,UAAW,EAEhBxB,KAAKsB,YAAc,KACnBtB,KAAKuB,aAAe,EACpBvB,KAAKe,SAAStC,OAAS,EACvBuB,KAAKyB,WAAa,KAElBwB,OAAOE,oBAAoB,UAAWnD,KAAK0B,WAC3CuB,OAAOE,oBAAoB,QAASnD,KAAK4B,W,iCAGlCwB,GAEPpD,KAAKwB,SAAW4B,I,kCAKhB,OAAOpD,KAAKwB,W,yCAGG6B,GACnB,2BACI,YAAoBrD,KAAKe,SAAzB,+CACA,KADUuC,EACV,QACI,GAAIC,EAAmBF,EAAGC,GAAS,OAAOA,GAHlD,kFAKI,OAAO,O,yCAKP,OAAOtD,KAAKsB,c,oDAKZ,OAAOtB,KAAKuB,e,oDAIhB,IAD4BpC,EAC5B,uDADgC,GAEtBqE,EAAQxD,KAAKgB,aACbyC,EAAYD,EAAMvC,SAAWuC,EAAMtC,QACnCwC,EAAWF,EAAMrC,OACjBwC,EAAaH,EAAMpC,SACzB,IAAKqC,IAAcC,IAAaC,EAAY,OAAOxE,EACnD,IAAMyE,EAAWJ,EAAMnC,KAEnBwB,EAAS,KARjB,uBASI,YAAoB7C,KAAKe,SAAzB,+CACA,KADUuC,EACV,QACQO,GAAO,EACX,GAAIJ,EAAYH,EAAOrC,QACvB,CAEI,GAAKwC,EAEA,SAFWI,GAAO,EAI3B,GAAIH,EAAWJ,EAAOnC,OACtB,CAEI,GAAKuC,EAEA,SAFUG,GAAO,EAI1B,GAAIF,EAAaL,EAAOlC,SACxB,CAEI,GAAKuC,EAEA,SAFYE,GAAO,EAKvBA,GAAQD,IAAaN,EAAOb,UAE7BI,EAASS,GAGbnE,EAAI2E,KAAKR,IAvCjB,kFA0CI,OAAIT,GACQ1D,I,gCAGNkE,GAEN,GAAKrD,KAAKwB,YAGNuC,SAASC,yBAAyBC,kBAClCF,SAASC,yBAAyBE,qBAClCH,SAASC,cAAcG,aAAa,oBAEnCd,EAAEe,QACP,CACIpE,KAAKqE,gBAAgBhB,GAAG,GAExB,IAAIR,EAAS7C,KAAKsE,mBAAmBtE,KAAKgB,eACrC6B,GAAUU,EAAmBF,EAAGrD,KAAKyB,cAAaoB,EAAS7C,KAAKyB,YAEjEoB,IAEI7C,KAAKsB,cAAgBuB,IAEnB7C,KAAKuB,cAIPvB,KAAKsB,YAAcuB,EACnB7C,KAAKuB,aAAe,GAGxBsB,EAAOd,WAEPsB,EAAEkB,iBACFlB,EAAEmB,sB,8BAKNnB,GAECrD,KAAKwB,UAENxB,KAAKqE,gBAAgBhB,GAAG,KAExBrD,KAAKsB,YAAc,KACnBtB,KAAKuB,aAAe,K,sCAIZ8B,GAChB,IADmBoB,EACnB,wDAMI,OALAzE,KAAKgB,aAAaC,QAAUoC,EAAEpC,QAC9BjB,KAAKgB,aAAaE,QAAUmC,EAAEnC,QAC9BlB,KAAKgB,aAAaG,OAASkC,EAAElC,OAC7BnB,KAAKgB,aAAaI,SAAWiC,EAAEjC,SAC/BpB,KAAKgB,aAAaK,KAAOoD,EAAU,KAAQpB,EAAEhC,MAAQ,KAC9CoD,KAAazE,KAAKgB,aAAaC,SAAWjB,KAAKgB,aAAaE,SAAWlB,KAAKgB,aAAaG,QAAUnB,KAAKgB,aAAaI,e,gCAMpI,SAASmC,EAAmBF,EAAGC,GAE3B,OAAIA,EAAOrC,WAAaoC,EAAEpC,SAAWoC,EAAEnC,WACnCoC,EAAOnC,SAAWkC,EAAElC,SACpBmC,EAAOlC,WAAaiC,EAAEjC,YACtBkC,EAAOb,SAAWa,EAAOb,UAAYY,EAAEhC,QAPhCP,O,uPC5NA4D,E,gLAfAC,EAAKC,GAEZ,IAAM/B,EAAS,IAAM8B,EAAM,KAAOC,EAC9BC,SAAqC,mBAAnBA,QAAO,KAEzBA,QAAO,IAAQC,KAAKjC,K,4BAIf8B,EAAKC,GAClB,IAD2BG,EAC3B,uDADiC,KAE7BL,EAAOM,IAAIL,GAAMI,EAAMA,EAAIH,QAAU,MAAQ,IAAMA,O,43BCG5CK,E,YAdX,WAAYnF,GAAO,O,4FAAA,+BAAQA,I,gSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,uD,8BAXK5E,IAAM6E,e,k7BCInC,IAAMC,EAAsB,iBAItBC,EAAmB,IAuaVC,E,YAhZX,WAAY5F,GACZ,a,4FAAA,UACI,E,qEAAA,qBAAMA,KAED6F,IAAM,KACX,EAAKC,cAAgB,KAErB,EAAKC,MAAQ,CACTC,MAAM,EACNC,SAAU,EACVC,UAAW,KACXC,cAAe,MAInB,EAAKC,eAAgB,EACrB,EAAKC,iBAAkB,EAEvB,EAAKC,SAAU,EAEf,EAAKC,YAAa,EAElB,EAAKC,WAAab,EAElB,EAAKc,eAAiB,KACtB,EAAKC,kBAAoB,KAEzB,EAAKC,WAAY,EAEjB,EAAKC,mBAAqB,EAAKA,mBAAmB/E,KAAxB,MAC1B,EAAKgF,sBAAwB,EAAKA,sBAAsBhF,KAA3B,MAC7B,EAAKiF,mBAAqB,EAAKA,mBAAmBjF,KAAxB,MAC1B,EAAKkF,eAAiB,EAAKA,eAAelF,KAApB,MACtB,EAAKmF,eAAiB,EAAKA,eAAenF,KAApB,MAhC1B,E,2SAsCIsB,OAAOC,iBAAiB,SAAUlD,KAAK8G,gBAAgB,K,6CAMvD7D,OAAOE,oBAAoB,SAAUnD,KAAK8G,kB,mCAI9C,IADWC,EACX,wDAD+BhF,EAC/B,uDAD0C,KAElCgF,GAEA/G,KAAKgH,eApEqB,QAoEkB,GAG3ChH,KAAK6F,MAAMC,MAEZ9F,KAAKiH,SAAS,CAAEnB,MAAM,GAAQ/D,K,oCAKtC,IADYA,EACZ,uDADuB,KAEf/B,KAAK6F,MAAMC,MAEX9F,KAAKiH,SAAS,CAAEnB,MAAM,GAAS/D,K,qCAKvC,IADaA,EACb,uDADwB,KAEpB/B,KAAKiH,UAAS,SAACC,EAAMpH,GAEjB,MAAO,CAAEgG,MAAOoB,EAAKpB,QACtB/D,K,qCAKH,OAAO/B,KAAK6F,MAAMC,O,2CAKlB,OAAO9F,KAAKoG,U,oCAGFL,GAEL/F,KAAKF,MAAMqH,SACZpB,GAAY/F,KAAKF,MAAMqH,OAAO1I,SAAQsH,EAAW,GACjD/F,KAAK6F,MAAMC,MAAQ9F,KAAK6F,MAAME,WAAaA,EAGvC/F,KAAKoG,QAELpG,KAAKgH,eAAehH,KAAKsG,YAIzBtG,KAAKgH,eApHiB,QAoHsB,GAMhDhH,KAAKiH,SAAS,CAAEnB,MAAM,EAAMC,SAAUA,O,2CAM1C,OAAO/F,KAAK6F,MAAME,W,mCAGTA,GAET,OAAO/F,KAAK6F,MAAME,WAAaA,I,uCAIlBqB,GAEbpH,KAAKiH,SAAS,CAAEhB,cAAemB,M,yCAM/B,OAAOpH,KAAK6F,MAAMI,gB,yCAGHD,GACnB,IAD8BjE,EAC9B,uDADyC,KAErC/B,KAAKiH,SAAS,CAAEjB,UAAWA,GAAajE,K,qCAG7B1D,GACf,IADsBgJ,IACtB,yDACI,GAAKrH,KAAK4F,eAAkB5F,KAAK2F,IAAjC,CAEA3F,KAAKqG,WAAagB,EAElB,IAAMC,EAAatH,KAAKF,MAAMyH,KACxBC,EAAgBxH,KAAK2F,IAAI8B,wBAAwBC,IACjDC,EA/JoB,WA+JCL,EACrBM,EAAeD,EACjB5D,SAAS8D,gBAAgBC,aAAeN,EACxCzD,SAAS8D,gBAAgBE,YACvBC,EAAUvC,EAEhB,GAAqB,iBAAVpH,EAEP,OAAQA,GAER,IA3K0B,OA4KtB2B,KAAKoG,SAAU,EACfpG,KAAKsG,WAAa2B,EAAkBjI,KAAK4F,eACzC,MACJ,IA9KyB,MA+KrB5F,KAAKoG,SAAU,EACfpG,KAAK4F,cAAcvF,MAAM6H,YAAY1C,EAAqBwC,EAAU,MACpE,MACJ,QACI,MAAM,IAAI9F,MAAM,oDAGnB,IAAqB,iBAAV7D,EAgBZ,MAAM,IAAI6D,MAAM,+CAdZ7D,EAAQ2J,EAlMc,KAkM2B3J,EAAQ2J,GACzD3J,EAAQuJ,EAlMc,KAoMtBvJ,EAAQuJ,EACR5H,KAAKoG,SAAU,GAIfpG,KAAKoG,SAAU,EAEnBpG,KAAK4F,cAAcvF,MAAM6H,YAAY1C,EAAqBnH,EAAQ,U,uCAWlE2B,KAAK6F,MAAMC,MAAQ9F,KAAKoG,SAExBpG,KAAKgH,eAAehH,KAAKsG,YAGrBtG,KAAKoG,SAGLpG,KAAKmI,gBAKTnI,KAAKmI,iB,qCAIE9E,GACf,WACSrD,KAAKuG,iBAENvG,KAAKuG,eAAiB6B,YAAW,WAa7B,GAXA,EAAK7B,eAAiB,KAGlB,EAAKC,kBAAmB6B,aAAa,EAAK7B,mBACzC,EAAKL,iBAAkB,EAC5B,EAAKK,kBAAoB4B,YAAW,WAEhC,EAAK5B,kBAAoB,KACzB,EAAKL,iBAAkB,IACxB,KAEE,EAAKP,eAAkB,EAAKD,IAAjC,CAEA,IAAM2B,EAAa,EAAKxH,MAAMyH,KACxBC,EAAgB,EAAK7B,IAAI8B,wBAAwBC,IAEjDE,EAnPY,WAkPSN,EAEvBvD,SAAS8D,gBAAgBC,aAAeN,EACxCzD,SAAS8D,gBAAgBE,YAE7B,GAAI,EAAK3B,QACT,CACI,GAAI,EAAKC,WAAY,OACjB,EAAKC,WApQS,IAoQoCsB,IAElD,EAAKxB,SAAU,EACf,EAAKR,cAAcvF,MAAM6H,YAAY1C,EAAqB,EAAKc,WAAa,YAK7D2B,EAAkB,EAAKrC,eA5QxB,IA6Q+BgC,IAE7C,EAAKxB,SAAU,EACf,EAAKC,YAAa,MA9QP,Q,yCAqRZhD,IAEVrD,KAAKkG,eAAiBlG,KAAK6F,MAAMC,MAElC9F,KAAKkG,eAAgB,EACrBlG,KAAKsG,WAAa2B,EAAkBjI,KAAK4F,eACzC7B,SAASb,iBAAiB,UAAWlD,KAAK2G,uBAC1C5C,SAASb,iBAAiB,YAAalD,KAAK4G,qBAI5C5G,KAAK2G,sBAAsBtD,K,4CAIbA,GAEdrD,KAAKkG,gBAELnC,SAASZ,oBAAoB,UAAWnD,KAAK2G,uBAC7C5C,SAASZ,oBAAoB,YAAanD,KAAK4G,oBAC/C5G,KAAKkG,eAAgB,EACrBlG,KAAKsG,WAAa2B,EAAkBjI,KAAK4F,kB,yCAI9BvC,GAEf,IACMsE,EA1SoB,WAySP3H,KAAKF,MAAMyH,KAO1B1E,GALiB8E,EACjB5D,SAAS8D,gBAAgBC,aACzB/D,SAAS8D,gBAAgBE,cACRJ,EAAqBtE,EAAEiF,QAAUjF,EAAEkF,SA1T9B,GA8TrBZ,GAAsBhK,KAAK6K,IAAI3F,EAzTJ,KAJF,KA+T1BA,EA3T4B,KA6ThC7C,KAAKgH,eAAenE,K,+BAKxB,WACU4F,EAAezI,KAAKF,MAAMqH,OAC1BG,EAAatH,KAAKF,MAAMyH,MA5TL,QA6TnBmB,EAAkB1I,KAAKF,MAAM6I,WA3TI,aA4TjCC,EAAmB5I,KAAKF,MAAM+I,OAAQ,EACtCC,EAAkB9I,KAAK6F,MAAMG,UAE7B+C,EAAe/I,KAAK6F,MAAMC,KAE1B6B,EApUoB,WAoUCL,EACrB0B,IAA2BrB,GAAwBoB,GAnUpB,aAmUoCL,GACnEO,EAAmBF,GAAgB/I,KAAKkG,cACxCgD,EAAuBlJ,KAAKoG,QAC5B+C,EAAoEnJ,KAAKkG,eAAiBlG,KAAKmG,kBAAsB4C,EACrHK,EAAiBL,IAAgB,EAGvC/I,KAAKyG,UAAYuC,EAEjB,IAAIK,EAAgB,GAMpB,OALiC,OAA7BrJ,KAAK6F,MAAMI,gBAEXoD,EAAa,aAAmBrJ,KAAK6F,MAAMI,eAI3C,yBAAKN,IAAK,SAAAA,GAAG,OAAI,EAAKA,IAAMA,GACxB1F,GAAID,KAAKF,MAAMG,GACfC,UAAWC,IAAMmJ,aACZ3B,EAAqB,WAAa,IAClC,IAAM3H,KAAKF,MAAMI,UACtBG,MAAOL,KAAKF,MAAMO,OAClB,yBAAKH,UAAWC,IAAMoJ,aAAclJ,MAAOgJ,GACtCrJ,KAAKF,MAAMU,UAEhB,yBAAKmF,IAAK,SAAAA,GAAG,OAAI,EAAKC,cAAgBD,GAClCzF,UACIC,IAAMqJ,YACLT,EAAe,SAAW,KAC1BC,EAA0B,wBAA0B,KACpDrB,EAAqB,uBAAyB,KAC9CuB,EAAuB,SAAW,KAClCC,EAA0B,iBAAmB,KAC7CnJ,KAAKmG,gBAAkB,iBAAmB,KAC1CyC,EAAmB,SAAW,KACnC,yBAAK1I,UAAWC,IAAMsJ,eAAiBR,EAAmB,SAAW,IAAKS,YAAa1J,KAAK0G,oBACxF,8BAAO,OAEX,yBAAKxG,UAAWC,IAAMwJ,gBAClB,yBAAKzJ,UAAWC,IAAMyJ,oBAClB,kBAACC,EAAA,EAAD,CAAY3J,UAAWC,IAAM2J,oBAAqBC,QAAS/J,KAAK6G,gBAC5D,kBAAC,EAAD,OAEHuC,GAAkBX,GAAgBA,EAAauB,KAAI,SAAC3G,EAAG9E,GAEpD,IAAK8E,EAAG,OAAO,KACf,IAAKA,EAAC,MAAW,OAAO,KACxB,IAAMtD,EAAQsD,EAAC,MACT4G,EAAU,EAAKC,aAAa3L,GAC5B4L,EAAWrB,GAAmBA,IAAoBzF,EACxD,OACI,uBAAG+G,IAAKrK,EAAQ,IAAMxB,EAClB2B,UAAWC,IAAMkK,YACZJ,EAAU,WAAa,KACvBE,EAAW,aAAe,IAC/BJ,QAAS,kBAAM,EAAKO,cAAc/L,KAClC,+BAAQwB,QAKxB,yBAAKG,UAAWC,IAAMoK,gCAClB,yBAAKrK,UAAWC,IAAMqK,sBACjB/B,GAAgBA,EAAauB,KAAI,SAAC3G,EAAG9E,GAElC,IAAK8E,EAAG,OAAO,KACf,IAAMoH,EAAiBpH,EACjBtD,EAAQsD,EAAC,OAAa,GACtB4G,EAAU,EAAKC,aAAa3L,GAC5B4L,EAAWrB,GAAmBA,IAAoBzF,EACxD,OACI,yBAAK+G,IAAKrK,EAAQ,IAAMxB,EACpB2B,UAAWC,IAAMuK,wBACXT,EAAqB,GAAX,WACXE,EAAW,aAAe,KAC/B,kBAACM,EAAD,GAAgBvK,UAAWC,IAAMwK,cACzB,EAAK7K,MAAM8K,WADnB,CAEIC,OAAQ,mB,8BAtY/BnK,IAAMC,WAoZ/B,SAASsH,EAAkBrC,GAEvB,OAAOkF,SAAS7H,OAAO8H,iBAAiBnF,GAAeoF,iBAAiBxF,GAAqByF,QAAQ,MAAO,K,40BChbzG,IA4BQC,E,YAtBX,WAAYpL,GACZ,O,4FAAA,+BACUA,I,gSAMN,IAAMqL,EAAYnL,KAAKF,MAAMsL,KAC7B,OACI,kBAACvB,EAAA,EAAD,CAAY5J,GAAID,KAAKF,MAAMG,GACvBC,UAAWC,IAAMkL,eAAiB,IAAMrL,KAAKF,MAAMI,UACnDG,MAAOL,KAAKF,MAAMO,MAClBN,MAAOC,KAAKF,MAAMC,MAClBoK,SAAUnK,KAAKF,MAAMqK,SACrBJ,QAAS/J,KAAKF,MAAMiK,SACpB,kBAACoB,EAAD,Y,8BAlBYzK,IAAMC,W,o0BCSnB2K,E,YAdX,WAAYxL,GAAO,O,4FAAA,+BAAQA,I,gSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,qJ,8BAXE5E,IAAM6E,e,uuBCiEjBgG,G,YA3DX,WAAYzL,GACZ,a,4FAAA,UACI,E,qEAAA,qBAAMA,KAED0L,aAAe,KAEpB,EAAKC,SAAW,EAAKA,SAAS9J,KAAd,MALpB,E,gSAQS5B,GAELC,KAAKwL,aAAaE,WAAW3L,K,iCAK7B,OAAOC,KAAKwL,aAAanN,Q,+BAGpBsN,EAAUC,GAGXD,IAAaC,GAET5L,KAAKF,MAAM+L,UAAU7L,KAAKF,MAAM+L,SAASF,K,+BAMrD,WACU5L,EAAQC,KAAKF,MAAMC,MACnB+L,EAAgB9L,KAAKF,MAAMiM,SAC3BC,IAAYC,WAAaA,UAAUC,QACnCnC,EAAU/J,KAAKF,MAAMiK,QAE3B,OACI,yBAAK9J,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,IAAMgM,gBACb,IAAMnM,KAAKF,MAAMI,UACrBG,MAAOL,KAAKF,MAAMO,OAClB,0BAAMH,UAAWC,IAAMiM,uBACnB,kBAACC,EAAA,EAAD,CAAgB1G,IAAK,SAAAA,GAAG,OAAI,EAAK6F,aAAe7F,GAC5C2G,aAActM,KAAKF,MAAMwM,aACzBb,SAAUzL,KAAKyL,WAClBO,GAAW,kBAAC,EAAD,CAAa9L,UAAWC,IAAMoM,kBAE9C,yBAAKrM,UAAWC,IAAMqM,YAAazC,QAASA,GACvChK,EACA+L,GACG,0BAAM5L,UAAWC,IAAMsM,eAAgB1C,QAAS,SAAA1G,GAAC,OAAIA,EAAEmB,oBACnD,kBAACsH,EAAD,c,8BArDDpL,IAAMC,W,ozBCYlB+L,G,YAdX,WAAY5M,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,wD,gCAXD5E,IAAM6E,e,q8BCQ7B,IACMoH,IAA8B,EAsLrBC,G,YAlLX,WAAY9M,GACZ,a,4FAAA,UACI,E,uEAAA,sBAAMA,KAED6F,IAAM,KACX,EAAKkH,eAAiB,KAEtB,EAAKhH,MAAQ,CACTC,MAAM,EACNgH,UAAWH,IAGf,EAAKI,YAAc,EAAKA,YAAYpL,KAAjB,OACnB,EAAKqL,cAAgB,EAAKA,cAAcrL,KAAnB,OAZzB,E,kSAgBA,IADQI,EACR,uDADmB,KAEV/B,KAAK6F,MAAMC,MAGZ9F,KAAKiH,SAAS,CAAEnB,MAAM,EAAMgH,UAAWH,IAA8B5K,K,iCAK7E,IADSA,EACT,uDADoB,KAEZ/B,KAAK6F,MAAMC,MAGX9F,KAAKiH,SAAS,CAAEnB,MAAM,EAAOgH,UAAWH,IAA8B5K,K,kCAK9E,IADUA,EACV,uDADqB,KAEjB/B,KAAKiH,UAAS,SAACC,EAAMpH,GAEjB,MAAO,CAAEgG,MAAOoB,EAAKpB,QACtB/D,K,kCAKH,OAAO/B,KAAK6F,MAAMC,O,qCAGPgH,GAEN9M,KAAKF,MAAMmN,QACZH,GAAa9M,KAAKF,MAAMmN,MAAMxO,SAAQqO,EAAYH,IAGtD3M,KAAKiH,SAAS,CAAEnB,MAAM,EAAMgH,UAAWA,O,4CAKvC,OAAO9M,KAAK6F,MAAMiH,Y,oCAGRA,GAEV,OAAO9M,KAAK6F,MAAMiH,YAAcA,I,kCAGxBzJ,GAERrD,KAAKkN,c,oCAGK7O,GAEV2B,KAAKF,MAAMkD,QAAQmK,eAAe9O,K,wCAGpBmC,GAEd,OAAOE,IAAM0M,SAASpD,IAAIxJ,GAAU,SAAA6M,GAEhC,GJzF6B,YIyFzBA,EAAMvN,MAAMwN,cAA6C,OAAOD,O,2CAIvD7M,GAEjB,OAAOE,IAAM0M,SAASpD,IAAIxJ,GAAU,SAAA6M,GAEhC,GJlG0B,SIkGtBA,EAAMvN,MAAMwN,cAA0C,OAAOD,O,+BAMzE,WACUtN,EAAQC,KAAKF,MAAMC,MACnBgM,EAAW/L,KAAKF,MAAMiM,SACtBwB,EAAevN,KAAKF,MAAMmN,MAC1BO,EAAmBxN,KAAK6F,MAAMiH,UAC9BW,EAAcD,GAAoB,EAAID,EAAaC,GAAoB,KACvEE,EAAuC,MAAfD,EACxBE,EAAe3N,KAAKF,MAAM6N,aAE1B3K,EAAUhD,KAAKF,MAAMkD,QAErB4K,EAAalN,IAAM0M,SAASS,MAAM7N,KAAKF,MAAMU,UAAY,EACzDsN,EAAY9N,KAAK6F,MAAMC,KACvBiI,EAAgB/N,KAAKF,MAAM+I,OAAQ,EACnCmF,EAAkBF,GAAcF,IAjHf,EAmHvB,OACI,yBAAKjI,IAAK,SAAAA,GAAG,OAAI,EAAKA,IAAMA,GACxB1F,GAAID,KAAKF,MAAMG,GACfC,UAAWC,IAAM8N,SACZH,EAAY,SAAW,KACvBC,EAAgB,SAAW,IAC5B,IAAM/N,KAAKF,MAAMI,UACrBG,MAAOL,KAAKF,MAAMO,OAClB,yBAAKH,UAAWC,IAAM+N,UAClB,yBAAKhO,UAAWC,IAAMgO,gBACjBT,EACG,kBAACD,EAAD,MAAiBzN,KAAKF,MAAMsO,UAA5B,CAAuCC,QAASrO,QAEhD,yBAAKK,MAAO,CAACiO,QAAS,OAAQC,cAAe,WACzC,6BACI,uCAGA,mEAGA,oDAIJ,6BACI,gEACA,8EACoD,2BAAI,IAAJ,eAAqB,KADzE,KAGA,gCACO,IADP,cACuB,mCADvB,QACuC,0CADvC,KAGA,uBAAGlO,MAAO,CAACmO,UAAW,QAAtB,yGAMhB,yBAAKtO,UAAWC,IAAMsO,uBACjBzO,KAAK0O,kBAAkB1O,KAAKF,MAAMU,YAG3C,yBAAKmF,IAAK,SAAAA,GAAG,OAAI,EAAKkH,eAAiBlH,GAAKzF,UAAWC,IAAMwO,aACzD,kBAAC,GAAD,CAAczO,UAAWC,IAAMyO,cAC3B7O,MAAOA,EACPgM,SAAUA,EACVO,aAActJ,EAAQ6L,iBACtBhD,SAAU7L,KAAKgN,cACfjD,QAAS4D,IAEb,yBAAKzN,UAAWC,IAAM2O,0BACjB9O,KAAK+O,qBAAqB/O,KAAKF,MAAMU,WAGzCwN,GAAmBF,EAChB,kBAACjE,EAAA,EAAD,CAAY3J,UAAWC,IAAM6O,iBAAkBjF,QAAS/J,KAAK+M,YAAahN,MAAM,QAC5E,kBAACkP,GAAA,EAAD,OAGJ,kBAACpF,EAAA,EAAD,CAAY3J,UAAWC,IAAM6O,iBAAkBjF,QAAS/J,KAAK+M,YAAahN,MAAM,QAC5E,kBAAC,GAAD,c,gCA7KFW,IAAMC,W,o0BCVhC,IAIauO,GAAe,UA8GbC,G,YA1GX,WAAYrP,GACZ,a,4FAAA,UACI,0BAAMA,KAEDsP,gBAAkB,KAEvB,EAAKvJ,MAAQ,CACTwJ,MAAOvP,EAAMwP,SAAW,GANhC,E,+SAaIjH,aAAarI,KAAKoP,iBAClBpP,KAAKoP,gBAAkB,O,sCAGXC,GAEZrP,KAAKiH,SAAS,CAAEoI,MAAOA,M,wCAKvB,OAAOrP,KAAK6F,MAAMwJ,Q,sCAKlB,IAAME,EAAOvP,KAAKF,MAAMyP,KAClBC,EAAUxP,KAAKF,MAAM0P,QAG3B,GAFAxP,KAAKoP,gBAAkB,KAEnBI,EACJ,CACI,IAAM3B,EAAQnN,IAAM0M,SAASS,MAAM7N,KAAKF,MAAMU,UAC1CiP,EAAYzP,KAAK6F,MAAMwJ,MAAQ,EA3CpB,WA4CXE,EAEAE,EAAY9R,KAAKC,MAAMD,KAAKE,SAAWgQ,GAElC0B,IAASL,GAEVO,GAAa5B,IAAO4B,EAAY5B,EAAQ,GAIxC4B,GAAa5B,IAAO4B,EAAY,GAExCzP,KAAK0P,gBAAgBD,OAxDN,WA4DXF,EAGAvP,KAAK0P,gBAAgB/R,KAAKC,MAAMD,KAAKE,SAAW6C,IAAM0M,SAASS,MAAM7N,KAAKF,MAAMU,YAE3E+O,IAASL,GAGdlP,KAAK0P,gBAAgBhP,IAAM0M,SAASS,MAAM7N,KAAKF,MAAMU,UAAY,GAKjER,KAAK0P,gBAAgB,K,+BAOjC,WAEUF,EAAUxP,KAAKF,MAAM0P,QACrBG,EAAe3P,KAAK6F,MAAMwJ,MAUhC,OARIG,IAAYxP,KAAKoP,kBAEjBpP,KAAKoP,gBAAkBhH,YAAW,WAE9B,EAAKwH,kBA3FK,MAgGd,yBAAK3P,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,KAAM0P,mBACZL,EAAU,YAAc,IACzB,IAAMxP,KAAKF,MAAMI,UACrBG,MAAOL,KAAKF,MAAMO,OACjBK,IAAM0M,SAASpD,IAAIhK,KAAKF,MAAMU,UAAU,SAAC6M,EAAO9O,GAE7C,OACI,2BAAO8B,MAAO,CAAEyP,QAASH,IAAiBpR,EAAI,EAAI,IAC7C8O,Y,gCAnGH3M,IAAMC,W,4wBC2HjBoP,G,YA7HX,WAAYjQ,GACZ,a,4FAAA,UACI,E,uEAAA,sBAAMA,KAED6F,IAAM,KAEX,EAAKqK,UAAW,EAEhB,EAAKC,YAAc,EAAKA,YAAYtO,KAAjB,OACnB,EAAKuO,YAAc,EAAKA,YAAYvO,KAAjB,OACnB,EAAKwO,WAAa,EAAKA,WAAWxO,KAAhB,OATtB,E,4SAgBI3B,KAAK2F,IAAIzC,iBAAiB,OAAQlD,KAAKmQ,YACvCnQ,KAAK2F,IAAIzC,iBAAiB,WAAYlD,KAAKiQ,aAC3CjQ,KAAK2F,IAAIzC,iBAAiB,YAAalD,KAAKiQ,aAC5CjQ,KAAK2F,IAAIzC,iBAAiB,YAAalD,KAAKkQ,aAC5ClQ,KAAK2F,IAAIzC,iBAAiB,UAAWlD,KAAKkQ,e,6CAM1ClQ,KAAK2F,IAAIxC,oBAAoB,OAAQnD,KAAKmQ,YAC1CnQ,KAAK2F,IAAIxC,oBAAoB,WAAYnD,KAAKiQ,aAC9CjQ,KAAK2F,IAAIxC,oBAAoB,YAAanD,KAAKiQ,aAC/CjQ,KAAK2F,IAAIxC,oBAAoB,YAAanD,KAAKkQ,aAC/ClQ,KAAK2F,IAAIxC,oBAAoB,UAAWnD,KAAKkQ,e,kCAGrC7M,GAERA,EAAEkB,iBACFlB,EAAEmB,kBAGFxE,KAAKgQ,UAAW,I,kCAGR3M,GAGRA,EAAEkB,iBACFlB,EAAEmB,kBAGFxE,KAAKgQ,UAAW,I,iCAGT3M,GAGPA,EAAEkB,iBACFlB,EAAEmB,kBAGFxE,KAAKgQ,UAAW,EAEhB,IAAMI,EAAe/M,EAAE+M,aACnBC,EAAW,KACf,GAAID,EAAaE,MACjB,CACI,IAAMC,EAAYH,EAAaE,MAI/B,GAHeC,EAAU9R,QAGX,EACd,CACI,IAAM+R,EAAOD,EAAU,GACL,SAAdC,EAAKC,OAELJ,EAAWG,EAAKE,kBAK5B,CACI,IAAMC,EAAYP,EAAaQ,MAChBD,EAAUlS,QAGX,IAEV4R,EAAWM,EAAU,IAIzB3Q,KAAKF,MAAMqQ,YAGXnQ,KAAKF,MAAMqQ,WAAWE,GAGtBD,EAAaE,MAEbF,EAAaE,MAAMO,QAInBT,EAAaU,c,+BAMrB,WACUC,EAAmB/Q,KAAKgQ,SAE9B,OACI,yBAAKrK,IAAK,SAAAA,GAAG,OAAE,EAAKA,IAAIA,GAAK1F,GAAID,KAAKF,MAAMG,GACxCC,UAAWC,KAAM6Q,kBACtBD,EAAmB,YAAc,IAClC,IAAM/Q,KAAKF,MAAMI,UACXG,MAAOL,KAAKF,MAAMO,OAClB,kBAAC4Q,GAAA,EAAD,CAAY/Q,UAAWC,KAAM+Q,cAC5BxQ,IAAM0M,SAAS+D,KAAKnR,KAAKF,MAAMU,gB,gCAzHnBE,IAAMC,W,iiCC6BpByQ,G,YA3BX,WAAYtR,GACZ,O,4FAAA,iCACUA,I,iSAMN,IAAMuR,EAAsBrR,KAAKF,MAAMuR,oBACvC,OACI,yBAAKpR,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,KAAMmR,wBACb,IAAMtR,KAAKF,MAAMI,UACrBG,MAAOL,KAAKF,MAAMO,OACjBgR,EAAoBE,mBAAmBvH,KAAI,SAAAwH,GAExC,IAAMC,EAAWD,EAAaE,cACxBC,EAAqBF,EAAWJ,EAAoBO,sBAAsBH,GAAYI,KAC5F,OACI,kBAACF,EAAD,IAAoBvH,IAAKoH,EAAaM,QAASN,aAAcA,EAAc5M,QAAS4M,EAAaO,cAAkBP,EAAaQ,sB,gCArBzHtR,IAAMC,W,mwBC8DtBsR,G,YA9DX,WAAYnS,GACZ,a,4FAAA,UACI,E,uEAAA,sBAAMA,KAED+F,MAAQ,CACTwJ,MAAOvP,EAAMwP,SAAW,GAG5B,EAAKvF,QAAU,EAAKA,QAAQpI,KAAb,OAPnB,E,gSAUQ0B,GACR,WACU6O,EAAYlS,KAAK6F,MAAMwJ,MAC7BrP,KAAKiH,UAAS,SAACC,EAAMpH,GAEjB,IAAM+N,EAAQnN,IAAM0M,SAASS,MAAM/N,EAAMU,UACrCiP,EAAYvI,EAAKmI,MAAQ,EAK7B,OAJII,GAAa5B,IAEb4B,EAAY,GAET,CAACJ,MAAOI,MAChB,WAEK,EAAK3P,MAAMiK,SAEX,EAAKjK,MAAMiK,QAAQ1G,EAAG6O,Q,oCAKpB7C,GAEVrP,KAAKiH,SAAS,CAACoI,MAAOA,M,sCAKtB,OAAOrP,KAAK6F,MAAMwJ,Q,+BAKtB,WACUhC,EAAQ3M,IAAM0M,SAASpD,IAAIhK,KAAKF,MAAMU,UAAU,SAAC6M,EAAO9O,GAE1D,GAAIA,IAAM,EAAKsH,MAAMwJ,MAAO,OAAOhC,KACpC,GAEH,OACI,kBAACxD,EAAA,EAAD,CAAY5J,GAAID,KAAKF,MAAMG,GACvBC,UAAWF,KAAKF,MAAMI,UACtBG,MAAOL,KAAKF,MAAMO,MAClBN,MAAOC,KAAKF,MAAMC,MAClBoK,SAAUnK,KAAKF,MAAMqK,SACrBJ,QAAS/J,KAAK+J,SACbsD,Q,gCA3Da3M,IAAMC,W,ozBCerBwR,G,YAdX,WAAYrS,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,yF,gCAXK5E,IAAM6E,e,ozBCgBpB6M,G,YAdX,WAAYtS,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,wF,gCAXS5E,IAAM6E,e,ozBC8BxB8M,G,YAvBX,WAAYvS,GACZ,O,4FAAA,iCACUA,I,iSAMN,IAAMwS,EAAMtS,KAAKF,MAAMwS,IAEvB,OACI,kBAAC,GAAD,CAAiBrS,GAAID,KAAKF,MAAMG,GAC5BC,UAAWC,KAAMoS,kBAAoB,IAAMvS,KAAKF,MAAMI,UACtDG,MAAOL,KAAKF,MAAMO,MAClBN,MAAO,kBACPgK,QAAS,SAAC1G,EAAG9E,GAAJ,OAAU+T,EAAIrL,SAAS,CAAC4B,KAAa,IAANtK,MACxC,kBAAC,GAAD,MACA,kBAAC,GAAD,Y,gCAnBemC,IAAMC,W,i1BC8CtB6R,G,YA7CX,WAAY1S,GACZ,O,4FAAA,iCACUA,I,6SAGW2S,GACrB,WACUC,EAAW1S,KAAKF,MAAMkD,QAAQ2P,SAASC,mBAAmBC,wBAAwBJ,GACxF,KAAMC,aAAoBI,MAAkB,OAAO,+BAEnD,IAAM3H,EAAYuH,EAASK,eAE3B,OACI,kBAAClJ,EAAA,EAAD,CAAYO,IAAKsI,EAASM,WAAa,IAAMP,EACzCvS,UAAWC,KAAM8S,aACjBlT,MAAO2S,EAASM,WAChBjJ,QAAS,kBAAM,EAAKjK,MAAMkD,QAAQ2P,SAASC,mBAAmBM,cAAcT,EAAY,EAAK3S,MAAMkD,WAClGmI,GAAa,kBAACA,EAAD,S,+BAO1B,WAGUgI,EAFUnT,KAAKF,MAAMkD,QACG2P,SAASC,mBACLQ,iBAElC,OACI,yBAAKnT,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,KAAMC,gBACvB,IAAMJ,KAAKF,MAAMI,UACXG,MAAOL,KAAKF,MAAMO,OAClB,yBAAKH,UAAWC,KAAMG,aAClB,4BAAK+S,KAAKvV,SAAS,+BAEvB,yBAAKoC,UAAWC,KAAMI,eACjB4S,EAAYnJ,KAAI,SAAA3G,GAAC,OAAI,EAAKiQ,qBAAqBjQ,a,gCAxC1C3C,IAAMC,W,2wBCoCjB4S,G,YAtCX,WAAYzT,GACZ,a,4FAAA,UACI,E,uEAAA,sBAAMA,KAED+L,SAAW,EAAKA,SAASlK,KAAd,OAHpB,E,iSAMS0B,GAEL,IAAMsI,EAAWtI,EAAEmQ,OAAOnV,MACZ2B,KAAKF,MAAMzB,MACnBoV,SAAS9H,K,+BAMf,IAAM5L,EAAQC,KAAKF,MAAMC,MACnB1B,EAAQ2B,KAAKF,MAAMzB,MACnBqV,EAAerV,EAAMsV,UACrBC,EAAgBvV,EAAMwV,WACtBC,EAAU,YAAcJ,EAE9B,OACI,0BAAMzT,GAAID,KAAKF,MAAMG,GACjBC,UAAWF,KAAKF,MAAMI,UACtBG,MAAOL,KAAKF,MAAMO,OAClB,2BAAOJ,GAAI6T,EAASC,KAAK,QACrB1V,MAAOuV,EACP/H,SAAU7L,KAAK6L,SACf1B,SAAUnK,KAAKF,MAAMqK,WACzB,2BAAO6J,QAASF,GACX/T,S,gCAlCIW,IAAMC,W,m2BCuBhBsT,G,YApBX,WAAYnU,GACZ,O,4FAAA,iCACUA,I,iSAMN,OACI,4BAAQG,GAAID,KAAKF,MAAMG,GACnBC,UAAWC,KAAM+T,iBACvB,IAAMlU,KAAKF,MAAMI,UACXG,MAAOL,KAAKF,MAAMO,MAClB0J,QAAS/J,KAAKF,MAAMiK,SACnB/J,KAAKF,MAAMU,e,gCAhBFE,IAAMC,W,u0BCsCjBwT,G,YApCX,WAAYrU,GACZ,O,4FAAA,iCACUA,I,iSAMN,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,KAAMiU,kBACvB,IAAMpU,KAAKF,MAAMI,UACXG,MAAOL,KAAKF,MAAMO,OAClB,yBAAKH,UAAWC,KAAMkU,aAClB,yBAAKnU,UAAWC,KAAMmU,kBAEtB,yBAAKpU,UAAWC,KAAMoU,mBAClB,yBAAKrU,UAAWC,KAAMqU,kBAClB,yBAAKtU,UAAWC,KAAMsU,aAAcpU,MAAO,CAACqU,KAAM,MAAOhN,IAAK,SAC9D,yBAAKxH,UAAWC,KAAMsU,aAAcpU,MAAO,CAACqU,KAAM,MAAOhN,IAAK,UAElE,yBAAKxH,UAAWC,KAAMwU,uBAClB,yBAAKzU,UAAWC,KAAMyU,4BACtB,yBAAK1U,UAAWC,KAAM0U,6BACtB,yBAAK3U,UAAWC,KAAM2U,+BACtB,yBAAK5U,UAAWC,KAAM4U,gCAE1B,yBAAK7U,UAAWC,KAAM6U,yB,gCA7BpBtU,IAAMC,W,2uBCUhC,IAGMsU,GAAkC,qBA2HzBC,G,YAvHX,WAAYpV,GACZ,a,4FAAA,UACI,E,uEAAA,sBAAMA,KAED+F,MAAQ,CACTsP,MAAO,UACPC,aAAa,EACbC,YAAuE,SAA1DC,KAAaC,QAAQN,KAGtC,EAAKO,cAAgB,EAAKA,cAAc7T,KAAnB,OATzB,E,sSAYc0B,GAEV,IAGMoS,EAHUzV,KAAKF,MAAMkD,QACP2P,SAEK+C,kBACnBC,EAAY3V,KAAK6F,MAAMsP,MACvBA,EAAQ9R,EAAEmQ,OAAOnV,MACnBsX,IAAcR,IAElBM,EAAaG,UAAUT,GAEvBnV,KAAKiH,SAAS,CAAEkO,MAAOA,O,0CAKvB,IAAMM,EAAezV,KAAKF,MAAMkD,QAAQ2P,SAAS+C,kBAC3C7S,EAAS,GAFnB,uBAGI,YAAwB4S,EAAaI,qBAArC,+CACA,KADWC,EACX,QACI,GAzCoB,WAyChBA,EAAJ,CACA,IAAMC,EAASN,EAAaO,iBAAiBF,GAC7CjT,EAAOiB,KACH,kBAACmS,GAAA,EAAD,CACI7L,IAAK0L,EACL/V,MAAOsT,KAAKvV,SAAS,sBAAwBgY,GAC7CI,MAAM,GACLH,EAAO/L,KAAI,SAAA3G,GAAC,OACT,kBAAC,GAAD,CAAY+G,IAAK/G,EAAEsQ,UAAWzT,UAAWC,KAAMgW,aAAc9X,MAAOgF,EAChEtD,MAAOsT,KAAKvV,SAAS,WAAauF,EAAEsQ,oBAd5D,kFAkBI,OAAO9Q,I,+BAKX,WAEU4S,EADUzV,KAAKF,MAAMkD,QACE2P,SAAS+C,kBAEtC,OACI,kBAAC7V,GAAA,EAAD,CAAgBI,GAAID,KAAKF,MAAMG,GAC3BC,UAAWF,KAAKF,MAAMI,UACtBG,MAAOL,KAAKF,MAAMO,MAClBN,MAAOsT,KAAKvV,SAAS,4BACrB,kBAACmY,GAAA,EAAD,CAAclW,MAAM,SAChB,yBAAKM,MAAO,CAAEiO,QAAS,SACnB,yBAAKjO,MAAO,CAAE8E,MAAO,QACjB,yBAAKlF,GAAG,kCACJ,4BAAQA,GAAG,uBAAuBC,UAAU,eACxC7B,MAAO2B,KAAK6F,MAAMsP,MAClBtJ,SAAU7L,KAAKwV,cACfrL,SAAUnK,KAAK6F,MAAMuP,aACrB,4BAAQ/W,MAAM,WAAd,WACA,4BAAQA,MAAM,QAAd,gBACA,4BAAQA,MAAM,QAAd,mBACA,4BAAQA,MAAM,OAAd,SAGC2B,KAAK6F,MAAMuP,aACZ,kBAAC,GAAD,CAAarL,QAAS,kBAAM,EAAK9C,SAAS,CAAEmO,aAAa,MACpD/B,KAAKvV,SAAS,gCAKvBkC,KAAK6F,MAAMuP,aACX,6BACKpV,KAAKoW,oBAEN,kBAAC,GAAD,CAAarM,QAAS,SAAC1G,GAEnBoS,EAAaY,QACb,EAAKpP,SAAS,CAAEmO,aAAa,MAE5B/B,KAAKvV,SAAS,2BAK/B,6BACI,kBAAC,GAAD,SAKZ,kBAACwY,GAAA,EAAD,CAAarW,GAAI,qBACbsW,QAASvW,KAAK6F,MAAMwP,YACpBtV,MAAOsT,KAAKvV,SAAS,uBACrB+N,SAAU,SAACxI,GAEP,IAAMR,EAASQ,EAAEmQ,OAAO+C,QACxB,EAAKtP,SAAS,CAAEoO,YAAaxS,IAC7ByS,KAAakB,QAAQvB,GAAiC,GAAKpS,MAEnE,2BAAO3C,UAAWC,KAAMsW,SAAxB,WACSC,gB,gCAlHChW,IAAMC,W,w0BCyBjBgW,G,YAnCX,WAAY7W,GACZ,O,4FAAA,iCACUA,I,6SAGW8W,EAAeC,GAEhC,OACI,kBAAChN,EAAA,EAAD,CAAYO,IAAKyM,EACb3W,UAAWC,KAAM2W,gBACjB/W,MAAO6W,EACP7M,QAAS,SAAC1G,GAAD,OAAOgQ,KAAK0D,kBAAkBF,Q,+BAU/C,OACI,kBAAChX,GAAA,EAAD,CAAgBI,GAAID,KAAKF,MAAMG,GAC3BC,UAAWF,KAAKF,MAAMI,UACtBG,MAAOL,KAAKF,MAAMO,MAClBN,MAAOsT,KAAKvV,SAAS,6BACrB,yBAAKoC,UAAWC,KAAM6W,sBACjBhX,KAAKiX,qBAAqB,UAAW,SACrCjX,KAAKiX,qBAAqB,eAAgB,oB,gCA9BnCvW,IAAMC,W,oBCN5BuW,GAAU,GAEhBA,GAAO,IAAU,CACbrV,KAAM,kBACN4U,QAAS,QACTU,cAAc,EACdC,MAAO,SAAUrV,GAAY,oDAAyEsV,MAAK,gBAAYC,EAAZ,iBAAoBvV,EAASuV,QAG5IJ,GAAO,IAAU,CACbrV,KAAM,oBACN4U,QAAS,QACTU,cAAc,EACdC,MAAO,SAAUrV,GAAY,oDAAwEsV,MAAK,gBAAYC,EAAZ,iBAAoBvV,EAASuV,QAG3IJ,GAAO,GAAS,CACZrV,KAAM,qBACN4U,QAAS,QACTU,cAAc,EACdC,MAAO,SAAUrV,GAAY,oDAAqEsV,MAAK,gBAAYC,EAAZ,iBAAoBvV,EAASuV,QAGxIJ,GAAO,GAAS,CACZrV,KAAM,iBACN4U,QAAS,QACTtM,UAAU,EACViN,MAAO,SAAUrV,GAAY,MAAM,IAAIG,MAAM,0CAGjDgV,GAAO,KAAW,CACdrV,KAAM,aACN4U,QAAS,QACTU,cAAc,EACdC,MAAO,SAAUrV,GAAY,oDAA0FsV,MAAK,gBAAYC,EAAZ,iBAAoBvV,EAASuV,QAG7JJ,GAAO,KAAW,CACdrV,KAAM,OACN4U,QAAS,QACTtM,UAAU,EACViN,MAAO,SAAUrV,GAAY,MAAM,IAAIG,MAAM,0CAGjDgV,GAAO,KAAW,CACdrV,KAAM,2BACN4U,QAAS,QACTtM,UAAU,EACViN,MAAO,SAAUrV,GAAY,MAAM,IAAIG,MAAM,0CAGjDgV,GAAO,MAAY,CACfrV,KAAM,gBACN4U,QAAS,QACTtM,UAAU,EACViN,MAAO,SAAUrV,GAAY,MAAM,IAAIG,MAAM,0CAGjDgV,GAAO,MAAY,CACfrV,KAAM,gBACN4U,QAAS,QACTtM,UAAU,EACViN,MAAO,SAAUrV,GAAY,MAAM,IAAIG,MAAM,0CAGlCgV,U,ozBCZAK,G,YA3CX,WAAYzX,GACZ,O,4FAAA,iCACUA,I,2SAGS0X,EAAWC,GAE1B,IAAMzU,EAAUhD,KAAKF,MAAMkD,QAErB0U,EADM1U,EAAQ2P,SACQgF,iBAE5B,OACI,kBAAC9N,EAAA,EAAD,CAAYO,IAAKoN,EACbtX,UAAWC,KAAMyX,cACjB7X,MAAO0X,EAAW5V,KAAO,KAAO4V,EAAWhB,QAAU,IACrDtM,SAAUsN,EAAU,eAAqBC,GAAmBD,EAAU,SACtE1N,QAAS,SAAC1G,GAENL,EAAQ6U,eAAe7U,EAAQ2P,SAAU6E,Q,+BAQzD,WAGI,OACI,kBAAC3X,GAAA,EAAD,CACII,GAAID,KAAKF,MAAMG,GACfC,UAAWF,KAAKF,MAAMI,UACtBG,MAAOL,KAAKF,MAAMO,MAClBN,MAAO,kBACP,yBAAKG,UAAWC,KAAM2X,oBACjBC,OAAOjW,KAAKoV,IAASlN,KAAI,SAAA3G,GAAC,OAAI,EAAK2U,mBAAmB3U,EAAG6T,GAAQ7T,c,gCAtCtD3C,IAAMC,W,w0BCcvBsX,G,YAjBX,WAAYnY,GACZ,O,4FAAA,iCACUA,I,iSAMN,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,KAAM+X,QAAU,IAAMlY,KAAKF,MAAMI,UAC5CG,MAAOL,KAAKF,MAAMO,a,gCAbLK,IAAMC,W,6zBC4BpBwX,G,YAxBX,WAAYrY,GACZ,O,4FAAA,iCACUA,I,iSAMN,IAAMqL,EAAYnL,KAAKF,MAAMsL,KAC7B,OACI,kBAACgN,GAAA,EAAD,CAAkBnY,GAAID,KAAKF,MAAMG,GAC7BC,UAAWmY,IAAmBhN,eACpC,IAAMrL,KAAKF,MAAMI,UACXG,MAAOL,KAAKF,MAAMO,MAClBN,MAAOC,KAAKF,MAAMC,MAClBoK,SAAUnK,KAAKF,MAAMqK,SACrBmO,OAAQtY,KAAKF,MAAMwY,OACnBC,SAAUvY,KAAKF,MAAMyY,UACrB,kBAACpN,EAAD,Y,gCApBkBzK,IAAMC,W,ozBCazB6X,G,YAdX,WAAY1Y,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,iH,gCAXI5E,IAAM6E,e,ozBCgBnBkT,G,YAdX,WAAY3Y,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,yJ,gCAXD5E,IAAM6E,e,ozBCgBdmT,G,YAdX,WAAY5Y,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,0J,gCAXD5E,IAAM6E,e,6zBCgBdoT,G,YAdX,WAAY7Y,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,sqB,gCAXF5E,IAAM6E,e,ozBCgBbqT,G,YAdX,WAAY9Y,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAG,ozB,gCAXD5E,IAAM6E,e,ozBCgBfsT,G,YAdX,WAAY/Y,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,uR,gCAXD5E,IAAM6E,e,ozBCgBduT,G,YAdX,WAAYhZ,GAAO,O,4FAAA,iCAAQA,I,iSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,qoB,gCAXG5E,IAAM6E,e,oLCKlBwT,G,4LALIC,M,uCACEA,M,uCACAA,S,s1BC4DNC,G,YA5DX,WAAY3G,GACZ,a,4FAAA,UACI,6BAEK4G,KAAO5G,EAHhB,E,uSAOe0G,GAEX,IAAM1G,EAAMtS,KAAKkZ,KAGXC,EAFU7G,EAAI8G,aACUC,mBACUC,gBAElCC,EAAOP,EAAYQ,gBAAgB,SAAWL,GACpD,GAAII,EAEA,IAEIjH,EAAImH,mBAAmBC,sBAAsB,GAAI,QAASH,GAE9D,MAAMlW,O,uCAQG2V,GAEb,IAAM1G,EAAMtS,KAAKkZ,KACXlW,EAAUsP,EAAI8G,aAEdD,EADgBnW,EAAQqW,mBACUC,gBAExC,IAEIhH,EAAIM,mBAAmB+G,sBAAsB,UAAW3W,GACnDqU,MAAK,SAAAxU,GAEFmW,EAAYY,gBAAgB,SAAWT,EAAmBtW,EAAO0W,SAG7E,MAAMlW,O,uCAOO2V,M,+BAKN,OAAOhZ,KAAKkZ,U,gCA3DJH,I,gzBCAhB,IAuEQc,G,YAlEX,WAAYpE,GACZ,a,4FAAA,UACI,6BAEKqE,cAAgBrE,EAHzB,E,uSAOeuD,GAEX,IAAMvD,EAAezV,KAAK8Z,cAEpBP,EAAOP,EAAYQ,gBAhBD,eAkBxB,IAAK,IAAMpP,KAAOmP,EAClB,CACI,IAAMlZ,EAAQoV,EAAasE,eAAe3P,GACtC/J,GAEAA,EAAMoT,SAAS8F,EAAKnP,O,uCAMf4O,M,uCAMAA,GAEb,IAAMvD,EAAezV,KAAK8Z,cACpBP,EAAO,GAEPpE,EAAQM,EAAauE,kBAJ/B,uBAKI,YAAoBvE,EAAawE,YAAjC,+CACA,KADW5Z,EACX,QACU6Z,EAAY7Z,EAAMsT,UAClBwG,EAAa9Z,EAAMwT,WAczB0F,EAAKW,GAAaC,GAtB1B,kFAwBInB,EAAYY,gBA5DY,cA4DsBL,GAC9CP,EAAYxC,QA9DY,cA8DcrB,EAAMxB,a,wCAK5C,OAAO3T,KAAK8Z,mB,gCAhEKf,I,QCHlB,SAASqB,GAAKC,GAGjB,IAAMjT,EAAQ,GACRkT,EAAW,GAKjB,OAJAC,KAAqBF,EAAKjT,GAC1BmT,KAAsBnT,GAAO,EAAMkT,GACnCC,KAAqB,GAAKnT,EAAOkT,EAAUlT,GAC5BmT,KAAqBnT,GAIjC,SAASoT,GAAOH,GAEnB,IAAMjT,EAAQ,GAId,OAHAmT,KAAqBF,EAAKjT,GAC1BmT,KAAsBnT,GAAO,EAAOA,GACrBmT,KAAqBnT,GAIjC,SAASqT,GAAKJ,GAGjB,IAAMjT,EAAQ,GACRkT,EAAW,GAKjB,OAJAC,KAAqBF,EAAKjT,GAC1BmT,KAAsBnT,GAAO,EAAMkT,GACnCC,KAAqB,IAAMnT,EAAOkT,EAAUlT,GAC7BmT,KAAqBnT,G,gzBC7BjC,IAoCQsT,G,YAhCX,aAAc,O,4FAAA,mC,uSAGC1B,GAEX,IAAMO,EAAOP,EAAYQ,gBATF,cAUvB,GAAKD,EAEL,cAAkBxB,OAAOjW,KAAKyX,GAA9B,eACA,CADK,IAAMnP,EAAG,KAEViJ,KAAKsH,gBAAgBC,IAAIxQ,EAAKmP,EAAKnP,O,uCAK1B4O,M,uCAMAA,GAEb,IAAMO,EAAO,GADjB,uBAEI,YAAkBlG,KAAKsH,gBAAgB7Y,OAAvC,+CACA,KADWsI,EACX,QACImP,EAAKnP,GAAOiJ,KAAKsH,gBAAgBE,IAAIzQ,IAJ7C,kFAMI4O,EAAYY,gBAhCW,aAgCsBL,Q,gCA9BzBR,IC8Eb+B,GAhFE,CACbC,OAAO,EACPC,UAAW,GACXC,UAAW,KACXC,SAAU,KACVC,WALa,SAKFnC,GAEP,IAAKA,EAAa,MAAM,IAAI9W,MAAM,0DAClC,GAAK8W,EAAYoC,cAAjB,CAEApb,KAAKkb,SAAWlC,EAChBhZ,KAAK+a,OAAQ,EALjB,2BAMI,YAAqB/a,KAAKgb,UAA1B,+CACA,SACYK,eAAerb,KAAKkb,WARpC,kFAWIlb,KAAKsb,iBAAmBtb,KAAKsb,iBAAiB3Z,KAAK3B,MACnDA,KAAKib,UAAYM,YAAYvb,KAAKsb,iBApBhB,OAsBtBE,QApBa,WAsBT,GAAKxb,KAAKkb,SAASE,eACdpb,KAAK+a,MAAV,CAEAU,cAAczb,KAAKib,WAEnBjb,KAAK+a,OAAQ,EANjB,2BAOI,YAAqB/a,KAAKgb,UAA1B,+CACA,SACYU,iBAAiB1b,KAAKkb,WATtC,kFAWIlb,KAAKgb,UAAUvc,OAAS,EACxBuB,KAAKkb,SAAW,OAEpBI,iBAnCa,WAoCb,2BACI,YAAqBtb,KAAKgb,UAA1B,+CACA,SACYW,iBAAiB3b,KAAKkb,WAHtC,oFAMAU,gBA1Ca,SA0CGC,GAOZ,OALA7b,KAAKgb,UAAUlX,KAAK+X,GAChB7b,KAAK+a,OAELc,EAAQR,eAAerb,KAAKkb,UAEzBlb,MAEX8b,kBAnDa,SAmDKD,GAOd,OALA7b,KAAKgb,UAAU3Y,OAAOrC,KAAKgb,UAAU5Y,QAAQyZ,GAAU,GACnD7b,KAAK+a,OAELc,EAAQH,iBAAiB1b,KAAKkb,UAE3Blb,MAEX+b,KA5Da,WA8DT,IAAK/b,KAAK+a,MAAO,MAAM,IAAI7Y,MAAM,wCADrC,2BAGI,YAAqBlC,KAAKgb,UAA1B,+CACA,SACYK,eAAerb,KAAKkb,WALpC,oFAQAc,OArEa,WAuET,IAAKhc,KAAK+a,MAAO,MAAM,IAAI7Y,MAAM,wCADrC,2BAGI,YAAqBlC,KAAKgb,UAA1B,+CACA,SACYU,iBAAiB1b,KAAKkb,WALtC,qF,uKCxEG,SAASe,GAAYC,EAAUC,GAElC,IAAMC,EAAUrY,SAASsY,cAAc,KACjCC,EAAcH,EAAI/Z,QAAQ,KAWhC,OAVA+Z,EAAMA,EAAIpe,UAAU,EAAGue,EAAc,GAAK,6DAA+DJ,EAAW,IAAMC,EAAIpe,UAAUue,EAAc,GACtJF,EAAQG,aAAa,OAAQJ,GAC7BC,EAAQG,aAAa,WAAYL,GAEjCE,EAAQ/b,MAAMiO,QAAU,OACxBvK,SAASyY,KAAKC,YAAYL,GAE1BA,EAAQM,QACR3Y,SAASyY,KAAKG,YAAYP,GAEnBQ,QAAQC,QAAQV,G,IAaZW,G,WARX,c,4FAAc,S,4DAEDC,EAAUC,EAAcC,EAAUC,GAE3C,OAAON,QAAQC,QAAQI,Q,s1BCLhBE,G,YATX,aAAc,O,4FAAA,mC,qSAGDJ,EAAUC,EAAcC,EAAUC,GAE3C,OAAOjB,GAAYc,GAZHxD,EAY4B0D,EAVzC,kCAAoCG,mBAAmB7D,KAUHlC,MAAK,SAAAxU,GAAM,OAAIoa,KAZ9E,IAAwB1D,O,gCAKKuD,ICItB,SAASO,GAAmBxb,GAE/B,IAAKA,EAAM,MAAO,GAClB,IAAMwN,EAAQxN,EAAKyb,YAAY,KAC/B,OAAIjO,EAAQ,EAAU,GACfxN,EAAK9D,UAAUsR,G,ozBC0CXkO,G,YA7CX,aAAc,O,4FAAA,mC,qSAGDR,EAAUC,EAAcC,EAAUC,GAE3C,GAAID,aAAoBO,WACxB,CACI,IAAMrY,EAAQ+X,EAAI,OAAa,EACzB9X,EAAS8X,EAAI,QAAc,EAC3BO,EAAUJ,GAAmBN,GAC7BW,EAAYR,EAAK,eAAiBO,EAAQ1f,UAAU,GACpD4f,GArBMC,EAqBgBX,EAlB9BY,GADa,IAAIC,eACMC,kBAAkBH,GAClC,IAAII,KAAK,CAACH,GAAY,CAAE9J,KAAM,mBAkBnC,OAAO,IAAI6I,SAAQ,SAACC,EAASoB,GAEzB,IAAM9B,EAAM+B,IAAIC,gBAAgBR,GAE1BS,EAASra,SAASsY,cAAc,UAChCgC,EAAMD,EAAOE,WAAW,MACxBC,EAAatb,OAAOub,kBAAoB,EAC9CJ,EAAOjZ,MAAQA,EAAQoZ,EACvBH,EAAOhZ,OAASA,EAASmZ,EACzBH,EAAO/d,MAAM8E,MAAQA,EAAQ,KAC7BiZ,EAAO/d,MAAM+E,OAASA,EAAS,KAC/BiZ,EAAII,aAAaF,EAAY,EAAG,EAAGA,EAAY,EAAG,GAElD,IAAMG,EAAQ,IAAIC,MAClBD,EAAME,OAAS,WAEXP,EAAIQ,UAAUH,EAAO,EAAG,GACxBR,IAAIY,gBAAgB3C,GAEpB,IAAM4C,EAAgB,SAAWrB,EAC3BsB,EAAWZ,EAAOa,UAAUF,GAAe9T,QAAQ8T,EAAe,sBACxE9C,GAAYc,EAAUiC,IAE1BN,EAAMQ,IAAM/C,KAKhB,MAAM,IAAIja,MAAM,2EAlD5B,IAAwB0b,EAGdC,O,gCAKuBf,I,8lCCElBqC,G,YATX,aAAc,O,4FAAA,mC,qSAGDpC,EAAUC,EAAcC,EAAUC,GAE3C,yDAA0BH,EAAUC,EAAcoC,KAAKC,UAAUpC,GAAWC,Q,gCAPvDC,I,2KCmIdmC,G,WA/HX,c,4FACA,SACItf,KAAKuf,aAAe,IAAIC,IAExBxf,KAAKyf,cAAc,IAAItC,GAAkB,QACzCnd,KAAKyf,cAAc,IAAIlC,GAAsB,SAC7Cvd,KAAKyf,cAAc,IAAIN,GAAkB,U,6DAW/BO,GACd,2BAD6BC,EAC7B,iCAD6BA,EAC7B,kBACI,cAA2BA,EAA3B,eACA,CADK,IAAM3C,EAAY,KAEfhd,KAAKuf,aAAaK,IAAI5C,GAEtBhd,KAAKuf,aAAa1E,IAAImC,GAAclZ,KAAK4b,GAIzC1f,KAAKuf,aAAa3E,IAAIoC,EAAc,CAAC0C,IAG7C,OAAO1f,O,uCAWM0f,EAAY1C,GAEzB,GAAIhd,KAAKuf,aAAaK,IAAI5C,GAC1B,CACI,IAAM6C,EAAc7f,KAAKuf,aAAa1E,IAAImC,GAC1C6C,EAAYxd,OAAOwd,EAAYzd,QAAQsd,GAAa,GAChDG,EAAYphB,QAAU,GAEtBuB,KAAKuf,aAAL,OAAyBvC,GAGjC,OAAOhd,O,qDASoBgd,GAE3Bhd,KAAKuf,aAAL,OAAyBvC,K,8BAQzBhd,KAAKuf,aAAa1O,U,sCAYNkM,EAAUC,EAAcC,EAAUC,GAG9C,IAAM2C,EAAc7f,KAAK8f,6BAA6B9C,GAGtD,GAAI6C,GAAeA,EAAYphB,OAAS,EAEpC,OAAOohB,EAAYE,QACf,SAACC,EAAK3hB,GAAN,OAAgB2hB,EAAG,OACf,SAAA3c,GAAC,OAAIhF,EAAM4hB,aAAalD,EAAUC,EAAcC,EAAUC,QAE9DN,QAAQqB,UAIZ,MAAM,IAAI/b,MAAM,kD,mDAUK8a,GAEzB,OAAOhd,KAAKuf,aAAa1E,IAAImC,K,yCAQZ,OAAOhd,KAAKuf,aAAazd,S,gCAKlC,OAAO9B,KAAKuf,aAAaW,MAAQ,O,6MC+BlCC,G,WA7JX,c,4FACA,SACIngB,KAAKogB,WAAa,IAAIZ,IACtBxf,KAAKqgB,aAAe,GAEpBrgB,KAAKsgB,mBAAqB,IAAIhB,G,gEAYjB5M,GACjB,2BAD8BS,EAC9B,iCAD8BA,EAC9B,kBACI,cAAwBA,EAAxB,eACA,CADI,IAAMV,EAAU,KAEhBzS,KAAKogB,WAAWxF,IAAInI,EAAYC,GAChC1S,KAAKqgB,aAAavc,KAAK2O,GAG3B,OAAOzS,O,yCAUQ0S,GAEf,IAAMvT,EAAM,GADhB,uBAEI,YAAwBa,KAAKogB,WAAWte,OAAxC,+CACA,KADU2Q,EACV,QACQzS,KAAKogB,WAAWvF,IAAIpI,KAAgBC,GAEpCvT,EAAI2E,KAAK2O,IANrB,kFAUI,cAAwBtT,EAAxB,eACA,CADI,IAAMsT,EAAU,KAEhBzS,KAAKugB,qBAAqB9N,GAE9B,OAAOtT,I,2CAYUsT,GAEjB,IAAMtT,EAAMa,KAAKogB,WAAWvF,IAAIpI,GAChCzS,KAAKogB,WAAL,OAAuB3N,GAGvB,IAAMpD,EAAQrP,KAAKqgB,aAAaje,QAAQqQ,GAGxC,OAFAzS,KAAKqgB,aAAahe,OAAOgN,EAAO,GAEzBlQ,I,8BAQPa,KAAKogB,WAAWvP,QAChB7Q,KAAKqgB,aAAa5hB,OAAS,I,oCAUjBgU,EAAYe,GAC1B,WACI,OAAOxT,KAAK2Z,sBAAsBlH,EAAYe,GACzC6D,MAAK,SAAAxU,GAAM,OAAI,EAAKyd,mBAAmBE,gBACpC3d,EAAM,KACNA,EAAM,KACNA,EAAM,KACNA,MALD,OAMI,SAAAkC,GAEH,MAAM,IAAI7C,MAAM,mCAAqC6C,EAAIH,c,4CAW/C6N,EAAYe,GAE9B,IAAKxT,KAAKogB,WAAWR,IAAInN,GACrB,MAAM,IAAIvQ,MAAM,6CAGpB,OADiBlC,KAAKogB,WAAWvF,IAAIpI,GACrBgO,aAAahO,EAAYe,K,8CASrBf,GAEpB,OAAOzS,KAAKogB,WAAWvF,IAAIpI,K,uCAU3B,OAAOzS,KAAKqgB,e,qCAUZ,OAAOrgB,KAAKogB,WAAWM,W,gCAMf,OAAO1gB,KAAKogB,WAAWF,MAAQ,O,sNCuFhCS,G,WAhPX,c,4FACA,SACI3gB,KAAK4gB,WAAa,IAAIpB,IACtBxf,KAAK6gB,WAAa,IAAIrB,IAEtBxf,KAAK8gB,cAAgB,IAAIC,K,2DAWjBC,GACZ,2BADyBC,EACzB,iCADyBA,EACzB,kBACI,cAAsBA,EAAtB,eACA,CADI,IAAMC,EAAQ,KAEdlhB,KAAKmhB,aAAaD,GAClBlhB,KAAK4gB,WAAW/F,IAAIqG,GAAUpd,KAAKkd,GAEvC,OAAOhhB,O,qCAWIghB,EAAUE,GAErB,GAAIlhB,KAAK4gB,WAAWhB,IAAIsB,GACxB,CACI,IAAME,EAAYphB,KAAK4gB,WAAW/F,IAAIqG,GACtCE,EAAU/e,OAAO+e,EAAUhf,QAAQ4e,GAAW,GAC1CI,EAAU3iB,QAAU,GAEpBuB,KAAKqhB,gBAAgBH,GAG7B,OAAOlhB,O,+CASckhB,GAErBlhB,KAAKqhB,gBAAgBH,K,8BAQrBlhB,KAAK4gB,WAAW/P,QAChB7Q,KAAK6gB,WAAWhQ,U,mCAGPqQ,GAET,IAAIlhB,KAAK4gB,WAAWhB,IAAIsB,GAAxB,CAEA,IAAMI,EAAeJ,EAAS5D,YAAY,KAC1C,GAAIgE,EAAe,EAAG,MAAM,IAAIpf,MAAM,kCAGtC,GAAqB,IAAjBof,EACJ,CACI,IAAM7D,EAAUyD,EAASnjB,UAAUujB,GACnC,GAAIthB,KAAK6gB,WAAWjB,IAAInC,GACxB,CACI,IAAM8D,EAAYvhB,KAAK6gB,WAAWhG,IAAI4C,GACtC8D,EAAUzd,KAAKod,GACfK,EAAUC,MAAK,SAACvjB,EAAGC,GAEf,IAAMujB,EAAWxjB,EAAEyjB,MAAM,OACnBC,EAAW1jB,EAAEyjB,MAAM,OACzB,OAAOD,EAAShjB,OAASkjB,EAASljB,eAKjCuB,KAAK4gB,WAAWhB,IAAInC,IAAUzd,KAAK4gB,WAAWhG,IAAI6C,EAAS,IAEhEzd,KAAK6gB,WAAWjG,IAAI6C,EAAS,CAACyD,IAItClhB,KAAK4gB,WAAWhG,IAAIsG,EAAU,O,sCAGlBA,GAEZlhB,KAAK4gB,WAAL,OAAuBM,GAEvB,IAAMI,EAAeJ,EAAS5D,YAAY,KAC1C,GAAqB,IAAjBgE,EACJ,CACI,IAAM7D,EAAUyD,EAASnjB,UAAUujB,GAC7BC,EAAYvhB,KAAK6gB,WAAWhG,IAAI4C,GACtC8D,EAAUlf,OAAOkf,EAAUnf,QAAQqb,GAAU,GACzC8D,EAAU9iB,QAAU,GAEpBuB,KAAK6gB,WAAL,OAAuBpD,M,oCAWrBpN,GACd,WACI,IAAKA,EAAU,MAAM,IAAInO,MAAM,8BAC/B,KAAMmO,aAAoBuR,MAAO,MAAM,IAAI1f,MAAM,mCAEjD,OAAOlC,KAAK8gB,cAAce,WAAWxR,GAChCgH,MAAK,SAAAxU,GAEF,IAAMka,EAAW1M,EAASxO,KACpBqf,EAAW7D,GAAmBN,GAC9BE,EAAWpa,EACjB,OAAO,EAAK6W,sBAAsBqD,EAAUmE,EAAUjE,MANvD,OAQI,SAAAlY,GAEH,MAAM,IAAI7C,MAAM,0BAA4B6C,EAAIH,c,4CAkBtCmY,EAAUmE,EAAUjE,GAGtC,IAAMmE,EAAY,GAElB,GAAIphB,KAAK6gB,WAAWjB,IAAIsB,GACxB,CAEI,IAAMK,EAAYvhB,KAAK6gB,WAAWhG,IAAIqG,GAF1C,uBAGI,YAAuBK,EAAvB,+CACA,KADWO,EACX,QACI,GAAI/E,EAASgF,SAASD,GACtB,4BACI,YAAsB9hB,KAAKgiB,uBAAuBF,GAAlD,+CACA,KADUd,EACV,QACII,EAAUtd,KAAK,CACXob,IAAK8B,EACLjN,KAAM+N,KALlB,qFANR,mFALJ,2BAwBI,YAAsB9hB,KAAKgiB,uBAAuBd,GAAlD,+CACA,KADUF,EACV,QACII,EAAUtd,KAAK,CACXob,IAAK8B,EACLjN,KAAMmN,KA5BlB,kFAiCI,GAAIE,GAAaA,EAAU3iB,OAAS,EAEhC,OAAO2iB,EAAUrB,QACb,SAACC,EAAK3hB,GAAN,OAAgB2hB,EAAG,OACf,SAAAjb,GAAG,OAAI1G,EAAM6gB,IAAI+C,eAAelF,EAAU1e,EAAM0V,KAAMkJ,QAE1DL,QAAQqB,UAIZ,MAAM,IAAI/b,MAAM,uC,6CAUDgf,GAEnB,OAAOlhB,KAAK4gB,WAAW/F,IAAIqG,K,qCAQd,OAAOlhB,KAAK4gB,WAAW9e,S,mDAUpC,OADYE,MAAMkgB,KAAKliB,KAAK4gB,WAAW9e,QAC5BqgB,KAAK,O,gCAMR,OAAOniB,KAAK4gB,WAAWV,MAAQ,O,kCCxOxC,SAASkC,KAEZ,OAAOnf,OAAOof,SAASC,KAUpB,SAASC,GAAiBpG,GAE7B,IAAMtZ,EAAS,GACT2f,EAASze,SAASsY,cAAc,KACtCmG,EAAOF,KAAOnG,EACd,IACMsG,EADQD,EAAOE,OAAO3kB,UAAU,GACnB4kB,MAAM,KAL7B,uBAMI,YAAeF,EAAf,+CACA,KACUG,EADV,QACmBD,MAAM,KACrB9f,EAAO+f,EAAK,IAAMC,mBAAmBD,EAAK,KATlD,kFAWI,OAAO/f,E,oLC5BX,IAKIigB,GAAiB,KA8KNC,G,WA1KX,c,4FACA,SACI/iB,KAAKgjB,MAAQ3P,KAAKvV,SAAS,iBAC3BkC,KAAKijB,QAAU,KACfjjB,KAAKkjB,aAAe,KACpBljB,KAAKmjB,gBAAiB,EACtBnjB,KAAKkZ,KAAO,KAEZlZ,KAAKojB,WAAa,KAElBpjB,KAAKqjB,WAAa,G,2DAGVC,GAGR,OADAtjB,KAAKqjB,WAAWvf,KAAKwf,GACdtjB,O,mCAGEsS,GACb,WADkBiR,EAClB,uDAD+B,KAE3B,GAAqB,OAAjBvjB,KAAKijB,QAAT,CAKA,GAHAve,EAAOM,IAhCI,UAgCX,uCAAuDue,EAAvD,UAGKA,GAAcA,EAAW9kB,QAAU,EACxC,CACI,IAAM+kB,EAAYC,GAA2BA,MACzC,WAAYD,IAAWD,EAAaC,EAAS,UAC5CD,GAAcA,EAAW9kB,QAAU,OAEpC8kB,EAAajO,KAAaC,QAtCD,mBAuCNgO,EAAW9kB,QAAU,KAEpC8kB,EA1CM,OAgDlB,IAAI9L,EAAaP,GAAQqM,GACzB,GAAK9L,IAGDA,EAAaP,GADbqM,EAnDc,QAiDlB,CAWA,IAAM7L,EAAkBD,EAAU,cAC9BC,GAAoBpF,EAAIqF,iBAKlBD,IAAmBpF,EAAIqF,kBAO7BmL,IAAgBza,aAAaya,IAEjCA,GAAiB1a,YAAW,WAExBqP,EAAWL,OAAM,SAACsM,GAEdZ,GAAiB,KAEjB,EAAK5J,KAAO5G,EACZ,EAAK4Q,aAAeQ,EACpB,EAAKN,WAAa,IAAM3lB,eACxB,IAEI,EAAKwlB,QAAU,IAAIS,EAAYpR,GAG/BA,EAAIqR,cAEJ,EAAKV,QAAQ9H,WAAW7I,GAN5B,2BAQI,YAAuB,EAAK+Q,WAA5B,+CACA,QACaO,eAAe,GAVhC,kFAaItO,KAAakB,QAjGQ,gBAiG2B+M,GAEhD,EAAKJ,gBAAiB,EAE1B,MAAO9f,GAEHJ,OAAO4gB,MAAM,kCAAqCN,EAAa,OAAUlgB,EAAEuB,eAtGrE,MAkEd3B,OAAO4gB,MAAM,sCAAyCN,EAAa,kCALnEtgB,OAAO4gB,MAAM,4CAA+CN,EAAa,iCAPrEtgB,OAAO4gB,MAAM,0CAA6CN,EAAa,Q,qCAsDpEjR,GACf,IADoBiR,EACpB,uDADiC,KAE7B,GAAqB,OAAjBvjB,KAAKijB,QAAkB,MAAM,IAAI/gB,MAAM,kDAE3ClC,KAAK8jB,YAAYxR,GACjBtS,KAAK+jB,aAAazR,EAAKiR,K,oCAGbjR,GAENtS,KAAKijB,SAAWjjB,KAAKmjB,gBAErBnjB,KAAKijB,QAAQe,OAAO1R,K,kCAIhBA,GAER,GAAqB,OAAjBtS,KAAKijB,QAAT,CAEAve,EAAOM,IApII,UAoIY,uBAH3B,2BAKI,YAAuBhF,KAAKqjB,WAA5B,+CACA,QACaY,cAAcjkB,MAP/B,kFAUIA,KAAKijB,QAAQzH,QAAQxb,KAAKkZ,MAC1BlZ,KAAKmjB,gBAAiB,EACtBnjB,KAAKkjB,aAAe,KACpBljB,KAAKijB,QAAU,KACfjjB,KAAKojB,WAAa,KAClBpjB,KAAKkZ,KAAO,Q,qCAGDrX,IAENA,GAAQA,EAAKpD,QAAU,EAExBuB,KAAKgjB,MAAQ3P,KAAKvV,SAAS,iBAI3BkC,KAAKgjB,MAAQnhB,EAGjB,IAAMxD,EAAQ2B,KAAKgjB,MACb5G,EAAUrY,SAASmgB,eAAe,gBAClCC,EAAS/H,EAAQgI,UACjBC,EAAYF,EAAO/hB,QAAQ,KAG7Bga,EAAQgI,WAFO,IAAfC,EAEoBF,EAAOpmB,UAAU,EAAGsmB,GAAWC,OAAS,MAAQjmB,EAIhD8lB,EAAS,MAAQ9lB,I,uCAI1B,OAAO2B,KAAKgjB,Q,yCACV,OAAOhjB,KAAKijB,U,uCACd,OAAwB,OAAjBjjB,KAAKijB,U,qCACd,OAAOjjB,KAAKojB,a,+BAClB,OAAOpjB,KAAKkZ,U,6MC1IZqL,G,WA1CX,c,4FACA,SACIvkB,KAAKwkB,cAAgB,GACrBxkB,KAAKykB,YAAc,K,6DAGT3kB,GAGV,OADAE,KAAKykB,YAAc3kB,EACZE,O,oCAGG0kB,GAGV,OADA1kB,KAAKwkB,cAAc1gB,KAAK4gB,GACjB1kB,O,qCAIIgD,M,oCAMDA,GAEVhD,KAAKwkB,cAAc/lB,OAAS,EAC5BuB,KAAKykB,YAAc,O,sCAKnB,OAAOzkB,KAAKykB,c,wCAKZ,OAAOzkB,KAAKwkB,mB,6MCgBLG,G,WAtDX,c,4FACA,SACI3kB,KAAKwkB,cAAgB,GACrBxkB,KAAKykB,YAAc,KACnBzkB,KAAK4kB,wBAA0B,K,yEAGTC,GAEtB7kB,KAAK4kB,wBAA0BC,I,oCAGrB/kB,GAGV,OADAE,KAAKykB,YAAc3kB,EACZE,O,oCAGG0kB,GAGV,OADA1kB,KAAKwkB,cAAc1gB,KAAK4gB,GACjB1kB,O,qCAIIgD,M,oCAKDA,GAEVA,EAAQ2P,SAASmS,sBAAsBC,WAEvC/kB,KAAKwkB,cAAc/lB,OAAS,EAC5BuB,KAAKykB,YAAc,O,sCAKnB,OAAOzkB,KAAKykB,c,wCAKZ,OAAOzkB,KAAKwkB,gB,kDAKZ,OAAOxkB,KAAK4kB,6B,6MCRLI,G,WA1CX,c,4FACA,SACIhlB,KAAKilB,aAAe,GACpBjlB,KAAKklB,WAAa,K,4DAGTplB,GAGT,OADAE,KAAKklB,WAAaplB,EACXE,O,mCAGEmlB,GAGT,OADAnlB,KAAKilB,aAAanhB,KAAKqhB,GAChBnlB,O,qCAIIgD,M,oCAMDA,GAEVhD,KAAKilB,aAAaxmB,OAAS,EAC3BuB,KAAKklB,WAAa,O,qCAKlB,OAAOllB,KAAKklB,a,uCAKZ,OAAOllB,KAAKilB,kB,+2BCrCpB,IAyDeG,G,YArDX,WAAYtlB,GACZ,a,4FAAA,UACI,0BAAMA,KAEDulB,eAAiB,GACtB,EAAKC,cAAgB,KAJzB,E,iSASA,WACUC,EAAgBvlB,KAAKF,MAAMylB,cAC3BC,GAAexlB,KAAKF,MAAMqK,UAAYob,EAAcE,aAErDzlB,KAAKslB,eAAiBE,IAEvBxlB,KAAKslB,cAAgBld,YAAW,WAE5B,EAAKkd,cAAgB,KACrB,EAAKD,eAAe5mB,OAAS,EAC7B8mB,EAAcG,4BAA4B,EAAKL,kBAxBzB,MA4B9B,IAAMM,EAAWJ,EAAcK,8BACzBC,EAAgBN,EAAcO,mBAEpC,OACI,yBAAK7lB,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,KAAM4lB,iBACvB,IAAM/lB,KAAKF,MAAMI,UACXG,MAAOL,KAAKF,MAAMO,OACjBmlB,GAAexlB,KAAKqlB,eAAerb,KAAI,SAAC3G,EAAG9E,GAExC,IAAMynB,EAAWH,IAAkBxiB,EACnC,OACI,yBAAK+G,IAAK/G,EAAEP,cAAgB,IAAMvE,EAAI,KAAOynB,EAAWL,EAAW,GAC/DzlB,UAAWC,KAAMmD,QAC5B0iB,EAAW,WAAa,KACb,2BAAO9lB,UAAWC,KAAM8lB,cACnB5iB,EAAEP,eAEP,2BAAO5C,UAAWC,KAAM+lB,aACnB7iB,EAAExB,MAAQmkB,GAAYL,EAAW,EAAI,KAAOA,EAAW,e,gCA7C/DjlB,IAAMC,W,uKCJ/B,IAiIewlB,G,WA3HX,c,4FACA,SACInmB,KAAKomB,QAAU,GACfpmB,KAAKqmB,YAAc,EAEnBrmB,KAAKsmB,gBAAkB,K,sEAGJC,GAGnB,OADAvmB,KAAKsmB,gBAAkBC,EAChBvmB,O,qCAIIgD,M,oCAMDA,GAEVhD,KAAK6Q,U,qCAKL,GAAoC,mBAAzB7Q,KAAKsmB,gBAChB,4BAHYE,EAGZ,yBAHYA,EAGZ,gBACI,IAAM3K,EAAU7b,KAAKsmB,gBAAgBE,GACrC,IAAI3K,EAMA,MAAM,IAAI3Z,MAAM,sDAJhBlC,KAAKymB,sBAAsB5K,QAS/BnX,EAAOgiB,MAhDA,cAgDkB,0D,4CAIXC,GAGlB,KAAO3mB,KAAKqmB,YAAc,GAEtBrmB,KAAKomB,QAAQQ,QACX5mB,KAAKqmB,YAMX,IAFArmB,KAAKomB,QAAQtiB,KAAK6iB,GAEX3mB,KAAKomB,QAAQ3nB,OA9DD,KAgEfuB,KAAKomB,QAAQrjB,Y,yCAMjB,OAAK/C,KAAK6mB,UACH7mB,KAAKomB,QAAQpmB,KAAKomB,QAAQ3nB,OAASuB,KAAKqmB,YAAc,GADjC,O,qCAM5B,OAAKrmB,KAAK8mB,UACH9mB,KAAKomB,QAAQpmB,KAAKomB,QAAQ3nB,OAASuB,KAAKqmB,YAAc,GADjC,O,6BAM5B,GAAKrmB,KAAK6mB,UAAV,CAMA,IAAMrjB,EAAQxD,KAAKomB,QAAQpmB,KAAKomB,QAAQ3nB,OAASuB,KAAKqmB,YAAc,KAClErmB,KAAKqmB,YAEP7iB,EAAMujB,UAAU/mB,S,gCAKhB,OAAOA,KAAKqmB,YAAcrmB,KAAKomB,QAAQ3nB,S,6BAKlCuB,KAAK8mB,cAMR9mB,KAAKqmB,YACOrmB,KAAKomB,QAAQpmB,KAAKomB,QAAQ3nB,OAASuB,KAAKqmB,YAAc,GAE9DW,UAAUhnB,S,gCAKhB,OAAOA,KAAKqmB,YAAc,I,8BAK1BrmB,KAAKomB,QAAQ3nB,OAAS,EACtBuB,KAAKqmB,YAAc,I,+CAGI,OAAOrmB,KAAKsmB,qB,sNCtF5BW,G,WArCX,c,4FACA,SACIjnB,KAAKknB,UAAY,GAEjBlnB,KAAKmnB,gBAAkBjY,G,iEAGTkY,GAGd,OADApnB,KAAKmnB,gBAAkBC,EAChBpnB,O,iCAGAqnB,GAGP,OADArnB,KAAKknB,UAAUpjB,KAAKujB,GACbrnB,O,qCAIIgD,M,oCAMDA,GAEVhD,KAAKknB,UAAUzoB,OAAS,EACxBuB,KAAKmnB,gBAAkBjY,K,0CAGL,OAAOlP,KAAKmnB,kB,oCAClB,OAAOnnB,KAAKknB,Y,oCACZ,OAAOlnB,KAAKknB,UAAUzoB,OAAS,O,sNC1BpC6oB,G,WAVX,WAAYzlB,EAAMxD,I,4FAClB,SACI2B,KAAKgjB,MAAQnhB,EACb7B,KAAKunB,OAASlpB,E,0DAGL,OAAO2B,KAAKunB,S,gCACb,OAAOvnB,KAAKgjB,W,yMCN5B,IAoFewE,G,WA9EX,WAAYC,GACZ,IADuBC,EACvB,uDADsC,IAAIlI,K,4FAC1C,SACIxf,KAAKgjB,MAAQyE,EACbznB,KAAK2nB,QAAUD,E,6DAGGD,EAAW1lB,GAE7B2C,EAAOM,IAdI,QAcX,+BAA+CyiB,EAA/C,SACA,IAAMG,EAAU,IAAIC,eACpBD,EAAQE,mBAAqB,WAEzB,GAA2B,IAAvBF,EAAQG,YACW,MAAnBH,EAAQI,OACZ,CACI,IAAMnlB,EAAS+kB,EAAQK,aACvBlmB,EAASc,KAGjB+kB,EAAQM,QAAU,WAEdxjB,EAAOM,IA3BA,QA2BP,yCAAyDyiB,EAAzD,QAEJG,EAAQ9hB,KAAK,MA3BJ,cA2BsB2hB,EAAY,UAAU,GACrDG,EAAQO,iBAAiB,eAAgB,gBACzCP,EAAQQ,S,oCAGSX,EAAWY,EAAWtmB,GAEvC2C,EAAOM,IApCI,QAoCX,8BAA8CyiB,EAA9C,SAEA,IAGIpD,EAAWja,EAAK/L,EAHdwE,EAAS,IAAI2kB,EAAMC,GAInBa,EAAQD,EAAU1F,MAAM,MAPlC,uBAQI,YAAiB2F,EAAjB,+CACA,KADSC,EACT,SACIA,EAAOA,EAAKjE,QACHkE,WAAW,QAChBD,EAAKC,WAAW,YAEhB9jB,EAAOM,IAjDJ,QAiDH,6DAA6EujB,EAAKxqB,UAAU,KAAKU,QAAQ6lB,OAAzG,QAGJD,EAAYkE,EAAKnmB,QAAQ,MACT,IAEhBgI,EAAMme,EAAKxqB,UAAU,EAAGsmB,GAAWC,OACnCjmB,EAAQkqB,EAAKxqB,UAAUsmB,EAAY,GAAGC,OACpB,GAAdla,EAAI3L,QAERoE,EAAO8kB,QAAQ/M,IAAIxQ,EAAK,IAAIkd,GAAWld,EAAK/L,OAxBpD,kFA2BIqG,EAAOM,IA9DI,QA8DX,sBAAsCyiB,EAAtC,cAEA1lB,EAASc,O,kCAGJ6Q,EAAcrV,GAGnB,OADA2B,KAAK2nB,QAAQ/M,IAAIlH,EAAc,IAAI4T,GAAW5T,EAAcrV,IACrD2B,O,kCAGC0T,GAGR,OADA1T,KAAK2nB,QAAL,OAAoBjU,GACb1T,O,kCAGG,OAAOA,KAAK2nB,QAAQjH,W,qCACnBhN,GAAgB,OAAO1T,KAAK2nB,QAAQ9M,IAAInH,K,gCAC3C,OAAO1T,KAAKgjB,W,ixBCjBbyF,G,YA/DX,WAAYC,EAAchV,GAC1B,MADwCiV,EACxC,uDADoD,KAAMC,EAC1D,uDAD0E,KAC1E,O,4FAAA,UACI,E,uEAAA,sBAAMlV,EAAcgV,EAAaG,iBAAiBnV,MAC7CoV,cAAgBJ,EACrB,EAAKK,UAAY,GAGbJ,IAEA,EAAKK,QAAUL,EACfA,EAAYI,UAAUjlB,KAAtB,QAIJ,EAAKmlB,iBAAmBL,EAb5B,E,sSAiBA,IADYM,IACZ,yDACI,GAAIlpB,KAAKgpB,QACT,CACI,IAAMG,EAAcnpB,KAAKgpB,QAAQnV,WACjC,GAAI7T,KAAKipB,iBACT,CACI,IAAMtd,EAAW3L,KAAKipB,iBAAiBnkB,KAAK9E,KAAMmpB,GAClDnpB,KAAKunB,OAAS5b,OAId3L,KAAKunB,OAAS4B,EAGlB,GAAID,EACJ,CACIlpB,KAAK8oB,cAAcM,iBAAiBppB,KAAKgjB,MAAOhjB,KAAKunB,QADzD,2BAEI,YAAmBvnB,KAAK+oB,UAAxB,+CACA,KADU1b,EACV,QACIA,EAAMgc,aAAY,IAJ1B,uF,+BAUChrB,GACT,IADgB6qB,IAChB,yDAGI,GAFAlpB,KAAKunB,OAASlpB,EAEV6qB,EACJ,CACIlpB,KAAK8oB,cAAcM,iBAAiBppB,KAAKgjB,MAAO3kB,GADpD,2BAEI,YAAmB2B,KAAK+oB,UAAxB,+CACA,KADU1b,EACV,QACIA,EAAMgc,aAAY,IAJ1B,sF,uCASe,OAAOrpB,KAAKgpB,U,2CACR,OAAOhpB,KAAKipB,mB,yCACd,OAAOjpB,KAAK+oB,Y,wCACb,OAAO/oB,KAAK8oB,mB,gCA9DLxB,I,uKCC/B,IA6MegC,G,WAvMX,c,4FACA,SACItpB,KAAK2nB,QAAU,IAAInI,IACnBxf,KAAKupB,QAAU,IAAI/J,IACnBxf,KAAKwpB,SAAW,KAChBxpB,KAAKypB,cAAgB,KAErBzpB,KAAK0pB,OAAS,K,wDAGThW,GACT,IADuBoC,EACvB,uDAjBuB,UAgBgC6S,EACvD,uDADqE,KAAMC,EAC3E,uDAD6F,KAEnFe,EAAa,IAAIlB,GAAiBzoB,KAAM0T,EAAciV,EAAaC,GACzE,GAAI5oB,KAAKwpB,SACT,CACI,IAAMI,EAAgB5pB,KAAK6oB,iBAAiBnV,GAC5CiW,EAAWlW,SAASmW,GAAe,GACnC5pB,KAAKypB,cAAcI,SAASnW,EAAckW,GAY9C,OAVA5pB,KAAK2nB,QAAQ/M,IAAIlH,EAAciW,GAE3B3pB,KAAKupB,QAAQ3J,IAAI9J,GAEjB9V,KAAKupB,QAAQ1O,IAAI/E,GAAWhS,KAAK4P,GAIjC1T,KAAKupB,QAAQ3O,IAAI9E,EAAW,CAACpC,IAE1BiW,I,iCAGAjW,GAEP1T,KAAK2nB,QAAL,OAAoBjU,GADxB,2BAGI,YAAyB1T,KAAKupB,QAAQ7I,SAAtC,+CACA,KADWoJ,EACX,QACUza,EAAQya,EAAW1nB,QAAQsR,GAC7BrE,GAAS,GAETya,EAAWznB,OAAOgN,EAAO,IARrC,kFAYQrP,KAAKwpB,UAELxpB,KAAKypB,cAAcM,YAAYrW,K,8BAMnC1T,KAAKupB,QAAQ1Y,QACb7Q,KAAK2nB,QAAQ9W,QACb7Q,KAAKwpB,SAAW,KAChBxpB,KAAKypB,cAAgB,O,iCAGdrN,GAEPpc,KAAKwpB,SAAWpN,EAChBpc,KAAKypB,cAAgB,IAAIjC,GAnEN,WAiEvB,2BAGI,YAAoBxnB,KAAK2nB,QAAQjH,SAAjC,+CACA,KADWrgB,EACX,QACIA,EAAMoT,SAASzT,KAAK6oB,iBAAiBxoB,EAAMsT,YAAY,IAL/D,kFAOI,OAAO3T,O,8BAKP,IAAMmV,EAAQnV,KAAK0pB,QAAU1pB,KAAKypB,cAClC,GAAItU,EACJ,4BACI,YAAoBnV,KAAK2nB,QAAQjH,SAAjC,+CACA,KADWrgB,EACX,QACU6Z,EAAY7Z,EAAMsT,UAClBqW,EAAa7U,EAAM4E,eAAeG,GACxC,GAAI8P,EAEA3pB,EAAMoT,SAASuW,EAAWnW,iBAEzB,GAAIxT,EAAM4pB,iBAEX5pB,EAAMgpB,mBAEL,GAAIlU,IAAUnV,KAAKypB,cACxB,CACI,IAAMS,EAAelqB,KAAKypB,cAAc1P,eAAeG,GACnDgQ,GAEA7pB,EAAMoT,SAASyW,EAAarW,cAlB5C,sF,gCAyBM4T,GACV,WACQznB,KAAK0pB,QAAU1pB,KAAK0pB,OAAO/V,YAAc8T,EAEzCznB,KAAKqW,QA5GU,YA8GVoR,GAELznB,KAAK0pB,OAAS1pB,KAAKypB,cACnBzpB,KAAKqW,SAILmR,GAAM2C,eAAe1C,GAAW,SAAC2C,GAE7B5C,GAAM6C,cAAc5C,EAAW2C,GAAW,SAACjV,GAEvC,EAAKuU,OAASvU,EACd,EAAKkB,gB,uCAMJ3C,GAEb,IACMrV,EADgB4E,OAAO8H,iBAAiB/K,KAAKwpB,UACvBxe,iBAAiB0I,GAC7C,OAAIrV,EAEOA,EAAMimB,OAIN,O,uCAIE5Q,EAAcrV,GAE3B2B,KAAKwpB,SAASnpB,MAAM6H,YAAYwL,EAAcrV,K,+BAGzCqV,GAEL,OAAI1T,KAAK2nB,QAAQ/H,IAAIlM,GAEV1T,KAAK2nB,QAAQ9M,IAAInH,GAAcG,WAI/B7T,KAAK6oB,iBAAiBnV,K,uCAIpBoC,GACjB,WACI,OAAI9V,KAAKupB,QAAQ3J,IAAI9J,GAEV9V,KAAKupB,QAAQ1O,IAAI/E,GAAW9L,KAAI,SAAA0J,GAAY,OAAI,EAAKiU,QAAQ9M,IAAInH,MAIjE,O,qCAIAA,GAEX,OAAI1T,KAAK2nB,QAAQ/H,IAAIlM,GAEV1T,KAAK2nB,QAAQ9M,IAAInH,GAIjB,O,kCAMX,OAAO1T,KAAK2nB,QAAQjH,W,sCAKpB,OAAO1gB,KAAK2nB,QAAQ7lB,S,2CAKpB,OAAO9B,KAAKupB,QAAQznB,S,wCAKpB,OAAO9B,KAAK0pB,QAAU1pB,KAAKypB,mB,kCCzIpBa,GAnEG,CACdC,SAAU,KACVlH,WAAY,GACZlI,WAHc,SAGHqP,GAEFxqB,KAAKob,gBAEVpb,KAAKuqB,SAAW,IAAIE,iBAAiBD,GACrCxqB,KAAKuqB,SAASG,UAAY1qB,KAAK2qB,mBAAmBhpB,KAAK3B,QAE3Dwb,QAVc,WAYLxb,KAAKob,gBAEVpb,KAAKuqB,SAASK,QACd5qB,KAAKuqB,SAAW,KAChBvqB,KAAKqjB,WAAW5kB,OAAS,IAE7BosB,YAlBc,SAkBFvH,GAGR,OADAtjB,KAAKqjB,WAAWvf,KAAKwf,GACdtjB,MAEX8qB,eAvBc,SAuBCxH,GAEXtjB,KAAKqjB,WAAWhhB,OAAOrC,KAAKqjB,WAAWjhB,QAAQkhB,GAAW,IAE9DyH,YA3Bc,SA2BFC,EAAQC,EAAalX,GACjC,IADuCwF,EACvC,uDAD4C,GAExC,GAAKvZ,KAAKob,cAAV,CAEA,IAAMvY,EAAS,CACXkR,KAAMA,EACNmL,IAAK8L,EACL7rB,IAAK8rB,GAGTlT,OAAOmT,OAAOroB,EAAQ0W,GACtBvZ,KAAKuqB,SAASY,YAAYtoB,KAE9B8nB,mBAxCc,SAwCKS,GAEf,IAAMC,EAAcD,EAAG7R,KAAH,KACd+R,EAAgBF,EAAG7R,KAAH,IAChBgS,EAAqBH,EAAG7R,KAAH,IAH/B,uBAII,YAAsBvZ,KAAKqjB,WAA3B,+CACA,KADUC,EACV,QACkD,mBAAnCA,EAAQ,oBAEfA,EAASqH,mBAAmBU,EAAaC,EAAeC,EAAoBH,EAAG7R,OAR3F,oFAYAiS,aArDc,WAuDV,OAAOxrB,KAAKqjB,YAEhBoI,WAzDc,WA2DV,OAAOzrB,KAAKuqB,UAEhBnP,YA7Dc,WA+DV,MAAO,qBAAsBsQ,O,2KC5CtBC,G,WAjBX,WAAYC,EAAWC,I,4FACvB,SACI7rB,KAAKojB,WAAawI,EAClB5rB,KAAK8rB,aAAeD,E,8DAKpB,OAAO7rB,KAAKojB,a,uCAKZ,OAAOpjB,KAAK8rB,kB,yMCXpB,IAiGeC,G,WA3FX,WAAYzZ,I,4FACZ,SACItS,KAAKkZ,KAAO5G,EACZtS,KAAKgsB,SAAW,KAChBhsB,KAAKojB,WAAa,KAClBpjB,KAAKisB,gBAAkB,IAAIzM,IAE3Bxf,KAAKgb,UAAY,G,iEAGHa,GAId,OAFA7b,KAAKgb,UAAUlX,KAAK+X,GACpBA,EAAQqQ,oBAAoBlsB,MACrBA,O,2CAGU6b,GAEjB7b,KAAKgb,UAAU3Y,OAAOrC,KAAKgb,UAAU5Y,QAAQyZ,GAAU,K,8BAKvD7b,KAAKgb,UAAUvc,OAAS,I,oCAGdU,EAAK4U,EAAMnP,GAErB0lB,GAAUS,YAAY/qB,KAAKojB,WAAYjkB,EAAK4U,EAAMnP,K,yCAInCmP,EAAMmL,EAAK/f,EAAKyF,GAG/B,IAAIzF,IAAOA,EAAIqpB,WAAW,MAAQrpB,IAAQa,KAAKojB,WAE/C,GA5C2B,kBA4CvBrP,EAEA/T,KAAKisB,gBAAgBrR,IAAIsE,EAAK,IAAIyM,GAAczM,EAAKta,EAAO,MAAY,cAAgBxG,aAAW8gB,KACnGoL,GAAUS,YAAY/qB,KAAKojB,WAAYlE,EA9Cf,uBAgDvB,GA/CqB,iBA+CjBnL,EAEL/T,KAAKisB,gBAAL,OAA4B/M,QAE3B,GApDuB,mBAoDnBnL,EAEL/T,KAAKisB,gBAAgBrR,IAAIsE,EAAK,IAAIyM,GAAczM,EAAKta,EAAO,MAAY,cAAgBxG,aAAW8gB,SAGvG,4BAEI,YAAqBlf,KAAKgb,UAA1B,4CACA,QAC2B2P,mBAAmB5W,EAAMmL,EAAK/f,EAAKyF,GAF9D,OAFJ,sF,qCAaW5B,GAEXhD,KAAKgsB,SAAWhpB,EAChBhD,KAAKojB,WAAapgB,EAAQmpB,eAE1B7B,GAAUO,YAAY7qB,MACtBsqB,GAAUS,YAAY/qB,KAAKojB,WAAY,MA7EZ,mB,oCAiFjBpgB,GAEVsnB,GAAUS,YAAY/qB,KAAKojB,WAAY,MAjFb,gBAkF1BkH,GAAUQ,eAAe9qB,MAEzBA,KAAK6Q,QACL7Q,KAAKgsB,SAAW,KAChBhsB,KAAKojB,WAAa,O,0CAGA,OAAOpjB,KAAKisB,gBAAgBvL,W,qCACjC,OAAO1gB,KAAKojB,a,mCACd,OAAOpjB,KAAKgsB,W,+BAChB,OAAOhsB,KAAKkZ,U,k+BCWrBkT,G,YAEF,WAAYtsB,GACZ,a,4FAAA,SACI,E,uEAAA,sBAAMA,IAENssB,EAAIC,SAAJ,MAEA,EAAKC,kBAAoB5rB,IAAM6rB,YAC/B,EAAKC,iBAAmB9rB,IAAM6rB,YAC9B,EAAKE,UAAY,KACjB,EAAKC,aAAe,KAEpB,EAAK5S,cAAgB,IAAIwP,GACzB,EAAKqD,YAAc,IAAI9S,GAAW,EAAKC,eACvC,EAAK8S,WAAa,IAAIlS,GACtB,EAAKmS,OAAS,IAAI5T,GAAJ,OAEd,EAAK6T,eAAiB,IAAI3M,GAC1B,EAAK4M,eAAiB,IAAIpM,GAE1B,EAAKqM,aAAe,IAAI7G,GACxB,EAAK8G,eAAiB,IAAInsB,KAC1B,EAAKosB,eAAiB,IAAI3I,GAC1B,EAAK4I,aAAe,IAAIxI,GACxB,EAAKyI,iBAAmB,IAAIpI,GAC5B,EAAKqI,eAAiB,IAAIC,KAC1B,EAAKC,gBAAkB,IAAItG,GAC3B,EAAKuG,qBAAuB,IAAIC,KAChC,EAAKC,kBAAoB,IAAI3B,GAAJ,OAEzB,EAAKC,UAAW,IAAIjJ,IACf8H,YAAY,EAAKmC,cACjBnC,YAAY,EAAKoC,gBACjBpC,YAAY,EAAKqC,gBACjBrC,YAAY,EAAKsC,cACjBtC,YAAY,EAAKuC,kBACjBvC,YAAY,EAAKwC,gBACjBxC,YAAY,EAAK0C,iBACjB1C,YAAY,EAAK2C,sBACjB3C,YAAY,EAAK6C,mBACjB7C,YAVW,OAahB,EAAK9P,OAAQ,EAEb,EAAKlV,MAAQ,CACTgD,MAAM,GAGV,EAAK8kB,0BAA4B1qB,OAAO2qB,WAAW,sCACnD,EAAKC,2BAA6B5qB,OAAO2qB,WAAW,uCAGpD,EAAKE,mBAAqB,EAAKA,mBAAmBnsB,KAAxB,OAC1B,EAAKosB,qBAAuB,EAAKA,qBAAqBpsB,KAA1B,OApDhC,E,sSA4EImZ,GAASK,WAAW7F,MACpBgV,GAAUnP,WArHW,Y,uCAgIrBL,GAASU,UAEL4Q,EAAIC,UAEJD,EAAIC,SAAS2B,2B,6CAjCjBhuB,KAAKgsB,SAASjI,aAAa/jB,Q,6CAO3BA,KAAKgsB,SAASlI,YAAY9jB,Q,qCA+BfgD,GACf,WACUirB,EAAgBjrB,EAAQqW,mBAG9BrZ,KAAKmtB,aACAe,cAAc1b,IACd0b,cAAchZ,IACdgZ,cAAcvX,IACduX,cAAc3W,IAEnBvX,KAAKitB,eACAkB,eAAe,MAAO,CAACvtB,KAAU,SAAS,kBAAMqtB,EAAcpd,MAAM,MACpEud,kBAAkB,cAAc,WAAQvkB,IAAWwkB,YAAcxkB,IAAWwkB,cAG7EruB,KAAKgtB,aAAasB,0BAElBtuB,KAAKitB,eACAkB,eAAe,OAAQ,CAACvtB,KAAU,SAAS,kBAAM,EAAK2tB,iBAAiBC,UACvEL,eAAe,OAAQ,CAACvtB,KAAUC,KAAW,SAAS,kBAAM,EAAK0tB,iBAAiBE,UAGtFzuB,KAAKutB,gBAAgBmB,eAEtB1uB,KAAKutB,gBACAoB,WAAW,6CACXA,WAAW,oCACXA,WAAW,mCACXA,WAAW,kFACXA,WAAW,oCACXA,WAAW,eACXA,WAAW,wBACXA,WAAW,kBACXA,WAAW,uBAGpB3uB,KAAK8Z,cAAc8U,WAAW7qB,SAASmgB,eAAe,SA5K9D,SAA2BzO,GAEvBA,EAAaoZ,SAAS,qBAAsB,SAC5CpZ,EAAaoZ,SAAS,qBAAsB,SAC5CpZ,EAAaoZ,SAAS,uBAAwB,SAE9CpZ,EAAaoZ,SAAS,iBAAkB,WACxC,IAAMC,EAAerZ,EAAaoZ,SAAS,kBAAmB,WAC9DpZ,EAAaoZ,SAAS,uBAAwB,WAC9CpZ,EAAaoZ,SAAS,uBAAwB,SAAUC,EAAcC,IACtEtZ,EAAaoZ,SAAS,uBAAwB,SAAUC,EAAcC,IAEtE,IAAMC,EAAkBvZ,EAAaoZ,SAAS,qBAAsB,WACpEpZ,EAAaoZ,SAAS,4BAA6B,SAAUG,EAAiBD,IAC9EtZ,EAAaoZ,SAAS,0BAA2B,SAAUG,EAAiBD,IAE5EtZ,EAAaoZ,SAAS,kBAAmB,WACzCpZ,EAAaoZ,SAAS,kBAAmB,WAEzC,IAAMI,EAAexZ,EAAaoZ,SAAS,kBAAmB,WAC9DpZ,EAAaoZ,SAAS,uBAAwB,WAC9CpZ,EAAaoZ,SAAS,yBAA0B,SAAUI,EAAcF,IACxEtZ,EAAaoZ,SAAS,uBAAwB,SAAUI,EAAcF,IACtEtZ,EAAaoZ,SAAS,uBAAwB,SAAUI,EAAcF,IAEtE,IAAMG,EAAoBzZ,EAAaoZ,SAAS,wBAAyB,WACzEpZ,EAAaoZ,SAAS,6BAA8B,SAAUK,EAAmBH,IAEjF,IAAMI,EAAsB1Z,EAAaoZ,SAAS,0BAA2B,WAC7EpZ,EAAaoZ,SAAS,+BAAgC,SAAUM,EAAqBJ,IAErF,IAAMK,EAAsB3Z,EAAaoZ,SAAS,0BAA2B,WAC7EpZ,EAAaoZ,SAAS,+BAAgC,SAAUO,EAAqBL,IA8IjFM,CAAkBrvB,KAAK8Z,eAEvBgB,GAASc,gBAAgB5b,KAAK6sB,QAC9B/R,GAASc,gBAAgB5b,KAAK2sB,aAC9B7R,GAASc,gBAAgB5b,KAAK4sB,YAE9B5sB,KAAK+a,OAAQ,I,oCAIH/X,GAEVhD,KAAK+a,OAAQ,EAEbD,GAASgB,kBAAkB9b,KAAK6sB,QAChC/R,GAASgB,kBAAkB9b,KAAK2sB,aAChC7R,GAASgB,kBAAkB9b,KAAK4sB,YAEhC5sB,KAAK8Z,cAAcjJ,QACnB7Q,KAAK+sB,eAAelc,QACpB7Q,KAAK8sB,eAAejc,QACpB7Q,KAAKmtB,aAAamC,0BAA0B,Q,yCAG7BjsB,GAEf,IAAMwH,EAAS7K,KAAKwsB,iBAAiBviB,QAChCY,EAAO9B,gBAAmB8B,EAAOX,aApNnB,GA4NUlK,KAAKssB,kBAAkBriB,QAC/BslB,eAxNH,GAkNd1kB,EAAOP,cAvNQ,GAgOnBjH,EAAEkB,iBACFlB,EAAEmB,oB,2CAGenB,GAEjB,IAAM4qB,EAAgBjuB,KAAKgsB,SAAS3S,mBAChC4U,GAEAA,EAAcpd,MAAM7Q,Q,4CAIJ,OAAOA,KAAKssB,kBAAkBriB,U,2CAC/B,OAAOjK,KAAKwsB,iBAAiBviB,U,yCAE/B,OAAOjK,KAAK8sB,iB,yCACZ,OAAO9sB,KAAK+sB,iB,uCAEd,OAAO/sB,KAAKgtB,e,yCACV,OAAOhtB,KAAKitB,iB,yCACZ,OAAOjtB,KAAKktB,iB,uCACd,OAAOltB,KAAKmtB,e,2CACR,OAAOntB,KAAKotB,mB,yCACd,OAAOptB,KAAKqtB,iB,0CACX,OAAOrtB,KAAKutB,kB,+CACP,OAAOvtB,KAAKwtB,uB,wCACnB,OAAOxtB,KAAK8Z,gB,4CACR,OAAO9Z,KAAK0tB,oB,mCAErB,OAAO1tB,KAAKgsB,W,yCACN,OAAOhsB,KAAKgsB,SAAS3S,qB,uCAEvB,OAAO,I,2CAKtBrZ,KAAKgsB,SAASwD,cAAcxvB,MAE5B,IAAMyvB,EAAmBzvB,KAAKssB,kBAAkBriB,QAC1CylB,EAAkB1vB,KAAKwsB,iBAAiBviB,QAE9CjK,KAAKitB,eAAe0C,aACdF,GAAoBA,EAAiB3hB,aACrC4hB,GAAmBA,EAAgB3mB,gBACjC2mB,EAAgBE,yB,wCAIVC,EAAiB/vB,GAE/B,IAAM8rB,EAAY5rB,KAAKgsB,SAASG,eAC1B2D,EAAY9vB,KAAKqtB,eAAe0C,oBAAoBF,GAC1D,OAAIC,GAAaA,EAAUrxB,OAAS,EAEzBqxB,EAAU9lB,KAAI,SAACgmB,EAAGzxB,GAAJ,OAAU,kBAACyxB,EAAD,IAAG5lB,IAAKwhB,EAAY,IAAMoE,EAAEC,YAAYpuB,KAAO,IAAMtD,GAAOuB,OAIpF,O,+BAOX,IAAMkD,EAAUhD,KAAKgsB,SACfiC,EAAgBjrB,EAAQqW,mBACxB6W,EAA6BjC,EAAgBA,EAAckC,yBAA2B,KAEtFC,EAAgBpwB,KAAK2tB,0BAA0B0C,QAC/CC,EAAiBtwB,KAAK6tB,2BAA2BwC,QACjDE,EAAevwB,KAAK6F,MAAMgD,KAE1B2nB,EAAgBxwB,KAAK8sB,eACrB2D,EAAgBzwB,KAAK+sB,eAErB2D,EAAc1wB,KAAKgtB,aACnB2D,EAAgB3wB,KAAKktB,eACrB0D,EAAc5wB,KAAKmtB,aACnB0D,EAAiB7wB,KAAKutB,gBACtBlc,EAAsBrR,KAAKwtB,qBAE3BiC,EAAmBzvB,KAAKssB,kBAAkBriB,QAE1C6mB,EAAqBH,EAAcI,kBACnCC,EAAmBL,EAAcM,iBAAmB,CAAEjuB,QAASA,GAC/DkuB,EAAmBN,EAAYG,kBAC/BI,EAAiBP,EAAYK,iBAAmB,CAAEjuB,QAASA,GAC3DouB,EAAoBR,EAAYS,4BAEtC,OACI,yBAAKnxB,UAAWC,IAAMmxB,eAAiBrD,EAAgB,WAAa,KAChE,kBAAC,GAAD,CAAatoB,IAAK3F,KAAKssB,kBAAmBpsB,UAAWC,IAAM8N,QACvDhB,MAAOikB,EACP9iB,UAAW+iB,EACXplB,SAAUqlB,EACVvoB,KAAM0nB,EACNxwB,MAAOmwB,EACPltB,QAASA,EACT2K,aAAc3N,KAAK8tB,oBACnB,kBAAC,EAAD,CAAe/tB,MAAOsT,KAAKvV,SAAS,6BAChCsN,KAAMoN,GACNlL,c1DjYiB,U0DkYjBvD,QAAS/J,KAAK+tB,qBACd5jB,UAAW8jB,IACf,kBAAC,GAAD,CACIluB,MAAOsT,KAAKvV,SAAS,gCACrBsN,KAAM6F,KACN3D,c1DvYiB,U0DwYjBgL,OAAQmY,EAAcc,6BACtBhZ,SAAU,SAAAlI,GAENogB,EAAce,cAAcnhB,GAA5B,OACW,SAAAhN,GAAC,OACJgO,EAAoBogB,iBAChB,0CAA4CpuB,EAAEuB,QAC9C8sB,KA/UF,mBA2UV,SAMa,kBACLjC,EAAiB1K,eAE7B5a,SAAUsmB,EAAckB,YAC5B,kBAAC,EAAD,CAAe5xB,MAAOsT,KAAKvV,SAAS,uBAChCsN,KAAMqN,GACNnL,c1DvZiB,U0DwZjBnD,UAAWumB,EAAY7J,UACvB9c,QAAS,kBAAM2mB,EAAYlC,UAC/B,kBAAC,EAAD,CAAezuB,MAAOsT,KAAKvV,SAAS,uBAChCsN,KAAMsN,GACNpL,c1D5ZiB,U0D6ZjBnD,UAAWumB,EAAY5J,UACvB/c,QAAS,kBAAM2mB,EAAYjC,UAC/B,kBAAC,EAAD,CAAe1uB,MAAOsT,KAAKvV,SAAS,6BAChCsN,KAAMwmB,KACNtkB,c1DjaiB,U0DkajBvD,QAAS,kBAAM0lB,EAAiBF,eAvW9B,IAwWFplB,SAAUqmB,EAAcmB,YAC5B,kBAAC,GAAD,MACA,kBAAC,EAAD,CAAe5xB,MAAOsT,KAAKvV,SAAS,+BAChCsN,KAAMymB,KACNvkB,c1Dxac,O0DyadvD,QAAS,kBAAM0lB,EAAiBF,eA1W9B,MA2WN,kBAAC,EAAD,CAAexvB,MAAOsT,KAAKvV,SAAS,uBAChCsN,KAAMwN,GACNtL,c1D5ac,O0D6advD,QAAS,kBAAM0lB,EAAiBF,eA/W5B,MAgXR,kBAAC,EAAD,CAAexvB,MAAOsT,KAAKvV,SAAS,2BAChCsN,KAAM0N,GACNxL,c1Dhbc,O0DibdvD,QAAS,kBAAM0lB,EAAiBF,eApX9B,MAqXN,kBAAC,EAAD,CAAexvB,MAAOsT,KAAKvV,SAAS,uBAChCsN,KAAMyN,GACN9O,QAAS,kBAAM9G,OAAO6C,KA5X7B,mEA4X4C,aACzC,kBAAC,EAAD,CAAe/F,MAAOsT,KAAKvV,SAAS,sBAChCsN,KAAMuN,GACNrL,c1Dvbc,O0DwbdvD,QAAS,kBAAM9G,OAAO6C,KAjYxB,yCAiY4C,cAGlD,kBAAC,EAAD,CAAYH,IAAK3F,KAAKwsB,iBAAkBtsB,UAAWC,IAAMmJ,YACrDnC,OAAQ2pB,EACRlmB,WAAYomB,EACZzpB,KAAM6oB,E3DhbQ,SACD,Q2DgbbznB,UAAW2nB,E3D/ac,WACE,a2D+a3BznB,KAAM0nB,GAEN,kBAAC,GAAD,KACI,yBAAKrwB,UAAU,YACX,kBAAC,GAAD,CAAaqP,KAAMshB,EAAeiB,oBAC9BtiB,QAAsDxP,KAAK+a,QAAU2V,EAAY7J,WAChFgK,EAAekB,cAAc/nB,KAAI,SAAC3G,EAAG9E,GAAJ,OAAU,2BAAO6L,IAAK/G,EAAI,IAAM9E,GAAI8E,OAIzErD,KAAKgyB,kBAAkBC,MAGvBjyB,KAAKgyB,kBAAkBE,MAGvBlyB,KAAKgyB,kBAAkBG,MAExB,kBAAC,GAAD,CAAkBjyB,UAAWC,IAAMiyB,kBAAmB9f,IAAKtS,OAE3D,kBAAC,GAAD,CAAkBqR,oBAAqBA,IAEtCrR,KAAKitB,eAAexH,aAAe,kBAAC,GAAD,CAAYF,cAAevlB,KAAKitB,0B,gCA9W9EvsB,IAAMC,WAsXxByrB,GAAIC,SAAW,KAGID,IC5ZfiG,GD4ZejG,MErebkG,GAAY,uHAMhB3P,MAAM,MA0GO9f,GALA,CACX0vB,KAAMD,IAAaA,GAAU7zB,OAAS,EACtC+zB,IAAK,2BAA6CF,GAAUnQ,KAAK,SACjE1L,QAJkBC,SDnBtB,SAAS+b,GAAkBC,GAEvBC,IAASC,OAAOlyB,IAAM2b,cAAc+P,IAAMiG,IAC1CpvB,OAAO4vB,sBAAsBJ,IA7EjCxvB,OAAOC,iBAAiB,QAAQ,SAACM,GAE7BkB,EAAOM,IAZQ,MAYf,yBAAyC0R,aAAzC,sBACAhS,EAAOM,IAbQ,MAaf,+BAA+C0R,QAA/C,SAEA,IA4DA2b,GAAOtuB,SAASmgB,eAAe,QAE3BkI,GAAG,cAEHA,GAAI0G,aAAahuB,KAAKsnB,IA5D1B,MAAO/oB,GAEH,MAAMA,EAIVJ,OAAOC,iBAAiB,gBAAgB,SAACM,GAErC,GAAgF,SAA/C8R,KAAaC,QAAQ,sBACtD,CACI,IAAM3Q,EAAUyO,KAAKvV,SAAS,qBAK9B,OAJA0F,EAAQA,GAASP,OAAOO,SAEbA,EAAMuvB,YAAcnuB,GAExBA,MAKf3B,OAAOC,iBAAiB,UAAU,SAACM,GAE/BkB,EAAOM,IAzCI,MAyCY,oBAoDvBonB,GAAG,gBAEHA,GAAI4G,eAAeluB,KAAKsnB,OAjD5BnpB,OAAO4vB,sBAAsBJ,OAIU,mBAAhCxvB,OAAM,mBAEbA,OAAOgwB,kBAAkB5b,MAAK,SAAA6b,GAE1B,GAAIA,EACJ,CACI,IAAItuB,EAAU,GACVuuB,IAAaA,GAAS,OAEtBvuB,GAAWuuB,GAAS,KAGxBzuB,EAAOM,IA9DA,MA8DP,mCAAmD0R,QAAnD,QACAzT,OAAO4gB,MAAM,gEACRjf,EAAU,KAAOA,EAAU,U,4SEpErC,IAAMqtB,EAA6B,gBAC7BC,EAAyB,YACzBC,EAA8B,iBAErC7E,E,WAEF,c,4FACA,SACIttB,KAAKozB,eAAiB,IAAI5T,I,2DAGlB6T,EAASC,GAUjB,OARItzB,KAAKozB,eAAexT,IAAIyT,GAExBrzB,KAAKozB,eAAevY,IAAIwY,GAASvvB,KAAKwvB,GAItCtzB,KAAKozB,eAAexY,IAAIyY,EAAS,CAACC,IAE/BtzB,O,qCAIIgD,M,oCAMDA,GAEVhD,KAAKozB,eAAeviB,U,0CAGJwiB,GAEhB,OAAOrzB,KAAKozB,eAAevY,IAAIwY,Q,gCAIxB/F,O,+1BCxCTrc,E,YAEF,WAAYnR,GAAO,O,4FAAA,+BAAQA,I,gSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,yD,8BAXC5E,IAAM6E,eAgBhB0L,O,sOCOAsiB,E,WArBX,WAAYliB,EAAqBzM,EAAS6M,EAAU+hB,EAAM1zB,I,4FAC1D,SACIE,KAAKwtB,qBAAuBnc,EAC5BrR,KAAKyzB,SAAW7uB,EAChB5E,KAAK0zB,UAAYjiB,EACjBzR,KAAK2zB,MAAQH,EACbxzB,KAAK4zB,OAAS9zB,EACdE,KAAK6zB,IAAMp2B,c,uDAGLuC,KAAKwtB,qBAAqBsG,mBAAmB9zB,Q,6BAChD2E,GAAO,OAAO3E,KAAK2zB,MAAMI,SAASpvB,K,mCAE1B,OAAO3E,KAAKyzB,W,oCACX,OAAOzzB,KAAK0zB,Y,gCAChB,OAAO1zB,KAAK2zB,Q,iCACX,OAAO3zB,KAAK4zB,S,8BACf,OAAO5zB,KAAK6zB,M,+CACK,OAAO7zB,KAAKwtB,0B,s6CCW5BwG,E,YA3BX,WAAYl0B,GACZ,O,4FAAA,+BACUA,I,gSAKV,MACyDE,KAAKF,MAAlD8E,EADZ,EACYA,QAAS4M,EADrB,EACqBA,aAAczH,EADnC,EACmCA,QAAYjK,EAD/C,0CAGI,OACI,2BAAKI,UAAWC,IAAM8zB,wBACdn0B,GACH8E,GACGA,EAAQ+d,MAAM,MAAM3Y,KAAI,SAAC3G,EAAG9E,GAAJ,OAAU,uBAAG6L,IAAK/G,EAAI,IAAM9E,GAAI8E,MAC3DrD,KAAKF,MAAMU,SACZ,4BAAQH,MAAO,CAAC6zB,aAAc,OAAQnqB,QAASA,GAC1CsJ,KAAKvV,SAAS,wBAElB0T,GAAgB,4BAAQzH,QAAS,SAAA1G,GAAC,OAAImO,EAAaoZ,UAC/CvX,KAAKvV,SAAS,+B,8BAtBM4C,IAAMC,W,6fCOxC,IACMwzB,EAAoB,UACpBzC,EAAkB,QAClB0C,EAAoB,UACpBC,EAAqB,WAE5B5G,E,WAEF,c,4FACA,SACIztB,KAAKs0B,SAAW,IAAI9U,IACpBxf,KAAKu0B,eAAiB,G,0EAGC9iB,EAAU+iB,GAGjC,OADAx0B,KAAKs0B,SAAS1Z,IAAInJ,EAAU+iB,GACrBx0B,O,mDAGkByR,GAGzB,OADAzR,KAAKs0B,SAAL,OAAqB7iB,GACdzR,O,uCAGM4E,GACjB,IAD0B6M,EAC1B,uDADqC,KAAM+hB,EAC3C,uDADkD,GAAI1zB,EACtD,uDAD8D,GAAImL,IAClE,yDACQA,GAAWuoB,EAAK/0B,OAAS,GAEzBuB,KAAKy0B,mBAAmBjB,GAG5B,IAAMhiB,EAAe,IAAI+hB,EAAavzB,KAAM4E,EAAS6M,EAAU+hB,EAAM1zB,GAErE,OADAE,KAAKu0B,eAAezwB,KAAK0N,GAClBA,I,wCAIX,IADgBgiB,EAChB,uDADuB,KAEnB,GAAIxzB,KAAKu0B,eAAe91B,QAAU,EAAG,OAAO,KAE5C,GAAIuD,MAAMC,QAAQuxB,GAEd,IAAK,IAAIj1B,EAAIyB,KAAKu0B,eAAe91B,OAAS,EAAGF,GAAK,IAAKA,EACvD,CACI,IAAMiT,EAAexR,KAAKu0B,eAAeh2B,GACrCsF,GAAO,EAFf,uBAGI,YAAkB2vB,EAAlB,+CACA,KADW7uB,EACX,QACI,IAAK6M,EAAakjB,OAAO/vB,GACzB,CACId,GAAO,EACP,QARZ,kFAWI,GAAIA,EAGA,OADA7D,KAAKu0B,eAAelyB,OAAO9D,EAAG,GACvBiT,MAId,IAAoB,iBAATgiB,EAcZ,OAAOxzB,KAAKu0B,eAAe3N,MAZ3B,IAAK,IAAIroB,EAAI,EAAGE,EAASuB,KAAKu0B,eAAe91B,OAAQF,EAAIE,IAAUF,EACnE,CACI,IAAMiT,EAAexR,KAAKu0B,eAAeh2B,GACzC,GAAIiT,EAAakjB,OAAOlB,GAGpB,OADAxzB,KAAKu0B,eAAelyB,OAAO9D,EAAG,GACvBiT,M,yCAUJA,GAEf,IAAMjT,EAAIyB,KAAKu0B,eAAenyB,QAAQoP,GAClCjT,GAAK,GAELyB,KAAKu0B,eAAelyB,OAAO9D,EAAG,K,2CAKtC,IADmBi1B,EACnB,uDAD0B,KAEtB,KAAIxzB,KAAKu0B,eAAe91B,QAAU,GAElC,GAAIuD,MAAMC,QAAQuxB,GAEd,IAAK,IAAIj1B,EAAIyB,KAAKu0B,eAAe91B,OAAS,EAAGF,GAAK,IAAKA,EACvD,CACI,IAAMiT,EAAexR,KAAKu0B,eAAeh2B,GACrCsF,GAAO,EAFf,uBAGI,YAAkB2vB,EAAlB,+CACA,KADW7uB,EACX,QACI,IAAK6M,EAAakjB,OAAO/vB,GACzB,CACId,GAAO,EACP,QARZ,kFAWQA,GAEA7D,KAAKu0B,eAAelyB,OAAO9D,EAAG,QAIrC,GAAoB,iBAATi1B,EAEZ,IAAK,IAAIj1B,EAAIyB,KAAKu0B,eAAe91B,OAAS,EAAGF,GAAK,IAAKA,EACvD,CACI,IAAMiT,EAAexR,KAAKu0B,eAAeh2B,GACrCiT,EAAakjB,OAAOlB,IAEpBxzB,KAAKu0B,eAAelyB,OAAO9D,EAAG,QAMtCyB,KAAKu0B,eAAe91B,OAAS,I,qCAKtBuE,GAGXhD,KAAK20B,2BAvIoB,WAuI0B,SAAA70B,GAAK,OAAI,kBAAC+R,EAAA,EAAD,GAA2B+iB,UAAWC,KAAwB/0B,OAC1HE,KAAK20B,2BAA2BR,GAAmB,SAAAr0B,GAAK,OAAI,kBAAC+R,EAAA,EAAD,GAA2B+iB,UAAWE,KAAwBh1B,OAC1HE,KAAK20B,2BAA2BjD,GAAiB,SAAA5xB,GAAK,OAAI,kBAAC+R,EAAA,EAAD,GAA2B+iB,UAAWG,KAAsBj1B,OACtHE,KAAK20B,2BAA2BP,GAAmB,SAAAt0B,GAAK,OAAI,kBAAC+R,EAAA,EAAD,GAA2B+iB,UAAWI,KAAwBl1B,OAC1HE,KAAK20B,2BAA2BN,GAAoB,SAAAv0B,GAAK,OAAI,kBAAC,EAA+BA,Q,oCAInFkD,GAEVhD,KAAKy0B,uB,4CAGahjB,GAElB,OAAOzR,KAAKs0B,SAAS1U,IAAInO,K,4CAGPA,GAElB,OAAOzR,KAAKs0B,SAASzZ,IAAIpJ,K,yCAKzB,OAAOzR,KAAKu0B,iB,gCAKZ,OAAOv0B,KAAKu0B,eAAe91B,QAAU,O,gCAI9BgvB,O,u3BClKAwH,E,YAdX,WAAYn1B,GAAO,O,4FAAA,+BAAQA,I,gSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,yB,8BAXG5E,IAAM6E,e,2yBCgBlB2vB,E,YAdX,WAAYp1B,GAAO,O,4FAAA,+BAAQA,I,gSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,yB,8BAXC5E,IAAM6E,e,uuBCKzB0Q,E,YAEF,WAAYnW,GACZ,a,4FAAA,UACI,E,qEAAA,qBAAMA,KAED+F,MAAQ,CACTC,KAAMhG,EAAMwP,UAAW,GAG3B,EAAKvF,QAAU,EAAKA,QAAQpI,KAAb,MAPnB,E,+RAUQ0B,GAEJrD,KAAKiH,UAAS,SAACC,EAAMpH,GAEjB,MAAO,CAAEgG,MAAOoB,EAAKpB,W,2CAOrB9F,KAAK6F,MAAMC,MAAQ9F,KAAKF,MAAMqK,UAE9BnK,KAAKiH,SAAS,CAAEnB,MAAM,M,+BAO1B,IAAMqvB,EAASn1B,KAAK6F,MAAMC,KACpBsvB,EAAap1B,KAAKF,MAAMqK,UAAYzJ,IAAM0M,SAASS,MAAM7N,KAAKF,MAAMU,WAAa,EACjF60B,EAASr1B,KAAKF,MAAMoW,KACpBnW,EAAQC,KAAKF,MAAMC,MACzB,OACI,6BAASE,GAAID,KAAKF,MAAMG,GACpBC,UAAWC,IAAMm1B,kBACb,IAAMt1B,KAAKF,MAAMI,UACrBG,MAAOL,KAAKF,MAAMO,OAClB,kBAACwJ,EAAA,EAAD,CAAY3J,UAAWC,IAAMo1B,eACzBx1B,MAAOA,EACPoK,SAAUirB,EACVrrB,QAAS/J,KAAK+J,SACZorB,EAA4B,kBAAC,EAAD,MAAnB,kBAAC,EAAD,OAEf,yBAAKj1B,UAAWC,IAAMq1B,2BACjBL,EAAS,SAAW,KACpBE,EAAS,SAAW,KACrB,yBAAKn1B,UAAWC,IAAMs1B,iBACjBz1B,KAAKF,MAAMU,iB,8BApDTE,IAAMC,WA4DlBsV,O,k7CChETpM,E,YAEF,WAAY/J,GACZ,O,4FAAA,+BACUA,I,gSAKV,MACsDE,KAAKF,MAA/C41B,EADZ,EACYA,UAAW31B,EADvB,EACuBA,MAAOG,EAD9B,EAC8BA,UAAcJ,EAD5C,uCAEU61B,EAAkB9rB,EAAWwkB,YAActuB,EAEjD,OACI,gCAAYD,EAAZ,CACI6F,IAAK+vB,EACLx1B,UAAWC,IAAMy1B,aACZD,EAAkB,SAAW,IAC9B,IAAMz1B,EACVH,MAAOA,IACNC,KAAKF,MAAMU,SACZ,+BAAQT,S,8BArBCW,IAAMC,WA0B/BkJ,EAAWwkB,YAAa,EAETxkB,O,i/BC7BTiJ,E,YAEF,WAAYoO,GACZ,a,4FAAA,UACI,2BAEK2U,UAAY3U,EAHrB,E,uSAMgBle,EAAS7D,M,0CAIL6D,EAAS7D,GAEzB,IAAM8uB,EAAgBjrB,EAAQqW,mBAE9Bla,EAAG,UAAgB,CACf0C,KAAMmB,EAAQ6L,iBACdinB,OAAQ7H,EAAc3U,gBACtB7C,QAASC,SAA4BuX,EAAc8H,mBACnDC,WAAW,IAAIC,MAAOn4B,c,yCAIXkF,EAAS7D,GAExB,OAAOigB,KAAKC,UAAUlgB,K,mCAIbsT,EAAYe,GACzB,WACI,OAAO,IAAIoJ,SAAQ,SAACC,EAASoB,GAEzB,IAAMjb,EAAUwQ,EAEhB,IAEI,IAAI+F,EAAO,GACX,EAAK2c,gBAAgBlzB,EAASuW,GAC9B,EAAK4c,oBAAoBnzB,EAASuW,GAClCA,EAAO,EAAK6c,mBAAmBpzB,EAASuW,GAExCsD,EAAQ,CACJhb,KAAMmB,EAAQ6L,iBAAmB,EAAKgnB,UACtC9hB,KAAM,OACNwF,KAAMA,IAGd,MAAMlW,GAEF4a,EAAO5a,Y,yCCpCnB,c,4FAAc,S,4DAUDoP,EAAYe,GAErB,OAAOoJ,QAAQC,QAAQ,CACnBhb,KAAM,gBACNkS,KAAM,OACNwF,KAAM6F,KAAKC,UAAU7L,O,qCASZ,OAAO,O,iCAKX,MAAO,W,iCAKP,MAAO,c,iCDQTV,O,g3BEzDTwD,E,YAEF,WAAYxW,GACZ,MAGI,G,4FAHJ,SACI,wBAAMA,KAEDA,EAAMG,GAAI,MAAM,IAAIiC,MAAM,mBAHnC,S,gSASI,IAAMjC,EAAKD,KAAKF,MAAMG,GAChBkK,EAAWnK,KAAKF,MAAMqK,SACtBoM,EAAUvW,KAAKF,MAAMyW,QACrB1K,EAAW7L,KAAKF,MAAM+L,SAE5B,OACI,yBAAK5L,GAAIA,EACLC,UAAWC,IAAMk2B,kBACZlsB,EAAW,aAAe,KAC1BoM,EAAU,WAAa,IACxB,IAAMvW,KAAKF,MAAMI,UACrBG,MAAOL,KAAKF,MAAMO,OAClB,2BAAOH,UAAWC,IAAMm2B,aACpBj2B,MAAOL,KAAKF,MAAMO,OAClB,2BAAO0T,KAAK,WAAW9T,GAAIA,EAAK,UAAWsW,QAASA,EAAS1K,SAAUA,EAAU1B,SAAUA,IAC3F,yBAAKjK,UAAWC,IAAMo2B,iBAE1B,2BAAOr2B,UAAWC,IAAMq2B,aACpBxiB,QAAS/T,EAAK,WACbD,KAAKF,MAAMC,a,8BA/BNW,IAAMC,WAsCjB2V,O,+1BCvCTrH,E,YAEF,WAAYnP,GAAO,O,4FAAA,+BAAQA,I,gSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,gH,8BAXA5E,IAAM6E,eAgBf0J,O,mzBCbTmJ,E,YAEF,WAAYtY,GACZ,a,4FAAA,UACI,E,qEAAA,qBAAMA,KAED22B,aAAe,EAAKA,aAAa90B,KAAlB,MAHxB,E,oSAMa0B,GAET,IAAMuN,EAAQvN,EAAEmQ,OAAO5C,MACnBA,EAAMnS,OAAS,IAEXuB,KAAKF,MAAMyY,UAAUvY,KAAKF,MAAMyY,SAAS3H,EAAM,IAGnDvN,EAAEmQ,OAAOnV,MAAQ,M,+BAOrB,IAAMia,EAAStY,KAAKF,MAAMwY,OAE1B,OACI,kBAAC,IAAD,CAAYrY,GAAID,KAAKF,MAAMG,GACvBC,UAAWC,IAAMu2B,cACvB,IAAM12B,KAAKF,MAAMI,UACXG,MAAOL,KAAKF,MAAMO,MAClBN,MAAOC,KAAKF,MAAMC,MAClBoK,SAAUnK,KAAKF,MAAMqK,UACrB,2BAAO4J,KAAK,OAAOlS,KAAK,SACpB3B,UAAWC,IAAMw2B,aACjBxsB,SAAUnK,KAAKF,MAAMqK,SACrBmO,OAAQA,EACRzM,SAAU7L,KAAKy2B,eAClBz2B,KAAKF,MAAMU,e,8BAtCGE,IAAMC,WA4CtByX,O,+1BC/CTwZ,E,YAEF,WAAY9xB,GAAO,O,4FAAA,+BAAQA,I,gSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,6H,8BAXG5E,IAAM6E,eAgBlBqsB,O,+1BChBTC,E,YAEF,WAAY/xB,GAAO,O,4FAAA,+BAAQA,I,gSAKvB,OACI,yBAAKG,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACvE6E,MAAM,6BACNC,MAAM,KAAKC,OAAO,KAAKC,QAAQ,aAC/B,0BAAMC,EAAE,gK,8BAXK5E,IAAM6E,eAgBpBssB,O,uxBChBf,IAOMxlB,E,YAEJ,WAAYvM,GACZ,O,4FAAA,UACE,E,qEAAA,qBAAMA,KAEDsc,QAAU,KACf,EAAKwa,kBAAmB,EAExB,IAAMtqB,EAAexM,EAAMwM,cAAgB,GAN7C,OAOE,EAAKzG,MAAQ,CACXxH,MAAOiO,EACPV,UAAWU,GAGb,EAAKT,SAAW,EAAKA,SAASlK,KAAd,MAChB,EAAKk1B,OAAS,EAAKA,OAAOl1B,KAAZ,MACd,EAAKC,QAAU,EAAKA,QAAQD,KAAb,MAdjB,E,iTAyB0Bm1B,GAGpB92B,KAAK+2B,cAGJ/2B,KAAK6F,MAAMxH,OAAS2B,KAAK6F,MAAMxH,MAAMI,QAAU,GAAKuB,KAAK6F,MAAMxH,QAAU2B,KAAKF,MAAMwM,eAEvFtM,KAAKiH,SAAS,CAAC5I,MAAOy4B,EAAUxqB,iB,8BAUpC,IADMrB,EACN,wDACMA,EAEFjL,KAAKoc,QAAQ4a,SAIbh3B,KAAKoc,QAAQ6a,U,6BAMfj3B,KAAKoc,QAAQ8a,S,iCAKb,OAAOl3B,KAAKoc,UAAYrY,SAASC,gB,+BAG1BX,GAEP,GAAIrD,KAAKF,MAAMq3B,OACf,CACE,IAAMt0B,EAASQ,EAAEmQ,OAAOnV,MAAM4M,QAAQjL,KAAKF,MAAMq3B,OAAQ,IACzDn3B,KAAKiH,SAAS,CAAC5I,MAAOwE,SAItB7C,KAAKiH,SAAS,CAAC5I,MAAOgF,EAAEmQ,OAAOnV,U,6BAI5BgF,GACP,WACE,GAAIrD,KAAK42B,kBAtFe,SAsFK52B,KAAKF,MAAMs3B,cACxC,CAEE,IAAMv0B,EAAS7C,KAAKq3B,YAAYh0B,EAAEmQ,OAAOnV,OACzC2B,KAAKiH,SAAS,CAAC5I,MAAOwE,IAGtB7C,KAAK42B,kBAAmB,OAErB,GA9FmB,SA8Ff52B,KAAKF,MAAMs3B,cACpB,CACE,IAAMlwB,EAAOlH,KAAK6F,MAAM+F,UAClB0rB,EAAOj0B,EAAEmQ,OAAOnV,OAAS2B,KAAKF,MAAMwM,cAAgB,GAC1DtM,KAAK0L,WAAW4rB,GAAM,WAChB,EAAKx3B,MAAM2L,UAEb,EAAK3L,MAAM2L,SAAS6rB,EAAMpwB,UApGP,UAwGhBlH,KAAKF,MAAMs3B,eAElBp3B,KAAK0L,WAAW,Q,8BAIZrI,GACR,WACE,GArHe,UAqHXA,EAAE+G,IACN,CACE,GAAIpK,KAAKF,MAAMy3B,WAAal0B,EAAEjC,SAE5B,OAAO,EAGT,IAAM8F,EAAOlH,KAAK6F,MAAM+F,UAClB0rB,EAAOj0B,EAAEmQ,OAAOnV,OAAS2B,KAAKF,MAAMwM,cAAgB,GAa1D,OAZAtM,KAAKyT,SAAS6jB,GAAM,WAClB,EAAKV,kBAAmB,EAEpB,EAAK92B,MAAM2L,UAEb,EAAK3L,MAAM2L,SAAS6rB,EAAMpwB,GAE5B,EAAKkV,QAAQ8a,UAGf7zB,EAAEkB,iBACFlB,EAAEmB,mBACK,EAEJ,GA3IU,WA2INnB,EAAE+G,IACX,CACE,IAAMlD,EAAOlH,KAAK6F,MAAM+F,UAaxB,OAZA5L,KAAK0L,WAAWxE,GAAM,WACpB,EAAK0vB,kBAAmB,EAEpB,EAAK92B,MAAM2L,UAEb,EAAK3L,MAAM2L,SAASvE,GAAQ,GAAIA,GAElC,EAAKkV,QAAQ8a,UAGf7zB,EAAEkB,iBACFlB,EAAEmB,mBACK,K,mCAKX,WADWmH,EACX,uDADoB,KAAM5J,EAC1B,uDADmC,KAEjC,GAAiB,OAAb4J,EACJ,CACE,IAAM9I,EAAS7C,KAAKq3B,YAAY1rB,GAGhC3L,KAAKiH,SAAS,CAAC5I,MAAOwE,EAAQ+I,UAAWD,GAAW5J,QAIpD/B,KAAKiH,UAAS,SAACC,EAAMpH,GAGnB,MAAO,CAACzB,MADO,EAAKg5B,YAAYnwB,EAAK0E,cAEpC7J,K,+BAIE1D,EAAO0D,GAQZ1D,EANGA,GAAyB,GAAhBA,EAAMI,OAMVuB,KAAKq3B,YAAYh5B,GAJjB2B,KAAKF,MAAMwM,cAAgB,GAOrCtM,KAAKiH,SAAS,CAAC5I,MAAOA,GAAQ0D,K,kCAGpB1D,GACZ,IADmBgmB,EACnB,uDAD6B,IAEvBxhB,EAAS7C,KAAK6F,MAAMxH,MAMtBwE,EAJiC,GAA/B7C,KAAKoc,QAAQob,gBACfx3B,KAAKoc,QAAQqb,cAAgBp5B,EAAMI,OAG1BJ,EAKJwE,GAA2B,GAAjBA,EAAOpE,OAMXoE,EAASwhB,EAAYhmB,EAJrBA,EAST2B,KAAKF,MAAMq3B,SAEbt0B,EAASA,EAAOoI,QAAQjL,KAAKF,MAAMq3B,OAAQ,KAG7Cn3B,KAAKiH,SAAS,CAAC5I,MAAO2B,KAAKq3B,YAAYx0B,O,kCAG7BxE,GAEV,IAAMq5B,EAAY13B,KAAKF,MAAM43B,UAE7B,OADeA,EAAYA,EAAUr5B,GAASA,IAC7B,K,+BAKnB,WACE,OAAI2B,KAAKF,MAAMy3B,UAGX,8BACEt3B,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACtEsF,IAAK,SAAAA,GAAG,OAAE,EAAKyW,QAAQzW,GACvBoO,KAAK,OAAO1V,MAAO2B,KAAK6F,MAAMxH,MAC9Bs5B,KAAK,IACL9rB,SAAU7L,KAAK6L,SACfgrB,OAAQ72B,KAAK62B,OACbj1B,QAAS5B,KAAK4B,UAOhB,2BACE3B,GAAID,KAAKF,MAAMG,GAAIC,UAAWF,KAAKF,MAAMI,UAAWG,MAAOL,KAAKF,MAAMO,MACtEsF,IAAK,SAAAA,GAAG,OAAE,EAAKyW,QAAQzW,GACvBoO,KAAK,OAAO1V,MAAO2B,KAAK6F,MAAMxH,MAC9BwN,SAAU7L,KAAK6L,SACfgrB,OAAQ72B,KAAK62B,OACbj1B,QAAS5B,KAAK4B,Y,4BAhNpB,OAAO5B,KAAK6F,MAAMxH,W,8BA1COqC,IAAMC,WAgQpB0L,O,i/BCvQT0U,E,YAEF,aAAc,O,4FAAA,iC,kSAGH1Q,GAEP,OAAO,IAAIuM,SAAQ,SAACC,EAASoB,GAEzB,IAAM2Z,EAAS,IAAIC,WAGnBD,EAAO10B,iBAAiB,QAAQ,SAAAM,GAE5B,IAAMyZ,EAAWzZ,EAAMgQ,OAAO3Q,OAC9Bga,EAAQI,MAIZ2a,EAAO10B,iBAAiB,SAAS,SAAAM,GAE7Bya,EAAO,IAAI/b,MAAM,0BAA4BsB,EAAMgQ,OAAOkT,MAAMrlB,UAIpEu2B,EAAOE,WAAWznB,W,yCCzB1B,c,4FAAc,S,0DAEHA,GAAY,OAAOuM,QAAQC,QAAQxM,Q,iCD4BnC0Q,O,+BEhCf,8KAAMgX,EAAY,CAAC,IAAK,IAAK,KACvBC,EAAY,CAAC,EAAG,EAAG,GAElB,SAASC,EAAaC,GAC7B,IADkC/4B,EAClC,uDADwC,GAE9Bg5B,EAA2B,GAATD,EAAI,GAAoB,IAATA,EAAI,GAAqB,IAATA,EAAI,GAI3D,OAHA/4B,EAAI,GAAKg5B,EACTh5B,EAAI,GAAKg5B,EACTh5B,EAAI,GAAKg5B,EACFh5B,EAGJ,SAASi5B,EAASC,EAASC,GAClC,IADwCC,EACxC,uDAD+C,KAAMp5B,EACrD,uDAD2D,GAEjDq5B,EAAc76B,KAAK6K,IAAI6vB,GAM7B,OALKE,IAAMA,EAAOF,EAAU,EAAIL,EAAYD,GAE5C54B,EAAI,GAAKm5B,EAAK,GAAK36B,KAAK86B,MAAMD,GAAeD,EAAK,GAAKD,EAAK,KAC5Dn5B,EAAI,GAAKm5B,EAAK,GAAK36B,KAAK86B,MAAMD,GAAeD,EAAK,GAAKD,EAAK,KAC5Dn5B,EAAI,GAAKm5B,EAAK,GAAK36B,KAAK86B,MAAMD,GAAeD,EAAK,GAAKD,EAAK,KACrDn5B,EAGJ,SAASu5B,EAAUR,GAC1B,IAD+BS,EAC/B,wDADmDx5B,EACnD,uDADyD,GAwBrD,OAtBIw5B,EAGc,KAATT,EAAI,GAAsB,KAATA,EAAI,GAAsB,KAATA,EAAI,GAAc,KAErD/4B,EAAI,GAAK,EACTA,EAAI,GAAK,EACTA,EAAI,GAAK,IAITA,EAAI,GAAK,IACTA,EAAI,GAAK,IACTA,EAAI,GAAK,MAKbA,EAAI,GAAM,IAAM+4B,EAAI,GACpB/4B,EAAI,GAAM,IAAM+4B,EAAI,GACpB/4B,EAAI,GAAM,IAAM+4B,EAAI,IAEjB/4B,EAIJ,SAASy5B,EAASve,GACzB,IAD8Blb,EAC9B,uDADoC,GAIhC,GAFyB,IAArBkb,EAAIjY,QAAQ,OAAYiY,EAAMA,EAAIwe,MAAM,IACzB,IAAfxe,EAAI5b,SAAc4b,EAAMA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,GAAKA,EAAI,IAC1D,IAAfA,EAAI5b,OAAc,MAAM,IAAIyD,MAAM,4BACtC,IAAM42B,EAAMze,EAAItc,UAAU,EAAG,GACvBg7B,EAAQ1e,EAAItc,UAAU,EAAG,GACzBi7B,EAAO3e,EAAItc,UAAU,EAAG,GAK9B,OAHAoB,EAAI,GAAK2L,SAASguB,EAAK,IACvB35B,EAAI,GAAK2L,SAASiuB,EAAO,IACzB55B,EAAI,GAAK2L,SAASkuB,EAAM,IACjB75B,EAEJ,SAAS85B,EAASf,GAErB,MAAO,KAAOA,EAAI,GAAMA,EAAI,IAAM,EAAMA,EAAI,IAAM,GAAO,GAAK,IAAKp6B,SAAS,IAAI+6B,MAAM,K,m/BChEnF,IAAMhE,EAAqB,UACrBC,EAAqB,UACrBC,EAAmB,QACnBC,EAAqB,UAE5BnjB,E,YAEF,WAAY/R,GACZ,O,4FAAA,+BACUA,I,gSAMN,IAAM8E,EAAU5E,KAAKF,MAAM8E,QACrB4M,EAAexR,KAAKF,MAAM0R,aAEhC,OACI,yBAAKvR,GAAID,KAAKF,MAAMG,GAChBC,UAAWC,IAAM8zB,uBACb,IAAMj0B,KAAKF,MAAM80B,UACjB,IAAM50B,KAAKF,MAAMI,UACrBG,MAAOL,KAAKF,MAAMO,OACjBuE,GACGA,EAAQ+d,MAAM,MAAM3Y,KAAI,SAAC3G,EAAG9E,GAAJ,OAAU,uBAAG6L,IAAK/G,EAAI,IAAM9E,GAAI8E,MAC3DrD,KAAKF,MAAMU,SACXgR,GACG,4BAAQzH,QAAS,SAAA1G,GAAC,OAAImO,EAAaoZ,UAC9BvX,KAAKvV,SAAS,+B,8BAxBC4C,IAAMC,WA+B/BkR,O,+BCnCf,IAAMyD,EAAe,CACjBzE,MADiB,WAGR7Q,KAAKob,eACV8d,aAAaroB,SAEjB2F,QANiB,SAMTpM,EAAK/L,GAKT,IAAI86B,EAHCn5B,KAAKob,qBAIqB,IAApBrX,SAASo1B,OAEhBA,EAAS,cAEyB,IAAtBp1B,SAASq1B,SAErBD,EAAS,gBAE6B,IAA1Bp1B,SAASs1B,eAErBF,EAAS,gBAITp1B,SAASo1B,KAET96B,EAEA66B,aAAaI,QAAQlvB,EAAK/L,GAI1B66B,aAAaK,WAAWnvB,MAGhCmL,QArCiB,SAqCTnL,GACR,IADakC,EACb,uDAD4B,KAExB,OAAKtM,KAAKob,eACH8d,aAAaM,QAAQpvB,IADIkC,GAGpCsN,gBA1CiB,SA0CDxP,EAAKqvB,GAEjB,IAEQA,GAAe1hB,OAAOjW,KAAK23B,GAAah7B,OAAS,EAEjDuB,KAAKwW,QAAQpM,EAAKgV,KAAKC,UAAUoa,IAIjCz5B,KAAKwW,QAAQpM,EAAK,MAG1B,MAAO/G,GAGHwB,QAAQ6hB,MAAMrjB,KAGtBmW,gBA7DiB,SA6DDpP,GAChB,IADqBkC,EACrB,uDADoC,KAE1BzJ,EAAS7C,KAAKuV,QAAQnL,EAAK,MACjC,IAAIvH,EAeA,OAAOyJ,EAbP,IAEI,OAAO8S,KAAKsa,MAAM72B,GAEtB,MAAOQ,GAIH,OADAwB,QAAQ6hB,MAAMrjB,GACPiJ,IAQnB8O,YAlFiB,WAoFb,MAA+B,oBAAjB8d,eAIP5jB,Q","file":"app.bundle.58797c13c1199645c9b6.js","sourcesContent":["/**\n * Contains utility functions for useful math algorithms.\n * @module MathHelper\n */\n\n/**\n * Generates a guid. (You should use {@link uuid} instead. It is just better.)\n * \n * @returns {String} the globally unique id\n */\nexport function guid()\n{\n    function s4()\n    {\n        return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);\n    }\n    return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();\n}\n\n/**\n * Generates a uuidv4.\n * \n * @returns {String} the universally unique id\n */\nexport function uuid()\n{\n    return ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, c =>\n        (c ^ crypto.getRandomValues(new Uint8Array(1))[0] & 15 >> c / 4).toString(16)\n    );\n}\n\n/**\n * Interpolates, or lerps, between 2 values by the specified amount, dt.\n * \n * @param {Number} a the initial value\n * @param {Number} b the final value\n * @param {Number} dt the amount changed\n * @returns {Number} the interpolated value\n */\nexport function lerp(a, b, dt)\n{\n    return a * (1 - dt) + b * dt;\n}\n\n/**\n * Generates a number hash for the string. For an empty string, it will return 0.\n * \n * @param {String} [value=''] the string to hash\n * @returns {Number} a hash that uniquely identifies the string\n */\nexport function stringHash(value='')\n{\n    let hash = 0;\n    for(let i = 0, len = value.length; i < len; i++)\n    {\n        hash = Math.imul(31, hash) + value.charCodeAt(i) | 0;\n    }\n    return hash;\n}\n\n/**\n * Calculates the directional vector for the passed-in points.\n * \n * @param {Number} x1 the x component of the source point\n * @param {Number} y1 the y component of the source point\n * @param {Number} x2 the x component of the destination point\n * @param {Number} y2 the y component of the destination point\n * @param {Number} [dist=1] the distance, or length, of the vector\n * @param {Number} [angleOffset=0] additional angle offset from the calculated direction vector\n * @param {Object} [dst={x: 0, y: 0}] the result\n * @returns {Object} dst\n */\nexport function getDirectionalVector(x1, y1, x2, y2, dist=1, angleOffset=0, dst={x: 0, y: 0})\n{\n    const dx = x2 - x1;\n    const dy = y2 - y1;\n    const angle = Math.atan2(dy, dx) + angleOffset;\n    dst.x = Math.cos(angle) * dist;\n    dst.y = Math.sin(angle) * dist;\n    return dst;\n}\n\n/**\n * Calculates the midpoint between the passed-in points.\n * \n * @param {Number} x1 the x component of the source point\n * @param {Number} y1 the y component of the source point\n * @param {Number} x2 the x component of the destination point\n * @param {Number} y2 the y component of the destination point\n * @param {Object} [dst={x: 0, y: 0}] the result\n * @returns {Object} dst\n */\nexport function getMidPoint(x1, y1, x2, y2, dst={x: 0, y: 0})\n{\n    dst.x = x1 + (x2 - x1) / 2;\n    dst.y = y1 + (y2 - y1) / 2;\n    return dst;\n}\n","import React from 'react';\nimport Style from './PanelContainer.css';\n\nclass PanelContainer extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const title = this.props.title;\n\n        return (\n            <div id={this.props.id}\n                className={Style.panel_container +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                <div className={Style.panel_title}>\n                    <h1>{title}</h1>\n                </div>\n                <div className={Style.panel_content}>\n                    {this.props.children}\n                </div>\n                <div className={Style.panel_bottom}>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default PanelContainer;\n","export const CTRL_KEY = 'Control';\nexport const META_KEY = 'Meta';\nexport const ALT_KEY = 'Alt';\nexport const SHIFT_KEY = 'Shift';\n//NOTE: For more keys, refer to http://keycode.info/\n\nclass HotKeyManager\n{\n    constructor()\n    {\n        this._hotkeys = [];\n        this._cachedEvent = {\n            ctrlKey: false,\n            metaKey: false,\n            altKey: false,\n            shiftKey: false,\n            code: null\n        };\n        this._prevHotKey = null;\n        this._repeatCount = 0;\n        this._enabled = false;\n\n        this._altHotkey = null;\n\n        this.onKeyDown = this.onKeyDown.bind(this);\n        this.onKeyUp = this.onKeyUp.bind(this);\n    }\n\n    registerHotKey(name, keys, callback)\n    {\n        if (!Array.isArray(keys)) throw new Error('Must be an array of key codes');\n        const ctrlIndex = keys.indexOf(CTRL_KEY);\n        if (ctrlIndex >= 0) keys.splice(ctrlIndex, 1);\n        const metaIndex = keys.indexOf(META_KEY);\n        if (metaIndex >= 0) keys.splice(metaIndex, 1);\n        const altIndex = keys.indexOf(ALT_KEY);\n        if (altIndex >= 0) keys.splice(altIndex, 1);\n        const shiftIndex = keys.indexOf(SHIFT_KEY);\n        if (shiftIndex >= 0) keys.splice(shiftIndex, 1);\n        if (keys.length != 1) throw new Error('Multiple key operations not supported');\n        const charKey = keys[0];\n\n        const ctrl = ctrlIndex >= 0 || metaIndex >= 0;\n        const alt = altIndex >= 0;\n        const shift = shiftIndex >= 0;\n\n        const result = {\n            name: name,\n            localizedKeys: (ctrl ? 'Ctrl + ' : '') +\n        (alt ? 'Alt + ' : '') +\n        (shift ? 'Shift + ' : '') +\n        charKey,\n            charKey: charKey,\n            ctrlKey: ctrl,\n            altKey: alt,\n            shiftKey: shift,\n            callback: callback\n        };\n\n        this._hotkeys.unshift(result);\n\n        return this;\n    }\n\n    //HACK: Cause hotkey manager does not allow 'control' hotkeys. This is the exception.\n    registerAltHotKey(name, callback)\n    {\n        if (this._altHotkey) throw new Error('Only one hotkey can exist for \\'Alt\\'');\n\n        this._altHotkey = {\n            name: name,\n            localizedKeys: 'Alt',\n            charKey: null,\n            ctrlKey: false,\n            altKey: true,\n            shiftKey: false,\n            callback: callback\n        };\n\n        return this;\n    }\n\n    /** @override */\n    onSessionStart(session)\n    {\n        window.addEventListener('keydown', this.onKeyDown);\n        window.addEventListener('keyup', this.onKeyUp);\n\n        this._enabled = true;\n    }\n\n    /** @override */\n    onSessionStop(session)\n    {\n        this._enabled = false;\n\n        this._prevHotKey = null;\n        this._repeatCount = 0;\n        this._hotkeys.length = 0;\n        this._altHotkey = null;\n\n        window.removeEventListener('keydown', this.onKeyDown);\n        window.removeEventListener('keyup', this.onKeyUp);\n    }\n\n    setEnabled(enabled)\n    {\n        this._enabled = enabled;\n    }\n\n    isEnabled()\n    {\n        return this._enabled;\n    }\n\n    findMatchingHotKey(e)\n    {\n        for(const hotkey of this._hotkeys)\n        {\n            if (matchesHotKeyEvent(e, hotkey)) return hotkey;\n        }\n        return null;\n    }\n\n    getCurrentHotKey()\n    {\n        return this._prevHotKey;\n    }\n\n    getCurrentHotKeyRepeatCount()\n    {\n        return this._repeatCount;\n    }\n\n    getCurrentlyPossibleHotKeys(dst=[])\n    {\n        const event = this._cachedEvent;\n        const eventCtrl = event.ctrlKey || event.metaKey;\n        const eventAlt = event.altKey;\n        const eventShift = event.shiftKey;\n        if (!eventCtrl && !eventAlt && !eventShift) return dst;\n        const eventKey = event.code;\n\n        let result = null;\n        for(const hotkey of this._hotkeys)\n        {\n            let flag = false;\n            if (eventCtrl ^ hotkey.ctrlKey)\n            {\n                //It's ok, but it is not a complete match...\n                if (!eventCtrl) flag = true;\n                //Nope.\n                else continue;\n            }\n            if (eventAlt ^ hotkey.altKey)\n            {\n                //It's ok, but it is not a complete match...\n                if (!eventAlt) flag = true;\n                //Nope.\n                else continue;\n            }\n            if (eventShift ^ hotkey.shiftKey)\n            {\n                //It's ok, but it is not a complete match...\n                if (!eventShift) flag = true;\n                //Nope.\n                else continue;\n            }\n\n            if (!flag && eventKey === hotkey.charKey)\n            {\n                result = hotkey;\n            }\n\n            dst.push(hotkey);\n        }\n\n        if (result) return result;\n        else return dst;\n    }\n\n    onKeyDown(e)\n    {\n        if (!this._enabled) return;\n\n        // As long as it's not an input-like element (cause they have their own hotkeys)\n        if (document.activeElement instanceof HTMLInputElement) return;\n        if (document.activeElement instanceof HTMLTextAreaElement) return;\n        if (document.activeElement.hasAttribute('contenteditable')) return;\n\n        if (!e.repeat)\n        {\n            this.captureKeyEvent(e, false);\n\n            let result = this.findMatchingHotKey(this._cachedEvent);\n            if (!result && matchesHotKeyEvent(e, this._altHotkey)) result = this._altHotkey;\n\n            if (result)\n            {\n                if (this._prevHotKey === result)\n                {\n                    ++this._repeatCount;\n                }\n                else\n                {\n                    this._prevHotKey = result;\n                    this._repeatCount = 0;\n                }\n\n                result.callback();\n\n                e.preventDefault();\n                e.stopPropagation();\n            }\n        }\n    }\n\n    onKeyUp(e)\n    {\n        if (!this._enabled) return;\n\n        if (this.captureKeyEvent(e, true))\n        {\n            this._prevHotKey = null;\n            this._repeatCount = 0;\n        }\n    }\n\n    captureKeyEvent(e, isKeyUp=false)\n    {\n        this._cachedEvent.ctrlKey = e.ctrlKey;\n        this._cachedEvent.metaKey = e.metaKey;\n        this._cachedEvent.altKey = e.altKey;\n        this._cachedEvent.shiftKey = e.shiftKey;\n        this._cachedEvent.code = isKeyUp ? null : (e.code || null);\n        return isKeyUp && !(this._cachedEvent.ctrlKey || this._cachedEvent.metaKey || this._cachedEvent.altKey || this._cachedEvent.shiftKey);\n    }\n}\n\nexport default HotKeyManager;\n\nfunction matchesHotKeyEvent(e, hotkey)\n{\n    if (hotkey.ctrlKey !== (e.ctrlKey || e.metaKey)) return false;\n    if (hotkey.altKey !== e.altKey) return false;\n    if (hotkey.shiftKey !== e.shiftKey) return false;\n    if (hotkey.charKey && hotkey.charKey !== e.code) return false;\n    return true;\n}\n","/* eslint-disable no-console */\n\nclass Logger\n{\n    static out(tag, message)\n    {\n        const result = '[' + tag + '] ' + message;\n        if (console && typeof console['log'] === 'function')\n        {\n            console['log'].call(result);\n        }\n    }\n\n    static error(tag, message, err = null)\n    {\n        Logger.out(tag, (err ? err.message + ' : ' : '') + message);\n    }\n}\n\nexport default Logger;\n","import React from 'react';\n\nclass ExpandDownIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z\"/>\n            </svg>\n        );\n    }\n}\nexport default ExpandDownIcon;\n","import React from 'react';\nimport Style from './DrawerView.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport ExpandDownIcon from 'components/iconset/ExpandDownIcon.js';\n\nconst DRAWER_WIDTH_CSSVAR = '--drawer-width';\nconst DRAWER_HANDLE_DRAG_OFFSET = 6;\nconst DRAWER_HANDLE_MIN_SIZE_BUFFER = 32;\nconst DRAWER_HANDLE_MAX_SIZE_BUFFER = 128;\nconst DRAWER_MIN_WIDTH = 200;\nconst DRAWER_RESIZE_REFRESH_RATE = 200;\nconst DRAWER_HANDLE_CUSTOM_SNAP_WIDTH = 300;\n\nconst DRAWER_SHOULD_HIDE_CONTENT_ON_RESIZE = true;\nconst DRAWER_SHOULD_HIDE_TAB_LIST = false;\n\nexport const DRAWER_WIDTH_TYPE_FULL = 'full';\nexport const DRAWER_WIDTH_TYPE_MIN = 'min';\nexport const DRAWER_SIDE_BOTTOM = 'bottom';\nexport const DRAWER_SIDE_RIGHT = 'right';\nexport const DRAWER_BAR_DIRECTION_VERTICAL = 'vertical';\nexport const DRAWER_BAR_DIRECTION_HORIZONTAL = 'horizontal';\n\n/**\n * A component that renders a collapsible drawer. It also handles the viewport beside\n * the drawer. To update the panels available in the drawer, you can pass an array of\n * component classes through the props.\n * \n * TODO: The drawer should not be responsible for the viewport as well. Separation of concerns.\n */\nclass DrawerView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.ref = null;\n        this.drawerElement = null;\n\n        this.state = {\n            open: false,\n            tabIndex: 0,\n            soloClass: null,\n            viewportColor: null\n        };\n\n        //When drawer is currently changing size intentfully\n        this._handlingGrab = false;\n        this._handlingResize = false;\n        //Whether the drawer should fullscreen\n        this._isfull = false;\n        //Whether to restore drawer width after fullscreen\n        this._hasintent = false;\n        //Save intentful drawer width for restore after fullscreen\n        this._prevWidth = DRAWER_MIN_WIDTH;\n        //Used to manage resize updates\n        this._resizeTimeout = null;\n        this._resizeEndTimeout = null;\n        //Changed in render() to reflect current render state.\n        this._sideways = false;\n\n        this.onDrawerHandleGrab = this.onDrawerHandleGrab.bind(this);\n        this.onDrawerHandleRelease = this.onDrawerHandleRelease.bind(this);\n        this.onDrawerHandleMove = this.onDrawerHandleMove.bind(this);\n        this.onDrawerExpand = this.onDrawerExpand.bind(this);\n        this.onWindowResize = this.onWindowResize.bind(this);\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n        window.addEventListener('resize', this.onWindowResize, false);\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        window.removeEventListener('resize', this.onWindowResize);\n    }\n\n    openDrawer(fullscreen = false, callback = null)\n    {\n        if (fullscreen)\n        {\n            this.setDrawerWidth(DRAWER_WIDTH_TYPE_FULL, true);\n        }\n\n        if (!this.state.open)\n        {\n            this.setState({ open: true }, callback);\n        }\n    }\n\n    closeDrawer(callback = null)\n    {\n        if (this.state.open)\n        {\n            this.setState({ open: false }, callback);\n        }\n    }\n\n    toggleDrawer(callback = null)\n    {\n        this.setState((prev, props) => \n        {\n            return { open: !prev.open };\n        }, callback);\n    }\n\n    isDrawerOpen()\n    {\n        return this.state.open;\n    }\n\n    isDrawerFullscreen()\n    {\n        return this._isfull;\n    }\n\n    setCurrentTab(tabIndex)\n    {\n        if (!this.props.panels) return;\n        if (tabIndex >= this.props.panels.length) tabIndex = 0;\n        if (this.state.open && this.state.tabIndex === tabIndex)\n        {\n            //Toggle fullscreen\n            if (this._isfull)\n            {\n                this.setDrawerWidth(this._prevWidth);\n            }\n            else\n            {\n                this.setDrawerWidth(DRAWER_WIDTH_TYPE_FULL, true);\n            }\n        }\n        else\n        {\n            //Open and set tab index\n            this.setState({ open: true, tabIndex: tabIndex });\n        }\n    }\n\n    getCurrentTabIndex()\n    {\n        return this.state.tabIndex;\n    }\n\n    isCurrentTab(tabIndex)\n    {\n        return this.state.tabIndex === tabIndex;\n    }\n\n    /** Sets the viewport boundary color */\n    setViewportColor(color)\n    {\n        this.setState({ viewportColor: color });\n    }\n    \n    /** Gets the viewport boundary color */\n    getViewportColor()\n    {\n        return this.state.viewportColor;\n    }\n\n    setDrawerSoloClass(soloClass, callback = null)\n    {\n        this.setState({ soloClass: soloClass }, callback);\n    }\n\n    setDrawerWidth(value, hasIntent = true)\n    {\n        if (!this.drawerElement || !this.ref) return;\n\n        this._hasintent = hasIntent;\n\n        const drawerSide = this.props.side;\n        const drawerOffsetY = this.ref.getBoundingClientRect().top;\n        const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n        const documentSize = isDrawerSideBottom ?\n            document.documentElement.clientHeight - drawerOffsetY :\n            document.documentElement.clientWidth;\n        const minSize = DRAWER_MIN_WIDTH;\n\n        if (typeof value === 'string')\n        {\n            switch (value)\n            {\n            case DRAWER_WIDTH_TYPE_FULL:\n                this._isfull = true;\n                this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n                break;\n            case DRAWER_WIDTH_TYPE_MIN:\n                this._isfull = false;\n                this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, minSize + 'px');\n                break;\n            default:\n                throw new Error('Trying to set drawer width to invalid string');\n            }\n        }\n        else if (typeof value === 'number')\n        {\n            if (value < minSize + DRAWER_HANDLE_MIN_SIZE_BUFFER) value = minSize;\n            if (value > documentSize - DRAWER_HANDLE_MAX_SIZE_BUFFER)\n            {\n                value = documentSize;\n                this._isfull = true;\n            }\n            else\n            {\n                this._isfull = false;\n            }\n            this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, value + 'px');\n        }\n        else\n        {\n            throw new Error('Trying to set drawer width to unknown value');\n        }\n    }\n\n    onDrawerExpand()\n    {\n        //Don't close, just small-ify.\n        if (this.state.open && this._isfull)\n        {\n            this.setDrawerWidth(this._prevWidth);\n\n            //If did not make any changes...\n            if (this._isfull)\n            {\n                //Make it do normal stuff.\n                this.toggleDrawer();\n            }\n        }\n        else\n        {\n            this.toggleDrawer();\n        }\n    }\n\n    onWindowResize(e)\n    {\n        if (!this._resizeTimeout)\n        {\n            this._resizeTimeout = setTimeout(() => \n            {\n                this._resizeTimeout = null;\n\n                //Handle resize ends (more like debouncing)\n                if (this._resizeEndTimeout) clearTimeout(this._resizeEndTimeout);\n                else this._handlingResize = true;\n                this._resizeEndTimeout = setTimeout(() => \n                {\n                    this._resizeEndTimeout = null;\n                    this._handlingResize = false;\n                }, 500);\n\n                if (!this.drawerElement || !this.ref) return;\n\n                const drawerSide = this.props.side;\n                const drawerOffsetY = this.ref.getBoundingClientRect().top;\n                const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n                const documentSize = isDrawerSideBottom ?\n                    document.documentElement.clientHeight - drawerOffsetY :\n                    document.documentElement.clientWidth;\n\n                if (this._isfull)\n                {\n                    if (this._hasintent) return;\n                    if (this._prevWidth + DRAWER_HANDLE_MAX_SIZE_BUFFER < documentSize)\n                    {\n                        this._isfull = false;\n                        this.drawerElement.style.setProperty(DRAWER_WIDTH_CSSVAR, this._prevWidth + 'px');\n                    }\n                }\n                else\n                {\n                    const drawerSize = getCSSDrawerWidth(this.drawerElement);\n                    if (drawerSize + DRAWER_HANDLE_MAX_SIZE_BUFFER > documentSize)\n                    {\n                        this._isfull = true;\n                        this._hasintent = false;\n                    }\n                }\n            }, DRAWER_RESIZE_REFRESH_RATE);\n        }\n    }\n\n    onDrawerHandleGrab(e)\n    {\n        if (!this._handlingGrab && this.state.open)\n        {\n            this._handlingGrab = true;\n            this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n            document.addEventListener('mouseup', this.onDrawerHandleRelease);\n            document.addEventListener('mousemove', this.onDrawerHandleMove);\n        }\n        else\n        {\n            this.onDrawerHandleRelease(e);\n        }\n    }\n\n    onDrawerHandleRelease(e)\n    {\n        if (this._handlingGrab)\n        {\n            document.removeEventListener('mouseup', this.onDrawerHandleRelease);\n            document.removeEventListener('mousemove', this.onDrawerHandleMove);\n            this._handlingGrab = false;\n            this._prevWidth = getCSSDrawerWidth(this.drawerElement);\n        }\n    }\n\n    onDrawerHandleMove(e)\n    {\n        const drawerSide = this.props.side;\n        const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n        const documentSize = isDrawerSideBottom ?\n            document.documentElement.clientHeight :\n            document.documentElement.clientWidth;\n        const pointerValue = isDrawerSideBottom ? e.clientY : e.clientX;\n\n        let result = documentSize - pointerValue + DRAWER_HANDLE_DRAG_OFFSET;\n        //Try snapping to some widths...\n        if (!isDrawerSideBottom && Math.abs(result - DRAWER_HANDLE_CUSTOM_SNAP_WIDTH) < DRAWER_HANDLE_MIN_SIZE_BUFFER)\n        {\n            result = DRAWER_HANDLE_CUSTOM_SNAP_WIDTH;\n        }\n        this.setDrawerWidth(result);\n    }\n\n    /** @override */\n    render()\n    {\n        const drawerPanels = this.props.panels;\n        const drawerSide = this.props.side || DRAWER_SIDE_RIGHT;\n        const drawerDirection = this.props.direction || DRAWER_BAR_DIRECTION_HORIZONTAL;\n        const shouldDrawerHide = this.props.hide || false;\n        const drawerSoloClass = this.state.soloClass;\n\n        const isDrawerOpen = this.state.open;\n        //Assumes that parent container has flex and flex-direction: column for bottom, row for right.\n        const isDrawerSideBottom = drawerSide === DRAWER_SIDE_BOTTOM;\n        const shouldDrawerBarSideways = !isDrawerSideBottom && (!isDrawerOpen || drawerDirection === DRAWER_BAR_DIRECTION_VERTICAL);\n        const showDrawerHandle = isDrawerOpen || this._handlingGrab;\n        const shouldDrawerOpenFull = this._isfull;\n        const shouldHideDrawerContent = (DRAWER_SHOULD_HIDE_CONTENT_ON_RESIZE && (this._handlingGrab || this._handlingResize)) || !isDrawerOpen;\n        const showDrawerTabs = isDrawerOpen || !DRAWER_SHOULD_HIDE_TAB_LIST;\n\n        //Used to handle sideways logic\n        this._sideways = shouldDrawerBarSideways;\n\n        let viewportStyle = {};\n        if (this.state.viewportColor !== null)\n        {\n            viewportStyle['outlineColor'] = this.state.viewportColor;\n        }\n\n        return (\n            <div ref={ref => this.ref = ref}\n                id={this.props.id}\n                className={Style.app_content +\n                    (isDrawerSideBottom ? ' column ' : '') +\n                    (' ' + this.props.className)}\n                style={this.props.style}>\n                <div className={Style.app_viewport} style={viewportStyle}>\n                    {this.props.children}\n                </div>\n                <div ref={ref => this.drawerElement = ref}\n                    className={\n                        Style.app_drawer +\n                        (isDrawerOpen ? ' open ' : '') +\n                        (shouldDrawerBarSideways ? ' drawer-bar-sideways ' : '') +\n                        (isDrawerSideBottom ? ' drawer-side-bottom ' : '') +\n                        (shouldDrawerOpenFull ? ' full ' : '') +\n                        (shouldHideDrawerContent ? ' hide-content ' : '') +\n                        (this._handlingResize ? ' no-animation ' : '') +\n                        (shouldDrawerHide ? ' hide ' : '')}>\n                    <div className={Style.drawer_handle + (showDrawerHandle ? ' show ' : '')} onMouseDown={this.onDrawerHandleGrab}>\n                        <span>{'||'}</span>\n                    </div>\n                    <div className={Style.drawer_content}>\n                        <nav className={Style.drawer_content_bar}>\n                            <IconButton className={Style.drawer_tab_expander} onClick={this.onDrawerExpand}>\n                                <ExpandDownIcon />\n                            </IconButton>\n                            {showDrawerTabs && drawerPanels && drawerPanels.map((e, i) => \n                            {\n                                if (!e) return null;\n                                if (!e['TITLE']) return null;\n                                const title = e['TITLE'];\n                                const current = this.isCurrentTab(i);\n                                const disabled = drawerSoloClass && drawerSoloClass !== e;\n                                return (\n                                    <a key={title + ':' + i}\n                                        className={Style.drawer_tab +\n                                            (current ? ' active ' : '') +\n                                            (disabled ? ' disabled ' : '')}\n                                        onClick={() => this.setCurrentTab(i)}>\n                                        <label>{title}</label>\n                                    </a>\n                                );\n                            })}\n                        </nav>\n                        <div className={Style.drawer_content_panel_container}>\n                            <div className={Style.drawer_content_panel}>\n                                {drawerPanels && drawerPanels.map((e, i) => \n                                {\n                                    if (!e) return null;\n                                    const ComponentClass = e;\n                                    const title = e['TITLE'] || '';\n                                    const current = this.isCurrentTab(i);\n                                    const disabled = drawerSoloClass && drawerSoloClass !== e;\n                                    return (\n                                        <div key={title + ':' + i}\n                                            className={Style.drawer_panel_container +\n                                                (!current ? ' hide ' : '') +\n                                                (disabled ? ' disabled ' : '')}>\n                                            <ComponentClass className={Style.drawer_panel}\n                                                {...this.props.panelProps}\n                                                drawer={this} />\n                                        </div>\n                                    );\n                                })}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\nexport default DrawerView;\n\nfunction getCSSDrawerWidth(drawerElement)\n{\n    return parseInt(window.getComputedStyle(drawerElement).getPropertyValue(DRAWER_WIDTH_CSSVAR).replace(/\\D/g, ''));\n}\n","import React from 'react';\nimport Style from './ToolbarButton.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\n\nexport const TOOLBAR_CONTAINER_MENU = 'menu';\nexport const TOOLBAR_CONTAINER_TOOLBAR = 'toolbar';\nexport const TOOLBAR_CONTAINER_ALL = 'all';\n\nclass ToolbarButton extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const IconClass = this.props.icon;\n        return (\n            <IconButton id={this.props.id}\n                className={Style.toolbar_button + ' ' + this.props.className}\n                style={this.props.style}\n                title={this.props.title}\n                disabled={this.props.disabled}\n                onClick={this.props.onClick}>\n                <IconClass/>\n            </IconButton>\n        );\n    }\n}\n\nexport default ToolbarButton;\n","import React from 'react';\n\nclass OfflineIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 2.02c-5.51 0-9.98 4.47-9.98 9.98s4.47 9.98 9.98 9.98 9.98-4.47 9.98-9.98S17.51 2.02 12 2.02zM11.48 20v-6.26H8L13 4v6.26h3.35L11.48 20z\"/>\n            </svg>\n        );\n    }\n}\nexport default OfflineIcon;\n","import React from 'react';\nimport Style from './ToolbarTitle.css';\n\nimport FormattedInput from 'deprecated/system/formattedinput/FormattedInput.js';\nimport OfflineIcon from 'components/iconset/OfflineIcon.js';\n\nclass ToolbarTitle extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.inputElement = null;\n\n        this.onSubmit = this.onSubmit.bind(this);\n    }\n\n    setTitle(title)\n    {\n        this.inputElement.resetValue(title);\n    }\n\n    getTitle()\n    {\n        return this.inputElement.value;\n    }\n\n    onSubmit(newValue, prevValue)\n    {\n        //If the value has changed or the value remained empty...\n        if (newValue !== prevValue)\n        {\n            if (this.props.onChange) this.props.onChange(newValue);\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        const title = this.props.title;\n        const SubtitleClass = this.props.subtitle;\n        const offline = !(navigator && navigator.onLine);\n        const onClick = this.props.onClick;\n\n        return (\n            <div id={this.props.id}\n                className={Style.title_container +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                <span className={Style.title_input_container}>\n                    <FormattedInput ref={ref => this.inputElement = ref}\n                        defaultValue={this.props.defaultValue}\n                        onSubmit={this.onSubmit} />\n                    {offline && <OfflineIcon className={Style.offline_status} />}\n                </span>\n                <div className={Style.title_label} onClick={onClick}>\n                    {title}\n                    {SubtitleClass &&\n                        <span className={Style.title_subtitle} onClick={e => e.stopPropagation()}>\n                            <SubtitleClass />\n                        </span>}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ToolbarTitle;\n","import React from 'react';\n\nclass MenuIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z\"/>\n            </svg>\n        );\n    }\n}\nexport default MenuIcon;\n","import React from 'react';\nimport Style from './ToolbarView.css';\n\nimport { TOOLBAR_CONTAINER_MENU, TOOLBAR_CONTAINER_TOOLBAR } from './ToolbarButton.js';\nimport ToolbarTitle from './ToolbarTitle.js';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport MenuIcon from 'components/iconset/MenuIcon.js';\nimport CrossIcon from 'components/iconset/CrossIcon.js';\n\nconst TOOLBAR_ALLOW_MENU_BAR = true;\nconst TOOLBAR_DEFAULT_MENU_INDEX = -1;\n\nclass ToolbarView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.ref = null;\n        this.toolbarElement = null;\n\n        this.state = {\n            open: false,\n            menuIndex: TOOLBAR_DEFAULT_MENU_INDEX\n        };\n\n        this.onBarExpand = this.onBarExpand.bind(this);\n        this.onTitleChange = this.onTitleChange.bind(this);\n    }\n\n    openBar(callback = null)\n    {\n        if (!this.state.open)\n        {\n            //Open it, but also reset menu...\n            this.setState({ open: true, menuIndex: TOOLBAR_DEFAULT_MENU_INDEX }, callback);\n        }\n    }\n\n    closeBar(callback = null)\n    {\n        if (this.state.open)\n        {\n            //Close it, but also reset menu...\n            this.setState({ open: false, menuIndex: TOOLBAR_DEFAULT_MENU_INDEX }, callback);\n        }\n    }\n\n    toggleBar(callback = null)\n    {\n        this.setState((prev, props) => \n        {\n            return { open: !prev.open };\n        }, callback);\n    }\n\n    isBarOpen()\n    {\n        return this.state.open;\n    }\n\n    setCurrentMenu(menuIndex)\n    {\n        if (!this.props.menus) return;\n        if (menuIndex >= this.props.menus.length) menuIndex = TOOLBAR_DEFAULT_MENU_INDEX;\n\n        //Open and set tab index\n        this.setState({ open: true, menuIndex: menuIndex });\n    }\n\n    getCurrentMenuIndex()\n    {\n        return this.state.menuIndex;\n    }\n\n    isCurrentMenu(menuIndex)\n    {\n        return this.state.menuIndex === menuIndex;\n    }\n\n    onBarExpand(e)\n    {\n        this.toggleBar();\n    }\n\n    onTitleChange(value)\n    {\n        this.props.session.setProjectName(value);\n    }\n\n    renderMenuButtons(children)\n    {\n        return React.Children.map(children, child => \n        {\n            if (child.props.containerOnly !== TOOLBAR_CONTAINER_TOOLBAR) return child;\n        });\n    }\n\n    renderToolbarButtons(children)\n    {\n        return React.Children.map(children, child => \n        {\n            if (child.props.containerOnly !== TOOLBAR_CONTAINER_MENU) return child;\n        });\n    }\n\n    /** @override */\n    render()\n    {\n        const title = this.props.title;\n        const subtitle = this.props.subtitle;\n        const toolbarMenus = this.props.menus;\n        const toolbarMenuIndex = this.state.menuIndex;\n        const ToolbarMenu = toolbarMenuIndex >= 0 ? toolbarMenus[toolbarMenuIndex] : null;\n        const showCustomToolbarMenu = ToolbarMenu != null;\n        const onTitleClick = this.props.onTitleClick;\n\n        const session = this.props.session;\n\n        const hasButtons = React.Children.count(this.props.children) > 0;\n        const isBarOpen = this.state.open;\n        const shouldBarHide = this.props.hide || false;\n        const showBarExpander = isBarOpen || (hasButtons && TOOLBAR_ALLOW_MENU_BAR);\n\n        return (\n            <div ref={ref => this.ref = ref}\n                id={this.props.id}\n                className={Style.app_bar +\n                    (isBarOpen ? ' open ' : '') +\n                    (shouldBarHide ? ' hide ' : '') +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                <div className={Style.bar_menu}>\n                    <div className={Style.menu_container}>\n                        {showCustomToolbarMenu ?\n                            <ToolbarMenu {...this.props.menuProps} toolbar={this} />\n                            :\n                            <div style={{display: 'flex', flexDirection: 'column'}}>\n                                <div>\n                                    <h1>\n                                        Flap.js\n                                    </h1>\n                                    <p>\n                                        Something cool will be here soon. ;)\n                                    </p>\n                                    <p>\n                                        Have an awesome day!\n                                    </p>\n                                </div>\n                                <div>\n                                    <h3>Found a bug or have a cool idea?</h3>\n                                    <p>\n                                        Feel free to leave a comment or any feedback in <b>{'\"'}Report a Bug{'\"'}</b>.\n                                    </p>\n                                    <p>\n                                        It{'\\''}s for both <b>bugs</b> and <b>suggestions</b>!\n                                    </p>\n                                    <p style={{marginTop: '3em'}}>\n                                        And if you are at all interested in what we do and would like to join the team, please contact us!\n                                    </p>\n                                </div>\n                            </div>}\n                    </div>\n                    <div className={Style.menu_button_container}>\n                        {this.renderMenuButtons(this.props.children)}\n                    </div>\n                </div>\n                <div ref={ref => this.toolbarElement = ref} className={Style.bar_toolbar}>\n                    <ToolbarTitle className={Style.toolbar_title}\n                        title={title}\n                        subtitle={subtitle}\n                        defaultValue={session.getProjectName()}\n                        onChange={this.onTitleChange}\n                        onClick={onTitleClick} />\n\n                    <div className={Style.toolbar_button_container}>\n                        {this.renderToolbarButtons(this.props.children)}\n                    </div>\n\n                    {showBarExpander && isBarOpen ?\n                        <IconButton className={Style.toolbar_expander} onClick={this.onBarExpand} title=\"Back\">\n                            <CrossIcon />\n                        </IconButton>\n                        :\n                        <IconButton className={Style.toolbar_expander} onClick={this.onBarExpand} title=\"Menu\">\n                            <MenuIcon />\n                        </IconButton>}\n                </div>\n            </div>\n        );\n    }\n}\nexport default ToolbarView;\n","import React from 'react';\nimport Style from './TooltipView.css';\n\nconst TOOLTIP_WAIT_TIME = 30000;\n\nexport const RANDOM_MODE = 'random';\nexport const SEQUENTIAL_MODE = 'sequential';\nexport const ONESHOT_MODE = 'oneshot';\n\nclass TooltipView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this._tooltipTimeout = null;\n\n        this.state = {\n            index: props.initial || 0\n        };\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        clearTimeout(this._tooltipTimeout);\n        this._tooltipTimeout = null;\n    }\n\n    setTooltipIndex(index)\n    {\n        this.setState({ index: index });\n    }\n\n    getTooltipIndex()\n    {\n        return this.state.index;\n    }\n\n    updateTooltip()\n    {\n        const mode = this.props.mode;\n        const visible = this.props.visible;\n        this._tooltipTimeout = null;\n\n        if (visible)\n        {\n            const count = React.Children.count(this.props.children);\n            let nextIndex = this.state.index + 1;\n            if (mode === RANDOM_MODE)\n            {\n                nextIndex = Math.floor(Math.random() * count);\n            }\n            else if (mode === ONESHOT_MODE)\n            {\n                if (nextIndex >= count) nextIndex = count - 1;\n            }\n            else\n            {\n                if (nextIndex >= count) nextIndex = 0;\n            }\n            this.setTooltipIndex(nextIndex);\n        }\n        else\n        {\n            if (mode === RANDOM_MODE)\n            {\n                //Pick a random index to start at.\n                this.setTooltipIndex(Math.floor(Math.random() * React.Children.count(this.props.children)));\n            }\n            else if (mode === ONESHOT_MODE)\n            {\n                //Skip to the end.\n                this.setTooltipIndex(React.Children.count(this.props.children) - 1);\n            }\n            else\n            {\n                //Go back to the beginning.\n                this.setTooltipIndex(0);\n            }\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        //const mode = this.props.mode;\n        const visible = this.props.visible;\n        const tooltipIndex = this.state.index;\n\n        if (visible && !this._tooltipTimeout)\n        {\n            this._tooltipTimeout = setTimeout(() => \n            {\n                this.updateTooltip();\n            }, TOOLTIP_WAIT_TIME);\n        }\n\n        return (\n            <div id={this.props.id}\n                className={Style.tooltip_container +\n                    (visible ? ' visible ' : '') +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                {React.Children.map(this.props.children, (child, i) => \n                {\n                    return (\n                        <label style={{ opacity: tooltipIndex === i ? 1 : 0 }}>\n                            {child}\n                        </label>\n                    );\n                })}\n            </div>\n        );\n    }\n}\n\nexport default TooltipView;\n","import React from 'react';\nimport Style from './UploadDropZone.css';\n\nimport UploadIcon from 'components/iconset/UploadIcon.js';\n\nclass UploadDropZone extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.ref = null;\n\n        this._waiting = false;\n\n        this.onDragEnter = this.onDragEnter.bind(this);\n        this.onDragLeave = this.onDragLeave.bind(this);\n        this.onFileDrop = this.onFileDrop.bind(this);\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n    //Upload drop zone\n        this.ref.addEventListener('drop', this.onFileDrop);\n        this.ref.addEventListener('dragover', this.onDragEnter);\n        this.ref.addEventListener('dragenter', this.onDragEnter);\n        this.ref.addEventListener('dragleave', this.onDragLeave);\n        this.ref.addEventListener('dragend', this.onDragLeave);\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        this.ref.removeEventListener('drop', this.onFileDrop);\n        this.ref.removeEventListener('dragover', this.onDragEnter);\n        this.ref.removeEventListener('dragenter', this.onDragEnter);\n        this.ref.removeEventListener('dragleave', this.onDragLeave);\n        this.ref.removeEventListener('dragend', this.onDragLeave);\n    }\n\n    onDragEnter(e)\n    {\n        e.preventDefault();\n        e.stopPropagation();\n\n        //Change state\n        this._waiting = true;\n    }\n\n    onDragLeave(e)\n    {\n    //Prevent file from being opened\n        e.preventDefault();\n        e.stopPropagation();\n\n        //Revert state\n        this._waiting = false;\n    }\n\n    onFileDrop(e)\n    {\n    //Prevent file from being opened\n        e.preventDefault();\n        e.stopPropagation();\n\n        //Revert state\n        this._waiting = false;\n\n        const dataTransfer = e.dataTransfer;\n        let fileBlob = null;\n        if (dataTransfer.items)\n        {\n            const dataItems = dataTransfer.items;\n            const length = dataItems.length;\n\n            //Just get the first one\n            if (length >= 1)\n            {\n                const file = dataItems[0];\n                if (file.kind === 'file')\n                {\n                    fileBlob = file.getAsFile();\n                }\n            }\n        }\n        else\n        {\n            const dataFiles = dataTransfer.files;\n            const length = dataFiles.length;\n\n            //Just get the first one\n            if (length >= 1)\n            {\n                fileBlob = dataFiles[0];\n            }\n        }\n\n        if (this.props.onFileDrop)\n        {\n            //NOTE: fileBlob could be null\n            this.props.onFileDrop(fileBlob);\n        }\n\n        if (dataTransfer.items)\n        {\n            dataTransfer.items.clear();\n        }\n        else\n        {\n            dataTransfer.clearData();\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        const isWaitingForFile = this._waiting;\n\n        return (\n            <div ref={ref=>this.ref=ref} id={this.props.id}\n                className={Style.upload_container +\n          (isWaitingForFile ? ' waiting ' : '') +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                <UploadIcon className={Style.upload_icon}/>\n                {React.Children.only(this.props.children)}\n            </div>\n        );\n    }\n}\n\nexport default UploadDropZone;\n","import React from 'react';\nimport Style from './NotificationView.css';\n\nimport DefaultNotificationLayout from './DefaultNotificationLayout.js';\n\nclass NotificationView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const notificationManager = this.props.notificationManager;\n        return (\n            <div id={this.props.id}\n                className={Style.notifications_container +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                {notificationManager.getNotifications().map(notification => \n                {\n                    const layoutID = notification.getLayoutID();\n                    const NotificationLayout = layoutID ? notificationManager.getNotificationLayout(layoutID) : DefaultNotificationLayout;\n                    return (\n                        <NotificationLayout key={notification.getID()} notification={notification} message={notification.getMessage()} {...notification.getProps()} />\n                    );\n                })}\n            </div>\n        );\n    }\n}\n\nexport default NotificationView;\n","import React from 'react';\nimport IconButton from './IconButton.js';\n\nclass IconStateButton extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            index: props.initial || 0\n        };\n\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        const prevIndex = this.state.index;\n        this.setState((prev, props) => \n        {\n            const count = React.Children.count(props.children);\n            let nextIndex = prev.index + 1;\n            if (nextIndex >= count)\n            {\n                nextIndex = 0;\n            }\n            return {index: nextIndex};\n        }, () => \n        {\n            if (this.props.onClick)\n            {\n                this.props.onClick(e, prevIndex);\n            }\n        });\n    }\n\n    setStateIndex(index)\n    {\n        this.setState({index: index});\n    }\n\n    getStateIndex()\n    {\n        return this.state.index;\n    }\n\n    /** @override */\n    render()\n    {\n        const child = React.Children.map(this.props.children, (child, i) => \n        {\n            if (i === this.state.index) return child;\n        })[0];\n\n        return (\n            <IconButton id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}\n                title={this.props.title}\n                disabled={this.props.disabled}\n                onClick={this.onClick}>\n                {child}\n            </IconButton>\n        );\n    }\n}\nexport default IconStateButton;\n","import React from 'react';\n\nclass FullscreenIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z\"/>\n            </svg>\n        );\n    }\n}\nexport default FullscreenIcon;\n","import React from 'react';\n\nclass FullscreenExitIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z\"/>\n            </svg>\n        );\n    }\n}\nexport default FullscreenExitIcon;\n","import React from 'react';\nimport Style from './FullscreenWidget.css';\n\nimport IconStateButton from 'experimental/components/IconStateButton.js';\nimport FullscreenIcon from 'components/iconset/FullscreenIcon.js';\nimport FullscreenExitIcon from 'components/iconset/FullscreenExitIcon.js';\n\nclass FullscreenWidget extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const app = this.props.app;\n\n        return (\n            <IconStateButton id={this.props.id}\n                className={Style.fullscreen_button + ' ' + this.props.className}\n                style={this.props.style}\n                title={'Fullscreen Mode'}\n                onClick={(e, i) => app.setState({hide: (i === 0)})}>\n                <FullscreenIcon/>\n                <FullscreenExitIcon/>\n            </IconStateButton>\n        );\n    }\n}\n\nexport default FullscreenWidget;\n","import React from 'react';\nimport Style from '../MenuPanel.css';\n\nimport SessionExporter from 'session/SessionExporter.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nclass ExportPanel extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    renderExporterButton(exportType)\n    {\n        const exporter = this.props.session.getApp().getExportManager().getExporterByExportType(exportType);\n        if (!(exporter instanceof SessionExporter)) return <span></span>;\n\n        const IconClass = exporter.getIconClass();\n\n        return (\n            <IconButton key={exporter.getLabel() + ':' + exportType}\n                className={Style.panel_button}\n                title={exporter.getLabel()}\n                onClick={() => this.props.session.getApp().getExportManager().tryExportFile(exportType, this.props.session)}>\n                {IconClass && <IconClass/>}\n            </IconButton>\n        );\n    }\n\n    /** @override */\n    render()\n    {\n        const session = this.props.session;\n        const exportManager = session.getApp().getExportManager();\n        const exportTypes = exportManager.getExportTypes();\n\n        return (\n            <div id={this.props.id}\n                className={Style.panel_container +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                <div className={Style.panel_title}>\n                    <h1>{I18N.toString('component.exporting.title')}</h1>\n                </div>\n                <div className={Style.panel_content}>\n                    {exportTypes.map(e => this.renderExporterButton(e))}\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default ExportPanel;\n","import React from 'react';\n\nclass StyleInput extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.onChange = this.onChange.bind(this);\n    }\n\n    onChange(e)\n    {\n        const newValue = e.target.value;\n        const value = this.props.value;\n        value.setValue(newValue);\n    }\n\n    /** @override */\n    render()\n    {\n        const title = this.props.title;\n        const value = this.props.value;\n        const variableName = value.getName();\n        const variableValue = value.getValue();\n        const inputID = 'styleopt-' + variableName;\n\n        return (\n            <span id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}>\n                <input id={inputID} type=\"color\"\n                    value={variableValue}\n                    onChange={this.onChange}\n                    disabled={this.props.disabled}/>\n                <label htmlFor={inputID}>\n                    {title}\n                </label>\n            </span>\n        );\n    }\n}\nexport default StyleInput;\n","import React from 'react';\nimport Style from './PanelButton.css';\n\nclass PanelButton extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        return (\n            <button id={this.props.id}\n                className={Style.button_container +\n          ' ' + this.props.className}\n                style={this.props.style}\n                onClick={this.props.onClick}>\n                {this.props.children}\n            </button>\n        );\n    }\n}\n\nexport default PanelButton;\n","import React from 'react';\nimport Style from './PreviewView.css';\n\nclass PreviewView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        return (\n            <div id={this.props.id}\n                className={Style.preview_container +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                <div className={Style.preview_app}>\n                    <div className={Style.preview_toolbar}>\n                    </div>\n                    <div className={Style.preview_workspace}>\n                        <div className={Style.preview_viewport}>\n                            <div className={Style.preview_node} style={{left: '25%', top: '40%'}}></div>\n                            <div className={Style.preview_node} style={{left: '40%', top: '40%'}}></div>\n                        </div>\n                        <div className={Style.preview_notifications}>\n                            <div className={Style.preview_notification_info}></div>\n                            <div className={Style.preview_notification_error}></div>\n                            <div className={Style.preview_notification_warning}></div>\n                            <div className={Style.preview_notification_success}></div>\n                        </div>\n                        <div className={Style.preview_drawer}>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default PreviewView;\n","import React from 'react';\nimport Style from './OptionPanel.css';\n\nimport LocalStorage from 'util/storage/LocalStorage.js';\nimport StyleInput from 'util/theme/components/StyleInput.js';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport PanelSection from 'experimental/panels/PanelSection.js';\nimport PanelSwitch from 'experimental/panels/PanelSwitch.js';\nimport PanelButton from 'experimental/panels/PanelButton.js';\n\nimport PreviewView from './PreviewView.js';\n\nconst HIDDEN_STYLE_GROUP_NAME = 'hidden';\n\n//This should be the same as the one referred to by index.js\nconst DISABLE_EXIT_WARNING_STORAGE_ID = 'disableExitWarning';\n\nclass OptionPanel extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            theme: 'default',\n            customTheme: false,\n            exitWarning: LocalStorage.getData(DISABLE_EXIT_WARNING_STORAGE_ID) === 'true'\n        };\n\n        this.onChangeTheme = this.onChangeTheme.bind(this);\n    }\n\n    onChangeTheme(e)\n    {\n        const session = this.props.session;\n        const app = session.getApp();\n\n        const themeManager = app.getThemeManager();\n        const prevTheme = this.state.theme;\n        const theme = e.target.value;\n        if (prevTheme === theme) return;\n\n        themeManager.loadTheme(theme);\n\n        this.setState({ theme: theme });\n    }\n\n    renderStyleGroups()\n    {\n        const themeManager = this.props.session.getApp().getThemeManager();\n        const result = [];\n        for (const groupName of themeManager.getStyleGroupNames())\n        {\n            if (groupName === HIDDEN_STYLE_GROUP_NAME) continue;\n            const styles = themeManager.getStylesByGroup(groupName);\n            result.push(\n                <PanelSection\n                    key={groupName}\n                    title={I18N.toString('options.colorgroup.' + groupName)}\n                    full={true}>\n                    {styles.map(e =>\n                        <StyleInput key={e.getName()} className={Style.input_option} value={e}\n                            title={I18N.toString('options.' + e.getName())} />)}\n                </PanelSection>\n            );\n        }\n        return result;\n    }\n\n    /** @override */\n    render()\n    {\n        const session = this.props.session;\n        const themeManager = session.getApp().getThemeManager();\n\n        return (\n            <PanelContainer id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}\n                title={I18N.toString('component.options.title')}>\n                <PanelSection title=\"Theme\">\n                    <div style={{ display: 'flex' }}>\n                        <div style={{ width: '60%' }}>\n                            <div id=\"options-theme-select-container\">\n                                <select id=\"options-theme-select\" className=\"panel-select\"\n                                    value={this.state.theme}\n                                    onChange={this.onChangeTheme}\n                                    disabled={this.state.customTheme}>\n                                    <option value=\"default\">Default</option>\n                                    <option value=\"ucsd\">UC San Diego</option>\n                                    <option value=\"duke\">Duke University</option>\n                                    <option value=\"mit\">MIT</option>\n                                </select>\n                                {\n                                    !this.state.customTheme &&\n                                    <PanelButton onClick={() => this.setState({ customTheme: true })}>\n                                        {I18N.toString('action.options.changetheme')}\n                                    </PanelButton>\n                                }\n                            </div>\n                            {\n                                this.state.customTheme &&\n                                <div>\n                                    {this.renderStyleGroups()}\n\n                                    <PanelButton onClick={(e) => \n                                    {\n                                        themeManager.reset();\n                                        this.setState({ customTheme: false });\n                                    }}>\n                                        {I18N.toString('action.options.reset')}\n                                    </PanelButton>\n                                </div>\n                            }\n                        </div>\n                        <div>\n                            <PreviewView />\n                        </div>\n                    </div>\n                </PanelSection>\n\n                <PanelSwitch id={'option-exitwarning'}\n                    checked={this.state.exitWarning}\n                    title={I18N.toString('options.exitwarning')}\n                    onChange={(e) => \n                    {\n                        const result = e.target.checked;\n                        this.setState({ exitWarning: result });\n                        LocalStorage.setData(DISABLE_EXIT_WARNING_STORAGE_ID, '' + result);\n                    }} />\n                <label className={Style.version}>\n                    {`v${process.env.VERSION}`}\n                </label>\n            </PanelContainer>\n        );\n    }\n}\n\nexport default OptionPanel;","import React from 'react';\nimport Style from './LanguagePanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nclass LanguagePanel extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    renderLanguageButton(localizedName, langFile)\n    {\n        return (\n            <IconButton key={langFile}\n                className={Style.language_button}\n                title={localizedName}\n                onClick={(e) => I18N.fetchLanguageFile(langFile)}>\n            </IconButton>\n        );\n    }\n\n    /** @override */\n    render()\n    {\n        //const session = this.props.session;\n\n        return (\n            <PanelContainer id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}\n                title={I18N.toString('component.language.title')}>\n                <div className={Style.language_button_list}>\n                    {this.renderLanguageButton('English', 'en_us')}\n                    {this.renderLanguageButton('Pirate Speak', 'xx_pirate')}\n                </div>\n            </PanelContainer>\n        );\n    }\n}\n\nexport default LanguagePanel;\n","const Modules = {};\n\nModules['fsa'] = {\n    name: 'Finite Automata',\n    version: '3.0.0',\n    experimental: true,\n    fetch: function (callback) { import(/* webpackChunkName: \"module_fsa\" */ 'modules/fsa2/FSAModule.js').then(({ default: _ }) => callback(_)); }\n};\n\nModules['pda'] = {\n    name: 'Pushdown Automata',\n    version: '1.0.0',\n    experimental: true,\n    fetch: function (callback) { import(/* webpackChunkName: \"module_pda\" */ 'modules/pda/PDAModule.js').then(({ default: _ }) => callback(_)); }\n};\n\nModules['re'] = {\n    name: 'Regular Expression',\n    version: '1.0.0',\n    experimental: true,\n    fetch: function (callback) { import(/* webpackChunkName: \"module_re\" */ 'modules/re/REModule.js').then(({ default: _ }) => callback(_)); }\n};\n\nModules['tm'] = {\n    name: 'Turing Machine',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nModules['node'] = {\n    name: 'Node Graph',\n    version: '1.0.0',\n    experimental: true,\n    fetch: function (callback) { import(/* webpackChunkName: \"module_nodegraph\" */ 'modules/nodegraph/NodeGraphModule.js').then(({ default: _ }) => callback(_)); }\n};\n\nModules['tree'] = {\n    name: 'Tree',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nModules['hlsm'] = {\n    name: 'High Level State Machine',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nModules['mealy'] = {\n    name: 'Mealy Machine',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nModules['moore'] = {\n    name: 'Moore Machine',\n    version: '1.0.0',\n    disabled: true,\n    fetch: function (callback) { throw new Error('Module not yet implemented. Sorry :('); }\n};\n\nexport default Modules;\n","import React from 'react';\nimport Style from './ModuleLoaderPanel.css';\n\nimport PanelContainer from 'experimental/panels/PanelContainer.js';\nimport IconButton from 'experimental/components/IconButton.js';\n\nimport Modules from 'modules/Modules.js';\n\nclass ModuleLoaderPanel extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    renderModuleButton(moduleKey, moduleInfo)\n    {\n        const session = this.props.session;\n        const app = session.getApp();\n        const useExperimental = app.isExperimental();\n\n        return (\n            <IconButton key={moduleKey}\n                className={Style.module_button}\n                title={moduleInfo.name + ' (' + moduleInfo.version + ')'}\n                disabled={moduleInfo['experimental'] !== useExperimental || moduleInfo['disabled']}\n                onClick={(e) => \n                {\n                    session.restartSession(session.getApp(), moduleKey);\n                }}>\n            </IconButton>\n        );\n    }\n\n    /** @override */\n    render()\n    {\n        //const session = this.props.session;\n\n        return (\n            <PanelContainer\n                id={this.props.id}\n                className={this.props.className}\n                style={this.props.style}\n                title={'Change Modules'}>\n                <div className={Style.module_button_list}>\n                    {Object.keys(Modules).map(e => this.renderModuleButton(e, Modules[e]))}\n                </div>\n            </PanelContainer>\n        );\n    }\n}\n\nexport default ModuleLoaderPanel;\n","import React from 'react';\nimport Style from './ToolbarDivider.css';\n\nclass ToolbarDivider extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        return (\n            <div id={this.props.id}\n                className={Style.divider + ' ' + this.props.className}\n                style={this.props.style}>\n            </div>\n        );\n    }\n}\n\nexport default ToolbarDivider;\n","import React from 'react';\n\nimport ToolbarButtonStyle from './ToolbarButton.css';\nimport IconUploadButton from 'experimental/components/IconUploadButton.js';\n\nclass ToolbarUploadButton extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const IconClass = this.props.icon;\n        return (\n            <IconUploadButton id={this.props.id}\n                className={ToolbarButtonStyle.toolbar_button +\n          ' ' + this.props.className}\n                style={this.props.style}\n                title={this.props.title}\n                disabled={this.props.disabled}\n                accept={this.props.accept}\n                onUpload={this.props.onUpload}>\n                <IconClass/>\n            </IconUploadButton>\n        );\n    }\n}\n\nexport default ToolbarUploadButton;\n","import React from 'react';\n\nclass PageEmptyIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 2zm-3-7V3.5L18.5 9H13z\"/>\n            </svg>\n        );\n    }\n}\nexport default PageEmptyIcon;\n","import React from 'react';\n\nclass UndoIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z\"/>\n            </svg>\n        );\n    }\n}\nexport default UndoIcon;\n","import React from 'react';\n\nclass RedoIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z\"/>\n            </svg>\n        );\n    }\n}\nexport default RedoIcon;\n","import React from 'react';\n\nclass BugIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M20 8h-2.81c-.45-.78-1.07-1.45-1.82-1.96L17 4.41 15.59 3l-2.17 2.17C12.96 5.06 12.49 5 12 5s-.96.06-1.41.17L8.41 3 7 4.41l1.62 1.63C7.88 6.55 7.26 7.22 6.81 8H4v2h2.09c-.05.33-.09.66-.09 1v1H4v2h2v1c0 .34.04.67.09 1H4v2h2.81c1.04 1.79 2.97 3 5.19 3s4.15-1.21 5.19-3H20v-2h-2.09c.05-.33.09-.66.09-1v-1h2v-2h-2v-1c0-.34-.04-.67-.09-1H20V8zm-4 4v3c0 .22-.03.47-.07.7l-.1.65-.37.65c-.72 1.24-2.04 2-3.46 2s-2.74-.77-3.46-2l-.37-.64-.1-.65C8.03 15.48 8 15.23 8 15v-4c0-.23.03-.48.07-.7l.1-.65.37-.65c.3-.52.72-.97 1.21-1.31l.57-.39.74-.18c.31-.08.63-.12.94-.12.32 0 .63.04.95.12l.68.16.61.42c.5.34.91.78 1.21 1.31l.38.65.1.65c.04.22.07.47.07.69v1zm-6 2h4v2h-4zm0-4h4v2h-4z\"/>\n            </svg>\n        );\n    }\n}\nexport default BugIcon;\n","import React from 'react';\n\nclass WorldIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d={'M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zm6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56zM12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96zM4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2H4.26zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56zm2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8zM12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96zM14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2zm.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56zM16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2h-3.38z'}/>\n            </svg>\n        );\n    }\n}\nexport default WorldIcon;\n","import React from 'react';\n\nclass HelpIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z\"/>\n            </svg>\n        );\n    }\n}\nexport default HelpIcon;\n","import React from 'react';\n\nclass SettingsIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 20 20\">\n                <path d=\"M15.95 10.78c.03-.25.05-.51.05-.78s-.02-.53-.06-.78l1.69-1.32c.15-.12.19-.34.1-.51l-1.6-2.77c-.1-.18-.31-.24-.49-.18l-1.99.8c-.42-.32-.86-.58-1.35-.78L12 2.34c-.03-.2-.2-.34-.4-.34H8.4c-.2 0-.36.14-.39.34l-.3 2.12c-.49.2-.94.47-1.35.78l-1.99-.8c-.18-.07-.39 0-.49.18l-1.6 2.77c-.1.18-.06.39.1.51l1.69 1.32c-.04.25-.07.52-.07.78s.02.53.06.78L2.37 12.1c-.15.12-.19.34-.1.51l1.6 2.77c.1.18.31.24.49.18l1.99-.8c.42.32.86.58 1.35.78l.3 2.12c.04.2.2.34.4.34h3.2c.2 0 .37-.14.39-.34l.3-2.12c.49-.2.94-.47 1.35-.78l1.99.8c.18.07.39 0 .49-.18l1.6-2.77c.1-.18.06-.39-.1-.51l-1.67-1.32zM10 13c-1.65 0-3-1.35-3-3s1.35-3 3-3 3 1.35 3 3-1.35 3-3 3z\"/>\n            </svg>\n        );\n    }\n}\nexport default SettingsIcon;\n","class AbstractAutoSaveHandler\n{\n    onAutoSaveLoad(dataStorage) {}\n    onAutoSaveUpdate(dataStorage) {}\n    onAutoSaveUnload(dataStorage) {}\n}\n\nexport default AbstractAutoSaveHandler;\n","import AbstractAutoSaveHandler from 'util/storage/AbstractAutoSaveHandler.js';\n\nclass AppSaver extends AbstractAutoSaveHandler\n{\n    constructor(app)\n    {\n        super();\n\n        this._app = app;\n    }\n\n    /** @override */\n    onAutoSaveLoad(dataStorage)\n    {\n        const app = this._app;\n        const session = app.getSession();\n        const currentModule = session.getCurrentModule();\n        const currentModuleName = currentModule.getModuleName();\n\n        const data = dataStorage.getDataAsObject('graph-' + currentModuleName);\n        if (data)\n        {\n            try\n            {\n                app.getImportManager().tryImportFileFromData('', '.json', data);\n            }\n            catch(e)\n            {\n                // Ignore error\n            }\n        }\n    }\n\n    /** @override */\n    onAutoSaveUpdate(dataStorage)\n    {\n        const app = this._app;\n        const session = app.getSession();\n        const currentModule = session.getCurrentModule();\n        const currentModuleName = currentModule.getModuleName();\n\n        try\n        {\n            app.getExportManager().tryExportTargetToData('session', session)\n                .then(result =>\n                {\n                    dataStorage.setDataAsObject('graph-' + currentModuleName, result.data);\n                });\n        }\n        catch(e)\n        {\n            // Ignore error\n        }\n    }\n\n    /** @override */\n    onAutoSaveUnload(dataStorage)\n    {\n        //Don't do anything...\n    }\n\n    getApp() { return this._app; }\n}\n\nexport default AppSaver;\n","import AbstractAutoSaveHandler from 'util/storage/AbstractAutoSaveHandler.js';\n\nexport const THEME_STORAGE_ID = 'prefs-theme';\nexport const COLOR_STORAGE_ID = 'prefs-color';\n\nclass ColorSaver extends AbstractAutoSaveHandler\n{\n    constructor(themeManager)\n    {\n        super();\n\n        this._themeManager = themeManager;\n    }\n\n    /** @override */\n    onAutoSaveLoad(dataStorage)\n    {\n        const themeManager = this._themeManager;\n        // const theme = dataStorage.getData(THEME_STORAGE_ID);\n        const data = dataStorage.getDataAsObject(COLOR_STORAGE_ID);\n\n        for (const key in data)\n        {\n            const style = themeManager.getStyleByName(key);\n            if (style)\n            {\n                style.setValue(data[key]);\n            }\n        }\n    }\n\n    /** @override */\n    onAutoSaveUnload(dataStorage)\n    {\n        //Don't do anything...\n    }\n\n    /** @override */\n    onAutoSaveUpdate(dataStorage)\n    {\n        const themeManager = this._themeManager;\n        const data = {};\n\n        const theme = themeManager.getCurrentTheme();\n        for (const style of themeManager.getStyles())\n        {\n            const styleName = style.getName();\n            const styleValue = style.getValue();\n\n            //TODO: Just save everything, unless we can somehow cache theme files...\n            /*\n            if (theme)\n            {\n                const themeStyle = theme.getStyleByName(styleName);\n                if (themeStyle && themeStyle.getValue() === styleValue)\n                {\n                continue;\n                }\n            }\n            */\n\n            data[styleName] = styleValue;\n        }\n        dataStorage.setDataAsObject(COLOR_STORAGE_ID, data);\n        dataStorage.setData(THEME_STORAGE_ID, theme.getName());\n    }\n\n    getThemeManager()\n    {\n        return this._themeManager;\n    }\n}\n\nexport default ColorSaver;","import * as ColorHelper from './ColorHelper.js';\n\nexport function dark(hex)\n{\n    //v < 0.15 ? lighten : darken\n    const color = [];\n    const inverted = [];\n    ColorHelper.HEXtoRGB(hex, color);\n    ColorHelper.invertRGB(color, true, inverted);\n    ColorHelper.blendRGB(0.2, color, inverted, color);\n    const result = ColorHelper.RGBtoHEX(color);\n    return result;\n}\n\nexport function invert(hex)\n{\n    const color = [];\n    ColorHelper.HEXtoRGB(hex, color);\n    ColorHelper.invertRGB(color, false, color);\n    const result = ColorHelper.RGBtoHEX(color);\n    return result;\n}\n\nexport function lite(hex)\n{\n    //v < 0.15 ? lighten : darken\n    const color = [];\n    const inverted = [];\n    ColorHelper.HEXtoRGB(hex, color);\n    ColorHelper.invertRGB(color, true, inverted);\n    ColorHelper.blendRGB(0.39, color, inverted, color);\n    const result = ColorHelper.RGBtoHEX(color);\n    return result;\n}\n","import AbstractAutoSaveHandler from 'util/storage/AbstractAutoSaveHandler.js';\n\nexport const LANG_STORAGE_ID = 'prefs-lang';\n\nclass LanguageSaver extends AbstractAutoSaveHandler\n{\n    constructor() { super(); }\n\n    /** @override */\n    onAutoSaveLoad(dataStorage)\n    {\n        const data = dataStorage.getDataAsObject(LANG_STORAGE_ID);\n        if (!data) return;\n\n        for (const key of Object.keys(data))\n        {\n            I18N.languageMapping.set(key, data[key]);\n        }\n    }\n\n    /** @override */\n    onAutoSaveUnload(dataStorage)\n    {\n        //Don't do anything...\n    }\n\n    /** @override */\n    onAutoSaveUpdate(dataStorage)\n    {\n        const data = {};\n        for (const key of I18N.languageMapping.keys())\n        {\n            data[key] = I18N.languageMapping.get(key);\n        }\n        dataStorage.setDataAsObject(LANG_STORAGE_ID, data);\n    }\n}\n\nexport default LanguageSaver;\n","const AUTOSAVE_INTERVAL = 1000;\n\nconst AutoSave = {\n    _init: false,\n    _handlers: [],\n    _interval: null,\n    _storage: null,\n    initialize(dataStorage)\n    {\n        if (!dataStorage) throw new Error('Unable to initialize AutoSave for unknown data storage');\n        if (!dataStorage.isSupported()) return;\n\n        this._storage = dataStorage;\n        this._init = true;\n        for(const handler of this._handlers)\n        {\n            handler.onAutoSaveLoad(this._storage);\n        }\n\n        this.onIntervalUpdate = this.onIntervalUpdate.bind(this);\n        this._interval = setInterval(this.onIntervalUpdate, AUTOSAVE_INTERVAL);\n    },\n    destroy()\n    {\n        if (!this._storage.isSupported()) return;\n        if (!this._init) return;\n\n        clearInterval(this._interval);\n\n        this._init = false;\n        for(const handler of this._handlers)\n        {\n            handler.onAutoSaveUnload(this._storage);\n        }\n        this._handlers.length = 0;\n        this._storage = null;\n    },\n    onIntervalUpdate()\n    {\n        for(const handler of this._handlers)\n        {\n            handler.onAutoSaveUpdate(this._storage);\n        }\n    },\n    registerHandler(handler)\n    {\n        this._handlers.push(handler);\n        if (this._init)\n        {\n            handler.onAutoSaveLoad(this._storage);\n        }\n        return this;\n    },\n    unregisterHandler(handler)\n    {\n        this._handlers.splice(this._handlers.indexOf(handler), 1);\n        if (this._init)\n        {\n            handler.onAutoSaveUnload(this._storage);\n        }\n        return this;\n    },\n    load()\n    {\n        if (!this._init) throw new Error('Cannot load when not yet initialized');\n\n        for(const handler of this._handlers)\n        {\n            handler.onAutoSaveLoad(this._storage);\n        }\n    },\n    unload()\n    {\n        if (!this._init) throw new Error('Cannot save when not yet initialized');\n\n        for(const handler of this._handlers)\n        {\n            handler.onAutoSaveUnload(this._storage);\n        }\n    }\n};\n\nexport default AutoSave;\n","export function downloadURL(filename, url)\n{\n    const element = document.createElement('a');\n    const headerIndex = url.indexOf(';');\n    url = url.substring(0, headerIndex + 1) + 'headers=Content-Disposition%3A%20attachment%3B%20filename=' + filename + ';' + url.substring(headerIndex + 1);\n    element.setAttribute('href', url);\n    element.setAttribute('download', filename);\n\n    element.style.display = 'none';\n    document.body.appendChild(element);\n\n    element.click();\n    document.body.removeChild(element);\n    \n    return Promise.resolve(url);\n}\n\nclass Downloader\n{\n    constructor() {}\n\n    downloadFile(fileName, downloadType, fileData, opts)\n    {\n        return Promise.resolve(fileData);\n    }\n}\n\nexport default Downloader;","import Downloader, { downloadURL } from './Downloader.js';\n\nfunction getTextDataURI(data)\n{\n    return 'data:text/plain; charset=utf-8,' + encodeURIComponent(data);\n}\n\nclass TextDownloader extends Downloader\n{\n    constructor() { super(); }\n\n    /** @override */\n    downloadFile(fileName, downloadType, fileData, opts)\n    {\n        return downloadURL(fileName, getTextDataURI(fileData)).then(result => fileData);\n    }\n}\n\nexport default TextDownloader;","/**\n * Contains utility functions for file-related actions.\n * @module FileHelper\n */\n\n/**\n * Gets the file extension of the name.\n * \n * @param {String} name the file name to parse\n * @returns {String} the file extension for the name or empty string if none found\n */\nexport function getFileExtFromName(name)\n{\n    if (!name) return '';\n    const index = name.lastIndexOf('.');\n    if (index < 0) return '';\n    return name.substring(index);\n}","import { getFileExtFromName } from '../FileHelper.js';\nimport Downloader, { downloadURL } from './Downloader.js';\n\nfunction getBlobFromSVG(svg)\n{\n    const serializer = new XMLSerializer();\n    const svgString = serializer.serializeToString(svg);\n    const blob = new Blob([svgString], { type: 'image/svg+xml' });\n    return blob;\n}\n\nclass SVGImageDownloader extends Downloader\n{\n    constructor() { super(); }\n\n    /** @override */\n    downloadFile(fileName, downloadType, fileData, opts)\n    {\n        if (fileData instanceof SVGElement)\n        {\n            const width = opts['width'] || 1;\n            const height = opts['height'] || 1;\n            const fileExt = getFileExtFromName(fileName);\n            const imageType = opts['image-type'] || fileExt.substring(1);\n            const blob = getBlobFromSVG(fileData);\n            return new Promise((resolve, reject) =>\n            {\n                const url = URL.createObjectURL(blob);\n\n                const canvas = document.createElement('canvas');\n                const ctx = canvas.getContext('2d');\n                const pixelRatio = window.devicePixelRatio || 1;\n                canvas.width = width * pixelRatio;\n                canvas.height = height * pixelRatio;\n                canvas.style.width = width + 'px';\n                canvas.style.height = height + 'px';\n                ctx.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n                const image = new Image();\n                image.onload = () => \n                {\n                    ctx.drawImage(image, 0, 0);\n                    URL.revokeObjectURL(url);\n\n                    const imageDataType = 'image/' + imageType;\n                    const imageURI = canvas.toDataURL(imageDataType).replace(imageDataType, 'image/octet-stream');\n                    downloadURL(fileName, imageURI);\n                };\n                image.src = url;\n            });\n        }\n        else\n        {\n            throw new Error('Cannot download file data of this type - can only download svg elements');\n        }\n    }\n}\n\nexport default SVGImageDownloader;","import TextDownloader from './TextDownloader.js';\n\nclass JSONDownloader extends TextDownloader\n{\n    constructor() { super(); }\n\n    /** @override */\n    downloadFile(fileName, downloadType, fileData, opts)\n    {\n        return super.downloadFile(fileName, downloadType, JSON.stringify(fileData), opts);\n    }\n}\n\nexport default JSONDownloader;","import TextDownloader from './TextDownloader.js';\nimport SVGImageDownloader from './SVGImageDownloader.js';\nimport JSONDownloader from './JSONDownloader.js';\n\nclass DownloadManager\n{\n    constructor()\n    {\n        this._downloaders = new Map();\n\n        this.addDownloader(new TextDownloader(), 'text');\n        this.addDownloader(new SVGImageDownloader(), 'image');\n        this.addDownloader(new JSONDownloader(), 'object');\n    }\n\n    /**\n     * Add downloader for the download type(s). If there are multiple downloaders sharing the same type, they will be\n     * given a chance to process in the order they were registered.\n     * \n     * @param {Downloader} downloader       the downloader associated with the download type\n     * @param {...String} downloadTypes     the download type preceded by a dot, such as '.txt' or '.config.json'\n     * @returns {this}\n     */\n    addDownloader(downloader, ...downloadTypes)\n    {\n        for (const downloadType of downloadTypes)\n        {\n            if (this._downloaders.has(downloadType))\n            {\n                this._downloaders.get(downloadType).push(downloader);\n            }\n            else\n            {\n                this._downloaders.set(downloadType, [downloader]);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Remove downloader for the download type. If the downloader is the last for the download\n     * type, the download type is removed as an available downloadable download type.\n     * \n     * @param {Downloader} downloader   the downloader to remove\n     * @param {String} downloadType     the download type to remove the downloader from\n     * @returns {this}\n     */\n    removeDownloader(downloader, downloadType)\n    {\n        if (this._downloaders.has(downloadType))\n        {\n            const downloaders = this._downloaders.get(downloadType);\n            downloaders.splice(downloaders.indexOf(downloader), 1);\n            if (downloaders.length <= 0)\n            {\n                this._downloaders.delete(downloadType);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Removes all downloaders for the download type. Essentially, the download type will no longer\n     * be an option for downloading.\n     * \n     * @param {String} downloadType the download type to remove all downloaders\n     */\n    clearDownloadersByDownloadType(downloadType)\n    {\n        this._downloaders.delete(downloadType);\n    }\n\n    /**\n     * Removes all downloaders and download types.\n     */\n    clear()\n    {\n        this._downloaders.clear();\n    }\n\n    /**\n     * Tries to download the export data with registered downloaders.\n     * \n     * @param {String} fileName the name of the exported file\n     * @param {String} downloadType the type of file data (NOT the file extension)\n     * @param {String} fileData the file data to download\n     * @param {Object} opts any additional arguments to pass to the downloader\n     * @returns {Promise} a Promise that resolves if downloaded without errors\n     */\n    tryDownloadFile(fileName, downloadType, fileData, opts)\n    {\n        // Find all valid downloaders\n        const downloaders = this.getDownloadersByDownloadType(downloadType);\n\n        // Try to download them ...\n        if (downloaders && downloaders.length > 0)\n        {\n            return downloaders.reduce(\n                (acc, value) => acc.catch(\n                    e => value.downloadFile(fileName, downloadType, fileData, opts)\n                ),\n                Promise.reject());\n        }\n        else\n        {\n            throw new Error('No valid downloaders found for download type');\n        }\n    }\n\n    /**\n     * Gets the associated downloaders (in order) for the download type.\n     * \n     * @param {String} downloadType the downloaders' download type\n     * @returns {Array.<Downloader>} a mutable array of downloaders\n     */\n    getDownloadersByDownloadType(downloadType)\n    {\n        return this._downloaders.get(downloadType);\n    }\n\n    /**\n     * Gets all available download types with downloaders.\n     * \n     * @returns {Iterable.<String>} a collection of download types\n     */\n    getDownloadTypes() { return this._downloaders.keys(); }\n\n    /**\n     * @returns {Boolean} whether there are available downloaders of any download type\n     */\n    isEmpty() { return this._downloaders.size <= 0; }\n}\n\nexport default DownloadManager;\n","import DownloadManager from './DownloadManager.js';\n\nclass ExportManager\n{\n    constructor()\n    {\n        this._exporters = new Map();\n        this._exportTypes = [];\n\n        this._downloaderManager = new DownloadManager();\n    }\n\n    /**\n     * Register exporter for the export type(s). There can only be an exporter for\n     * each export type, but there can be multiple export types per exporter. If the\n     * export type is already registered, this will replace it with the new exporter.\n     * \n     * @param {Exporter} exporter       the exporter associated with the export type\n     * @param {...String} exportTypes   the export type for the exporter (NOT the same as file type)\n     * @returns {this}\n     */\n    registerExporter(exporter, ...exportTypes)\n    {\n        for(const exportType of exportTypes)\n        {\n            this._exporters.set(exportType, exporter);\n            this._exportTypes.push(exportType);\n        }\n\n        return this;\n    }\n\n    /**\n     * Removes the exporter and any associated export types from the available\n     * export options.\n     * \n     * @param {Exporter} exporter the exporter to remove\n     * @returns {Array.<String>} a list of associated export types\n     */\n    unregisterExporter(exporter)\n    {\n        const dst = [];\n        for(const exportType of this._exporters.keys())\n        {\n            if (this._exporters.get(exportType) === exporter)\n            {\n                dst.push(exportType);\n            }\n        }\n\n        for(const exportType of dst)\n        {\n            this.unregisterExportType(exportType);\n        }\n        return dst;\n    }\n    \n    /**\n     * Removes the export type as an available export option. The associated exporter\n     * will also be removed, but if it was also registered to other export types, those\n     * are not changed. Use unregisterExporter() to remove everything related to the\n     * exporter.\n     * \n     * @param {String} exportType the export type to remove\n     * @returns {Exporter} the exporter associated with the export type\n     */\n    unregisterExportType(exportType)\n    {\n        const dst = this._exporters.get(exportType);\n        this._exporters.delete(exportType);\n\n        // Remove export type\n        const index = this._exportTypes.indexOf(exportType);\n        this._exportTypes.splice(index, 1);\n\n        return dst;\n    }\n\n    /**\n     * Removes all exporters and export types.\n     */\n    clear()\n    {\n        this._exporters.clear();\n        this._exportTypes.length = 0;\n    }\n\n    /**\n     * Tries to export the target to file.\n     * \n     * @param {String} exportType the export type for the target\n     * @param {*} target the target to export to data\n     * @returns {Promise} a Promise that will resolve if the target is successfully exported to file.\n     */\n    tryExportFile(exportType, target)\n    {\n        return this.tryExportTargetToData(exportType, target)\n            .then(result => this._downloaderManager.tryDownloadFile(\n                result['name'],\n                result['type'],\n                result['data'],\n                result))\n            .catch(err =>\n            {\n                throw new Error('Failed to export target to data:' + err.message);\n            });\n    }\n\n    /**\n     * Tries to export the target to export data.\n     * \n     * @param {String} exportType the export type for the target\n     * @param {*} target the target to export to data\n     * @returns {Promise} a Promise that will resolve if the target is successfully processed to a valid export data.\n     */\n    tryExportTargetToData(exportType, target)\n    {\n        if (!this._exporters.has(exportType))\n            throw new Error('Unable to export unregistered export type');\n\n        const exporter = this._exporters.get(exportType);\n        return exporter.exportTarget(exportType, target);\n    }\n\n    /**\n     * Gets the associated exporter for the export type.\n     * \n     * @param {String} exportType the registered export type\n     * @returns {Exporter} the associated exporter\n     */\n    getExporterByExportType(exportType)\n    {\n        return this._exporters.get(exportType);\n    }\n\n    /**\n     * Gets the available registered export types in order.\n     * \n     * @returns {Array.<String>} an array of export types\n     */\n    getExportTypes()\n    {\n        return this._exportTypes;\n    }\n\n    /**\n     * Gets the available registered exporters. This is, however, NOT in order.\n     * \n     * @returns {Iterable.<Exporter>} a collection of exporters\n     */\n    getExporters()\n    {\n        return this._exporters.values();\n    }\n\n    /**\n     * @returns {Boolean} whether there are available importers of any file type\n     */\n    isEmpty() { return this._exporters.size <= 0; }\n}\n\nexport default ExportManager;","import { getFileExtFromName } from '../FileHelper.js';\nimport TextUploader from './TextUploader.js';\n\nclass ImportManager\n{\n    constructor()\n    {\n        this._importers = new Map();\n        this._metaTypes = new Map();\n\n        this._textUploader = new TextUploader();\n    }\n    \n    /**\n     * Add importer for the file type(s). If there are multiple importers sharing the same type, they will be\n     * given a chance to process in the order they were registered.\n     * \n     * @param {Importer} importer       the importer associated with the file type\n     * @param {...String} fileTypes     the file type preceded by a dot, such as '.txt' or '.config.json'\n     * @returns {this}\n     */\n    addImporter(importer, ...fileTypes)\n    {\n        for(const fileType of fileTypes)\n        {\n            this._addFileType(fileType);\n            this._importers.get(fileType).push(importer);\n        }\n        return this;\n    }\n\n    /**\n     * Remove importer for the file type. If the importer is the last for the file\n     * type, the file type is removed as an available importable file type.\n     * \n     * @param {Importer} importer   the importer to remove\n     * @param {String} fileType     the file type to remove the importer from\n     * @returns {this}\n     */\n    removeImporter(importer, fileType)\n    {\n        if (this._importers.has(fileType))\n        {\n            const importers = this._importers.get(fileType);\n            importers.splice(importers.indexOf(importer), 1);\n            if (importers.length <= 0)\n            {\n                this._removeFileType(fileType);\n            }\n        }\n        return this;\n    }\n\n    /**\n     * Removes all importers for the file type. Essentially, the file type will no longer\n     * be an option for importing.\n     * \n     * @param {String} fileType the file type to remove all importers\n     */\n    clearImportersByFileType(fileType)\n    {\n        this._removeFileType(fileType);\n    }\n\n    /**\n     * Removes all importers and file types.\n     */\n    clear()\n    {\n        this._importers.clear();\n        this._metaTypes.clear();\n    }\n\n    _addFileType(fileType)\n    {\n        if (this._importers.has(fileType)) return;\n\n        const fileExtIndex = fileType.lastIndexOf('.');\n        if (fileExtIndex < 0) throw new Error('File types must start with \\'.\\'');\n\n        // Register any file types with additional extensions BEFORE the last one.\n        if (fileExtIndex !== 0)\n        {\n            const fileExt = fileType.substring(fileExtIndex);\n            if (this._metaTypes.has(fileExt))\n            {\n                const metaTypes = this._metaTypes.get(fileExt);\n                metaTypes.push(fileType);\n                metaTypes.sort((a, b) =>\n                {\n                    const patternA = a.match(/\\./g);\n                    const patternB = a.match(/\\./g);\n                    return patternA.length - patternB.length;\n                });\n            }\n            else\n            {\n                if (!this._importers.has(fileExt)) this._importers.set(fileExt, []);\n\n                this._metaTypes.set(fileExt, [fileType]);\n            }\n        }\n\n        this._importers.set(fileType, []);\n    }\n\n    _removeFileType(fileType)\n    {\n        this._importers.delete(fileType);\n\n        const fileExtIndex = fileType.lastIndexOf('.');\n        if (fileExtIndex !== 0)\n        {\n            const fileExt = fileType.substring(fileExtIndex);\n            const metaTypes = this._metaTypes.get(fileExt);\n            metaTypes.splice(metaTypes.indexOf(fileExt), 1);\n            if (metaTypes.length <= 0)\n            {\n                this._metaTypes.delete(fileExt);\n            }\n        }\n    }\n\n    /**\n     * Tries to import the file blob with registered importers.\n     * \n     * @param {File} fileBlob the file to import\n     * @returns {Promise} a Promise that resolves if imported without errors\n     */\n    tryImportFile(fileBlob)\n    {\n        if (!fileBlob) throw new Error('Unable to import null file');\n        if (!(fileBlob instanceof File)) throw new Error('Unable to import object as file');\n\n        return this._textUploader.uploadFile(fileBlob)\n            .then(result =>\n            {\n                const fileName = fileBlob.name;\n                const fileType = getFileExtFromName(fileName);\n                const fileData = result;\n                return this.tryImportFileFromData(fileName, fileType, fileData);\n            })\n            .catch(err =>\n            {\n                throw new Error('Failed to import file: ' + err.message);\n            });\n    }\n\n    /**\n     * Tries to import the file data with registered importers. This is usually used\n     * in a chain after tryUploadFile(), since this method processes \"uploaded\" file\n     * data (not file blobs) into objects used by the application.\n     * \n     * The file data is outputted by uploaders, which take file blobs.\n     * \n     * For ease of use, this entire chain is done by tryImportFile().\n     * \n     * @param {String} fileName the name of the target file\n     * @param {String} fileType the type of the target file (usually just the file extension)\n     * @param {String} fileData the file data to import\n     * @returns {Promise} a Promise that resolves if imported without errors\n     */\n    tryImportFileFromData(fileName, fileType, fileData)\n    {\n        // Find all valid importers\n        const importers = [];\n\n        if (this._metaTypes.has(fileType))\n        {\n            // ...for meta file types...\n            const metaTypes = this._metaTypes.get(fileType);\n            for (const metaType of metaTypes)\n            {\n                if (fileName.endsWith(metaType))\n                {\n                    for(const importer of this.getImportersByFileType(metaType))\n                    {\n                        importers.push({\n                            src: importer,\n                            type: metaType\n                        });\n                    }\n                }\n            }\n        }\n\n        // ...for file extensions...\n        for(const importer of this.getImportersByFileType(fileType))\n        {\n            importers.push({\n                src: importer,\n                type: fileType\n            });\n        }\n\n        // Try to import them ...\n        if (importers && importers.length > 0)\n        {\n            return importers.reduce(\n                (acc, value) => acc.catch(\n                    err => value.src.importFileData(fileName, value.type, fileData)\n                ),\n                Promise.reject());\n        }\n        else\n        {\n            throw new Error('No valid importers found for file');\n        }\n    }\n\n    /**\n     * Gets the associated importers (in order) for the file type.\n     * \n     * @param {String} fileType the importers' file type\n     * @returns {Array.<Importer>} a mutable array of importers\n     */\n    getImportersByFileType(fileType)\n    {\n        return this._importers.get(fileType);\n    }\n\n    /**\n     * Gets all available file types with importers.\n     * \n     * @returns {Iterable.<String>} a collection of file types\n     */\n    getFileTypes() { return this._importers.keys(); }\n\n    /**\n     * Gets the <input> accept attribute string for all available file types with importeres.\n     * \n     * @returns {String} a string with all valid file exts\n     */\n    getFileTypesAsAcceptString()\n    {\n        const dst = Array.from(this._importers.keys());\n        return dst.join(',');\n    }\n\n    /**\n     * @returns {Boolean} whether there are available importers of any file type\n     */\n    isEmpty() { return this._importers.size <= 0; }\n}\n\nexport default ImportManager;\n","/**\n * Contains utility functions for url-related actions.\n * @module URLHelper\n */\n\n/**\n * Gets the current window's url,\n * \n * @returns {String} the current url\n */\nexport function getCurrentURL()\n{\n    return window.location.href;\n}\n\n/**\n * Gets the parameters in the url.\n * Refer to {@link https://gomakethings.com/getting-all-query-string-values-from-a-url-with-vanilla-js/} for more information.\n * \n * @param {String} url the full url\n * @returns {Object} an object mapping from parameter name to value\n */\nexport function getURLParameters(url)\n{\n    const result = {};\n    const parser = document.createElement('a');\n    parser.href = url;\n    const query = parser.search.substring(1);\n    const vars = query.split('&');\n    for(const v of vars)\n    {\n        const pair = v.split('=');\n        result[pair[0]] = decodeURIComponent(pair[1]);\n    }\n    return result;\n}\n","import Modules from 'modules/Modules.js';\nimport LocalStorage from 'util/storage/LocalStorage.js';\nimport * as URLHelper from 'util/URLHelper.js';\nimport { guid } from 'util/MathHelper.js';\n\nimport Logger from 'util/logger/Logger.js';\nconst LOGGER_TAG = 'Session';\n\nconst DEFAULT_MODULE_ID = 'fsa';\nexport const CURRENT_MODULE_STORAGE_ID = 'currentModule';\nconst MODULE_LOAD_DELAY = 300;\nlet MODULE_TIMEOUT = null;\n\nclass Session\n{\n    constructor()\n    {\n        this._name = I18N.toString('file.untitled');\n        this._module = null;\n        this._moduleClass = null;\n        this._moduleStarted = false;\n        this._app = null;\n\n        this._sessionID = null;\n\n        this._listeners = [];\n    }\n\n    addListener(listener)\n    {\n        this._listeners.push(listener);\n        return this;\n    }\n\n    startSession(app, moduleName = null)\n    {\n        if (this._module !== null) return;\n\n        Logger.out(LOGGER_TAG, `Starting session for module '${moduleName}'...`);\n\n        // Load from storage, url, or default, if not specified...\n        if (!moduleName || moduleName.length <= 0)\n        {\n            const urlParams = URLHelper.getURLParameters(URLHelper.getCurrentURL());\n            if ('module' in urlParams) moduleName = urlParams['module'];\n            if (!moduleName || moduleName.length <= 0)\n            {\n                moduleName = LocalStorage.getData(CURRENT_MODULE_STORAGE_ID);\n                if (!moduleName || moduleName.length <= 0)\n                {\n                    moduleName = DEFAULT_MODULE_ID;\n                }\n            }\n        }\n\n        // Check registered module info...\n        let moduleInfo = Modules[moduleName];\n        if (!moduleInfo)\n        {\n            moduleName = DEFAULT_MODULE_ID;\n            moduleInfo = Modules[moduleName];\n            \n            if (!moduleInfo)\n            {\n                window.alert('Cannot find registered module with id \\'' + moduleName + '\\'');\n                return;\n            }\n        }\n        const useExperimental = moduleInfo['experimental'];\n        if (useExperimental && !app.isExperimental())\n        {\n            window.alert('Cannot load experimental module with id \\'' + moduleName + '\\' on stable app version.');\n            return;\n        }\n        else if (!useExperimental && app.isExperimental())\n        {\n            window.alert('Cannot load stable module with id \\'' + moduleName + '\\' on experimental app version.');\n            return;\n        }\n\n        // Overwrite any past calls...\n        if (MODULE_TIMEOUT) clearTimeout(MODULE_TIMEOUT);\n\n        MODULE_TIMEOUT = setTimeout(() =>\n        {\n            moduleInfo.fetch((ModuleClass) =>\n            {\n                MODULE_TIMEOUT = null;\n\n                this._app = app;\n                this._moduleClass = ModuleClass;\n                this._sessionID = '#' + guid();\n                try\n                {\n                    this._module = new ModuleClass(app);\n\n                    // Allows renderers to be created...\n                    app.forceUpdate();\n\n                    this._module.initialize(app);\n\n                    for (const listener of this._listeners)\n                    {\n                        listener.onSessionStart(this);\n                    }\n\n                    LocalStorage.setData(CURRENT_MODULE_STORAGE_ID, moduleName);\n\n                    this._moduleStarted = true;\n                }\n                catch (e)\n                {\n                    window.alert('Could not load module with id \\'' + moduleName + '\\':\\n' + e.message);\n                }\n            });\n        }, MODULE_LOAD_DELAY);\n    }\n\n    restartSession(app, moduleName = null)\n    {\n        if (this._module === null) throw new Error('Cannot restart session that is not yet started');\n\n        this.stopSession(app);\n        this.startSession(app, moduleName);\n    }\n\n    updateSession(app)\n    {\n        if (this._module && this._moduleStarted)\n        {\n            this._module.update(app);\n        }\n    }\n\n    stopSession(app)\n    {\n        if (this._module === null) return;\n\n        Logger.out(LOGGER_TAG, 'Stopping session...');\n\n        for (const listener of this._listeners)\n        {\n            listener.onSessionStop(this);\n        }\n\n        this._module.destroy(this._app);\n        this._moduleStarted = false;\n        this._moduleClass = null;\n        this._module = null;\n        this._sessionID = null;\n        this._app = null;\n    }\n\n    setProjectName(name)\n    {\n        if (!name || name.length <= 0)\n        {\n            this._name = I18N.toString('file.untitled');\n        }\n        else\n        {\n            this._name = name;\n        }\n\n        const value = this._name;\n        const element = document.getElementById('window-title');\n        const string = element.innerHTML;\n        const separator = string.indexOf('-');\n        if (separator !== -1)\n        {\n            element.innerHTML = string.substring(0, separator).trim() + ' - ' + value;\n        }\n        else\n        {\n            element.innerHTML = string + ' - ' + value;\n        }\n    }\n\n    getProjectName() { return this._name; }\n    getCurrentModule() { return this._module; }\n    isModuleLoaded() { return this._module !== null; }\n    getSessionID() { return this._sessionID; }\n    getApp() { return this._app; }\n}\n\nexport default Session;\n","class DrawerManager\n{\n    constructor()\n    {\n        this._panelClasses = [];\n        this._panelProps = null;\n    }\n\n    setPanelProps(props)\n    {\n        this._panelProps = props;\n        return this;\n    }\n\n    addPanelClass(panelClass)\n    {\n        this._panelClasses.push(panelClass);\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n    \n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this._panelClasses.length = 0;\n        this._panelProps = null;\n    }\n\n    getPanelProps()\n    {\n        return this._panelProps;\n    }\n\n    getPanelClasses()\n    {\n        return this._panelClasses;\n    }\n}\n\nexport default DrawerManager;\n","class MenuManager\n{\n    constructor()\n    {\n        this._panelClasses = [];\n        this._panelProps = null;\n        this._subtitleComponentClass = null;\n    }\n\n    setSubtitleComponentClass(componentClass)\n    {\n        this._subtitleComponentClass = componentClass;\n    }\n\n    setPanelProps(props)\n    {\n        this._panelProps = props;\n        return this;\n    }\n\n    addPanelClass(panelClass)\n    {\n        this._panelClasses.push(panelClass);\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        session.getApp().getToolbarComponent().closeBar();\n    \n        this._panelClasses.length = 0;\n        this._panelProps = null;\n    }\n\n    getPanelProps()\n    {\n        return this._panelProps;\n    }\n\n    getPanelClasses()\n    {\n        return this._panelClasses;\n    }\n\n    getSubtitleComponentClass()\n    {\n        return this._subtitleComponentClass;\n    }\n}\n\nexport default MenuManager;\n","class ViewportManager\n{\n    constructor()\n    {\n        this._viewClasses = [];\n        this._viewProps = null;\n    }\n\n    setViewProps(props)\n    {\n        this._viewProps = props;\n        return this;\n    }\n\n    addViewClass(viewClass)\n    {\n        this._viewClasses.push(viewClass);\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this._viewClasses.length = 0;\n        this._viewProps = null;\n    }\n\n    getViewProps()\n    {\n        return this._viewProps;\n    }\n\n    getViewClasses()\n    {\n        return this._viewClasses;\n    }\n}\n\nexport default ViewportManager;\n","import React from 'react';\nimport Style from './HotKeyView.css';\n\nconst AVAILABLE_HOTKEY_REFRESH_RATE = 100;\n\nclass HotKeyView extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this._cachedHotKeys = [];\n        this._cacheTimeout = null;\n    }\n\n    /** @override */\n    render()\n    {\n        const hotKeyManager = this.props.hotKeyManager;\n        const showHotKeys = !this.props.disabled && hotKeyManager.isEnabled();\n\n        if (!this._cacheTimeout && showHotKeys)\n        {\n            this._cacheTimeout = setTimeout(() => \n            {\n                this._cacheTimeout = null;\n                this._cachedHotKeys.length = 0;\n                hotKeyManager.getCurrentlyPossibleHotKeys(this._cachedHotKeys);\n            }, AVAILABLE_HOTKEY_REFRESH_RATE);\n        }\n\n        const useCount = hotKeyManager.getCurrentHotKeyRepeatCount();\n        const currentHotKey = hotKeyManager.getCurrentHotKey();\n\n        return (\n            <div id={this.props.id}\n                className={Style.hotkey_container +\n          ' ' + this.props.className}\n                style={this.props.style}>\n                {showHotKeys && this._cachedHotKeys.map((e, i) => \n                {\n                    const isActive = currentHotKey === e;\n                    return (\n                        <div key={e.localizedKeys + ':' + i + ':' + (isActive ? useCount : 0)}\n                            className={Style.hotkey +\n                (isActive ? ' active ' : '')}>\n                            <label className={Style.hotkey_label}>\n                                {e.localizedKeys}\n                            </label>\n                            <label className={Style.hotkey_name}>\n                                {e.name + (isActive && useCount > 1 ? ' x' + useCount : '')}\n                            </label>\n                        </div>\n                    );\n                })}\n            </div>\n        );\n    }\n}\n\nexport default HotKeyView;\n","import Logger from 'util/logger/Logger.js';\nconst LOGGER_TAG = 'UndoManager';\n\nconst MAX_HISTORY_LENGTH = 1000;\n\nclass UndoManager\n{\n    constructor()\n    {\n        this.history = [];\n        this.offsetIndex = 0;\n\n        this._handlerFactory = null;\n    }\n\n    setEventHandlerFactory(factory)\n    {\n        this._handlerFactory = factory;\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this.clear();\n    }\n\n    captureEvent(...args)\n    {\n        if (typeof this._handlerFactory === 'function')\n        {\n            const handler = this._handlerFactory(args);\n            if (handler)\n            {\n                this.captureEventAsHandler(handler);\n            }\n            else\n            {\n                throw new Error('Cannot create valid undo event handler for capture');\n            }\n        }\n        else\n        {\n            Logger.error(LOGGER_TAG, 'Missing default undo event handler for event capture');\n        }\n    }\n\n    captureEventAsHandler(eventHandler)\n    {\n        //Pop it all until current event\n        while (this.offsetIndex > 0)\n        {\n            this.history.pop();\n            --this.offsetIndex;\n        }\n\n        //Push the current event to the stack\n        this.history.push(eventHandler);\n\n        while (this.history.length > MAX_HISTORY_LENGTH)\n        {\n            this.history.unshift();\n        }\n    }\n\n    getPreviousEvent()\n    {\n        if (!this.canUndo()) return null;\n        return this.history[this.history.length - this.offsetIndex - 1];\n    }\n\n    getNextEvent()\n    {\n        if (!this.canRedo()) return null;\n        return this.history[this.history.length - this.offsetIndex + 1];\n    }\n\n    undo()\n    {\n        if (!this.canUndo())\n        {\n            //Already the oldest recorded event!\n            return;\n        }\n\n        const event = this.history[this.history.length - this.offsetIndex - 1];\n        ++this.offsetIndex;\n\n        event.applyUndo(this);\n    }\n\n    canUndo()\n    {\n        return this.offsetIndex < this.history.length;\n    }\n\n    redo()\n    {\n        if (!this.canRedo())\n        {\n            //Already the most recent event!\n            return;\n        }\n\n        --this.offsetIndex;\n        const event = this.history[this.history.length - this.offsetIndex - 1];\n\n        event.applyRedo(this);\n    }\n\n    canRedo()\n    {\n        return this.offsetIndex > 0;\n    }\n\n    clear()\n    {\n        this.history.length = 0;\n        this.offsetIndex = 0;\n    }\n\n    getEventHandlerFactory() { return this._handlerFactory; }\n}\n\nexport default UndoManager;\n","import {ONESHOT_MODE} from 'experimental/tooltip/TooltipView.js';\n\nclass TooltipManager\n{\n    constructor()\n    {\n        this._tooltips = [];\n\n        this._transitionMode = ONESHOT_MODE;\n    }\n\n    setTransitionMode(transitionMode)\n    {\n        this._transitionMode = transitionMode;\n        return this;\n    }\n\n    addTooltip(tooltip)\n    {\n        this._tooltips.push(tooltip);\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this._tooltips.length = 0;\n        this._transitionMode = ONESHOT_MODE;\n    }\n\n    getTransitionMode() { return this._transitionMode; }\n    getTooltips() { return this._tooltips; }\n    hasTooltips() { return this._tooltips.length > 0; }\n}\n\nexport default TooltipManager;\n","class StyleEntry\n{\n    constructor(name, value)\n    {\n        this._name = name;\n        this._value = value;\n    }\n\n    getValue() { return this._value; }\n    getName() { return this._name; }\n}\n\nexport default StyleEntry;\n","import Logger from 'util/logger/Logger.js';\nimport StyleEntry from './style/StyleEntry.js';\n\nconst LOGGER_TAG = 'Theme';\n//TODO: this should be only lang/ when have server\nconst BASE_URL = 'dist/theme/';\n\nclass Theme\n{\n    constructor(themeName, styleMapping = new Map())\n    {\n        this._name = themeName;\n        this._styles = styleMapping;\n    }\n\n    static fetchThemeFile(themeName, callback)\n    {\n        Logger.out(LOGGER_TAG, `Fetching theme file '${themeName}'...`);\n        const request = new XMLHttpRequest();\n        request.onreadystatechange = function () \n        {\n            if (request.readyState === 4/* READY */ &&\n                request.status === 200/* GOT REPONSE */)\n            {\n                const result = request.responseText;\n                callback(result);\n            }\n        };\n        request.onerror = function () \n        {\n            Logger.out(LOGGER_TAG, `Unable to find theme file for '${themeName}'.`);\n        };\n        request.open('GET', BASE_URL + themeName + '.theme', true);\n        request.setRequestHeader('Content-Type', 'text/strings');\n        request.send();\n    }\n\n    static loadThemeFile(themeName, themeData, callback)\n    {\n        Logger.out(LOGGER_TAG, `Loading theme file '${themeName}'...`);\n\n        const result = new Theme(themeName);\n\n        //Load theme file\n        let separator, key, value;\n        const lines = themeData.split('\\n');\n        for (let line of lines)\n        {\n            line = line.trim();\n            if (line.startsWith('//')) continue;\n            if (line.startsWith('//TODO:'))\n            {\n                Logger.out(LOGGER_TAG, `Warning - found incomplete theme file: theme file '${line.substring('//'.length).trim()}'.`);\n            }\n\n            separator = line.indexOf('=');\n            if (separator < 0) continue;\n\n            key = line.substring(0, separator).trim();\n            value = line.substring(separator + 1).trim();\n            if (key.length == 0) continue;\n\n            result._styles.set(key, new StyleEntry(key, value));\n        }\n\n        Logger.out(LOGGER_TAG, `Theme file '${themeName}' loaded.`);\n\n        callback(result);\n    }\n\n    addStyle(variableName, value)\n    {\n        this._styles.set(variableName, new StyleEntry(variableName, value));\n        return this;\n    }\n\n    removeStyle(variableName)\n    {\n        this._styles.delete(variableName);\n        return this;\n    }\n\n    getStyles() { return this._styles.values(); }\n    getStyleByName(variableName) { return this._styles.get(variableName); }\n    getName() { return this._name; }\n}\n\nexport default Theme;","import StyleEntry from './StyleEntry.js';\n\nclass SourceStyleEntry extends StyleEntry\n{\n    constructor(styleManager, variableName, sourceStyle=null, sourceTransform=null)\n    {\n        super(variableName, styleManager.getComputedValue(variableName));\n        this._styleManager = styleManager;\n        this._children = [];\n\n        //Since children are ONLY updated in the constructor, they are never removed\n        if (sourceStyle)\n        {\n            this._source = sourceStyle;\n            sourceStyle._children.push(this);\n        }\n\n        //This is useless without sourceStyle, but hey, you do you.\n        this._sourceTransform = sourceTransform;\n    }\n\n    updateValue(propagateChange=true)\n    {\n        if (this._source)\n        {\n            const sourceValue = this._source.getValue();\n            if (this._sourceTransform)\n            {\n                const newValue = this._sourceTransform.call(this, sourceValue);\n                this._value = newValue;\n            }\n            else\n            {\n                this._value = sourceValue;\n            }\n\n            if (propagateChange)\n            {\n                this._styleManager.setComputedValue(this._name, this._value);\n                for(const child of this._children)\n                {\n                    child.updateValue(true);\n                }\n            }\n        }\n    }\n\n    setValue(value, propagateChange=true)\n    {\n        this._value = value;\n\n        if (propagateChange)\n        {\n            this._styleManager.setComputedValue(this._name, value);\n            for(const child of this._children)\n            {\n                child.updateValue(true);\n            }\n        }\n    }\n\n    getSourceStyle() { return this._source; }\n    getSourceTransform() { return this._sourceTransform; }\n    getDerivedStyles() { return this._children; }\n    getStyleManager() { return this._styleManager; }\n}\n\nexport default SourceStyleEntry;\n","import Theme from './Theme.js';\nimport SourceStyleEntry from './style/SourceStyleEntry.js';\n\nconst DEFAULT_GROUP_NAME = 'general';\nconst DEFAULT_THEME_NAME = 'default';\n// const COMPUTED_THEME_NAME = 'computed';\n\nclass ThemeManager\n{\n    constructor()\n    {\n        this._styles = new Map();\n        this._groups = new Map();\n        this._element = null;\n        this._elementTheme = null;\n\n        this._theme = null;\n    }\n\n    register(variableName, groupName = DEFAULT_GROUP_NAME, sourceStyle = null, sourceTransform = null)\n    {\n        const styleEntry = new SourceStyleEntry(this, variableName, sourceStyle, sourceTransform);\n        if (this._element)\n        {\n            const computedValue = this.getComputedValue(variableName);\n            styleEntry.setValue(computedValue, false);\n            this._elementTheme.addStyle(variableName, computedValue);\n        }\n        this._styles.set(variableName, styleEntry);\n\n        if (this._groups.has(groupName))\n        {\n            this._groups.get(groupName).push(variableName);\n        }\n        else\n        {\n            this._groups.set(groupName, [variableName]);\n        }\n        return styleEntry;\n    }\n\n    unregister(variableName)\n    {\n        this._styles.delete(variableName);\n\n        for (const styleGroup of this._groups.values())\n        {\n            const index = styleGroup.indexOf(variableName);\n            if (index >= 0)\n            {\n                styleGroup.splice(index, 1);\n            }\n        }\n\n        if (this._element)\n        {\n            this._elementTheme.removeStyle(variableName);\n        }\n    }\n\n    clear()\n    {\n        this._groups.clear();\n        this._styles.clear();\n        this._element = null;\n        this._elementTheme = null;\n    }\n\n    setElement(element)\n    {\n        this._element = element;\n        this._elementTheme = new Theme(DEFAULT_THEME_NAME);\n        for (const style of this._styles.values())\n        {\n            style.setValue(this.getComputedValue(style.getName()), false);\n        }\n        return this;\n    }\n\n    reset()\n    {\n        const theme = this._theme || this._elementTheme;\n        if (theme)\n        {\n            for (const style of this._styles.values())\n            {\n                const styleName = style.getName();\n                const themeStyle = theme.getStyleByName(styleName);\n                if (themeStyle)\n                {\n                    style.setValue(themeStyle.getValue());\n                }\n                else if (style.getSourceStyle())\n                {\n                    style.updateValue();\n                }\n                else if (theme !== this._elementTheme)\n                {\n                    const elementStyle = this._elementTheme.getStyleByName(styleName);\n                    if (elementStyle)\n                    {\n                        style.setValue(elementStyle.getValue());\n                    }\n                }\n            }\n        }\n    }\n\n    loadTheme(themeName)\n    {\n        if (this._theme && this._theme.getName() === themeName)\n        {\n            this.reset();\n        }\n        else if (themeName === DEFAULT_THEME_NAME)\n        {\n            this._theme = this._elementTheme;\n            this.reset();\n        }\n        else\n        {\n            Theme.fetchThemeFile(themeName, (themeFile) => \n            {\n                Theme.loadThemeFile(themeName, themeFile, (theme) => \n                {\n                    this._theme = theme;\n                    this.reset();\n                });\n            });\n        }\n    }\n\n    getComputedValue(variableName)\n    {\n        const computedStyle = window.getComputedStyle(this._element);\n        const value = computedStyle.getPropertyValue(variableName);\n        if (value)\n        {\n            return value.trim();\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    setComputedValue(variableName, value)\n    {\n        this._element.style.setProperty(variableName, value);\n    }\n\n    getValue(variableName)\n    {\n        if (this._styles.has(variableName))\n        {\n            return this._styles.get(variableName).getValue();\n        }\n        else\n        {\n            return this.getComputedValue(variableName);\n        }\n    }\n\n    getStylesByGroup(groupName)\n    {\n        if (this._groups.has(groupName))\n        {\n            return this._groups.get(groupName).map(variableName => this._styles.get(variableName));\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    getStyleByName(variableName)\n    {\n        if (this._styles.has(variableName))\n        {\n            return this._styles.get(variableName);\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    getStyles()\n    {\n        return this._styles.values();\n    }\n\n    getStyleNames()\n    {\n        return this._styles.keys();\n    }\n\n    getStyleGroupNames()\n    {\n        return this._groups.keys();\n    }\n\n    getCurrentTheme()\n    {\n        return this._theme || this._elementTheme;\n    }\n}\n\nexport default ThemeManager;","const Broadcast = {\n    _channel: null,\n    _listeners: [],\n    initialize(channelName)\n    {\n        if (!this.isSupported()) return;\n\n        this._channel = new BroadcastChannel(channelName);\n        this._channel.onmessage = this.onBroadcastMessage.bind(this);\n    },\n    destroy()\n    {\n        if (!this.isSupported()) return;\n\n        this._channel.close();\n        this._channel = null;\n        this._listeners.length = 0;\n    },\n    addListener(listener)\n    {\n        this._listeners.push(listener);\n        return this;\n    },\n    removeListener(listener)\n    {\n        this._listeners.splice(this._listeners.indexOf(listener), 1);\n    },\n    sendMessage(source, destination, type, data={})\n    {\n        if (!this.isSupported()) return;\n\n        const result = {\n            type: type,\n            src: source,\n            dst: destination\n        };\n\n        Object.assign(result, data);\n        this._channel.postMessage(result);\n    },\n    onBroadcastMessage(ev)\n    {\n        const messageType = ev.data['type'];\n        const messageSource = ev.data['src'];\n        const messageDestination = ev.data['dst'];\n        for(const listener of this._listeners)\n        {\n            if (typeof listener['onBroadcastMessage'] === 'function')\n            {\n                listener.onBroadcastMessage(messageType, messageSource, messageDestination, ev.data);\n            }\n        }\n    },\n    getListeners()\n    {\n        return this._listeners;\n    },\n    getChannel()\n    {\n        return this._channel;\n    },\n    isSupported()\n    {\n        return 'BroadcastChannel' in self;\n    }\n};\n\nexport default Broadcast;\n","class RemoteSession\n{\n    constructor(sessionID, sessionName)\n    {\n        this._sessionID = sessionID;\n        this._sessionName = sessionName;\n    }\n\n    getSessionID()\n    {\n        return this._sessionID;\n    }\n\n    getSessionName()\n    {\n        return this._sessionName;\n    }\n}\n\nexport default RemoteSession;\n","import Broadcast from 'util/broadcast/Broadcast.js';\nimport RemoteSession from './RemoteSession.js';\nimport {stringHash} from 'util/MathHelper.js';\n\nconst SESSION_START_MESSAGE_TYPE = 'session-start';\nconst SESSION_UPDATE_MESSAGE_TYPE = 'session-update';\nconst SESSION_STOP_MESSAGE_TYPE = 'session-stop';\n\nclass BroadcastManager\n{\n    constructor(app)\n    {\n        this._app = app;\n        this._session = null;\n        this._sessionID = null;\n        this._remoteSessions = new Map();\n\n        this._handlers = [];\n    }\n\n    addMessageHandler(handler)\n    {\n        this._handlers.push(handler);\n        handler.setBroadcastManager(this);\n        return this;\n    }\n\n    removeMessageHandler(handler)\n    {\n        this._handlers.splice(this._handlers.indexOf(handler), 1);\n    }\n\n    clear()\n    {\n        this._handlers.length = 0;\n    }\n\n    sendMessageTo(dst, type, message)\n    {\n        Broadcast.sendMessage(this._sessionID, dst, type, message);\n    }\n\n    //DuckType(BroadcastListener)\n    onBroadcastMessage(type, src, dst, message)\n    {\n    //Ignore any messages not meant for me ;)\n        if (dst && dst.startsWith('#') && dst !== this._sessionID) return;\n\n        if (type === SESSION_START_MESSAGE_TYPE)\n        {\n            this._remoteSessions.set(src, new RemoteSession(src, message['name'] || 'Workspace #' + stringHash(src)));\n            Broadcast.sendMessage(this._sessionID, src, SESSION_UPDATE_MESSAGE_TYPE);\n        }\n        else if (type === SESSION_STOP_MESSAGE_TYPE)\n        {\n            this._remoteSessions.delete(src);\n        }\n        else if (type === SESSION_UPDATE_MESSAGE_TYPE)\n        {\n            this._remoteSessions.set(src, new RemoteSession(src, message['name'] || 'Workspace #' + stringHash(src)));\n        }\n        else\n        {\n            //Try to handle the message\n            for(const handler of this._handlers)\n            {\n                const result = handler.onBroadcastMessage(type, src, dst, message);\n\n                //If the message is handled, consume it.\n                if (result) break;\n            }\n        }\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n        this._session = session;\n        this._sessionID = session.getSessionID();\n\n        Broadcast.addListener(this);\n        Broadcast.sendMessage(this._sessionID, 'all', SESSION_START_MESSAGE_TYPE);\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        Broadcast.sendMessage(this._sessionID, 'all', SESSION_STOP_MESSAGE_TYPE);\n        Broadcast.removeListener(this);\n\n        this.clear();\n        this._session = null;\n        this._sessionID = null;\n    }\n\n    getRemoteSessions() { return this._remoteSessions.values(); }\n    getSessionID() { return this._sessionID; }\n    getSession() { return this._session; }\n    getApp() { return this._app; }\n}\n\nexport default BroadcastManager;\n","import React from 'react';\nimport { hot } from 'react-hot-loader/root';\nimport Style from './App.css';\n\nimport DrawerView, { DRAWER_SIDE_RIGHT, DRAWER_SIDE_BOTTOM, DRAWER_BAR_DIRECTION_VERTICAL, DRAWER_BAR_DIRECTION_HORIZONTAL } from 'experimental/drawer/DrawerView.js';\nimport ToolbarView from 'experimental/toolbar/ToolbarView.js';\nimport TooltipView from 'experimental/tooltip/TooltipView.js';\nimport UploadDropZone from 'experimental/components/UploadDropZone.js';\nimport NotificationView from 'session/manager/notification/components/NotificationView.js';\nimport IconButton from 'experimental/components/IconButton.js';\nimport FullscreenWidget from 'experimental/components/FullscreenWidget.js';\n\nimport ExportPanel from 'experimental/menus/export/ExportPanel.js';\nimport OptionPanel from 'experimental/menus/option/OptionPanel.js';\nimport LanguagePanel from 'experimental/menus/language/LanguagePanel.js';\nimport ModuleLoaderPanel from 'experimental/menus/moduleloader/ModuleLoaderPanel.js';\n\nimport ToolbarButton, { TOOLBAR_CONTAINER_TOOLBAR, TOOLBAR_CONTAINER_MENU } from 'experimental/toolbar/ToolbarButton.js';\nimport ToolbarDivider from 'experimental/toolbar/ToolbarDivider.js';\nimport ToolbarUploadButton from 'experimental/toolbar/ToolbarUploadButton.js';\nimport PageEmptyIcon from 'components/iconset/PageEmptyIcon.js';\nimport UndoIcon from 'components/iconset/UndoIcon.js';\nimport RedoIcon from 'components/iconset/RedoIcon.js';\nimport UploadIcon from 'components/iconset/UploadIcon.js';\nimport DownloadIcon from 'components/iconset/DownloadIcon.js';\nimport BugIcon from 'components/iconset/BugIcon.js';\nimport WorldIcon from 'components/iconset/WorldIcon.js';\nimport HelpIcon from 'components/iconset/HelpIcon.js';\nimport SettingsIcon from 'components/iconset/SettingsIcon.js';\nimport EditPencilIcon from 'components/iconset/EditPencilIcon.js';\n\nimport AppSaver from 'experimental/AppSaver.js';\nimport ColorSaver from 'experimental/ColorSaver.js';\nimport * as ColorTransform from 'util/ColorTransform.js';\nimport LanguageSaver from 'experimental/LanguageSaver.js';\n\nimport AutoSave from 'util/storage/AutoSave.js';\nimport LocalStorage from 'util/storage/LocalStorage.js';\n\nimport ExportManager from 'util/file/export/ExportManager.js';\nimport ImportManager from 'util/file/import/ImportManager.js';\n\nimport Session from 'session/Session.js';\nimport DrawerManager from 'session/manager/DrawerManager.js';\nimport MenuManager from 'session/manager/MenuManager.js';\nimport ViewportManager from 'session/manager/ViewportManager.js';\nimport HotKeyManager, { CTRL_KEY, SHIFT_KEY } from 'session/manager/hotkey/HotKeyManager.js';\nimport HotKeyView from 'session/manager/hotkey/HotKeyView.js';\nimport UndoManager from 'session/manager/undo/UndoManager.js';\nimport RenderManager, {\n    RENDER_LAYER_WORKSPACE_PRE,\n    RENDER_LAYER_WORKSPACE,\n    RENDER_LAYER_WORKSPACE_POST,\n} from 'session/manager/RenderManager.js';\nimport TooltipManager from 'session/manager/TooltipManager.js';\nimport NotificationManager, { ERROR_LAYOUT_ID } from 'session/manager/notification/NotificationManager.js';\nimport ThemeManager from '../util/theme/ThemeManager';\nimport BroadcastManager from 'session/manager/broadcast/BroadcastManager.js';\nimport Broadcast from 'util/broadcast/Broadcast.js';\n\nconst BUGREPORT_URL = 'https://goo.gl/forms/XSil43Xl5xLHsa0E2';\nconst HELP_URL = 'https://github.com/flapjs/FLAPJS-WebApp/blob/master/docs/HELP.md';\n\nconst DRAWER_INDEX_ABOUT = 0;\n\nconst MENU_INDEX_EXPORT = 0;\nconst MENU_INDEX_OPTION = 1;\nconst MENU_INDEX_LANGUAGE = 2;\nconst MENU_INDEX_MODULE = 3;\n\nconst ERROR_UPLOAD_NOTIFICATION_TAG = 'error_upload';\n\nconst BROADCAST_CHANNEL_ID = 'flapjs';\n\nfunction registerAppStyles(themeManager)\n{\n    themeManager.register('--color-graph-node', 'graph');\n    themeManager.register('--color-graph-text', 'graph');\n    themeManager.register('--color-graph-select', 'graph');\n\n    themeManager.register('--color-accent', 'general');\n    const colorPrimary = themeManager.register('--color-primary', 'general');\n    themeManager.register('--color-primary-text', 'general');\n    themeManager.register('--color-primary-lite', 'hidden', colorPrimary, ColorTransform.lite);\n    themeManager.register('--color-primary-dark', 'hidden', colorPrimary, ColorTransform.dark);\n\n    const colorBackground = themeManager.register('--color-background', 'general');\n    themeManager.register('--color-background-active', 'hidden', colorBackground, ColorTransform.invert);\n    themeManager.register('--color-background-lite', 'hidden', colorBackground, ColorTransform.lite);\n\n    themeManager.register('--color-success', 'general');\n    themeManager.register('--color-warning', 'general');\n\n    const colorSurface = themeManager.register('--color-surface', 'surface');\n    themeManager.register('--color-surface-text', 'surface');\n    themeManager.register('--color-surface-active', 'hidden', colorSurface, ColorTransform.invert);\n    themeManager.register('--color-surface-lite', 'hidden', colorSurface, ColorTransform.lite);\n    themeManager.register('--color-surface-dark', 'hidden', colorSurface, ColorTransform.dark);\n\n    const colorSurfaceError = themeManager.register('--color-surface-error', 'surface');\n    themeManager.register('--color-surface-error-dark', 'hidden', colorSurfaceError, ColorTransform.dark);\n\n    const colorSurfaceSuccess = themeManager.register('--color-surface-success', 'surface');\n    themeManager.register('--color-surface-success-dark', 'hidden', colorSurfaceSuccess, ColorTransform.dark);\n\n    const colorSurfaceWarning = themeManager.register('--color-surface-warning', 'surface');\n    themeManager.register('--color-surface-warning-dark', 'hidden', colorSurfaceWarning, ColorTransform.dark);\n}\n\nclass App extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        App.INSTANCE = this;\n\n        this._toolbarComponent = React.createRef();\n        this._drawerComponent = React.createRef();\n        this._viewport = null;\n        this._labeleditor = null;\n\n        this._themeManager = new ThemeManager();\n        this._colorSaver = new ColorSaver(this._themeManager);\n        this._langSaver = new LanguageSaver();\n        this._saver = new AppSaver(this);\n\n        this._exportManager = new ExportManager();\n        this._importManager = new ImportManager();\n\n        this._undoManager = new UndoManager();\n        this._hotKeyManager = new HotKeyManager();\n        this._drawerManager = new DrawerManager();\n        this._menuManager = new MenuManager();\n        this._viewportManager = new ViewportManager();\n        this._renderManager = new RenderManager();\n        this._tooltipManager = new TooltipManager();\n        this._notificationManager = new NotificationManager();\n        this._broadcastManager = new BroadcastManager(this);\n\n        this._session = new Session()\n            .addListener(this._undoManager)\n            .addListener(this._hotKeyManager)\n            .addListener(this._drawerManager)\n            .addListener(this._menuManager)\n            .addListener(this._viewportManager)\n            .addListener(this._renderManager)\n            .addListener(this._tooltipManager)\n            .addListener(this._notificationManager)\n            .addListener(this._broadcastManager)\n            .addListener(this);\n\n        // TODO: This is only used to control transitions (do we really need it?)\n        this._init = false;\n\n        this.state = {\n            hide: false\n        };\n\n        this._mediaQuerySmallWidthList = window.matchMedia('only screen and (max-width: 400px)');\n        this._mediaQuerySmallHeightList = window.matchMedia('only screen and (min-height: 400px)');\n\n        // this._notificationManager.pushNotification(\"Welcome to Flap.js\");\n        this.onModuleTitleClick = this.onModuleTitleClick.bind(this);\n        this.onToolbarClearButton = this.onToolbarClearButton.bind(this);\n    }\n\n    /** @override */\n    componentDidMount()\n    {\n        //Start session\n        this._session.startSession(this);\n    }\n\n    /** @override */\n    componentWillUnmount()\n    {\n        //Stop session\n        this._session.stopSession(this);\n    }\n\n    /**\n     * Called once by index.js when the window is opened, before\n     * this constructor or any React components are initialized. This also must be\n     * static since React instances are not yet available.\n     */\n    static onWindowLoad()\n    {\n        AutoSave.initialize(LocalStorage);\n        Broadcast.initialize(BROADCAST_CHANNEL_ID);\n    }\n\n    /**\n     * Called once by index.js when the window is closed. This is the alternative\n     * for clean up since componentWillUnmount() from React will not be called for\n     * window events. This also must be static since React instances are no longer\n     * available.\n     */\n    static onWindowUnload()\n    {\n        AutoSave.destroy();\n\n        if (App.INSTANCE)\n        {\n            App.INSTANCE.componentWillUnmount();\n        }\n    }\n\n    //DuckType\n    onSessionStart(session)\n    {\n        const currentModule = session.getCurrentModule();\n\n        // Default values\n        this._menuManager\n            .addPanelClass(ExportPanel)         // MENU_INDEX_EXPORT\n            .addPanelClass(OptionPanel)         // MENU_INDEX_OPTION\n            .addPanelClass(LanguagePanel)       // MENU_INDEX_LANGUAGE\n            .addPanelClass(ModuleLoaderPanel);  // MENU_INDEX_MODULE\n\n        this._hotKeyManager\n            .registerHotKey('New', [CTRL_KEY, 'KeyN'], () => currentModule.clear(this))\n            .registerAltHotKey('Show Hints', () => { IconButton.SHOW_LABEL = !IconButton.SHOW_LABEL; });\n\n        // Only register undo / redo hotkeys if undo is possible\n        if (this._undoManager.getEventHandlerFactory())\n        {\n            this._hotKeyManager\n                .registerHotKey('Undo', [CTRL_KEY, 'KeyZ'], () => this.getUndoManager().undo())\n                .registerHotKey('Redo', [CTRL_KEY, SHIFT_KEY, 'KeyZ'], () => this.getUndoManager().redo());\n        }\n\n        if (!this._tooltipManager.hasTooltips())\n        {\n            this._tooltipManager\n                .addTooltip('If you need help, try the \\'?\\' at the top.')\n                .addTooltip('Or you can choose to do nothing.')\n                .addTooltip('I can\\'t do anything about that.')\n                .addTooltip('You really should consider doing something though, for the sake of both of us.')\n                .addTooltip('Of course, it is your free will.')\n                .addTooltip('You do you.')\n                .addTooltip('Please do something.')\n                .addTooltip('I need my job.')\n                .addTooltip('Welcome to Flap.js!');\n        }\n\n        this._themeManager.setElement(document.getElementById('root'));\n\n        registerAppStyles(this._themeManager);\n\n        AutoSave.registerHandler(this._saver);\n        AutoSave.registerHandler(this._colorSaver);\n        AutoSave.registerHandler(this._langSaver);\n\n        this._init = true;\n    }\n\n    //DuckType\n    onSessionStop(session)\n    {\n        this._init = false;\n\n        AutoSave.unregisterHandler(this._saver);\n        AutoSave.unregisterHandler(this._colorSaver);\n        AutoSave.unregisterHandler(this._langSaver);\n\n        this._themeManager.clear();\n        this._importManager.clear();\n        this._exportManager.clear();\n        this._menuManager.setSubtitleComponentClass(null);\n    }\n\n    onModuleTitleClick(e)\n    {\n        const drawer = this._drawerComponent.current;\n        if (!drawer.isDrawerOpen() || !drawer.isCurrentTab(DRAWER_INDEX_ABOUT))\n        {\n            //Open current module info panel\n            drawer.setCurrentTab(DRAWER_INDEX_ABOUT);\n        }\n        else\n        {\n            //On another click... open module change panel\n            const toolbarComponent = this._toolbarComponent.current;\n            toolbarComponent.setCurrentMenu(MENU_INDEX_MODULE);\n        }\n\n        e.preventDefault();\n        e.stopPropagation();\n    }\n\n    onToolbarClearButton(e)\n    {\n        const currentModule = this._session.getCurrentModule();\n        if (currentModule)\n        {\n            currentModule.clear(this);\n        }\n    }\n\n    getToolbarComponent() { return this._toolbarComponent.current; }\n    getDrawerComponent() { return this._drawerComponent.current; }\n\n    getExportManager() { return this._exportManager; }\n    getImportManager() { return this._importManager; }\n\n    getUndoManager() { return this._undoManager; }\n    getHotKeyManager() { return this._hotKeyManager; }\n    getDrawerManager() { return this._drawerManager; }\n    getMenuManager() { return this._menuManager; }\n    getViewportManager() { return this._viewportManager; }\n    getRenderManager() { return this._renderManager; }\n    getTooltipManager() { return this._tooltipManager; }\n    getNotificationManager() { return this._notificationManager; }\n    getThemeManager() { return this._themeManager; }\n    getBroadcastManager() { return this._broadcastManager; }\n\n    getSession() { return this._session; }\n    getCurrentModule() { return this._session.getCurrentModule(); }\n\n    isExperimental() { return true; }\n\n    /** @override */\n    componentDidUpdate()\n    {\n        this._session.updateSession(this);\n\n        const toolbarComponent = this._toolbarComponent.current;\n        const drawerComponent = this._drawerComponent.current;\n        //Disable hotkeys when graph is not in view\n        this._hotKeyManager.setEnabled(\n            !(toolbarComponent && toolbarComponent.isBarOpen()) &&\n            !(drawerComponent && drawerComponent.isDrawerOpen() &&\n                drawerComponent.isDrawerFullscreen())\n        );\n    }\n\n    renderRenderLayer(renderLayerName, props)\n    {\n        const sessionID = this._session.getSessionID();\n        const renderers = this._renderManager.getRenderersByLayer(renderLayerName);\n        if (renderers && renderers.length > 0)\n        {\n            return renderers.map((R, i) => <R key={sessionID + '.' + R.constructor.name + '.' + i} {...props} />);\n        }\n        else\n        {\n            return null;\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        const session = this._session;\n        const currentModule = session.getCurrentModule();\n        const currentModuleLocalizedName = currentModule ? currentModule.getLocalizedModuleName() : null;\n\n        const hasSmallWidth = this._mediaQuerySmallWidthList.matches;\n        const hasSmallHeight = this._mediaQuerySmallHeightList.matches;\n        const isFullscreen = this.state.hide;\n\n        const exportManager = this._exportManager;\n        const importManager = this._importManager;\n\n        const undoManager = this._undoManager;\n        const drawerManager = this._drawerManager;\n        const menuManager = this._menuManager;\n        const tooltipManager = this._tooltipManager;\n        const notificationManager = this._notificationManager;\n\n        const toolbarComponent = this._toolbarComponent.current;\n\n        const drawerPanelClasses = drawerManager.getPanelClasses();\n        const drawerPanelProps = drawerManager.getPanelProps() || { session: session };\n        const menuPanelClasses = menuManager.getPanelClasses();\n        const menuPanelProps = menuManager.getPanelProps() || { session: session };\n        const MenuSubtitleClass = menuManager.getSubtitleComponentClass();\n\n        return (\n            <div className={Style.app_container + (currentModule ? ' active ' : '')}>\n                <ToolbarView ref={this._toolbarComponent} className={Style.app_bar}\n                    menus={menuPanelClasses}\n                    menuProps={menuPanelProps}\n                    subtitle={MenuSubtitleClass}\n                    hide={isFullscreen}\n                    title={currentModuleLocalizedName}\n                    session={session}\n                    onTitleClick={this.onModuleTitleClick}>\n                    <ToolbarButton title={I18N.toString('action.toolbar.newmachine')}\n                        icon={PageEmptyIcon}\n                        containerOnly={TOOLBAR_CONTAINER_TOOLBAR}\n                        onClick={this.onToolbarClearButton}\n                        disabled={!currentModule} />\n                    <ToolbarUploadButton\n                        title={I18N.toString('action.toolbar.uploadmachine')}\n                        icon={UploadIcon}\n                        containerOnly={TOOLBAR_CONTAINER_TOOLBAR}\n                        accept={importManager.getFileTypesAsAcceptString()}\n                        onUpload={fileBlob => \n                        {\n                            importManager.tryImportFile(fileBlob)\n                                .catch(e =>\n                                    notificationManager.pushNotification(\n                                        'ERROR: Unable to import invalid file.\\n' + e.message,\n                                        ERROR_LAYOUT_ID,\n                                        ERROR_UPLOAD_NOTIFICATION_TAG))\n                                .finally(() =>\n                                    toolbarComponent.closeBar());\n                        }}\n                        disabled={importManager.isEmpty()} />\n                    <ToolbarButton title={I18N.toString('action.toolbar.undo')}\n                        icon={UndoIcon}\n                        containerOnly={TOOLBAR_CONTAINER_TOOLBAR}\n                        disabled={!undoManager.canUndo()}\n                        onClick={() => undoManager.undo()} />\n                    <ToolbarButton title={I18N.toString('action.toolbar.redo')}\n                        icon={RedoIcon}\n                        containerOnly={TOOLBAR_CONTAINER_TOOLBAR}\n                        disabled={!undoManager.canRedo()}\n                        onClick={() => undoManager.redo()} />\n                    <ToolbarButton title={I18N.toString('component.exporting.title')}\n                        icon={DownloadIcon}\n                        containerOnly={TOOLBAR_CONTAINER_TOOLBAR}\n                        onClick={() => toolbarComponent.setCurrentMenu(MENU_INDEX_EXPORT)}\n                        disabled={exportManager.isEmpty()} />\n                    <ToolbarDivider />\n                    <ToolbarButton title={I18N.toString('action.toolbar.changemodule')}\n                        icon={EditPencilIcon}\n                        containerOnly={TOOLBAR_CONTAINER_MENU}\n                        onClick={() => toolbarComponent.setCurrentMenu(MENU_INDEX_MODULE)} />\n                    <ToolbarButton title={I18N.toString('action.toolbar.lang')}\n                        icon={WorldIcon}\n                        containerOnly={TOOLBAR_CONTAINER_MENU}\n                        onClick={() => toolbarComponent.setCurrentMenu(MENU_INDEX_LANGUAGE)} />\n                    <ToolbarButton title={I18N.toString('component.options.title')}\n                        icon={SettingsIcon}\n                        containerOnly={TOOLBAR_CONTAINER_MENU}\n                        onClick={() => toolbarComponent.setCurrentMenu(MENU_INDEX_OPTION)} />\n                    <ToolbarButton title={I18N.toString('action.toolbar.help')}\n                        icon={HelpIcon}\n                        onClick={() => window.open(HELP_URL, '_blank')} />\n                    <ToolbarButton title={I18N.toString('action.toolbar.bug')}\n                        icon={BugIcon}\n                        containerOnly={TOOLBAR_CONTAINER_MENU}\n                        onClick={() => window.open(BUGREPORT_URL, '_blank')} />\n                </ToolbarView>\n\n                <DrawerView ref={this._drawerComponent} className={Style.app_content}\n                    panels={drawerPanelClasses}\n                    panelProps={drawerPanelProps}\n                    side={hasSmallWidth ? DRAWER_SIDE_BOTTOM : DRAWER_SIDE_RIGHT}\n                    direction={hasSmallHeight ? DRAWER_BAR_DIRECTION_VERTICAL : DRAWER_BAR_DIRECTION_HORIZONTAL}\n                    hide={isFullscreen}>\n\n                    <UploadDropZone>\n                        <div className=\"viewport\">\n                            <TooltipView mode={tooltipManager.getTransitionMode()}\n                                visible={/* TODO: For the initial fade-in animation */this._init && !undoManager.canUndo()}>\n                                {tooltipManager.getTooltips().map((e, i) => <label key={e + ':' + i}>{e}</label>)}\n                            </TooltipView>\n\n                            {/* RENDER_LAYER_WORKSPACE_PRE */}\n                            {this.renderRenderLayer(RENDER_LAYER_WORKSPACE_PRE)}\n\n                            {/* RENDER_LAYER_WORKSPACE */}\n                            {this.renderRenderLayer(RENDER_LAYER_WORKSPACE)}\n\n                            {/* RENDER_LAYER_WORKSPACE_POST */}\n                            {this.renderRenderLayer(RENDER_LAYER_WORKSPACE_POST)}\n\n                            <FullscreenWidget className={Style.fullscreen_widget} app={this} />\n\n                            <NotificationView notificationManager={notificationManager} />\n\n                            {this._hotKeyManager.isEnabled() && <HotKeyView hotKeyManager={this._hotKeyManager} />}\n                        </div>\n                    </UploadDropZone>\n                </DrawerView>\n            </div>\n        );\n    }\n}\nApp.INSTANCE = null;\n\n//For hotloading this class\nexport default hot(App);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Logger from 'util/logger/Logger.js';\nconst LOGGER_TAG = 'App';\n\nimport App from 'experimental/App.js';\nimport Changelog from 'changelog.js';\n\nimport LocalStorage from 'util/storage/LocalStorage.js';\n\nconst SHOULD_WARN_USERS_ON_EXIT = true;\n\n//Setup app\nwindow.addEventListener('load', (event) => \n{\n    Logger.out(LOGGER_TAG, `Preparing for '${process.env.NODE_ENV}' environment...'`);\n    Logger.out(LOGGER_TAG, `Loading app version '${process.env.VERSION}'...`);\n\n    try\n    {\n        loadApplication();\n    }\n    catch (e)\n    {\n        throw e;\n    }\n\n    //Warn user before exit\n    window.addEventListener('beforeunload', (event) => \n    {\n        if (SHOULD_WARN_USERS_ON_EXIT && LocalStorage.getData('disableExitWarning') !== 'true')\n        {\n            const message = I18N.toString('alert.window.exit');\n            event = event || window.event;\n            // For IE and Firefox\n            if (event) event.returnValue = message;\n            //For Safari\n            return message;\n        }\n    });\n\n    //Cleanup app\n    window.addEventListener('unload', (event) => \n    {\n        Logger.out(LOGGER_TAG, 'Unloading app...');\n        unloadApplication();\n    });\n\n    //Start app\n    window.requestAnimationFrame(updateApplication);\n});\n\n//Tell the client that an update is available\nif (typeof window['isUpdateAvailable'] === 'function')\n{\n    window.isUpdateAvailable.then(hasUpdate => \n    {\n        if (hasUpdate)\n        {\n            let message = '';\n            if (Changelog && Changelog['show'])\n            {\n                message += Changelog['log'];\n            }\n    \n            Logger.out(LOGGER_TAG, `Found update for version ${process.env.VERSION}...`);\n            window.alert('*** New update available! *** \\n Please restart the browser.' +\n                (message ? '\\n' + message : ''));\n        }\n    });\n}\n\n//Setup application\nvar root;\n\n//Load application\nfunction loadApplication()\n{\n    root = document.getElementById('root');\n\n    if (App['onWindowLoad'])\n    {\n        App.onWindowLoad.call(App);\n    }\n}\n\n//Update application\nfunction updateApplication(time)\n{\n    ReactDOM.render(React.createElement(App), root);\n    window.requestAnimationFrame(updateApplication);\n}\n\n//Unload application\nfunction unloadApplication()\n{\n    if (App['onWindowUnload'])\n    {\n        App.onWindowUnload.call(App);\n    }\n}\n","//Version 0.4.4\nconst changeLog = `\n### Added\n- Equivalence test for Finite Automata with witness string\n\n### Fixed\n- Too large workspace widget\n`.split('\\n');\n\n/*\n//Version 0.4.3\nconst changeLog = `\n### Added\n- The new Bab's tutorial\n\n### Changed\n- App will check for updates only if it can.\n\n### Fixed\n- Missing test highlights.\n- Missing edge formatting.\n- Weird collapse for menu screen.\n`.split('\\n');\n\n//Version 0.4.2\nconst changeLog = `\n### Added\n- Module version is now visible in Options.\n- Change machine type for FA module in the title bar.\n- A new and improved graph picking system.\n- Allow clicking on labels to edit them.\n- Custom node color styles are now applied to exported images.\n- Grayscale image exporting.\n\n### Changed\n- Menu entries are now ordered more logically.\n- Fullscreen mode is available for ALL modules.\n- Trash can looks nicer when red :D\n- A new menu design.\n\n### Removed\n- Unused modules are no longer visible in module selection.\n\n### Fixed\n- Previous labels sometimes show up in future label editors.\n- FA/PDA: Auto-formatting sometimes fails for edge labels.\n- FA/PDA: Initial marker cannot be dragged with left mouse button.\n- FA/PDA: State label editing won't save.\n- FA/PDA: Trash can icon is missing label.\n- FA/PDA: Trash can cannot delete edges.\n- FA/PDA: Missing red border for delete mode.\n`.split('\\n');\n\n//Version 0.4.1\nconst changeLog = [\n    'Experimental mode is now LIVE! :D',\n    'Pushdown Automata & Regular Expression modules are now available.',\n    'Language is saved across sessions.',\n    'Regular expression scope highlighting.',\n    'Color theme preset loading.',\n    'MIT and Duke theme presets.',\n    'Added linting tests to enforce code style.',\n    'Added Travic CI build pipeline for more build automation.',\n    'Old app mode will be replaced by experimental mode permanently.',\n];\n\n//Version 0.4.0\nconst changeLog = [\n    'Changed default color scheme. Hope you like it!',\n    'Allow double-clicking module name to change modules.',\n    'FIXED: Module change causes app to not respond.',\n    'FIXED: Auto-rename nodes cannot be toggled.'\n];\n\n//Version 0.3.4\nconst changeLog = [\n    'Added meta tags for those coming from a search engine.',\n    'Added Pushdown Automata',\n    'Added Regular Expressions',\n    'Added a whole NEW EXPERIMENTAL MODE! :D'\n];\n\n//Version 0.3.3\nconst changeLog = [\n    'ADDED: SVG export option (thanks to moreheadm).',\n    'FIXED: Edge cannot be created with default symbols.',\n    'FIXED: Action mode does not show edge creation as an edit.',\n    'FIXED: Wrong undo state for changing initial marker.'\n];\n\n//Version 0.3.2\nconst changeLog = [\n    'FIXED: Allow cross-platform bundle building.',\n    'FIXED: Corrected \\'development\\' mode while in production.',\n    'FIXED: NFA unreachable node checking is wrong.',\n    'FIXED: Unreachable node warnings were not treated as notification warnings.',\n    'Disabled service worker while in \\'development\\' mode.'\n];\n\n//Version 0.3.1\nconst changeLog = [\n    'FIXED: Renaming an uploaded file does not download file with new name.',\n    'This is our first user-reported bug! Hooray!',\n    'Thank you and have a hug whoever you are <3.'\n];\n*/\n\nconst changeVersion = process.env.VERSION;\nconst result = {\n    show: changeLog && changeLog.length > 0,\n    log: '\\nChangelog v' + changeVersion + ':\\n - ' + changeLog.join('\\n - '),\n    version: changeVersion\n};\nexport default result;\n","export const RENDER_LAYER_WORKSPACE_PRE = 'workspace-pre';\nexport const RENDER_LAYER_WORKSPACE = 'workspace';\nexport const RENDER_LAYER_WORKSPACE_POST = 'workspace-post';\n\nclass RenderManager\n{\n    constructor()\n    {\n        this._renderMapping = new Map();\n    }\n\n    addRenderer(layerID, rendererClass)\n    {\n        if (this._renderMapping.has(layerID))\n        {\n            this._renderMapping.get(layerID).push(rendererClass);\n        }\n        else\n        {\n            this._renderMapping.set(layerID, [rendererClass]);\n        }\n        return this;\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this._renderMapping.clear();\n    }\n\n    getRenderersByLayer(layerID)\n    {\n        return this._renderMapping.get(layerID);\n    }\n}\n\nexport default RenderManager;\n","import React from 'react';\n\nclass UploadIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M9,16V10H5L12,3L19,10H15V16H9M5,20V18H19V20H5Z\"/>\n            </svg>\n        );\n    }\n}\nexport default UploadIcon;\n","import {guid} from 'util/MathHelper.js';\n\nclass Notification\n{\n    constructor(notificationManager, message, layoutID, tags, props)\n    {\n        this._notificationManager = notificationManager;\n        this._message = message;\n        this._layoutID = layoutID;\n        this._tags = tags;\n        this._props = props;\n        this._id = guid();\n    }\n\n    close() { this._notificationManager.removeNotification(this); }\n    hasTag(tag) { return this._tags.includes(tag); }\n\n    getMessage() { return this._message; }\n    getLayoutID() { return this._layoutID; }\n    getTags() { return this._tags; }\n    getProps() { return this._props; }\n    getID() { return this._id; }\n    getNotificationManager() { return this._notificationManager; }\n}\n\nexport default Notification;\n","import React from 'react';\n\nimport Style from './DefaultNotificationLayout.css';\n\nclass SequenceNotificationLayout extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const { message, notification, onClick, ...props } = this.props;\n\n        return (\n            <div className={Style.notification_container}\n                {...props}>\n                {message &&\n                    message.split('\\n').map((e, i) => <p key={e + ':' + i}>{e}</p>)}\n                {this.props.children}\n                <button style={{marginBottom: '1em'}} onClick={onClick}>\n                    {I18N.toString('message.action.next')}\n                </button>\n                {notification && <button onClick={e => notification.close()}>\n                    {I18N.toString('message.action.close')}\n                </button>}\n            </div>\n        );\n    }\n}\n\nexport default SequenceNotificationLayout;\n","import React from 'react';\nimport Notification from './Notification.js';\n\nimport DefaultNotificationLayout, {\n    STYLE_TYPE_DEFAULT,\n    STYLE_TYPE_WARNING,\n    STYLE_TYPE_ERROR,\n    STYLE_TYPE_SUCCESS\n} from './components/DefaultNotificationLayout.js';\nimport SequenceNotificationLayout from './components/SequenceNotificationLayout.js';\n\nexport const DEFAULT_LAYOUT_ID = 'default';\nexport const WARNING_LAYOUT_ID = 'warning';\nexport const ERROR_LAYOUT_ID = 'error';\nexport const SUCCESS_LAYOUT_ID = 'success';\nexport const SEQUENCE_LAYOUT_ID = 'sequence';\n\nclass NotificationManager\n{\n    constructor()\n    {\n        this._layouts = new Map();\n        this._notifications = [];\n    }\n\n    registerNotificationLayout(layoutID, notificationLayout)\n    {\n        this._layouts.set(layoutID, notificationLayout);\n        return this;\n    }\n\n    unregisterNotificationLayout(layoutID)\n    {\n        this._layouts.delete(layoutID);\n        return this;\n    }\n\n    pushNotification(message, layoutID = null, tags = [], props = {}, replace = true)\n    {\n        if (replace && tags.length > 0)\n        {\n            this.clearNotifications(tags);\n        }\n\n        const notification = new Notification(this, message, layoutID, tags, props);\n        this._notifications.push(notification);\n        return notification;\n    }\n\n    popNotification(tags = null)\n    {\n        if (this._notifications.length <= 0) return null;\n\n        if (Array.isArray(tags))\n        {\n            for (let i = this._notifications.length - 1; i >= 0; --i)\n            {\n                const notification = this._notifications[i];\n                let flag = true;\n                for (const tag of tags)\n                {\n                    if (!notification.hasTag(tag))\n                    {\n                        flag = false;\n                        break;\n                    }\n                }\n                if (flag)\n                {\n                    this._notifications.splice(i, 1);\n                    return notification;\n                }\n            }\n        }\n        else if (typeof tags === 'string')\n        {\n            for (let i = 0, length = this._notifications.length; i < length; ++i)\n            {\n                const notification = this._notifications[i];\n                if (notification.hasTag(tags))\n                {\n                    this._notifications.splice(i, 1);\n                    return notification;\n                }\n            }\n        }\n        else\n        {\n            return this._notifications.pop();\n        }\n    }\n\n    removeNotification(notification)\n    {\n        const i = this._notifications.indexOf(notification);\n        if (i >= 0)\n        {\n            this._notifications.splice(i, 1);\n        }\n    }\n\n    clearNotifications(tags = null)\n    {\n        if (this._notifications.length <= 0) return;\n\n        if (Array.isArray(tags))\n        {\n            for (let i = this._notifications.length - 1; i >= 0; --i)\n            {\n                const notification = this._notifications[i];\n                let flag = true;\n                for (const tag of tags)\n                {\n                    if (!notification.hasTag(tag))\n                    {\n                        flag = false;\n                        break;\n                    }\n                }\n                if (flag)\n                {\n                    this._notifications.splice(i, 1);\n                }\n            }\n        }\n        else if (typeof tags === 'string')\n        {\n            for (let i = this._notifications.length - 1; i >= 0; --i)\n            {\n                const notification = this._notifications[i];\n                if (notification.hasTag(tags))\n                {\n                    this._notifications.splice(i, 1);\n                }\n            }\n        }\n        else\n        {\n            this._notifications.length = 0;\n        }\n    }\n\n    //DuckType(SessionListener)\n    onSessionStart(session)\n    {\n        //Overwrite any changes to default notifications...\n        this.registerNotificationLayout(DEFAULT_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_DEFAULT} {...props} />);\n        this.registerNotificationLayout(WARNING_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_WARNING} {...props} />);\n        this.registerNotificationLayout(ERROR_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_ERROR} {...props} />);\n        this.registerNotificationLayout(SUCCESS_LAYOUT_ID, props => <DefaultNotificationLayout styleType={STYLE_TYPE_SUCCESS} {...props} />);\n        this.registerNotificationLayout(SEQUENCE_LAYOUT_ID, props => <SequenceNotificationLayout {...props} />);\n    }\n\n    //DuckType(SessionListener)\n    onSessionStop(session)\n    {\n        this.clearNotifications();\n    }\n\n    hasNotificationLayout(layoutID)\n    {\n        return this._layouts.has(layoutID);\n    }\n\n    getNotificationLayout(layoutID)\n    {\n        return this._layouts.get(layoutID);\n    }\n\n    getNotifications()\n    {\n        return this._notifications;\n    }\n\n    isEmpty()\n    {\n        return this._notifications.length <= 0;\n    }\n}\n\nexport default NotificationManager;\n","import React from 'react';\n\nclass TinyDownIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M7 10l5 5 5-5z\"/>\n            </svg>\n        );\n    }\n}\nexport default TinyDownIcon;\n","import React from 'react';\n\nclass TinyUpIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M7 14l5-5 5 5z\"/>\n            </svg>\n        );\n    }\n}\nexport default TinyUpIcon;\n","import React from 'react';\nimport Style from './PanelSection.css';\n\nimport IconButton from 'experimental/components/IconButton.js';\nimport TinyDownIcon from 'components/iconset/TinyDownIcon.js';\nimport TinyUpIcon from 'components/iconset/TinyUpIcon.js';\n\nclass PanelSection extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.state = {\n            open: props.initial || false\n        };\n\n        this.onClick = this.onClick.bind(this);\n    }\n\n    onClick(e)\n    {\n        this.setState((prev, props) => \n        {\n            return { open: !prev.open };\n        });\n    }\n\n    /** @override */\n    componentDidUpdate()\n    {\n        if (this.state.open && this.props.disabled)\n        {\n            this.setState({ open: false });\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        const isOpen = this.state.open;\n        const isDisabled = this.props.disabled || React.Children.count(this.props.children) <= 0;\n        const isFull = this.props.full;\n        const title = this.props.title;\n        return (\n            <section id={this.props.id}\n                className={Style.section_container +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                <IconButton className={Style.section_header}\n                    title={title}\n                    disabled={isDisabled}\n                    onClick={this.onClick}>\n                    {!isOpen ? <TinyDownIcon /> : <TinyUpIcon />}\n                </IconButton>\n                <div className={Style.section_content_container +\n                    (isOpen ? ' open ' : '') +\n                    (isFull ? ' full ' : '')}>\n                    <div className={Style.section_content}>\n                        {this.props.children}\n                    </div>\n                </div>\n            </section>\n        );\n    }\n}\n\nexport default PanelSection;\n","import React from 'react';\nimport Style from './IconButton.css';\n\nclass IconButton extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const { refButton, title, className, ...props } = this.props;\n        const showButtonLabel = IconButton.SHOW_LABEL && title;\n\n        return (\n            <button {...props}\n                ref={refButton}\n                className={Style.icon_button +\n                    (showButtonLabel ? ' hint ' : '') +\n                    ' ' + className}\n                title={title}>\n                {this.props.children}\n                <label>{title}</label>\n            </button>\n        );\n    }\n}\nIconButton.SHOW_LABEL = false;\n\nexport default IconButton;\n","import Exporter from 'util/file/export/Exporter.js';\n\nclass SessionExporter extends Exporter\n{\n    constructor(fileType)\n    {\n        super();\n\n        this._fileType = fileType;\n    }\n\n    onExportSession(session, dst)\n    {\n    }\n\n    onPostExportSession(session, dst)\n    {\n        const currentModule = session.getCurrentModule();\n\n        dst['_metadata'] = {\n            name: session.getProjectName(),\n            module: currentModule.getModuleName(),\n            version: process.env.VERSION + ':' + currentModule.getModuleVersion(),\n            timestamp: new Date().toString()\n        };\n    }\n\n    onStringifySession(session, dst)\n    {\n        return JSON.stringify(dst);\n    }\n\n    /** @override */\n    exportTarget(exportType, target)\n    {\n        return new Promise((resolve, reject) =>\n        {\n            const session = target;\n\n            try\n            {\n                let data = {};\n                this.onExportSession(session, data);\n                this.onPostExportSession(session, data);\n                data = this.onStringifySession(session, data);\n\n                resolve({\n                    name: session.getProjectName() + this._fileType,\n                    type: 'text',\n                    data: data\n                });\n            }\n            catch(e)\n            {\n                reject(e);\n            }\n        });\n    }\n}\n\nexport default SessionExporter;\n","/**\n * An object map that represents the processed export data. These are used as arguments\n * for a downloader to further evaluate and then finally download to the client's machine.\n * \n * Any additional properties are also passed to the downloader.\n * \n * @typedef {Object} ExportData\n * @property {String} name  the file name for the exported object\n * @property {String} type  the download type (this is NOT the same as export type or file type)\n * @property {*} data       the processed target data to put into a file\n */\n\n/**\n * A class that exports a specific target to data. The outputs of this class are usually\n * then passed to a downloader.\n */\nclass Exporter\n{\n    constructor() {}\n\n    /**\n     * Exports the target to an export data object. This is then usually passed to a\n     * downloader to process and download to the client's machine.\n     * \n     * @param {String} exportType the export type for the target\n     * @param {*} target the target to export\n     * @returns {ExportData} the processed export data that represents the target's current state\n     */\n    exportTarget(exportType, target)\n    {\n        return Promise.resolve({\n            name: 'untitled.json',\n            type: 'text',\n            data: JSON.stringify(target)\n        });\n    }\n\n    /**\n     * The representive icon class for this exporter.\n     * \n     * @returns {React.Component} the icon component class\n     */\n    getIconClass() { return null; }\n\n    /**\n     * The label for the exporter.\n     */\n    getLabel() { return 'Export'; }\n\n    /**\n     * The hint for the exporter.\n     */\n    getTitle() { return 'Export'; }\n}\n\nexport default Exporter;","import React from 'react';\nimport Style from './PanelSwitch.css';\n\nclass PanelSwitch extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        if (!props.id) throw new Error('Must specify id');\n    }\n\n    /** @override */\n    render()\n    {\n        const id = this.props.id;\n        const disabled = this.props.disabled;\n        const checked = this.props.checked;\n        const onChange = this.props.onChange;\n\n        return (\n            <div id={id}\n                className={Style.switch_container +\n                    (disabled ? ' disabled ' : '') +\n                    (checked ? ' active ' : '') +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                <label className={Style.panel_switch}\n                    style={this.props.style}>\n                    <input type=\"checkbox\" id={id + '-switch'} checked={checked} onChange={onChange} disabled={disabled} />\n                    <div className={Style.switch_slider}></div>\n                </label>\n                <label className={Style.switch_label}\n                    htmlFor={id + '-switch'}>\n                    {this.props.title}\n                </label>\n            </div>\n        );\n    }\n}\n\nexport default PanelSwitch;\n","import React from 'react';\n\nclass CrossIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z\"/>\n            </svg>\n        );\n    }\n}\nexport default CrossIcon;\n","import React from 'react';\nimport Style from './IconUploadButton.css';\n\nimport IconButton from './IconButton.js';\n\nclass IconUploadButton extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n\n        this.onFileUpload = this.onFileUpload.bind(this);\n    }\n\n    onFileUpload(e)\n    {\n        const files = e.target.files;\n        if (files.length > 0)\n        {\n            if (this.props.onUpload) this.props.onUpload(files[0]);\n\n            //Makes sure you can upload the same file again.\n            e.target.value = '';\n        }\n    }\n\n    /** @override */\n    render()\n    {\n        const accept = this.props.accept;\n\n        return (\n            <IconButton id={this.props.id}\n                className={Style.upload_button +\n          ' ' + this.props.className}\n                style={this.props.style}\n                title={this.props.title}\n                disabled={this.props.disabled}>\n                <input type=\"file\" name=\"import\"\n                    className={Style.upload_input}\n                    disabled={this.props.disabled}\n                    accept={accept}\n                    onChange={this.onFileUpload}/>\n                {this.props.children}\n            </IconButton>\n        );\n    }\n}\n\nexport default IconUploadButton;\n","import React from 'react';\n\nclass DownloadIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M19 12v7H5v-7H3v7c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zm-6 .67l2.59-2.58L17 11.5l-5 5-5-5 1.41-1.41L11 12.67V3h2z\"/>\n            </svg>\n        );\n    }\n}\nexport default DownloadIcon;\n","import React from 'react';\n\nclass EditPencilIcon extends React.PureComponent\n{\n    constructor(props) { super(props); }\n\n    /** @override */\n    render()\n    {\n        return (\n            <svg id={this.props.id} className={this.props.className} style={this.props.style}\n                xmlns=\"http://www.w3.org/2000/svg\"\n                width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                <path d=\"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z\"/>\n            </svg>\n        );\n    }\n}\nexport default EditPencilIcon;\n","import React from 'react';\n\nconst SUBMIT_KEY = \"Enter\";\nconst CANCEL_KEY = \"Escape\";\n\nexport const CAPTURE_NONE = \"none\";\nexport const CAPTURE_SAVE = \"save\";\nexport const CAPTURE_RESET = \"reset\";\n\nclass FormattedInput extends React.Component\n{\n  constructor(props)\n  {\n    super(props);\n\n    this.element = null;\n    this.ignoreSaveOnExit = false;\n\n    const defaultValue = props.defaultValue || \"\";\n    this.state = {\n      value: defaultValue,\n      prevValue: defaultValue\n    };\n\n    this.onChange = this.onChange.bind(this);\n    this.onBlur = this.onBlur.bind(this);\n    this.onKeyUp = this.onKeyUp.bind(this);\n\n    //props:\n    //  filter - a filter function\n    //  formatter - a format function\n    //  captureOnExit - what to capture on blur (none, save, reset)\n    //  defaultValue - the default value for input\n    //  multiline - whether to allow multiple lines\n  }\n\n  /** @override */\n  componentWillReceiveProps(nextProps)\n  {\n    //Don't overwrite user input...\n    if (this.hasFocus()) return;\n\n    //TODO: This is a way to update the value if it is suppose to be the default value...\n    if (!this.state.value || this.state.value.length <= 0 || this.state.value === this.props.defaultValue)\n    {\n      this.setState({value: nextProps.defaultValue});\n    }\n  }\n\n  get value()\n  {\n    return this.state.value;\n  }\n\n  focus(replace=false)\n  {\n    if (replace)\n    {\n      this.element.select();\n    }\n    else\n    {\n      this.element.focus();\n    }\n  }\n\n  blur()\n  {\n    this.element.blur();\n  }\n\n  hasFocus()\n  {\n    return this.element === document.activeElement;\n  }\n\n  onChange(e)\n  {\n    if (this.props.filter)\n    {\n      const result = e.target.value.replace(this.props.filter, '');\n      this.setState({value: result});\n    }\n    else\n    {\n      this.setState({value: e.target.value});\n    }\n  }\n\n  onBlur(e)\n  {\n    if (this.ignoreSaveOnExit || this.props.captureOnExit === CAPTURE_NONE)\n    {\n      //For those you choose to handle exit, it's value should remain correct.\n      const result = this.formatValue(e.target.value);\n      this.setState({value: result});\n\n      //Don't ignore it for the future.\n      this.ignoreSaveOnExit = false;\n    }\n    else if (this.props.captureOnExit === CAPTURE_SAVE)\n    {\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.resetValue(next, () => {\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n      });\n    }\n    else if (this.props.captureOnExit === CAPTURE_RESET)\n    {\n      this.resetValue(null);\n    }\n  }\n\n  onKeyUp(e)\n  {\n    if (e.key === SUBMIT_KEY)\n    {\n      if (this.props.multiline && e.shiftKey)\n      {\n        return true;\n      }\n\n      const prev = this.state.prevValue;\n      const next = e.target.value || this.props.defaultValue || \"\";\n      this.setValue(next, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(next, prev);\n        }\n        this.element.blur();\n      });\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n    else if (e.key === CANCEL_KEY)\n    {\n      const prev = this.state.prevValue;\n      this.resetValue(prev, () => {\n        this.ignoreSaveOnExit = true;\n\n        if (this.props.onSubmit)\n        {\n          this.props.onSubmit(prev || \"\", prev);\n        }\n        this.element.blur();\n      });\n\n      e.preventDefault();\n      e.stopPropagation();\n      return false;\n    }\n  }\n\n  resetValue(newValue=null, callback=null)\n  {\n    if (newValue !== null)\n    {\n      const result = this.formatValue(newValue);\n      //NOTE: this uses newValue cause formatValue may introduce values\n      //which should be saved on exit. Therefore prev and next must be diff.\n      this.setState({value: result, prevValue: newValue}, callback);\n    }\n    else\n    {\n      this.setState((prev, props) => {\n        //NOTE: Although you CAN assume prev is valid, but what about when prev does not exist?\n        const result = this.formatValue(prev.prevValue);\n        return {value: result};\n      }, callback);\n    }\n  }\n\n  setValue(value, callback)\n  {\n    if (!value || value.length == 0)\n    {\n      value = this.props.defaultValue || \"\";\n    }\n    else\n    {\n      value = this.formatValue(value);\n    }\n\n    this.setState({value: value}, callback);\n  }\n\n  appendValue(value, separator=\",\")\n  {\n    let result = this.state.value;\n    //If the entire input is selected...\n    if (this.element.selectionStart == 0 &&\n      this.element.selectionEnd == value.length)\n    {\n      //Replace it!\n      result = value;\n    }\n    //Or just append to the end...\n    else\n    {\n      if (!result || result.length == 0)\n      {\n        result = value;\n      }\n      else\n      {\n        result = result + separator + value;\n      }\n    }\n\n    //If can filter input...\n    if (this.props.filter)\n    {\n      result = result.replace(this.props.filter, '');\n    }\n\n    this.setState({value: this.formatValue(result)});\n  }\n\n  formatValue(value)\n  {\n    const formatter = this.props.formatter;\n    const result = formatter ? formatter(value) : value;\n    return result || \"\";\n  }\n\n  /** @override */\n  render()\n  {\n    if (this.props.multiline)\n    {\n      return (\n        <textarea\n          id={this.props.id} className={this.props.className} style={this.props.style}\n          ref={ref=>this.element=ref}\n          type=\"text\" value={this.state.value}\n          rows=\"1\"\n          onChange={this.onChange}\n          onBlur={this.onBlur}\n          onKeyUp={this.onKeyUp}>\n        </textarea>\n      );\n    }\n    else\n    {\n      return (\n        <input\n          id={this.props.id} className={this.props.className} style={this.props.style}\n          ref={ref=>this.element=ref}\n          type=\"text\" value={this.state.value}\n          onChange={this.onChange}\n          onBlur={this.onBlur}\n          onKeyUp={this.onKeyUp}/>\n      );\n    }\n  }\n}\n\nexport default FormattedInput;\n","import Uploader from './Uploader.js';\n\nclass TextUploader extends Uploader\n{\n    constructor() { super(); }\n\n    /** @override */\n    uploadFile(fileBlob)\n    {\n        return new Promise((resolve, reject) =>\n        {\n            const reader = new FileReader();\n\n            // If file reading successful...\n            reader.addEventListener('load', event =>\n            {\n                const fileData = event.target.result;\n                resolve(fileData);\n            });\n\n            // If file reading failed...\n            reader.addEventListener('error', event =>\n            {\n                reject(new Error('Unable to import file: ' + event.target.error.code));\n            });\n\n            // Now let's begin the read...\n            reader.readAsText(fileBlob);\n        });\n    }\n}\n\nexport default TextUploader;","class Uploader\n{\n    constructor() {}\n\t\n    uploadFile(fileBlob) { return Promise.resolve(fileBlob); }\n}\n\nexport default Uploader;","const RGB_WHITE = [255, 255, 255];\nconst RGB_BLACK = [0, 0, 0];\n\nexport function grayscaleRGB(rgb, dst = [])\n{\n    const grayscaleAmount = rgb[0] * 0.3 + rgb[1] * 0.59 + rgb[2] * 0.11;\n    dst[0] = grayscaleAmount;\n    dst[1] = grayscaleAmount;\n    dst[2] = grayscaleAmount;\n    return dst;\n}\n\nexport function blendRGB(percent, rgb1, rgb2 = null, dst = [])\n{\n    const blendAmount = Math.abs(percent);\n    if (!rgb2) rgb2 = percent < 0 ? RGB_BLACK : RGB_WHITE;\n\n    dst[0] = rgb1[0] + Math.round(blendAmount * (rgb2[0] - rgb1[0]));\n    dst[1] = rgb1[1] + Math.round(blendAmount * (rgb2[1] - rgb1[1]));\n    dst[2] = rgb1[2] + Math.round(blendAmount * (rgb2[2] - rgb1[2]));\n    return dst;\n}\n\nexport function invertRGB(rgb, blackwhite = false, dst = [])\n{\n    if (blackwhite)\n    {\n        // http://stackoverflow.com/a/3943023/112731\n        if ((rgb[0] * 0.299 + rgb[1] * 0.587 + rgb[2] * 0.114) > 186)\n        {\n            dst[0] = 0;\n            dst[1] = 0;\n            dst[2] = 0;\n        }\n        else\n        {\n            dst[0] = 0xFF;\n            dst[1] = 0xFF;\n            dst[2] = 0xFF;\n        }\n    }\n    else\n    {\n        dst[0] = (255 - rgb[0]);\n        dst[1] = (255 - rgb[1]);\n        dst[2] = (255 - rgb[2]);\n    }\n    return dst;\n}\n\n/* RGB and HSL conversions: https://gist.github.com/mjackson/5311256 */\nexport function HEXtoRGB(hex, dst = [])\n{\n    if (hex.indexOf('#') === 0) hex = hex.slice(1);\n    if (hex.length === 3) hex = hex[0] + hex[0] + hex[1] + hex[1] + hex[2] + hex[2];\n    if (hex.length !== 6) throw new Error('Invalid hex color format');\n    const red = hex.substring(0, 2);\n    const green = hex.substring(2, 4);\n    const blue = hex.substring(4, 6);\n\n    dst[0] = parseInt(red, 16);\n    dst[1] = parseInt(green, 16);\n    dst[2] = parseInt(blue, 16);\n    return dst;\n}\nexport function RGBtoHEX(rgb)\n{\n    return '#' + (rgb[2] | (rgb[1] << 8) | (rgb[0] << 16) | (1 << 24)).toString(16).slice(1);\n}\nexport function RGBtoHSV(rgb, dst = [])\n{\n    let r = rgb[0] / 255;\n    let g = rgb[1] / 255;\n    let b = rgb[2] / 255;\n    const max = Math.max(r, g, b);\n    const min = Math.min(r, g, b);\n    const d = max - min;\n\n    let h = 0;\n    const s = max == 0 ? 0 : d / max;\n    const v = max;\n    if (max == min)\n    {\n        h = 0;\n    }\n    else\n    {\n        switch (max)\n        {\n        case r: h = (g - b) / d + (g < b ? 6 : 0); break;\n        case g: h = (b - r) / d + 2; break;\n        case b: h = (r - g) / d + 4; break;\n        }\n\n        h /= 6;\n    }\n\n    dst[0] = h;\n    dst[1] = s;\n    dst[2] = v;\n    return dst;\n}\nexport function HSVtoRGB(h, s, v, dst = [])\n{\n    let r = 0; let g = 0; let b = 0;\n    const i = Math.floor(h * 6);\n    const f = h * 6 - i;\n    const p = v * (1 - s);\n    const q = v * (1 - f * s);\n    const t = v * (1 - (1 - f) * s);\n    switch (i % 6)\n    {\n    case 0: r = v, g = t, b = p; break;\n    case 1: r = q, g = v, b = p; break;\n    case 2: r = p, g = v, b = t; break;\n    case 3: r = p, g = q, b = v; break;\n    case 4: r = t, g = p, b = v; break;\n    case 5: r = v, g = p, b = q; break;\n    }\n\n    dst[0] = r * 255;\n    dst[1] = g * 255;\n    dst[2] = b * 255;\n    return dst;\n}\n","import React from 'react';\nimport Style from './DefaultNotificationLayout.css';\n\nexport const STYLE_TYPE_DEFAULT = 'default';\nexport const STYLE_TYPE_WARNING = 'warning';\nexport const STYLE_TYPE_ERROR = 'error';\nexport const STYLE_TYPE_SUCCESS = 'success';\n\nclass DefaultNotificationLayout extends React.Component\n{\n    constructor(props)\n    {\n        super(props);\n    }\n\n    /** @override */\n    render()\n    {\n        const message = this.props.message;\n        const notification = this.props.notification;\n\n        return (\n            <div id={this.props.id}\n                className={Style.notification_container +\n                    ' ' + this.props.styleType +\n                    ' ' + this.props.className}\n                style={this.props.style}>\n                {message &&\n                    message.split('\\n').map((e, i) => <p key={e + ':' + i}>{e}</p>)}\n                {this.props.children}\n                {notification &&\n                    <button onClick={e => notification.close()}>\n                        {I18N.toString('message.action.close')}\n                    </button>}\n            </div>\n        );\n    }\n}\n\nexport default DefaultNotificationLayout;\n","/**\n * A wrapper for a more intuitive use of LocalStorage.\n * @module LocalStorage\n */\nconst LocalStorage = {\n    clear()\n    {\n        if (!this.isSupported()) return;\n        localStorage.clear();\n    },\n    setData(key, value)\n    {\n        if (!this.isSupported()) return;\n\n        // Opera 12.10 and Firefox 18 and later support\n        let hidden;\n        if (typeof document.hidden !== 'undefined')\n        {\n            hidden = 'hidden';\n        }\n        else if (typeof document.msHidden !== 'undefined')\n        {\n            hidden = 'msHidden';\n        }\n        else if (typeof document.webkitHidden !== 'undefined')\n        {\n            hidden = 'webkitHidden';\n        }\n\n        // Don't save anything if hidden...\n        if (document[hidden]) return;\n\n        if (value)\n        {\n            localStorage.setItem(key, value);\n        }\n        else\n        {\n            localStorage.removeItem(key);\n        }\n    },\n    getData(key, defaultValue = null)\n    {\n        if (!this.isSupported()) return defaultValue;\n        return localStorage.getItem(key) || defaultValue;\n    },\n    setDataAsObject(key, objectValue)\n    {\n        try\n        {\n            if (objectValue && Object.keys(objectValue).length > 0)\n            {\n                this.setData(key, JSON.stringify(objectValue));\n            }\n            else\n            {\n                this.setData(key, null);\n            }\n        }\n        catch (e)\n        {\n            // eslint-disable-next-line no-console\n            console.error(e);\n        }\n    },\n    getDataAsObject(key, defaultValue = null)\n    {\n        const result = this.getData(key, null);\n        if (result)\n        {\n            try\n            {\n                return JSON.parse(result);\n            }\n            catch (e)\n            {\n                // eslint-disable-next-line no-console\n                console.error(e);\n                return defaultValue;\n            }\n        }\n        else\n        {\n            return defaultValue;\n        }\n    },\n    isSupported()\n    {\n        return typeof localStorage !== 'undefined';\n    }\n};\n\nexport default LocalStorage;\n"],"sourceRoot":""}