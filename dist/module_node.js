(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{103:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ue}));var r=a(21),n=a(49),l=a(54),c=a(28),o=a(0),s=a.n(o),i=a(25),u=a(39),d=a(5),m=a(29),b=a(27);function p(e){var{svgRef:t}=Object(i.b)(),a=Object(o.useContext)(m.d),r=Object(b.b)();return s.a.createElement(s.a.Fragment,null,s.a.createElement("header",null,s.a.createElement("h2",null,"Export")),s.a.createElement("section",null,s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("button",{onClick:()=>f("graph",{graphState:r,graphType:a})},"Save to File")),s.a.createElement("li",null,s.a.createElement("button",{onClick:()=>f("image",{svgRef:t})},"Export to Image")),s.a.createElement("li",null,s.a.createElement("button",{onClick:()=>f("svg",{svgRef:t})},"Export to SVG")))))}function f(e,t){switch(e){case"image":u.c("Untitled.png",u.a,t.svgRef.current,640,480);break;case"svg":u.c("Untitled.svg",u.b,t.svgRef.current,640,480);break;case"graph":u.d("Untitled.node.json",(a=t.graphType,r=t.graphState,JSON.stringify(a.serialize(r,{}))))}var a,r}p.tabIcon=d.d;var v=a(72),g=a(1),O=a.n(g),E=a(84),y=a(74),j=a(32),h=a(24);function I(e){var t=Object(j.b)(h.a);return s.a.createElement(y.a,{hidden:t.length>0})}var x=a(26),C=a(59),k=a(58),S=a(60);function w(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?w(Object(a),!0).forEach((function(t){R(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):w(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function R(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var T=s.a.createContext(null),D=s.a.createContext(null),{ConnectorProvider:F,useConnectorFromBehavior:N}=Object(S.a)((e,t,a)=>e&&s.a.createElement("rect",{x:Math.min(e.x,a.x),y:Math.min(e.y,a.y),width:Math.abs(a.x-e.x),height:Math.abs(a.y-e.y),fill:"rgba(0, 0, 0, 0.5)",stroke:"black"}));function U(e){return s.a.createElement(F,{onConnect:()=>{}},s.a.createElement(z,null,e.children))}function z(e){var[t,a]=Object(k.a)(J,{elementIds:new Set}),r=Object(b.c)(),n=Object(b.b)(),{svgRef:l,pos:c}=Object(i.b)(),u=Object(o.useRef)({x:0,y:0});return N(l,u.current,{useButton:2,onDragBegin:(e,t)=>(u.current.x=e-c.x,u.current.y=t-c.y,!0),onDragMove:(e,t)=>{var l=e-c.x,o=t-c.y,s=r.findElementsWithinBox(n,h.a,u.current.x,u.current.y,l,o);return a({type:"only",elementIds:s.map(e=>e.id)}),[l,o]}}),s.a.createElement(T.Provider,{value:t},s.a.createElement(D.Provider,{value:a},e.children))}function J(e,t){switch(t.type){case"only":var a=P({},e);for(var r of(a.elementIds.clear(),t.elementIds))a.elementIds.add(r);return a;case"add":var n=P({},e);return n.elementIds.add(t.elementId),n;case"addAll":var l=P({},e);for(var c of t.elementIds)l.elementIds.add(c);return l;case"remove":var o=P({},e);return o.elementIds.delete(t.elementId),o;case"removeAll":var s=P({},e);for(var i of t.elementIds)s.elementIds.delete(i);return s;case"toggle":var u=P({},e);return u.elementIds.has(t.elementId)?u.elementIds.delete(t.elementId):u.elementIds.add(t.elementId),u;case"clear":var d=P({},e);return d.elementIds.clear(),d}}U.propTypes={children:O.a.node},z.propTypes={children:O.a.node};var B=a(61);var H=a(75);function M(e){var{element:t}=e,a=Object(o.useRef)(null);Object(H.a)(a,t);var r=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object(o.useContext)(T),n=Object(o.useContext)(D);return Object(B.a)(e,!1,()=>{n({type:"toggle",elementId:t})},a),r.elementIds.has(t)}(a,t.id,{useButton:0});return s.a.createElement(s.a.Fragment,null,s.a.createElement(C.a,{x:t.x,y:t.y,label:t.label,childProps:{style:{outline:r?"0.1rem dashed gray":"none"}},maskProps:{ref:a}}),e.children)}M.propTypes={children:O.a.node,element:O.a.object.isRequired};var G=a(33),_=a(56),A=a(53),q=a(52),V=a(41),K=a(77);function L(e){var{element:t}=e,a=Object(o.useRef)(null),r=Object(o.useRef)(null),n=Object(o.useRef)(null),l=Object(G.a)(),c=Object(j.a)(h.a,t.fromId,l),i=Object(j.a)(h.a,t.toId,l),u=V.f(c,i,t),d=V.d(c,i,t),m=V.c(c,i,t),b=V.e(c,i,t),[,p]=Object(K.a)(a,r,n,t,c,i,u,m,d);return s.a.createElement(s.a.Fragment,null,s.a.createElement(_.a,{start:u,end:d,center:m,label:t.label,labelDirection:b,labelKeepUp:!0,maskProps:{ref:a},labelProps:{ref:r},hidden:p,renderEndpoint:(e,t,a)=>"forward"===a?s.a.createElement(A.a,{x:e.x,y:e.y,angle:t,maskProps:{ref:n}}):s.a.createElement(q.a,{x:e.x,y:e.y,angle:t,maskProps:{style:{pointerEvents:"none"}}})}),e.children)}L.propTypes={children:O.a.node,element:O.a.object.isRequired};var W=a(55),Z=a(64),Q=a(78);function X(e){var{createNode:t,createEdge:a}=Object(Q.a)();return Object(Z.b)({useButton:0}),Object(Z.a)((e,a)=>t({x:e,y:a})),s.a.createElement(s.a.Fragment,null,s.a.createElement(U,null,s.a.createElement(W.a,{onConnect:(e,t,r,n)=>{if(n.prevEdge){var l=n.prevEdge;l.fromId=e.id,l.toId=t.id,l.markDirty()}else a(e,t)},onCancel:(e,t,a,r)=>{if(r.prevEdge){var n=r.prevEdge;n.toId=0,V.b(null,e,a,n),n.markDirty()}}},s.a.createElement(I,null),s.a.createElement(E.a,{elementType:h.a},e=>s.a.createElement(M,{element:e})),s.a.createElement(E.a,{elementType:x.a},e=>s.a.createElement(L,{element:e})),e.children)))}X.propTypes={children:O.a.node};var Y=a(89),$=a.n(Y),ee=a(38),te=a(65),ae=a(30);function re(e){var{elementType:t,elementId:a,closeEditor:r}=Object(o.useContext)(ee.a),n=Object(o.useContext)(m.a),l=Object(G.a)(),c=Object(j.a)(t,a,l),i=Object(o.useRef)(null),[u,d]=Object(o.useState)("");return s.a.createElement(te.a,{className:$.a.container,onOpen:()=>{i.current.focus(),d(c.label||"")}},s.a.createElement("textarea",{ref:i,value:u,onChange:e=>d(e.target.value)}),s.a.createElement(ae.a,{onClick:()=>{c.label=u,c.markDirty(),r()}},"Submit"),s.a.createElement(ae.a,{onClick:()=>{n({type:"delete",elementType:t,elementId:a}),r()}},"Delete This"))}var ne=a(44),le=a(79),ce=new(a(6).a)("NodeToolbar");function oe(){var e=Object(b.c)(),t=Object(b.a)(),{svgRef:a}=Object(i.b)(),r=Object(b.b)(),n=Object(o.useCallback)(t=>e.serialize(r,{}),[r,e]),c=Object(o.useCallback)(a=>{var r=a,n=e.deserialize(r,{});t({type:"resetState",state:n})},[t,e]),{doUndoHistory:d,canUndoHistory:m,doRedoHistory:p,canRedoHistory:f}=Object(l.d)(e.name,n,c);return Object(o.useEffect)(()=>{ce.debug("Performing autosave...");var t=JSON.stringify(e.serialize(r,{}));localStorage.setItem(e.name+".graphData",t)}),s.a.createElement(s.a.Fragment,null,s.a.createElement("fieldset",null,s.a.createElement(l.c,{onClick:d,canClick:m}),s.a.createElement(l.b,{onClick:p,canClick:f})),s.a.createElement("fieldset",null,s.a.createElement("button",{onClick:()=>t("clearAll")},"Clear Graph"),s.a.createElement("button",{onClick:()=>{u.c("Untitled.png",u.a,a.current,640,480)}},"Export Image")),s.a.createElement("fieldset",null,s.a.createElement("button",{onClick:()=>{var t=e.serialize(r,{});u.d("Untitled.node.json",JSON.stringify(t))}},"Save To File"),s.a.createElement(ne.a,{onUpload:a=>{var r=Object(le.a)(a).then(t=>e.deserialize(JSON.parse(t)));t({type:"resetState",state:r})}})))}function se(){var e=Object(o.useContext)(m.d),t=Object(o.useContext)(m.a),[a,r]=Object(o.useState)(!1);return Object(o.useEffect)(()=>{if(!a){var n=JSON.parse(localStorage.getItem(e.name+".graphData")),l=e.deserialize(n,{});t({type:"resetState",state:l}),r(!0)}},[a,e,t]),s.a.createElement(s.a.Fragment,null)}function ie(){var e=Object(b.c)(),t=Object(b.b)();return Object(o.useEffect)(()=>{var a=!0,r=e.name+".graphData",n=setInterval(()=>{if(a){var n=e.serialize(t,{});localStorage.setItem(r,JSON.stringify(n))}},3e3);return()=>{a=!1,clearInterval(n)}}),s.a.createElement(s.a.Fragment,null)}class ue extends r.a{static get moduleId(){return"node"}static get moduleVersion(){return"2.0.0"}static get services(){return[n.a.withGraphType(v.a,X,re)]}static get renders(){return{header:[se,ie],appbar:[oe],drawer:[p],foreground:[c.b]}}static get providers(){return[c.c,l.a]}}},89:function(e,t,a){e.exports={container:"src-modules-node-graph-widgets-editor-__NodeGraphLabelEditor-module__container--3ZFSH"}}}]);