(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{102:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return Xt}));var r=a(21),n=a(49),i=a(45),s=a(28),l=a(54),o=a(0),c=a.n(o),d=a(44),u=a(79),h=a(72),m=a(29),g=a(24);class p extends h.a{static get version(){return"1.0.0"}static reducer(e,t){switch(t.type){case"add":if(t.elementType===g.a){var[a,r]=Object(m.c)(this,e,{type:"add",elementType:g.a,opts:t.opts}),n=Object.keys(a[this.getElementTypeKeyForElementType(g.a)]).length;return r.label="q"+(n-1),1===n&&(r.initial=!0),[a,r]}}}}var f=a(26);function v(e,t,a,r,n,i,s){try{var l=e[i](s),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(r,n)}function b(e){return function(){var t=this,a=arguments;return new Promise((function(r,n){var i=e.apply(t,a);function s(e){v(i,r,n,s,l,"next",e)}function l(e){v(i,r,n,s,l,"throw",e)}s(void 0)}))}}var E=new(a(6).a)("FiniteAutomataImporter");function y(){return(y=b((function*(e){var t=e.name,a=yield Object(u.a)(e),r={};try{t.endsWith(".fa.json")?r=p.deserialize(JSON.parse(a),{}):t.endsWith(".fsa.json")?r=_(a):t.endsWith(".jff")?r=x(a):t.endsWith(".json")?r=S(a):window.alert("Cannot import file with extension '".concat(t,"'."))}catch(e){E.error("Failed to import file.",e)}return r}))).apply(this,arguments)}function _(e){var t=JSON.parse(e);if("_metadata"in t)throw new Error("Missing metadata.");if("fsa"!==t._metadata.moduleID)throw new Error("Invalid module id.");throw new Error("Not yet implemented.")}function S(e){throw new Error("Not yet implemented.")}function x(e){var t=p.getElementTypeKeyForElementType(g.a),a=p.getElementTypeKeyForElementType(f.a),r={[t]:{},[a]:{}},n=(new DOMParser).parseFromString(e,"text/xml"),i=n.getElementsByTagName("state")||[],s=n.getElementsByTagName("transition")||[],l=r[t];for(var o of i)if(o.hasAttribute("id")){var c=o.getAttribute("id"),d=o.getAttribute("name"),u={x:Number.parseFloat(C(o,"x","0")),y:Number.parseFloat(C(o,"y","0")),label:d,initial:o.getElementsByTagName("initial").length>0,accept:o.getElementsByTagName("final").length>0};l[c]=u}var h=new Map,m=r[a],v=0;for(var b of s){var E=C(b,"from",null),y=C(b,"to",null);if(E&&y){var _=C(b,"read",""),S=E+":"+y;if(h.has(S)){h.get(S).label+="\n"+_}else{var x={fromId:E,toId:y,label:_};m["".concat(++v)]=x,h.set(S,x)}}}return p.deserialize(r,{},{forceIgnoreVersion:!0})}function C(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=e.getElementsByTagName(t);if(r.length>0)for(var n of r)if(n.hasChildNodes())try{return n.childNodes[0].nodeValue}catch(e){}return a}var w=a(27);var N=a(11),M=a(66),T=a(4),I=a(5);function O(){var e=Object(w.c)(),t=Object(w.a)(),a=e.name+".autoSave",r=e.name+".history",n=function(){var e=Object(o.useContext)(m.d),t=Object(w.b)();return Object(o.useCallback)((function(a){e.serialize(t,a)}),[t,e])}(),i=function(){var e=Object(w.c)(),t=Object(w.a)();return Object(o.useCallback)((function(a){var r,n=a;try{r=e.deserialize(n,{})}catch(e){r={}}t({type:"resetState",state:r})}),[e,t])}();Object(M.a)(a,n,i);var{doUndoHistory:s,canUndoHistory:u,doRedoHistory:h,canRedoHistory:g,clearHistory:p}=Object(l.d)(r,n,i),{changeDrawerTab:f}=Object(N.c)();return c.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},c.a.createElement(T.a,{iconClass:I.f,onClick:()=>{p(),t("clearAll")},title:"New"}),c.a.createElement(l.c,{onClick:s,canClick:u}),c.a.createElement(l.b,{onClick:h,canClick:g}),c.a.createElement(T.a,{iconClass:I.d,onClick:()=>f(3),title:"Save"}),c.a.createElement(d.a,{iconClass:I.n,onUpload:e=>function(e){return y.apply(this,arguments)}(e).then(e=>t({type:"resetState",state:e}))}))}var j=a(1),k=a.n(j),L=a(84),P=a(74),D=a(42),F=a(67),A=new Map;function R(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];A.has(e)||A.set(e,new Map);var r=A.get(e);if(r.has(t)){var n=r.get(t);return n}if(!a)throw new Error("Cannot find non-existent machine builder for type '".concat(e.name,"' and name '").concat(t,"'."));var i=new e,s={builder:i,refCount:0,persistent:!1};return r.set(t,s),s}function q(e,t){var[a,r]=Object(o.useState)(null),n=Object(o.useContext)(D.a)+":"+t,i=R(e,n,!0).builder;return Object(F.a)(()=>{var e=i.getCurrentBuildId();e!==a&&r(e)}),function(e,t){R(e,t,!1).refCount+=1}(e,n),Object(o.useEffect)(()=>()=>{!function(e,t){R(e,t,!1).refCount-=1}(e,n),function(e,t){var a=R(e,t,!1);return a.persistent||a.refCount>0}(e,n)||function(e,t){if(A.has(e)){var a=A.get(e);a.has(t)&&a.delete(t)}}(e,n)}),i}function B(e,t){return q(e,t).getMachine()}function H(e){return q(e,"graph")}function G(e){var t=Object(w.c)(),a=Object(w.b)(),r=Object(w.a)();!function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:(e,t)=>{},n=Object(o.useContext)(D.a),i=n+":"+t,s=R(e,i,!0),l=s.builder,c=s.opts||{};s.opts={};var d=Object(o.useCallback)((e,t)=>{s.opts=t,r.call(void 0,e,t)},[r,s]);l.setSourceCallback(d),l.applySource(a,c)}(e,"graph",a,(n,i)=>e.updateGraphFromMachine(t,a,r,n,i))}function z(e,t,a,r,n,i,s){try{var l=e[i](s),o=l.value}catch(e){return void a(e)}l.done?t(o):Promise.resolve(o).then(r,n)}var Q=a(31),U=a(23);function V(e){return Object(U.f)(function(e){if(!e)return"";var t=p.getElementTypeKeyForElementType(g.a),a=p.getElementTypeKeyForElementType(f.a),r=e[t]?Object.keys(e[t]).sort():[],n=e[a]?Object.keys(e[a]).sort():[],i=[];for(var s of r){var l=e[t][s];i.push("".concat(l.id," ").concat(l.label," ").concat(l.final))}var o=[];for(var c of n){var d=e[a][c];o.push("".concat(d.fromId," ").concat(d.toId," ").concat(d.label))}return"n:"+i.join(",")+"|e:"+o.join(",")}(e))}var K=a(36);function X(e){var{id:t,nodeIds:a,label:r}=e;return c.a.createElement(s.a,{id:t,message:"Error: Found ".concat(a.length," duplicate states for ").concat(r,".")})}function J(e){var{id:t,edgeIds:a,fromNodeLabel:r,symbol:n}=e;return c.a.createElement(s.a,{id:t,message:"Error: Found ".concat(a.length," duplicate transitions from state ").concat(r," with symbol ").concat(n,".\nReason: Deterministic.")})}function W(e,t,a){e({type:"delete",elementType:t,elementId:a})}function Y(e,t){W(e,f.a,t)}function Z(e){var{id:t,edgeIds:a}=e,r=Object(w.a)();return c.a.createElement(s.a,{id:t,message:"Error: Found ".concat(a.length," empty transition(s).\nReason: Deterministic."),controls:e=>c.a.createElement("div",null,c.a.createElement("button",{onClick:()=>{Y(r,a),e()}},"Delete all empty transitions."))})}X.propTypes={id:k.a.string,nodeIds:k.a.arrayOf(k.a.string),label:k.a.string},J.propTypes={id:k.a.string,edgeIds:k.a.arrayOf(k.a.string),fromNodeLabel:k.a.string,symbol:k.a.string},Z.propTypes={id:k.a.string.isRequired,edgeIds:k.a.arrayOf(k.a.string)};var $=a(47);function ee(e){var{id:t,content:a}=e,r=H(le);return c.a.createElement(s.a,{id:t,message:"Warning: Flipping the states in an NFA does not produce a logically equivalent inverse.\n"+a,controls:e=>c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:()=>{r.applyChanges(e=>Object($.b)(e,e)),e()}},"Apply"))})}function te(e){var{id:t,edgeIds:a}=e,r=Object(w.a)();return c.a.createElement(s.a,{id:t,message:"Error: Found ".concat(a.length," incomplete transition(s)."),controls:e=>c.a.createElement("div",null,c.a.createElement("button",{onClick:()=>{Y(r,a),e()}},"Delete all incomplete edges."))})}function ae(e){var{id:t,symbols:a,label:r}=e;return c.a.createElement(s.a,{id:t,message:"Error: Node ".concat(r," is missing transtion(s) for the following symbol(s) ").concat(a,".\nReason: Deterministic.")})}function re(e){var{id:t,stateCount:a}=e,r=H(le);return c.a.createElement(s.a,{id:t,message:"Warning: This conversion will exponentially increase the number of states.\n".concat(a," state(s) -> ").concat(Math.pow(2,a)," states."),controls:e=>c.a.createElement(c.a.Fragment,null,c.a.createElement("button",{onClick:()=>{r.applyChanges(e=>Object($.a)(e,e)),e()}},"Convert"))})}function ne(e){var{id:t,nodeIds:a,labels:r}=e,n=Object(w.a)();return c.a.createElement(s.a,{id:t,message:"Warning: Found ".concat(a.length," unreachable states labeled: \n ").concat(r.join(", ")),controls:e=>c.a.createElement("div",null,c.a.createElement("button",{onClick:()=>{!function(e,t){!function(e,t,a){e({type:"deleteAll",elementType:t,elementIds:a})}(e,g.a,t)}(n,a),e()}},"Delete all unreachable."))})}ee.propTypes={id:k.a.string.isRequired,content:k.a.string},te.propTypes={id:k.a.string.isRequired,edgeIds:k.a.arrayOf(k.a.string)},ae.propTypes={id:k.a.string.isRequired,symbols:k.a.arrayOf(k.a.string),label:k.a.string},re.propTypes={id:k.a.string.isRequired,stateCount:k.a.number.isRequired},ne.propTypes={id:k.a.string.isRequired,nodeIds:k.a.arrayOf(k.a.string),labels:k.a.arrayOf(k.a.string)};class ie{constructor(){this.deterministic=!1,this.startNodeId=null,this.startState=null,this.nodeLabels=new Map,this.nodeOutgoings=new Map,this.edgeSymbols=new Set,this.edgePlaceholders=[],this.edgeEmpties=[],this.stateToNodeIdMap=new Map,this.nodeIdToStateLabelMap=new Map}setDeterministic(e){return this.deterministic=e,this}setStartState(e,t){return this.startNodeId=e,this.startState=t,this}addState(e,t){var a=t.getStateLabel();return this.nodeIdToStateLabelMap.set(e,a),this.stateToNodeIdMap.set(t,e),this.nodeLabels.has(a)?this.nodeLabels.get(a).push(t):this.nodeLabels.set(a,[t]),this.nodeOutgoings.set(t,new Map),this}addTransition(e,t,a,r){var n=this.nodeOutgoings.get(t),i=n.get(r);return i||n.set(r,i=new Array),i.push(e),this}addPlaceholder(e){return this.edgePlaceholders.push(e),this}addSymbolForEdge(e,t){return t===K.b?this.edgeEmpties.push(e):this.edgeSymbols.add(t),this}validate(e,t){var a=[],r=[],{deterministic:n,nodeLabels:i,edgePlaceholders:s,edgeEmpties:l,nodeOutgoings:o,edgeSymbols:c,stateToNodeIdMap:d,nodeIdToStateLabelMap:u}=this;for(var[h,m]of(s.length>0&&a.push({message:te,opts:{edgeIds:s}}),i.entries()))m.length>1&&a.push({message:X,opts:{label:h,nodeIds:m.map(e=>d.get(e))}});var p=function(e,t,a){var r=[...e.getElementIds(t,g.a)];if(!a)return[];if(r.length<=1)return[];r.splice(r.indexOf(a),1);var n=e.getElements(t,f.a),i=[];for(i.push(a);i.length>0;){var s=i.pop();for(var l of n)if(l.fromId===s){var o=r.indexOf(l.toId);if(o>=0){var c=r.splice(o,1)[0];i.push(c)}}}return r}(e,t,this.startNodeId);if(p&&p.length>0&&r.push({message:ne,opts:{labels:p.map(e=>u.get(e)),nodeIds:p}}),n){l.length>0&&a.push({message:Z,opts:{edgeIds:l}});var v=[];for(var[b,E]of o.entries()){for(var y of c){var _=E.get(y);_?1!==_.length&&a.push({message:J,opts:{edgeIds:_,fromNodeLabel:u.get(d.get(b)),symbol:y}}):v.push(y)}v.length>0&&(a.push({message:ae,opts:{symbols:[...v],label:u.get(d.get(b))}}),v.length=0)}}return{errors:a,warnings:r}}}function se(e,t,a,r,n){var i=a.getElementTypeKeyForElementType(g.a),s=a.getElementTypeKeyForElementType(f.a);e.sourceMap.clear(),e.errors.length=0,e.warnings.length=0;var l=t.isDeterministic();t.clear();var o=(new ie).setDeterministic(l),c=new Map;if(r[i])for(var d of Object.keys(r[i])){var u=r[i][d],{label:h,final:m,initial:p}=u,v=new Q.b(h,u);t.addState(v),c.set(d,v.getStateID()),e.sourceMap.set(v.getStateID(),d),m&&t.setFinalState(v,!0),p&&(t.setStartState(v),o.setStartState(d,v)),o.addState(d,v)}if(r[s])for(var b of Object.keys(r[s])){var E=r[s][b],{fromId:y,toId:_,label:S}=E;if(_){if(y&&_){var x=c.get(y),C=c.get(_),w=t.getStateByID(x),N=t.getStateByID(C);if(!w||!N)throw new Error("Cannot find state for edge source/destination nodes - mismatch id");var M=S.split("\n");for(var T of M)if(T){var I=void 0;switch(T){case K.b:I=Q.a;break;default:I=T}t.addTransition(w,N,I,E),o.addSymbolForEdge(b,T),o.addTransition(b,w,N,I)}}}else o.addPlaceholder(b)}return o.validate(a,r)}class le extends class extends class{static build(){throw new Error("No implementation found for ".concat(this.name,".build()."))}constructor(){this._machine=this.constructor.build(null),this._buildId=0,this._sourceCallback=null,this._resolveCallback=null,this._changeQueue=[]}updateMachineFromSource(e,t){throw new Error("No implementation found for this.updateMachineFromSource().")}setPersistent(e){return this._persistent=e,this}setSourceCallback(e){if(e)this._sourceCallback=e,this.propagateRemainingChanges();else{this._sourceCallback=null;var t=this._resolveCallback;t&&(this._resolveCallback=null,t(this._machine))}return this}applySource(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t&&(t.builder=this),this.updateMachineFromSource(this._machine,e,t)&&(this._buildId=this.getNextBuildId());var a=this._resolveCallback;a&&(this._resolveCallback=null,a(this._machine),this.propagateRemainingChanges())}applyChanges(e){var t,a=arguments,r=this;return(t=function*(){var t=a.length>1&&void 0!==a[1]?a[1]:{};if(t&&(t.builder=r),r._sourceCallback&&!r._resolveCallback){r._resolveCallback=!0;var n=r._machine,i=r.constructor.build(n,t);return new Promise(a=>{r._resolveCallback=a,e(i),r._sourceCallback(i,t),r._machine=i})}var s={callback:e,opts:t,resolve:null};return r._changeQueue.push(s),new Promise(e=>s.resolve=e)},function(){var e=this,a=arguments;return new Promise((function(r,n){var i=t.apply(e,a);function s(e){z(i,r,n,s,l,"next",e)}function l(e){z(i,r,n,s,l,"throw",e)}s(void 0)}))})()}propagateRemainingChanges(){if(this._sourceCallback&&!this._resolveCallback&&this._changeQueue.length>0){var e=this._changeQueue.shift();this._resolveCallback=e.resolve;var t=this._machine,a=this.constructor.build(t,e.opts);e.callback(a),this._sourceCallback(a,e.opts),this._machine=a}}getMachine(){return this._machine}getNextBuildId(){return this._buildId+1}getCurrentBuildId(){return this._buildId}}{static updateGraphFromMachine(e,t,a,r){throw new Error("No implementation found for ".concat(this.name,".updateGraphFromMachine()."))}}{static build(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e&&(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).machineOnly)return e;var t=new Q.c(!1);return e&&t.copy(e),t}static updateGraphFromMachine(e,t,a,r){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};if(n.machineOnly)a({type:"forceUpdate"});else{var i=function(e,t,a,r,n){var i,s,l,o,c,d,u,h=a.getElementTypeKeyForElementType(g.a),m=a.getElementTypeKeyForElementType(f.a),p={[h]:{},[m]:{}},v=0;for(var b of t.getStates()){var E={},y=b.getStateID();if(n.builder){y=n.builder.sourceMap.get(b.getStateID())||y;var _=a.getElement(r,g.a,y);_?g.a.serialize(_,E):(E.x=v,E.y=v,v+=10)}else E.x=v,E.y=v,v+=10;var S=b.getAssociatedGraphElement();S&&(E.x=S.x,E.y=S.y),E.label=b.getStateLabel(),t.isStartState(b)?E.initial=!0:E.initial=!1,t.isFinalState(b)?E.final=!0:E.final=!1,p[h][y]=E}for(var x of t.getTransitions())if((s=x.getSourceState())&&(c=s.getStateID())&&(n.builder&&(c=n.builder.sourceMap.get(c)||c),u=x.getSymbols().join("\n"),(l=x.getDestinationState())&&(d=l.getStateID()))){n.builder&&(d=n.builder.sourceMap.get(d)||d),o={fromId:c,toId:d,label:u};var C=x.getAssociatedGraphElement();C?(i=C.id,C.quad&&(o.quad=C.quad)):i=Object(U.g)(),p[m][i]=o}return p}(0,r,e,e,n);a({type:"resetState",state:e.deserialize(i,{},{forceIgnoreVersion:!0})})}}constructor(){super(),this.sourceMap=new Map,this.errors=[],this.warnings=[],this.prevSourceHash=0,this.prevDeterminism=null}shouldMachineUpdate(e,t){var a=V(t),r=this.prevSourceHash;this.prevSourceHash=a;var n=e.isDeterministic(),i=this.prevDeterminism;return this.prevDeterminism=n,a!==r||n!==i}updateMachineFromSource(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a.machineOnly){var{errors:r,warnings:n}=se(this,e,p,t);return this.errors.length=0,this.warnings.length=0,r&&this.errors.push(...r),n&&this.warnings.push(...n),!0}if(!this.shouldMachineUpdate(e,t))return!1;var{errors:i,warnings:s}=se(this,e,p,t);return this.errors.length=0,this.warnings.length=0,i&&this.errors.push(...i),s&&this.warnings.push(...s),!0}}function oe(e){var t=B(le,"graph").getStateCount()>0;return c.a.createElement(P.a,{hidden:t})}var ce=a(55),de=a(60),ue=a(40),he=a.n(ue);function me(){return(me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function ge(e){var{size:t,angle:a,offset:r,childProps:n,maskProps:i}=e,s=Math.cos(a),l=Math.sin(a),o=e.x+s*r,d=e.y+l*r,u=s*t,h=1.2*u;return c.a.createElement(c.a.Fragment,null,c.a.createElement("path",me({className:he.a.decorative,d:"M".concat(o," ").concat(d)+" L".concat(o+h," ").concat(d+Math.sin(a+Math.PI/2)*t*1.2)+" L".concat(o+h," ").concat(d-Math.sin(a+Math.PI/2)*t*1.2)+" Z",fill:"transparent"},n)),c.a.createElement("circle",me({className:he.a.mask,cx:o+u,cy:d,r:t+4},i)))}ge.propTypes={style:k.a.object,x:k.a.number,y:k.a.number,size:k.a.number,angle:k.a.number,offset:k.a.number,childProps:k.a.object,maskProps:k.a.object},ge.defaultProps={x:0,y:0,size:10,angle:Math.PI,offset:0,childProps:{},maskProps:{}};var{ConnectorProvider:pe,useConnectorFromBehavior:fe,useConnectorToBehavior:ve}=Object(de.a)((e,t,a)=>{var r=t||a||null;return c.a.createElement(c.a.Fragment,null,r&&c.a.createElement(ge,{x:r.x,y:r.y,offset:r.radius||0,childProps:{pointerEvents:"none"},maskProps:{pointerEvents:"none"}}))}),be=a(64),Ee=a(78),ye=a(33),_e=a(32),Se=a(56),xe=a(53),Ce=a(52),we=a(41),Ne=a(77);function Me(e){var{element:t}=e,a=Object(o.useRef)(null),r=Object(o.useRef)(null),n=Object(o.useRef)(null),i=Object(ye.a)(),s=Object(_e.a)(g.a,t.fromId,i),l=Object(_e.a)(g.a,t.toId,i),d=we.f(s,l,t),u=we.d(s,l,t),h=we.c(s,l,t),m=we.e(s,l,t),[,p]=Object(Ne.a)(a,r,n,t,s,l,d,h,u);return c.a.createElement(c.a.Fragment,null,c.a.createElement(Se.a,{start:d,end:u,center:h,label:t.label,labelDirection:m,labelKeepUp:!0,maskProps:{ref:a},labelProps:{ref:r},hidden:p,renderEndpoint:(e,t,a)=>"forward"===a?c.a.createElement(xe.a,{x:e.x,y:e.y,angle:t,maskProps:{ref:n}}):c.a.createElement(Ce.a,{x:e.x,y:e.y,angle:t,maskProps:{style:{pointerEvents:"none"}}})}),e.children)}Me.propTypes={children:k.a.node,element:k.a.object.isRequired};var Te=a(75),Ie=a(59);function Oe(e){var{element:t}=e,a=Object(o.useRef)(null),r=Object(o.useRef)(null);Object(Te.a)(a,t);var n=fe(r,t,{onDragBegin:()=>Boolean(t.initial)});ve(a,t);var i=t.initial&&!n;return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ie.a,{x:t.x,y:t.y,label:t.label,inner:t.final?.8*t.radius:0,radius:t.radius,maskProps:{ref:a}}),c.a.createElement(ge,{x:t.x,y:t.y,offset:t.radius,childProps:{style:{visibility:i?"unset":"hidden"}},maskProps:{ref:r,pointerEvents:i?"auto":"none"}}),e.children)}Oe.propTypes={children:k.a.node,element:k.a.object.isRequired};var je=a(38);function ke(e){var{openEditor:t}=Object(o.useContext)(je.a),{createNode:a,createEdge:r,swapInitial:n}=Object(Ee.a)(),i=Object(w.b)();return Object(be.b)(),Object(be.a)((e,t)=>a({x:e,y:t})),c.a.createElement(c.a.Fragment,null,c.a.createElement(pe,{onConnect:n},c.a.createElement(ce.a,{onConnect:(e,a,n,s)=>{var l=function(e,t,a){var r=p.getElements(a,f.a);for(var n of r)if(n.fromId===e.id&&n.toId===t.id)return n;return}(e,a,i);if(l)t(l.type,l.id);else if(s.prevEdge){var o=s.prevEdge;o.fromId=e.id,o.toId=a.id,o.markDirty()}else r(e,a).then(e=>t(e.type,e.id))},onCancel:(e,t,a,r)=>{if(r.prevEdge){var n=r.prevEdge;n.toId=0,we.b(null,e,a,n),n.markDirty()}}},c.a.createElement(oe,null),c.a.createElement(L.a,{elementType:g.a},e=>c.a.createElement(Oe,{element:e})),c.a.createElement(L.a,{elementType:f.a},e=>c.a.createElement(Me,{element:e})),e.children)))}ke.propTypes={children:k.a.node};var Le=a(34),Pe=a(80),De=a.n(Pe);function Fe(e){var t=q(le,e.machineName).getMachine(),a=Array.from(t.getStates());return c.a.createElement("fieldset",null,c.a.createElement("legend",null,"States"),a.length<=0?c.a.createElement("ul",{className:De.a.itemList},c.a.createElement("li",null,c.a.createElement("label",{className:De.a.emptyLabel},K.a))):c.a.createElement("ul",{className:De.a.itemList},c.a.createElement("li",null,c.a.createElement("label",{className:De.a.itemLabel},"{")),a.map((e,r)=>c.a.createElement("li",{key:e.getStateID()},c.a.createElement("label",{className:De.a.itemLabel+" "+(t.isFinalState(e)?De.a.markedLabel:"")},r<a.length-1?e.getStateLabel()+",":e.getStateLabel()))),c.a.createElement("li",null,c.a.createElement("label",{className:De.a.itemLabel},"}"))))}function Ae(e){var t=B(le,e.machineName).getAlphabet();return c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Alphabet"),t.length<=0?c.a.createElement("ul",{className:De.a.itemList},c.a.createElement("li",null,c.a.createElement("label",{className:De.a.emptyLabel},K.a))):c.a.createElement("ul",{className:De.a.itemList},c.a.createElement("li",null,c.a.createElement("label",{className:De.a.itemLabel},"{")),t.map((e,a)=>c.a.createElement("li",{key:e},c.a.createElement("label",{className:De.a.itemLabel},a<t.length-1?e+",":e))),c.a.createElement("li",null,c.a.createElement("label",{className:De.a.itemLabel},"}"))))}Fe.propTypes={machineName:k.a.string.isRequired},Ae.propTypes={machineName:k.a.string.isRequired};var Re=a(91),qe=a.n(Re);function Be(e){var t=B(le,e.machineName),a=t.isDeterministic();return c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Transitions"),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Q×Σ"),c.a.createElement("th",null,a?c.a.createElement("span",null,"Q"):c.a.createElement("span",null,c.a.createElement("span",{style:{fontFamily:"cursive"}},"P"),c.a.createElement("span",null,"(Q)"))))),c.a.createElement("tbody",null,function(e){var t=[],a=e.isDeterministic();for(var r of e.getStates()){var n=null;for(var i of((n=He(e,r,K.b))&&t.push(n),e.getAlphabet()))(n=He(e,r,i))&&t.push(n)}a||t.push(c.a.createElement("tr",{key:"forallotherinputs",className:qe.a.forAllOtherInputs},c.a.createElement("td",{className:qe.a.chartKey},"For all other input"),c.a.createElement("td",{className:qe.a.chartValue},K.a)));return t}(t))))}function He(e,t,a){var r=e.isDeterministic(),n=e.doTransition(t,a,!0),i="",s=!1;if(n.length<=0){if(!r)return null;if(s=!0,i="-",a===K.b)return null}else if(1===n.length)s=!1,i=n[0].getStateLabel(),r||(i="{"+i+"}");else{r&&(s=!0);var l="";for(var o of n)l.length>0&&(l+=","),l+=o.getStateLabel();i="{"+l+"}"}return a===Q.a&&(a=K.b,r&&(s=!0)),c.a.createElement("tr",{key:t.getStateID()+":"+a},c.a.createElement("td",{className:"".concat(qe.a.chartKey," ").concat(s?"error":"")},"δ("+t.getStateLabel()+","+a+")"),c.a.createElement("td",{className:"".concat(qe.a.chartValue," ").concat(s?"error":"")},i))}Be.propTypes={machineName:k.a.string.isRequired};var Ge=a(92),ze=a.n(Ge);function Qe(e){var{id:t,className:a,title:r,disabled:n,checked:i,on:s,off:l,inplace:o,onChange:d}=e;return c.a.createElement("div",{className:"".concat(ze.a.element," ").concat(o?ze.a.inplace:""," ").concat(n?ze.a.disabled:""," ").concat(a)},e.children&&c.a.createElement("label",{className:ze.a.label,htmlFor:t},e.children),c.a.createElement("button",{id:t,role:"switch","aria-checked":i,"aria-labelledby":t,title:r,disabled:n,onClick:e=>d&&d(!i)},c.a.createElement("span",{className:i?ze.a.checked:""},s),c.a.createElement("span",{className:i?"":ze.a.checked},l)))}function Ue(e){var{machineName:t}=e,a=q(le,t),r=B(le,t),n="".concat(t,".deterministic");return c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Determinism"),c.a.createElement(Qe,{id:n,checked:r.isDeterministic(),on:"Deterministic",off:"Nondeterministic",onChange:e=>a.applyChanges(t=>t.setDeterministic(e),{machineOnly:!0})}))}Qe.propTypes={id:k.a.string.isRequired,children:k.a.node,className:k.a.string,onChange:k.a.func,checked:k.a.bool,title:k.a.string,disabled:k.a.bool,on:k.a.string,off:k.a.string,inplace:k.a.bool},Qe.defaultProps={on:"On",off:"Off"},Ue.propTypes={machineName:k.a.string};var Ve=a(93),Ke=a.n(Ve);function Xe(e){var t=B(le,e.machineName),[a]=Object(o.useState)("symbols");return c.a.createElement("fieldset",null,c.a.createElement("legend",null,"Transitions Table"),c.a.createElement("table",null,c.a.createElement("tbody",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Q/Σ"),function(e,t){var a=[],r=e.isDeterministic();switch(t){case"symbols":for(var n of e.getAlphabet())a.push(c.a.createElement("th",{key:n,scope:"col",className:Ke.a.tableAxisHeader+" col"},n));return a.push(c.a.createElement("th",{key:Q.a,scope:"col",className:Ke.a.tableAxisHeader+(r?" disabled ":"")+" col"},K.b)),a;case"states":for(var i of e.getStates())a.push(c.a.createElement("th",{key:i.getStateID(),scope:"col",className:Ke.a.tableAxisHeader+" col"},i.getStateLabel()));return a;default:throw new Error("Unknown row axis type '"+t+"'")}}(t,a)),function(e,t){var a=[];for(var r of e.getStates()){var n=[];switch(t){case"symbols":for(var i of e.getAlphabet())n.push(Je(e,r,i));n.push(Je(e,r,Q.a));break;case"states":for(var s of e.getStates()){var l=e.getTransitionSymbols(r,s),o="";if(l)for(var d of l)o.length>0&&(o+="\n"),d===Q.a?o+=K.b:o+=d;else o="-";n.push(c.a.createElement("td",{key:r.getStateID()+":"+s.getStateID(),className:Ke.a.tableEntry},o))}break;default:throw new Error("Unknown row axis type '"+t+"'")}a.push(c.a.createElement("tr",{key:r.getStateID()},c.a.createElement("th",{scope:"row",className:Ke.a.tableAxisHeader+" row"},r.getStateLabel()),n))}return a}(t,a))))}function Je(e,t,a){var r=e.isDeterministic(),n=e.doTransition(t,a),i="",s=!1;if(n.length<=0)r&&a!==Q.a&&(s=!0),i="∅";else if(1===n.length)r&&a===Q.a&&(s=!0),i=n[0].getStateLabel();else{r&&(s=!0);var l="";for(var o of n)l.length>0&&(l+=","),l+=o.getStateLabel();i="{"+l+"}"}var d=r&&a===Q.a;return c.a.createElement("td",{key:t.getStateID()+":"+a,className:Ke.a.tableEntry+(s?" error ":"")+(d?" disabled ":"")},i)}Xe.propTypes={machineName:k.a.string.isRequired};var We=a(30),Ye=a(46);function Ze(e,t){var a=e.getElements(t,g.a),r=function(e,t,a){var r=e.getElements(t,f.a),n=[];n.push(a.id);for(var i=0;i<n.length;i++)for(var s of r)s.fromId===n[i]&&(n.includes(s.toId)||n.push(s.toId));return n.map(a=>e.getElement(t,g.a,a))}(e,t,function(e){for(var t of e)if(t.initial)return t;return null}(a)),n=a.filter(e=>!r.includes(e)),i=r.length,s=n.length,l=a.length,o=Math.max(i,s);if(!(l<=0)){var c;c=i<10&&s<10?o/4*50+30:o/5*40+30;var d=0;if(1===i){var u=2*Math.PI/l;for(var h of a)h.y=Math.sin(u*d+Math.PI)*c,h.x=Math.cos(u*d+Math.PI)*c,h.markDirty(),d+=1}else{var m=2*Math.PI/i;for(var p of(d=0,r))p.y=Math.sin(m*d+Math.PI)*c,p.x=Math.cos(m*d+Math.PI)*c,p.markDirty(),d+=1;var v=2*Math.PI/s;for(var b of(d=0,n))b.y=Math.sin(v*d+Math.PI)*(c+100),b.x=Math.cos(v*d+Math.PI)*(c+100),b.markDirty(),d+=1}}}function $e(e){var t=Object(w.c)(),a=Object(w.b)(),r=Object(o.useRef)(null);return c.a.createElement(Ye.a,{title:"Layout"},c.a.createElement("div",null,c.a.createElement("select",{ref:r},c.a.createElement("option",{value:"circle"},"Circle"),c.a.createElement("option",{value:"grid",disabled:!0},"Grid")),c.a.createElement(We.a,{onClick:e=>function(e,t,a){switch(e){case"circle":Ze(t,a)}}(r.current.value,t,a)},"Apply")))}$e.propTypes={},$e.defaultProps={};var et=a(63);function tt(e){var t=H(le).getMachine(),a=Object(ye.a)(),r=Object(_e.c)(f.a,e=>a()),n=Object(o.useRef)(null),[i,s]=Object(o.useState)(""),l=t.getAlphabet().sort();return c.a.createElement("div",null,c.a.createElement("select",{ref:n,id:"AlphabetLabelRenameOption.rename"},l.map(e=>c.a.createElement("option",{key:e,value:e},e))),c.a.createElement(et.a,{id:"alphabetRenameTo",style:{width:"3rem"},value:i,placeholder:"Symbol",onChange:e=>s(e.target.value)},"Rename Character"),c.a.createElement(We.a,{onClick:e=>{!function(e,t,a){for(var r of a){var n=r.label.split("\n"),i=n.indexOf(e);i>=0&&(n[i]=t,r.label=n.join("\n"),r.markDirty())}}(n.current.value,i,r),s("")},title:"Apply rename alphabet",disabled:!i},"Apply"))}function at(e){return c.a.createElement(Ye.a,{title:"Alphabet Label Editor"},c.a.createElement(tt,null))}function rt(e){var t="Piece-wise definition of δ",a="Table definition of δ",[r,n]=Object(o.useState)(a);return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement("h2",{style:{margin:"1rem"}},"Overview")),c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))"}},c.a.createElement(Le.a,{title:"Definition"},c.a.createElement(Ue,{machineName:"graph"}),c.a.createElement(Fe,{machineName:"graph"}),c.a.createElement(Ae,{machineName:"graph"}),c.a.createElement(We.a,{id:"toggle",onClick:()=>n(r===t?a:t)},r===t?a:t),r===t?c.a.createElement(Xe,{machineName:"graph"}):c.a.createElement(Be,{machineName:"graph"})),c.a.createElement(Le.a,{title:"Format"},c.a.createElement($e,null),c.a.createElement(at,null))))}tt.propTypes={},tt.defaultProps={},at.propTypes={},at.defaultProps={},rt.tabIcon=I.e;var nt=a(37);function it(){var e=H(le),t=e.getMachine(),{addNotification:a}=Object(s.d)(),r=t.isDeterministic(),n=t.getStateCount(),i=n<=0;return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement("h2",{style:{margin:"1rem"}},"Transformations")),c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))"}},c.a.createElement(Le.a,{title:"Equivalent Conversions"},c.a.createElement("div",null,r?c.a.createElement(nt.a,{id:"convertToNFA",onClick:()=>e.applyChanges(e=>e.setDeterministic(!1),{machineOnly:!0}),disabled:i},c.a.createElement("span",null,"Convert to "),c.a.createElement("span",null,"NFA")):c.a.createElement(nt.a,{id:"convertToDFA",onClick:()=>a(re,{stateCount:n}),disabled:i},c.a.createElement("span",null,"Convert to "),c.a.createElement("span",null,"DFA"))),c.a.createElement("hr",null),c.a.createElement("div",null,c.a.createElement(nt.a,{id:"removeUnreachableStates",onClick:()=>{},disabled:!0},"Remove unreachable states"))),c.a.createElement(Le.a,{title:"Related Conversions"},c.a.createElement(nt.a,{id:"flipAllAcceptStates",onClick:()=>a(ee),disabled:i},"Flip all accept states"))))}it.tabIcon=I.g;var st=class{constructor(){}uploadFile(e){return Promise.resolve(e)}};var lt=class extends st{constructor(){super()}uploadFile(e){return new Promise((t,a)=>{var r=new FileReader;r.addEventListener("load",e=>{var a=e.target.result;t(a)}),r.addEventListener("error",e=>{a(new Error("Unable to import file: "+e.target.error.code))}),r.readAsText(e)})}};var ot=class{constructor(){}parse(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}compose(e){return arguments.length>1&&void 0!==arguments[1]?arguments[1]:null}},ct=a(15);var dt=class{constructor(e){this._id=e}setGraphElementID(e){return this._id=e,this}getCenterPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};return e.x=e.y=0,e}getGraphElementID(){return this._id}getHashString(){return this._id}};var ut=class extends dt{constructor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(e),this.x=t,this.y=a,this._label=""}getCenterPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};return e.x=this.x,e.y=this.y,e}setNodeLabel(e){return this._label=e,this}getNodeLabel(){return this._label}getNodeSize(){return 16}getHashString(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?super.getHashString(e)+":"+Math.floor(this.x)+","+Math.floor(this.y)+"."+this._label:super.getHashString(e)+":"+this._label}};var ht=class extends dt{constructor(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e),this._from=t,this._to=a,this._label=""}setEdgeFrom(e){if(!e)throw new Error("Source of edge cannot be null");return this._from=e,this}setEdgeTo(e){return this._to=e,this}setEdgeLabel(e){return this._label=e,this}getEdgeDirection(){var e=this._from,t=this._to,a=Math.PI/2,r=0;if(this.isPlaceholder())r=Math.PI/4;else{var n=t.y-e.y,i=t.x-e.x;r=Math.atan2(n,i)}return(r>a||r<-a)&&(r+=Math.PI),r}getStartPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from;return e.x=t.x,e.y=t.y,e}getCenterPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,a=this._to;if(this.isPlaceholder()){var r=this.getPlaceholderLength()/2;e.x=t.x+r,e.y=t.y+r}else e.x=t.x+(a.x-t.x)/2,e.y=t.y+(a.y-t.y)/2;return e}getEndPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};if(this.isPlaceholder()){var t=this._from,a=this.getPlaceholderLength();e.x=t.x+a,e.y=t.y+a}else{var r=this._to;e.x=r.x,e.y=r.y}return e}getPlaceholderLength(){return this._from.getNodeSize()}isPlaceholder(){return null===this._to}isSelfLoop(){return this._from===this._to}getEdgeLabel(){return this._label}getEdgeFrom(){return this._from}getEdgeTo(){return this._to}getHashString(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this._from?this._from.getHashString(e):"",a=this._to?this._to.getHashString?this._to.getHashString(e):"0":"";return super.getHashString(e)+":"+t+","+a+"."+this._label}};var mt=class{constructor(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ht;this._nodeClass=e,this._edgeClass=t,this._nodeMapping=new Map,this._edgeMapping=new Map}clear(){this.clearEdges(),this.clearNodes()}isEmpty(){return this._nodeMapping.size<=0&&this._edgeMapping.size<=0}getBoundingRect(){if(this._nodeMapping.size<=0)return{minX:0,minY:0,maxX:1,maxY:1,width:1,height:1};var e=Number.MAX_VALUE,t=Number.MAX_VALUE,a=Number.MIN_VALUE,r=Number.MIN_VALUE,n=0;for(var i of this._nodeMapping.values()){var s=i.x,l=i.y,o=i.getNodeSize();o>n&&(n=o),e=Math.min(e,s),a=Math.max(a,s),t=Math.min(t,l),r=Math.max(r,l)}e-=n,t-=n,a+=n,r+=n;var c=Number.MAX_VALUE,d=Number.MAX_VALUE,u=Number.MIN_VALUE,h=Number.MIN_VALUE,m={x:0,y:0},g={x:0,y:0},p={x:0,y:0};for(var f of this._edgeMapping.values()){f.getStartPoint(m),f.getEndPoint(g),f.getCenterPoint(p);var v=m.x,b=m.y,E=g.x,y=g.y,_=p.x,S=p.y;c=Math.min(c,v,E,_),u=Math.max(u,v,E,_),d=Math.min(d,b,y,S),h=Math.max(h,b,y,S)}var x={minX:Math.min(e,c),minY:Math.min(t,d),maxX:Math.max(a,u),maxY:Math.max(r,h),width:0,height:0};return x.width=x.maxX-x.minX,x.height=x.maxY-x.minY,x}getHashCode(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t="";for(var a of this._nodeMapping.values())t+=a.getHashString(e)+",";for(var r of(t+="|",this._edgeMapping.values()))t+=r.getHashString(e)+",";return Object(U.f)(t)}createNode(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.addNode(new this._nodeClass(a||Object(U.g)(),e,t))}addNode(e){return e.getGraphElementID()||e.setGraphElementID(Object(U.g)()),this._nodeMapping.set(e.getGraphElementID(),e),e}deleteNode(e){var t=e.getGraphElementID();if(this._nodeMapping.has(t)){this._nodeMapping.delete(t);var a=[];for(var r of this.getEdges())r.getEdgeFrom()===e?a.push(r):r.getEdgeTo()===e&&r.setEdgeTo(null);for(var n of a)this.deleteEdge(n)}}clearNodes(){this._nodeMapping.clear()}getNodeByElementID(e){return this._nodeMapping.has(e)?this._nodeMapping.get(e):null}getNodesByLabel(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(var a of this.getNodes())a.getNodeLabel()===e&&t.push(a);return t}getNodes(){return Array.from(this._nodeMapping.values())}getNodeCount(){return this._nodeMapping.size}getNodeClass(){return this._nodeClass}formatEdge(e){return e}createEdge(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.addEdge(new this._edgeClass(a||Object(U.g)(),e,t))}addEdge(e){return e.getGraphElementID()||e.setGraphElementID(Object(U.g)()),this._edgeMapping.set(e.getGraphElementID(),e),e}deleteEdge(e){var t=e.getGraphElementID();this._edgeMapping.has(t)&&this._edgeMapping.delete(t)}clearEdges(){this._edgeMapping.clear()}getEdgeByElementID(e){return this._edgeMapping.has(e)?this._edgeMapping.get(e):null}getEdgesByLabel(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];for(var a of this.getEdges())a.getEdgeLabel()===e&&t.push(a);return t}getEdges(){return Array.from(this._edgeMapping.values())}getEdgeCount(){return this._edgeMapping.size}getEdgeClass(){return this._edgeClass}};var gt=class extends ht{constructor(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(e,t,a),this._quad={radians:0,length:a?0:this.getPlaceholderLength(),coords:{x:0,y:0}}}setEdgeTo(e){var t=this._to;if(e!==t){var a=super.setEdgeTo(e);return e?e===this._from&&(this._quad.length=this._from.getNodeSize()+this.getPlaceholderLength()):this.setQuadraticByCoords(t.x,t.y),a}return super.setEdgeTo(e)}setQuadraticRadians(e){return this._quad.radians=e,this}setQuadraticLength(e){return this._quad.length=e,this}setQuadraticByCoords(e,t){var a=this._from,r=this._to;if(!r){var n=this._from.x-e,i=this._from.y-t,s=-Math.atan2(n,i)-Math.PI/2;return this._quad.radians=s,this}var l=a.x,o=a.y,c=r.x-l,d=r.y-o,u=l+c/2,h=o+d/2,m=Math.atan2(-d,c);c=e-u,d=t-h;var g=Math.PI,p=g/2,f=Math.atan2(d,c)+m,v=Math.sqrt(c*c+d*d);v<0&&(v=0);var b=f- -p,E=f-p,y=g/20;return Math.abs(v)<8?(f=0,v=0):b<y&&b>-y?f=-p:-E<y&&-E>-y&&(f=p),this._quad.radians=f,this._quad.length=v,this}getQuadraticLength(){return this._quad.length}getQuadraticRadians(){return this._quad.radians}getQuadratic(){return this._quad}isQuadratic(){return!this.isPlaceholder()&&0!==this._quad.length}getQuadraticAsCoords(){var e=this._from,t=this._to,a=this._quad.coords;return null==e||null==t?(a.x=0,a.y=0):Object(U.c)(e.x,e.y,t.x,t.y,this._quad.length,this._quad.radians,a),a}getEdgeDirection(){var e=0;if(this.isQuadratic()){var t=this.getQuadraticAsCoords();e=Math.atan2(t.y,t.x)+Math.PI/2}else e=super.getEdgeDirection();return e}getStartPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,a=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!a){var r=this._quad.radians,n=Math.cos(r),i=Math.sin(r),s=t.getNodeSize();return e.x=t.x+n*s,e.y=t.y+i*s,e}if("function"==typeof a.getNodeSize&&this.isQuadratic()){Object(U.d)(t.x,t.y,a.x,a.y,e);var l=this.getQuadraticAsCoords(),o=e.x+l.x,c=e.y+l.y;return Object(U.c)(t.x,t.y,o,c,t.getNodeSize(),this.isSelfLoop()?Math.PI/4:0,e),e.x+=t.x,e.y+=t.y,e}return Object(U.c)(t.x,t.y,a.x,a.y,t.getNodeSize(),0,e),e.x+=t.x,e.y+=t.y,e}getCenterPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,a=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!a){var r=Math.cos(this._quad.radians),n=Math.sin(this._quad.radians),i=t.getNodeSize()+this.getPlaceholderLength()/2;return e.x=t.x+r*i,e.y=t.y+n*i,e}if(Object(U.d)(t.x,t.y,a.x,a.y,e),this.isQuadratic()){var s=this.getQuadraticAsCoords();e.x+=s.x,e.y+=s.y}return e}getEndPoint(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},t=this._from,a=this._to;if(!t)throw new Error("Source of edge cannot be null.");if(!a){var r=this._quad.radians,n=Math.cos(r),i=Math.sin(r),s=t.getNodeSize()+this.getPlaceholderLength();return e.x=t.x+n*s,e.y=t.y+i*s,e}if("function"!=typeof a.getNodeSize)return a;if(this.isQuadratic()){Object(U.d)(t.x,t.y,a.x,a.y,e);var l=this.getQuadraticAsCoords(),o=e.x+l.x,c=e.y+l.y;return Object(U.c)(a.x,a.y,o,c,a.getNodeSize(),this.isSelfLoop()?-Math.PI/4:0,e),e.x+=a.x,e.y+=a.y,e}return Object(U.c)(a.x,a.y,t.x,t.y,a.getNodeSize(),0,e),e.x+=a.x,e.y+=a.y,e}getHashString(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return e?super.getHashString(e)+":"+this._quad.radians+","+this._quad.length:super.getHashString(e)}},pt=ct.a.parse("1.0.0");class ft extends ot{constructor(){super(),this._nodeIndices=new Map}parse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("object"!=typeof e)throw new Error("Unable to parse data of non-object type");var a=ct.a.parse(e._version||"0.0.0");if(!a.canSupportVersion(pt))throw new Error("Unable to parse data for incompatible version '"+a+"'");var r=e.nodes||[],n=Math.min(r.length||0,e.nodeCount||0),i=e.edges||[],s=Math.min(i.length||0,e.edgeCount||0);t=this.onParseGraphCreate(e,t);for(var l=this._nodeIndices,o=0;o<n;++o){var c=r[o];if(c){var d=t.createNode(c.x||0,c.y||0,c.id);d.setNodeLabel(c.label||""),this.onParseNode(c,d),l.set(o,d)}}for(var u=0;u<s;++u){var h=i[u];if(h){var m=l.get(h.from)||null;if(m){var g=l.get(h.to)||null,p=t.createEdge(m,g,h.id);p.setEdgeLabel(h.label||""),this.onParseEdge(h,p)}}}return this.onParseGraphResult(e,t),l.clear(),t}compose(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!(e instanceof mt))throw new Error("Unable to compose target of non-graph type");t=this.onComposeGraphCreate(e,t);for(var a,r=e.getNodes()||[],n=r.length||0,i=e.getEdges()||[],s=i.length||0,l=new Array(n),o=this._nodeIndices,c=0;c<n;++c)if(a=r[c]){var d=a.getGraphElementID();o.set(a,c);var u={id:d,x:a.x||0,y:a.y||0,label:a.getNodeLabel()||""};this.onComposeNode(a,u),l[c]=u}for(var h,m=new Array(s),g=0;g<s;++g)if(h=i[g]){var p=h.getGraphElementID(),f=h.getEdgeFrom(),v=h.getEdgeTo(),b={id:p,from:o.has(f)?o.get(f):-1,to:o.has(v)?o.get(v):-1,label:h.getEdgeLabel()||""};this.onComposeEdge(h,b),m[g]=b}return t._version="1.0.0",t.nodeCount=n,t.nodes=l,t.edgeCount=s,t.edges=m,this.onComposeGraphResult(e,t),o.clear(),t}onParseGraphCreate(e,t){var a=e.quad||!1;return t?t.clear():t=new mt(ut,a?gt:ht),t}onParseNode(e,t){}onParseEdge(e,t){if(t instanceof gt){var a=e.quad||{};t.setQuadraticRadians(a.radians||0),t.setQuadraticLength(a.length||0)}}onParseGraphResult(e,t){}onComposeGraphCreate(e,t){return t||{}}onComposeNode(e,t){}onComposeEdge(e,t){if(e instanceof gt){var a=e.getQuadratic()||{};t.quad={radians:a.radians||0,length:a.length||0}}}onComposeGraphResult(e,t){var a=!1,r=e.getEdges();for(var n of r)if(n instanceof gt){a=!0;break}t.hasQuad=a}}new ft;var vt=ft;var bt=class extends mt{constructor(e,t){super(e,t),this._nodes=[]}setStartNode(e){if(this._nodes.length<=0)throw new Error("Cannot set start node to empty graph");if(1!==this._nodes.length){var t=this._nodes.indexOf(e);if(t>0){var a=this._nodes[0];this._nodes[0]=e,this._nodes[t]=a}else if(t<0)throw new Error("Cannot set start node for unknown node")}}getStartNode(){return this._nodes.length>0?this._nodes[0]:null}getNodeByIndex(e){return this._nodes[e]}addNode(e){return this._nodes.push(e),super.addNode(e)}deleteNode(e){super.deleteNode(e);var t=this._nodes.indexOf(e);t>=0&&this._nodes.splice(t,1)}clearNodes(){super.clearNodes(),this._nodes.length=0}getNodes(){return this._nodes}};var Et=class extends ut{constructor(e,t,a){super(e,t,a),this._accept=!1,this._custom=!1}setNodeAccept(e){this._accept=e}getNodeAccept(){return this._accept}setNodeCustom(e){this._custom=e}getNodeCustom(){return this._custom}getHashString(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return super.getHashString(e)+":"+(this._accept?"1":"0")}};var yt=class extends gt{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}setEdgeLabel(e){"string"==typeof e?super.setEdgeLabel(e):super.setEdgeLabel("ε")}};var _t=class extends bt{constructor(){super(Et,yt)}};ct.a.parse("1.0.0");class St extends vt{constructor(){super()}parse(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return super.parse(e,t)}compose(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return super.compose(e,t)}onParseGraphCreate(e,t){return t?t.clear():t=new _t,t}onParseGraphResult(e,t){var a=this._nodeIndices,r=e.initial||0,n=a.get(r);n&&t.setStartNode(n)}onParseNode(e,t){t.setNodeAccept(e.accept||!1),t.setNodeCustom(e.custom||!1)}onComposeNode(e,t){t.accept=e.getNodeAccept()||!1,t.custom=e.getNodeCustom()||!1}onComposeGraphResult(e,t){var a=this._nodeIndices,r=e.getStartNode(),n=a.get(r)||0;t.initial=n}}new St;var xt=St;var Ct=class{constructor(){}attemptBuildMachine(e,t){throw new Error("Should be overriden.")}getMachine(){throw new Error("Should be overriden.")}getMachineHashCode(){throw new Error("Should be overriden.")}};var wt=class extends Ct{constructor(){super(),this._machine=new Q.c,this._errors=[],this._warnings=[]}attemptBuildGraph(e,t){t.clear();var a,r,n,i,s=new Map;for(var l of e.getStates())(a=t.createNode(0,0)).setNodeLabel(l.getStateLabel()),e.isFinalState(l)&&a.setNodeAccept(!0),s.set(l,a);for(var o of e.getTransitions())(r=s.get(o.getSourceState()))&&(i=o.getSymbols().join(" "),(n=s.get(o.getDestinationState()))&&t.createEdge(r,n).setEdgeLabel(i));var c=e.getStartState(),d=t.getNodesByLabel(c);return d&&d.length>0&&t.setStartNode(d[0]),t}attemptBuildMachine(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];this._errors=a,this._warnings=r,a.length=0,r.length=0;var n=t.isDeterministic();t.clear();var i=new Map,s=new Map,l=new Set,o=[],c=[],d=e.getNodes(),u=e.getEdges(),h=e.getStartNode();for(var m of d){var g=m.getNodeLabel(),p=new Q.b(g,m);t.addState(p),m.getNodeAccept()&&t.setFinalState(p,!0),h===m&&t.setStartState(p),i.has(g)?i.get(g).push(p):i.set(g,[p]),s.set(p,new Map)}for(var f of u){var v=f.getEdgeFrom(),b=f.getEdgeTo();if(!f.isPlaceholder()&&v instanceof Et&&b instanceof Et){var E=t.getStateByID(v.getGraphElementID()),y=t.getStateByID(b.getGraphElementID());if(!E||!y)throw new Error("Cannot find state for edge source/destination nodes - mismatch id");var _=f.getEdgeLabel().split(" ");for(var S of _)if(S){"ε"===S?c.push(f):l.add(S);var x=void 0;switch(S){case"ε":x=Q.a;break;default:x=S}var C=s.get(E),w=C.get(x);w||C.set(x,w=new Array),w.push(f),t.addTransition(E,y,x)}}else o.push(f)}for(var[N,M]of i.entries())M.length>1&&a.push({name:"duplicate_state",label:N,nodes:M.map(e=>e.getSource())});o.length>0&&a.push({name:"incomplete_transition",edges:o});var T=function(e){if(e.getNodeCount()<=1)return[];var t=e.getEdges(),a=e.getNodes().slice(),r=a.shift(),n=[];for(n.push(r);n.length>0;){var i=n.pop();for(var s of t)if(s.getEdgeFrom()===i){var l=a.indexOf(s.getEdgeTo());if(l>=0){var o=a.splice(l,1)[0];n.push(o)}}}return a}(e);if(T&&T.length>0&&r.push({name:"unreachable_state",nodes:T}),n){c.length>0&&a.push({name:"empty_transition",edges:c});var I=[];for(var[O,j]of s.entries()){for(var k of l){var L=j.get(k);L?1!==L.length&&a.push({name:"duplicate_transition",edges:L,symbol:k}):I.push(k)}I.length>0&&(a.push({name:"missing_transition",node:O.getSource(),symbols:I.slice()}),I.length=0)}}return a.length<=0?t:null}getMachine(){return this._machine}getMachineHashCode(){return Object(U.f)(JSON.stringify(this._machine))}};function Nt(e){var t=B(le,"graph"),[a,r]=Object(o.useState)(null),[n,i]=Object(o.useState)(null),[s,l]=Object(o.useState)("");return c.a.createElement(Ye.a,{title:"Equivalence Tester"},c.a.createElement("div",null,c.a.createElement(d.a,{onUpload:e=>{var t,a=e.target.files;a.length>0?(t=a[0],new Promise((e,a)=>{(new lt).uploadFile(t).then(t=>{var a=JSON.parse(t),r=new xt,n=new _t;r.parse(a.graphData,n);var i=new wt,s=new Q.c;i.attemptBuildMachine(n,s),e(s||null)})})).then(e=>r(e)).catch(e=>r(e.message)):r(null),e.target.value=null}})),c.a.createElement(nt.a,{id:"testEquivalenceTargetFile",onClick:()=>{if("object"==typeof a){var e=Object($.c)(a,t);e.value?(i(!0),l("")):e.witnessString?(i(!1),l("Witness: "+e.witnessString)):(i(!1),l("Sorry, unable to evaluate because the machines have different alphabets."))}else a&&(i(null),l(a))}},"Test Machine"),c.a.createElement("output",{htmlFor:"testEquivalenceTargetFile"},c.a.createElement("p",null,null===n?"-- ??? --":n?"-- Equivalent --":"-- Not Equivalent --"),c.a.createElement("p",null,s)))}var Mt=a(81),Tt=a(82),It=a(83);function Ot(e){var[t,a]=Object(o.useState)([]),r=B(e.machineBuilderType,e.machineName),n=Object(o.useCallback)(()=>{var e=jt();a([...t,e])},[t,a]),i=Object(o.useCallback)(e=>{var t=[];for(var r of e)t.push(jt(r));a(t)},[a]),s=t.length<=0;return c.a.createElement(Ye.a,{title:"String Tester"},c.a.createElement(Tt.a,{onClick:i}),c.a.createElement(It.a,{testStrings:t.map(e=>e.value)}),c.a.createElement(We.a,{disabled:s,onClick:()=>{var e=[...t];for(var n of e){var i=Object($.d)(r,n.value);n.result=i?"pass":"fail"}a(e)}},"Run All"),c.a.createElement(We.a,{disabled:s,onClick:()=>a([])},"Remove All Tests"),t.map((e,n)=>c.a.createElement(Mt.a,{key:e.id,value:e.value,result:e.result,onClick:e=>{var i=[...t],s=i[n];s.result=Object($.d)(r,s.value)?"pass":"fail",a(i)},onChange:e=>{var r=[...t];r[n].value=e.target.value,a(r)},onRemove:e=>{var r=[...t];r.splice(n,1),a(r)}})),c.a.createElement(nt.a,{id:"testStringButton",onClick:n},"Add Test String"))}function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";return{id:Object(U.g)(),value:e,result:t}}function kt(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement("h2",{style:{margin:"1rem"}},"Testing")),c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))"}},c.a.createElement(Le.a,{title:"Strings"},c.a.createElement(Ot,{machineBuilderType:le,machineName:"graph"})),c.a.createElement(Le.a,{title:"Machines"},c.a.createElement(Nt,null))))}Ot.propTypes={machineBuilderType:k.a.elementType.isRequired,machineName:k.a.string},Ot.defaultProps={},kt.tabIcon=I.j;var Lt=a(39),Pt=a(48);function Dt(e){var{svgRef:t}=Object(Pt.d)(),a=Object(w.c)(),r=Object(w.b)(),[n,i]=Object(o.useState)("Untitled");return c.a.createElement(c.a.Fragment,null,c.a.createElement("header",null,c.a.createElement("h2",{style:{margin:"1rem"}},"Export")),c.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(20rem, 1fr))"}},c.a.createElement(Le.a,{title:"Export"},c.a.createElement(et.a,{id:"fileName",value:n,onChange:e=>i(e.target.value)},"Enter filename"),c.a.createElement("ul",{style:{padding:0,listStyle:"none"}},c.a.createElement("li",null,c.a.createElement(nt.a,{id:"exportGraph",onClick:()=>Ft(n,"graph",{graphType:a,graphState:r})},"Save to File")),c.a.createElement("li",null,c.a.createElement(nt.a,{id:"exportJFLAP",onClick:()=>Ft(n,"jflap",{graphType:a,graphState:r})},"Export to JFF")),c.a.createElement("li",null,c.a.createElement(nt.a,{id:"exportToImage",onClick:()=>Ft(n,"image",{svgRef:t})},"Export to Image")),c.a.createElement("li",null,c.a.createElement(nt.a,{id:"exportToSVG",onClick:()=>Ft(n,"svg",{svgRef:t})},"Export to SVG"))))))}function Ft(e,t,a){switch(e||(e="Untitled"),t){case"image":Lt.c(e+".png",Lt.a,a.svgRef.current,640,480);break;case"svg":Lt.c(e+".svg",Lt.b,a.svgRef.current,640,480);break;case"graph":Lt.d(e+".fa.json",(r=a.graphType,n=a.graphState,JSON.stringify(r.serialize(n,{}))));break;case"jflap":Lt.d(e+".jff",function(e,t){if("function"!=typeof e)throw new Error("Missing graph type class.");var a=e.getElements(t,g.a),r=e.getElements(t,f.a),n=(new DOMParser).parseFromString('<?xml version="1.0" encoding="UTF-8" standalone="no"?>\x3c!--Created from Flap.js Web App 0.5.0--\x3e<structure></structure>',"application/xml"),i=n.querySelector("structure"),s=n.createElement("type");s.innerHTML="fa",i.appendChild(s);var l=n.createElement("automaton");i.appendChild(l);var o=new Map,c=0;for(var d of a){o.set(d.id,c);var u=n.createElement("state");u.id=String(c++),u.setAttribute("name",d.label),l.appendChild(u);var h=n.createElement("x");h.innerHTML=String(Math.round(100*d.x)/100||0),u.appendChild(h);var m=n.createElement("y");if(m.innerHTML=String(Math.round(100*d.y)/100||0),u.appendChild(m),d.initial){var p=n.createElement("initial");u.appendChild(p)}if(d.accept){var v=n.createElement("final");u.appendChild(v)}}for(var b of r){var E=o.get(b.fromId),y=o.get(b.toId);if("number"==typeof E&&"number"==typeof y){var _=b.label.split("\n");for(var S of _){var x=n.createElement("transition");l.appendChild(x);var C=n.createElement("from");C.innerHTML=String(E),x.appendChild(C);var w=n.createElement("to");w.innerHTML=String(y),x.appendChild(w);var N=n.createElement("read");N.innerHTML=String(S),x.appendChild(N)}}}return(new XMLSerializer).serializeToString(n)}(a.graphType,a.graphState))}var r,n}function At(e){var{machineBuilderType:t}=e;return G(t),c.a.createElement(c.a.Fragment,null)}function Rt(e){var{machineBuilderType:t}=e,a=H(t),{addNotification:r,clearNotifications:n}=Object(s.d)(),i=Object(o.useRef)([]);return Object(o.useEffect)(()=>{var e=[...a.errors,...a.warnings],s=t.name+".errors";if(function(e,t){if(e.length!==t.length)return!0;for(var a=0;a<e.length;++a)if(e[a]!==t[a])return!0;return!1}(i.current,e))for(var{message:l,opts:o}of(n(s),i.current=[...e],i.current))"tags"in o||(o.tags=[]),o.tags.push(s),r(l,o)}),c.a.createElement(c.a.Fragment,null)}Dt.tabIcon=I.d,At.propTypes={machineBuilderType:k.a.elementType.isRequired},Rt.propTypes={machineBuilderType:k.a.elementType.isRequired};var qt=a(65),Bt=a(97),Ht=a.n(Bt);function Gt(e){var{className:t,style:a,placeholder:r,disabled:n,value:i,onChange:s}=e;return c.a.createElement("div",{className:"".concat(Ht.a.element," ").concat(t)},c.a.createElement("span",null,"("),c.a.createElement("textarea",{style:a,value:i,placeholder:r,disabled:n,onChange:s}),c.a.createElement("span",null,")"))}function zt(e){var{element:t,closeEditor:a}=e,r=Object(o.useContext)(m.a),[n,i]=Object(o.useState)(t.label),[s,l]=Object(o.useState)(t.final);return c.a.createElement("div",{onContextMenu:Qt},c.a.createElement(Gt,{value:n,onChange:e=>i(e.target.value)}),c.a.createElement(Qe,{id:"acceptNodeSwitch",checked:s,onChange:e=>{t.final=e,t.markDirty(),l(t.final)}},"Accepted"),c.a.createElement(We.a,{onClick:()=>{t.label=n,t.markDirty(),a()}},"Change Label"),c.a.createElement(We.a,{onClick:()=>{r({type:"delete",elementType:g.a,elementId:t.id}),a()}},"Delete This"))}function Qt(e){return e.preventDefault(),e.stopPropagation(),!1}function Ut(e){var{element:t,closeEditor:a}=e,r=Object(o.useContext)(m.a),[n,i]=Object(o.useState)(t.label);return c.a.createElement("div",{onContextMenu:Vt},c.a.createElement(Gt,{value:n,onChange:e=>i(e.target.value)}),c.a.createElement(We.a,{onClick:()=>{t.label=n,t.markDirty(),a()}},"Submit"),c.a.createElement(We.a,{onClick:()=>{r({type:"delete",elementType:f.a,elementId:t.id}),a()}},"Delete This"))}function Vt(e){return e.preventDefault(),e.stopPropagation(),!1}function Kt(e){var{elementType:t,elementId:a,closeEditor:r}=Object(o.useContext)(je.a),n=Object(ye.a)(),i=Object(_e.a)(t,a,n);return c.a.createElement(qt.a,null,i&&(t===g.a?c.a.createElement(zt,{element:i,closeEditor:r}):c.a.createElement(Ut,{element:i,closeEditor:r})))}Gt.propTypes={children:k.a.node,className:k.a.string,style:k.a.object,placeholder:k.a.string,disabled:k.a.bool,value:k.a.string,onChange:k.a.func},Gt.defaultProps={value:""},zt.propTypes={element:k.a.object.isRequired,closeEditor:k.a.func.isRequired},Ut.propTypes={element:k.a.object.isRequired,closeEditor:k.a.func.isRequired};class Xt extends r.a{static get moduleId(){return"fa"}static get moduleVersion(){return"4.0.0"}static get providers(){return[s.c,l.a]}static get renders(){return{header:[],appbar:[O],playarea:[[At,{machineBuilderType:le}],[Rt,{machineBuilderType:le}]],foreground:[s.b],viewarea:[],drawer:[rt,kt,it,Dt]}}static get services(){return[n.a.withGraphType(p,ke,Kt),i.a]}}},42:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return c}));var r=a(0),n=a.n(r),i=a(1),s=a.n(i),l=a(23),o=n.a.createContext(null);function c(e){var t=Object(r.useRef)(Object(l.g)());return n.a.createElement(o.Provider,{value:t.current},e.children)}c.propTypes={children:s.a.node}},45:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var r=a(35),n=a(42);class i extends r.a{static get serviceVersion(){return"1.0.0"}static get providers(){return[n.b]}}},80:function(e,t,a){e.exports={itemList:"src-modules-fa-drawer-overview-definition-__ItemList-module__itemList--K9CG9",itemLabel:"src-modules-fa-drawer-overview-definition-__ItemList-module__itemLabel--29viH",emptyLabel:"src-modules-fa-drawer-overview-definition-__ItemList-module__emptyLabel--39JfM",markedLabel:"src-modules-fa-drawer-overview-definition-__ItemList-module__markedLabel--bpNSR"}},91:function(e,t,a){e.exports={chartKey:"src-modules-fa-drawer-overview-definition-__TransitionChart-module__chartKey--3TXLD",chartValue:"src-modules-fa-drawer-overview-definition-__TransitionChart-module__chartValue--1zXLV",forAllOtherInputs:"src-modules-fa-drawer-overview-definition-__TransitionChart-module__forAllOtherInputs--_Z8w0"}},92:function(e,t,a){e.exports={element:"src-components-lib-__FieldSwitch-module__element--zNm6L",disabled:"src-components-lib-__FieldSwitch-module__disabled--2o_rZ",checked:"src-components-lib-__FieldSwitch-module__checked--1VpI-",label:"src-components-lib-__FieldSwitch-module__label--17M-U",inplace:"src-components-lib-__FieldSwitch-module__inplace--2vbI_"}},93:function(e,t,a){e.exports={tableEntry:"src-modules-fa-drawer-overview-analysis-__TransitionTable-module__tableEntry--3QuZ9",tableAxisHeader:"src-modules-fa-drawer-overview-analysis-__TransitionTable-module__tableAxisHeader--1IY-0"}},97:function(e,t,a){e.exports={element:"src-components-lib-__TextArea-module__element--1j1JQ"}}}]);